{"remainingRequest":"D:\\vscodeprojects\\vuepress-theme-reco\\myblogs\\node_modules\\babel-loader\\lib\\index.js??ref--3-1!D:\\vscodeprojects\\vuepress-theme-reco\\myblogs\\node_modules\\vssue\\dist\\vssue.js","dependencies":[{"path":"D:\\vscodeprojects\\vuepress-theme-reco\\myblogs\\node_modules\\vssue\\dist\\vssue.js","mtime":499162500000},{"path":"D:\\vscodeprojects\\vuepress-theme-reco\\myblogs\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\vscodeprojects\\vuepress-theme-reco\\myblogs\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9zbGljZWRUb0FycmF5IGZyb20gIkQ6L3ZzY29kZXByb2plY3RzL3Z1ZXByZXNzLXRoZW1lLXJlY28vbXlibG9ncy9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vc2xpY2VkVG9BcnJheSI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICJEOi92c2NvZGVwcm9qZWN0cy92dWVwcmVzcy10aGVtZS1yZWNvL215YmxvZ3Mvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgX2NsYXNzQ2FsbENoZWNrIGZyb20gIkQ6L3ZzY29kZXByb2plY3RzL3Z1ZXByZXNzLXRoZW1lLXJlY28vbXlibG9ncy9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY2xhc3NDYWxsQ2hlY2siOwppbXBvcnQgX2NyZWF0ZUNsYXNzIGZyb20gIkQ6L3ZzY29kZXByb2plY3RzL3Z1ZXByZXNzLXRoZW1lLXJlY28vbXlibG9ncy9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlQ2xhc3MiOwppbXBvcnQgX2luaGVyaXRzIGZyb20gIkQ6L3ZzY29kZXByb2plY3RzL3Z1ZXByZXNzLXRoZW1lLXJlY28vbXlibG9ncy9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vaW5oZXJpdHMiOwppbXBvcnQgX2NyZWF0ZVN1cGVyIGZyb20gIkQ6L3ZzY29kZXByb2plY3RzL3Z1ZXByZXNzLXRoZW1lLXJlY28vbXlibG9ncy9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlU3VwZXIiOwppbXBvcnQgX3R5cGVvZiBmcm9tICJEOi92c2NvZGVwcm9qZWN0cy92dWVwcmVzcy10aGVtZS1yZWNvL215YmxvZ3Mvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3R5cGVvZiI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmdldC1vd24tcHJvcGVydHktZGVzY3JpcHRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5kZWZpbmUtcHJvcGVydHkuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5jb25jYXQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuc3BsaXQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5pbmNsdWRlcy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pbmNsdWRlcy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNwbGljZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbmQtaW5kZXguanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5pbmRleC1vZi5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNvcnQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5tYXAuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maWx0ZXIuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcucmVwbGFjZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi50aW1lcnMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcubGluay5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5rZXlzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuaXRlcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5udW1iZXIuY29uc3RydWN0b3IuanMiOwoKLyohCiAqIHZzc3VlIC0gQSB2dWUtcG93ZXJlZCBpc3N1ZS1iYXNlZCBjb21tZW50IHBsdWdpbgogKgogKiBAdmVyc2lvbiB2MS40LjgKICogQGxpbmsgaHR0cHM6Ly92c3N1ZS5qcy5vcmcKICogQGxpY2Vuc2UgTUlUCiAqIEBjb3B5cmlnaHQgMjAxOC0yMDIxIG1ldGVvcmx4eQogKi8KaW1wb3J0IHsgUHJvcCwgSW5qZWN0LCBDb21wb25lbnQsIFZ1ZSBhcyBWdWUkMSwgV2F0Y2gsIFByb3ZpZGUgfSBmcm9tICd2dWUtcHJvcGVydHktZGVjb3JhdG9yJzsKaW1wb3J0IFZ1ZSBmcm9tICd2dWUnOwppbXBvcnQgeyBmb3JtYXREYXRlVGltZSwgZ2V0Q2xlYW5VUkwgfSBmcm9tICdAdnNzdWUvdXRpbHMnOwppbXBvcnQgVnVlSTE4biBmcm9tICd2dWUtaTE4bic7Ci8qISAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKg0KQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuDQpMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsgeW91IG1heSBub3QgdXNlDQp0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4gWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZQ0KTGljZW5zZSBhdCBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjANCg0KVEhJUyBDT0RFIElTIFBST1ZJREVEIE9OIEFOICpBUyBJUyogQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWQ0KS0lORCwgRUlUSEVSIEVYUFJFU1MgT1IgSU1QTElFRCwgSU5DTFVESU5HIFdJVEhPVVQgTElNSVRBVElPTiBBTlkgSU1QTElFRA0KV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIFRJVExFLCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSwNCk1FUkNIQU5UQUJMSVRZIE9SIE5PTi1JTkZSSU5HRU1FTlQuDQoNClNlZSB0aGUgQXBhY2hlIFZlcnNpb24gMi4wIExpY2Vuc2UgZm9yIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucw0KYW5kIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLg0KKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogKi8KCmZ1bmN0aW9uIF9fZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpIHsKICB2YXIgYyA9IGFyZ3VtZW50cy5sZW5ndGgsCiAgICAgIHIgPSBjIDwgMyA/IHRhcmdldCA6IGRlc2MgPT09IG51bGwgPyBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGtleSkgOiBkZXNjLAogICAgICBkOwogIGlmICgodHlwZW9mIFJlZmxlY3QgPT09ICJ1bmRlZmluZWQiID8gInVuZGVmaW5lZCIgOiBfdHlwZW9mKFJlZmxlY3QpKSA9PT0gIm9iamVjdCIgJiYgdHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUgPT09ICJmdW5jdGlvbiIpIHIgPSBSZWZsZWN0LmRlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKTtlbHNlIGZvciAodmFyIGkgPSBkZWNvcmF0b3JzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7CiAgICBpZiAoZCA9IGRlY29yYXRvcnNbaV0pIHIgPSAoYyA8IDMgPyBkKHIpIDogYyA+IDMgPyBkKHRhcmdldCwga2V5LCByKSA6IGQodGFyZ2V0LCBrZXkpKSB8fCByOwogIH0KICByZXR1cm4gYyA+IDMgJiYgciAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHIpLCByOwp9Cgp2YXIgc2NyaXB0ID0gVnVlLmV4dGVuZCh7CiAgbmFtZTogJ0ljb25mb250Jwp9KTsKCmZ1bmN0aW9uIG5vcm1hbGl6ZUNvbXBvbmVudCh0ZW1wbGF0ZSwgc3R5bGUsIHNjcmlwdCwgc2NvcGVJZCwgaXNGdW5jdGlvbmFsVGVtcGxhdGUsIG1vZHVsZUlkZW50aWZpZXIKLyogc2VydmVyIG9ubHkgKi8KLCBzaGFkb3dNb2RlLCBjcmVhdGVJbmplY3RvciwgY3JlYXRlSW5qZWN0b3JTU1IsIGNyZWF0ZUluamVjdG9yU2hhZG93KSB7CiAgaWYgKHR5cGVvZiBzaGFkb3dNb2RlICE9PSAnYm9vbGVhbicpIHsKICAgIGNyZWF0ZUluamVjdG9yU1NSID0gY3JlYXRlSW5qZWN0b3I7CiAgICBjcmVhdGVJbmplY3RvciA9IHNoYWRvd01vZGU7CiAgICBzaGFkb3dNb2RlID0gZmFsc2U7CiAgfSAvLyBWdWUuZXh0ZW5kIGNvbnN0cnVjdG9yIGV4cG9ydCBpbnRlcm9wLgoKCiAgdmFyIG9wdGlvbnMgPSB0eXBlb2Ygc2NyaXB0ID09PSAnZnVuY3Rpb24nID8gc2NyaXB0Lm9wdGlvbnMgOiBzY3JpcHQ7IC8vIHJlbmRlciBmdW5jdGlvbnMKCiAgaWYgKHRlbXBsYXRlICYmIHRlbXBsYXRlLnJlbmRlcikgewogICAgb3B0aW9ucy5yZW5kZXIgPSB0ZW1wbGF0ZS5yZW5kZXI7CiAgICBvcHRpb25zLnN0YXRpY1JlbmRlckZucyA9IHRlbXBsYXRlLnN0YXRpY1JlbmRlckZuczsKICAgIG9wdGlvbnMuX2NvbXBpbGVkID0gdHJ1ZTsgLy8gZnVuY3Rpb25hbCB0ZW1wbGF0ZQoKICAgIGlmIChpc0Z1bmN0aW9uYWxUZW1wbGF0ZSkgewogICAgICBvcHRpb25zLmZ1bmN0aW9uYWwgPSB0cnVlOwogICAgfQogIH0gLy8gc2NvcGVkSWQKCgogIGlmIChzY29wZUlkKSB7CiAgICBvcHRpb25zLl9zY29wZUlkID0gc2NvcGVJZDsKICB9CgogIHZhciBob29rOwoKICBpZiAobW9kdWxlSWRlbnRpZmllcikgewogICAgLy8gc2VydmVyIGJ1aWxkCiAgICBob29rID0gZnVuY3Rpb24gaG9vayhjb250ZXh0KSB7CiAgICAgIC8vIDIuMyBpbmplY3Rpb24KICAgICAgY29udGV4dCA9IGNvbnRleHQgfHwgLy8gY2FjaGVkIGNhbGwKICAgICAgdGhpcy4kdm5vZGUgJiYgdGhpcy4kdm5vZGUuc3NyQ29udGV4dCB8fCAvLyBzdGF0ZWZ1bAogICAgICB0aGlzLnBhcmVudCAmJiB0aGlzLnBhcmVudC4kdm5vZGUgJiYgdGhpcy5wYXJlbnQuJHZub2RlLnNzckNvbnRleHQ7IC8vIGZ1bmN0aW9uYWwKICAgICAgLy8gMi4yIHdpdGggcnVuSW5OZXdDb250ZXh0OiB0cnVlCgogICAgICBpZiAoIWNvbnRleHQgJiYgdHlwZW9mIF9fVlVFX1NTUl9DT05URVhUX18gIT09ICd1bmRlZmluZWQnKSB7CiAgICAgICAgY29udGV4dCA9IF9fVlVFX1NTUl9DT05URVhUX187CiAgICAgIH0gLy8gaW5qZWN0IGNvbXBvbmVudCBzdHlsZXMKCgogICAgICBpZiAoc3R5bGUpIHsKICAgICAgICBzdHlsZS5jYWxsKHRoaXMsIGNyZWF0ZUluamVjdG9yU1NSKGNvbnRleHQpKTsKICAgICAgfSAvLyByZWdpc3RlciBjb21wb25lbnQgbW9kdWxlIGlkZW50aWZpZXIgZm9yIGFzeW5jIGNodW5rIGluZmVyZW5jZQoKCiAgICAgIGlmIChjb250ZXh0ICYmIGNvbnRleHQuX3JlZ2lzdGVyZWRDb21wb25lbnRzKSB7CiAgICAgICAgY29udGV4dC5fcmVnaXN0ZXJlZENvbXBvbmVudHMuYWRkKG1vZHVsZUlkZW50aWZpZXIpOwogICAgICB9CiAgICB9OyAvLyB1c2VkIGJ5IHNzciBpbiBjYXNlIGNvbXBvbmVudCBpcyBjYWNoZWQgYW5kIGJlZm9yZUNyZWF0ZQogICAgLy8gbmV2ZXIgZ2V0cyBjYWxsZWQKCgogICAgb3B0aW9ucy5fc3NyUmVnaXN0ZXIgPSBob29rOwogIH0gZWxzZSBpZiAoc3R5bGUpIHsKICAgIGhvb2sgPSBzaGFkb3dNb2RlID8gZnVuY3Rpb24gKGNvbnRleHQpIHsKICAgICAgc3R5bGUuY2FsbCh0aGlzLCBjcmVhdGVJbmplY3RvclNoYWRvdyhjb250ZXh0LCB0aGlzLiRyb290LiRvcHRpb25zLnNoYWRvd1Jvb3QpKTsKICAgIH0gOiBmdW5jdGlvbiAoY29udGV4dCkgewogICAgICBzdHlsZS5jYWxsKHRoaXMsIGNyZWF0ZUluamVjdG9yKGNvbnRleHQpKTsKICAgIH07CiAgfQoKICBpZiAoaG9vaykgewogICAgaWYgKG9wdGlvbnMuZnVuY3Rpb25hbCkgewogICAgICAvLyByZWdpc3RlciBmb3IgZnVuY3Rpb25hbCBjb21wb25lbnQgaW4gdnVlIGZpbGUKICAgICAgdmFyIG9yaWdpbmFsUmVuZGVyID0gb3B0aW9ucy5yZW5kZXI7CgogICAgICBvcHRpb25zLnJlbmRlciA9IGZ1bmN0aW9uIHJlbmRlcldpdGhTdHlsZUluamVjdGlvbihoLCBjb250ZXh0KSB7CiAgICAgICAgaG9vay5jYWxsKGNvbnRleHQpOwogICAgICAgIHJldHVybiBvcmlnaW5hbFJlbmRlcihoLCBjb250ZXh0KTsKICAgICAgfTsKICAgIH0gZWxzZSB7CiAgICAgIC8vIGluamVjdCBjb21wb25lbnQgcmVnaXN0cmF0aW9uIGFzIGJlZm9yZUNyZWF0ZSBob29rCiAgICAgIHZhciBleGlzdGluZyA9IG9wdGlvbnMuYmVmb3JlQ3JlYXRlOwogICAgICBvcHRpb25zLmJlZm9yZUNyZWF0ZSA9IGV4aXN0aW5nID8gW10uY29uY2F0KGV4aXN0aW5nLCBob29rKSA6IFtob29rXTsKICAgIH0KICB9CgogIHJldHVybiBzY3JpcHQ7Cn0KCnZhciBpc09sZElFID0gdHlwZW9mIG5hdmlnYXRvciAhPT0gJ3VuZGVmaW5lZCcgJiYgL21zaWUgWzYtOV1cXGIvLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpKTsKLyogc2NyaXB0ICovCgp2YXIgX192dWVfc2NyaXB0X18gPSBzY3JpcHQ7Ci8qIHRlbXBsYXRlICovCgp2YXIgX192dWVfcmVuZGVyX18gPSBmdW5jdGlvbiBfX3Z1ZV9yZW5kZXJfXyhfaCwgX3ZtKSB7CiAgdmFyIF9jID0gX3ZtLl9jOwogIHJldHVybiBfYygnc3ZnJywgewogICAgZGlyZWN0aXZlczogW3sKICAgICAgbmFtZTogInNob3ciLAogICAgICByYXdOYW1lOiAidi1zaG93IiwKICAgICAgdmFsdWU6IGZhbHNlLAogICAgICBleHByZXNzaW9uOiAiZmFsc2UiCiAgICB9XQogIH0sIFtfYygnc3ltYm9sJywgewogICAgYXR0cnM6IHsKICAgICAgImlkIjogInZzc3VlLWljb24tYml0YnVja2V0IiwKICAgICAgInZpZXdCb3giOiAiMCAwIDEwMjQgMTAyNCIKICAgIH0KICB9LCBbX2MoJ3BhdGgnLCB7CiAgICBhdHRyczogewogICAgICAiZCI6ICJNNTc5LjU1MjI0NjQgNDg5LjQ1MjQ5NDkzcTQuODM3MTgwOCAzOC4zODUzNzE3My0zMC44MTc1MjQyNyA2MS41NTcwMjgyN3QtNjcuOTU0NTkwOTMgMy42NjY4OTQ5M3EtMjMuNzk1ODA5MDctMTAuMzc2NTMzMzMtMzIuNjExOTYxNi0zNS4zNDI2MjgyNnQtMC4zMTIwNzU3My01MC4wMTAyMDkwNyAzMS42NzU3MzMzMy0zNS4zNDI2MjgyN3EyMS45MjMzNTI1My0xMS4wMDA2ODU4NyA0NC4xNTg3ODA4LTcuMzMzNzkwOTN0MzkuMDA5NTI0MjcgMjEuNjExMjc1NzMgMTYuNzc0MDk0OTMgNDEuMTE2MDM4NHpNNjQ3LjE5NDc2MDUzIDQ3Ni42NTczNzE3M3EtOC41MDQwNzU3My02NS4yMjM5MjQyNy02OC44OTA4MTkyLTk5Ljk0MjR0LTEyMC4wNzEzMTQxMy03Ljk1Nzk0MjRxLTM4LjM4NTM3MTczIDE3LjA4NjE3MTczLTYxLjI0NDk1MjUzIDUzLjkxMTE2MTZ0LTIxLjA2NTE0MjQgNzguOTU1Mjc1NzRxMi40MTg1OTA5MyA1NS40NzE1NDI0IDQ3LjIwMTUyNDI2IDk0LjQ4MTA2NjY2dDEwMC44Nzg2MjgyNyAzNC4xNzIzNDI0cTU1LjQ3MTU0MjQtNC44MzcxODA4IDkyLjYwODYwOTA3LTUxLjE4MDQ5NDkzdDMwLjUwNTQ0NzQ2LTEwMi40MzkwMDkwN3pNNzkyLjkzNDM0MTMzIDE0Ni4zMjQ3MjQyN3EtMTIuMTcwOTcxNzMtMTYuNDYyMDE5Mi0zNC4xNzIzNDI0LTI3LjE1MDYyODI3dC0zNS4zNDI2MjgyNi0xMy40MTkyNzU3My00My4zMDA1NzE3NC03LjY0NTg2NjY3cS0xNzcuMzM3Mjk0OTMtMjguNjMyOTkwOTMtMzQ1LjAwMDIyODI2IDEuMjQ4MzA1MDctMjYuMjE0NCA0LjI5MTA0NzQ3LTQwLjI1NzgyODI3IDcuMzMzNzkwOTN0LTMzLjU0ODE5MDkzIDEzLjQxOTI3NTczLTMwLjUwNTQ0NzQ3IDI2LjIxNDRxMTguMjU2NDU3NiAxNy4wODYxNzE3MyA0Ni4zNDMzMTQxMyAyNy42OTY3NjE2dDQ0Ljc4MjkzMzM0IDEzLjQxOTI3NTc0IDUzLjM2NTAyODI2IDcuMDIxNzE0MTNxMTM4Ljk1MTkyNDI3IDE3LjcxMDMyNDI3IDI3My4wNjY2NjY2NyAwLjYyNDE1MjUzIDM4LjM4NTM3MTczLTQuODM3MTgwOCA1NC41MzUzMTQxMy03LjMzMzc5MDkzdDQ0LjE1ODc4MDgtMTMuMTA3MiA0NS43MTkxNjE2LTI4LjMyMDkxNDEzek04MjcuNjUyODE4MTMgNzc3LjEwODcyNDI3cS00LjgzNzE4MDggMTUuODM3ODY2NjctOS40NDAzMDUwNiA0Ni42NTUzOTA5M3QtOC41MDQwNzU3NCA1MS4xODA0OTQ5My0xNy4zOTgyNDc0NiA0Mi42NzY0MTkyLTM1LjM0MjYyODI3IDM0LjQwNjRxLTUyLjQyODggMjkuMjU3MTQyNC0xMTUuNDY4MTkwOTMgNDMuNjEyNjQ3NDd0LTEyMy4xMTQwNTc2IDEzLjQxOTI3NTczLTEyMi44MDE5ODA4LTExLjMxMjc2MTZxLTI4LjAwODgzODQtNC44MzcxODA4LTQ5LjY5ODEzMzM0LTExLjAwMDY4NTg2dC00Ni42NTUzOTA5My0xNi40NjIwMTkyLTQ0LjQ3MDg1NzYtMjYuNTI2NDc1NzQtMzEuNjc1NzMzMzMtMzcuNDQ5MTQyNHEtMTUuMjEzNzE0MTMtNTguNTE0Mjg1ODctMzQuNzE4NDc1NzQtMTc3Ljk2MTQ0NzQ2bDMuNjY2ODk0OTQtOS43NTIzODA4IDExLjAwMDY4NTg2LTUuNDYxMzMzMzRxMTM1LjkwOTE4MDggOTAuMTkwMDE5MiAzMDguNzIxMzcxNzQgOTAuMTkwMDE5MnQzMDkuMzQ1NTI0MjYtOTAuMTkwMDE5MnExMi43OTUxMjQyNyAzLjY2Njg5NDkzIDE0LjU4OTU2MTYgMTQuMDQzNDI4Mjd0LTMuMDQyNzQyNCAyNy40NjI3MDUwNy00LjgzNzE4MDggMjIuNTQ3NTA1MDZ6TTkzNy45NzE3NTE0NyAxOTEuNDE5NzMzMzNxLTE1LjgzNzg2NjY3IDEwMS44MTQ4NTc2LTY3LjY0MjUxNDE0IDM5OS4yMjM0NjY2Ny0zLjA0Mjc0MjQgMTguMjU2NDU3Ni0xNi40NjIwMTkyIDM0LjE3MjM0MjR0LTI2LjUyNjQ3NTczIDI0LjM0MTk0MjQtMzMuMjM2MTE0MTMgMTguODgwNjA5MDdxLTE1My42MTk1MDUwNyA3Ni43NzA3NDI0LTM3MS44Mzg3ODA4IDUzLjY3NzEwNTA2LTE1MS4xMjI4OTQ5My0xNi40NjIwMTkyLTI0MC4xNDI2MjgyNy04NC43Mjg2ODU4Ni05LjEyODIyODI3LTcuMzMzNzkwOTMtMTUuNTI1NzkwOTMtMTYuMTQ5OTQyNHQtMTAuMzc2NTMzMzQtMjEuMjk5Mi01LjQ2MTMzMzMzLTIwLjc1MzA2NjY3LTMuNjY2ODk0OTMtMjQuMTA3ODg1ODctMy4zNTQ4MTkyLTIxLjI5OTJxLTUuNDYxMzMzMzMtMzAuNTA1NDQ3NDctMTYuMTQ5OTQyNC05MS40MzgzMjQyNnQtMTcuMDg2MTcxNzQtOTguNDYwMDM4NC0xNC4zNTU1MDUwNi04OS44Nzc5NDI0LTEzLjQxOTI3NTc0LTk2LjI3NTUwNTA3cTEuNzk0NDM4NC0xNS44Mzc4NjY2NyAxMC42ODg2MDkwNy0yOS41NjkyMTkydDE5LjE5MjY4NTg3LTIyLjg1OTU4MDggMjcuNDYyNzA1MDYtMTguMjU2NDU3NiAyOC4wMDg4Mzg0LTEzLjczMTM1MjUzIDI5LjI1NzE0MjQtMTEuMzEyNzYxNnE3Ni4yMjQ2MDkwNy0yOC4wMDg4Mzg0IDE5MC43NTY1NzE3NC0zOS4wMDk1MjQyNyAyMzEuMDE0NC0yMi41NDc1MDUwNyA0MTIuMDE4NTkwOTMgMzAuNTA1NDQ3NDcgOTQuNDgxMDY2NjcgMjguMDA4ODM4NCAxMzEuMDcyIDc0LjM1MjE1MjUzIDkuNzUyMzgwOCAxMi4xNzA5NzE3MyAxMC4wNjQ0NTc2IDMxLjA1MTU4MDh0LTMuMzU0ODE5MiAzMi45MjQwMzg0eiIKICAgIH0KICB9KV0pLCBfdm0uX3YoIiAiKSwgX2MoJ3N5bWJvbCcsIHsKICAgIGF0dHJzOiB7CiAgICAgICJpZCI6ICJ2c3N1ZS1pY29uLWdpdGVhIiwKICAgICAgInZpZXdCb3giOiAiMCAwIDEwMjQgMTAyNCIKICAgIH0KICB9LCBbX2MoJ3BhdGgnLCB7CiAgICBhdHRyczogewogICAgICAiZCI6ICJNMTg0LjMxODY4OTg1IDIzNi4xMDg2MDc0MkMxMDYuOTQ4MzI2NjcgMjM1Ljk0MDg2NjQ4IDMuMzI2NTU1MDggMjg1LjEzMDgwNDY4IDkuMDI5NzM2NjUgNDA4LjQ2MjA5OTM2YzguOTMyMTg4MjcgMTkyLjY1MDEwNzg3IDIwNi4zMjA5Njg0NSAyMTAuNTE0NDg0NCAyODUuMjAwOTk3MjUgMjEyLjA2NjA4NDUzIDguNjM4NjQxODYgMzYuMTQ4MTA0OTYgMTAxLjQ4MzA3NzY2IDE2MC43NzkzODg4MyAxNzAuMjE0Nzk4OTggMTY3LjMyMTI3MzIxaDMwMS4wOTQ0MjE3N2MxODAuNTcyNzgyODgtMTEuOTkzNDU0OTkgMzE1Ljc3MTcyNjExLTU0Ni4wNzk2MDM1OSAyMTUuNTQ2NzAyMTctNTQ4LjA5MjQ5MTA5LTE2NS43Njk2NzIxIDcuNzk5OTM5MDYtMjY0LjAyMzc0MzA1IDExLjc0MTg0NDA1LTM0OC4yNzE0NzE1MSAxMi40MTI4MDU5MXYxNjYuNjkyMjQ1ODVsLTI2LjI1MTQwODQzLTExLjYxNjAzNzYxLTAuMTY3NzM5OTctMTU0Ljk5MjMzNzI4Yy05Ni43MDI0Njk4NS0wLjA0MTkzNTQ4LTE4MS44MzA4Mzc1Ny00LjUyODk5Njg3LTM0My40MDY5OTQ3LTEyLjQ5NjY3Njg3LTIwLjIxMjc0NDk2LTAuMTI1ODA1NDctNDguMzkzMTY5OTItMy41NjQ0ODg2LTc4LjY3MDM1MjM2LTMuNjQ4MzU4NTl6IG0xMC45NDUwNzU3NyA2OC4xNDQ2Mjg0OWg5LjIyNTczMzcxYzEwLjk4NzAxMTI0IDk4Ljc1NzI5MjgzIDI4Ljg1MTM4Nzc4IDE1Ni41MDIwMDI5MSA2NC45OTk0OTI3NCAyNDQuNzMzNTcxODUtOTIuMjU3MzQzOTQtMTAuOTAzMTQwMjktMTcwLjc1OTk1NjM0LTM3LjY5OTcwNTA5LTE4NS4xODU2NDk3NC0xMzcuNzU2OTg4MDktNy40NjQ0NTgxMy01MS43ODk5MTc1NyAxNy42OTY2MzU1OC0xMDUuODQ0MzM0NTYgMTEwLjk2MDQyMzI5LTEwNy4wMTg1MTgyN3ogbTM1OC44MzkxMzA4NyA5Ny4wNzk4ODcyM2M2LjI5MDI3MzQzIDAuMDgzODY5OTkgMTIuNzA2MzUyMzMgMS4yNTgwNTQ2OCAxOC43NDUwMTQ4MiA0LjAyNTc3NDk5bDMxLjQwOTQzMjYzIDEzLjU0NTA1NTEzLTIyLjUxOTE3ODg3IDQxLjA1NDUxODI0YTI4LjE4MDQyNDk2IDI1LjAzNTI4ODI1IDAgMCAwLTEwLjEwNjM3Mjk3IDEuNTkzNTM1NjEgMjguMTgwNDI0OTYgMjUuMDM1Mjg4MjUgMCAwIDAtMTYuOTgzNzM4MjUgMzIuMDM4NDU5IDI4LjE4MDQyNDk2IDI1LjAzNTI4ODI1IDAgMCAwIDQuNjk2NzM3ODEgNy4yOTY3MTcxOGwtMzguODMxOTU1MjggNzAuNzAyNjczMzNhMjguMTgwNDI0OTYgMjUuMDM1Mjg4MjUgMCAwIDAtOS4zMDk2MDQ2NyAxLjU5MzUzNjU5IDI4LjE4MDQyNDk2IDI1LjAzNTI4ODI1IDAgMCAwLTE2Ljk4MzczODI1IDMyLjAzODQ1OSAyOC4xODA0MjQ5NiAyNS4wMzUyODgyNSAwIDAgMCAzNi4wNjQyMzQ5NyAxNS4wOTY2NTYyMyAyOC4xODA0MjQ5NiAyNS4wMzUyODgyNSAwIDAgMCAxNi45NDE4MDI3Ni0zMi4wODAzOTQ0OSAyOC4xODA0MjQ5NiAyNS4wMzUyODgyNSAwIDAgMC02LjYyNTc1NDM0LTkuMjI1NzM0NjhsMzcuODI1NTEwNTYtNjguODU3NTI1ODFhMjguMTgwNDI0OTYgMjUuMDM1Mjg4MjUgMCAwIDAgMTIuMjg3MDAwNDQtMS4yNTgwNTQ2OSAyOC4xODA0MjQ5NiAyNS4wMzUyODgyNSAwIDAgMCA4LjkzMjE4ODI2LTQuNjk2NzM3ODNjMTQuNTkzNDM0MzUgNi4xMjI1MzI0OCAyNi41NDQ5NTM4NiAxMS4xMTI4MTY3MSAzNS4xNDE2NjEyMiAxNS4zNDgyNjcxNyAxMi45MTYwMjc3OCA2LjM3NDE0MzQxIDE3LjQ4Njk2MDEyIDEwLjYwOTU5NDg1IDE4Ljg3MDgyMDI3IDE1LjMwNjMzMTY5IDEuMzgzODYwMTUgNC42MTI4NjY4NS0wLjEyNTgwNTQ3IDEzLjUwMzEyMDYyLTcuNDIyNTIyNjMgMjkuMTAyOTk4NzItNS40NTE1NzA2MyAxMS42MTYwMzg1OS0xNC40Njc2Mjg4OSAyOC4wOTY1NTQ5Ny0yNS4xMTkxNTgyMyA0Ny41MTI1MzE2NGEyOC4xODA0MjQ5NiAyNS4wMzUyODgyNSAwIDAgMC0xMC41MjU3MjQ4NiAxLjU5MzUzNjU5IDI4LjE4MDQyNDk2IDI1LjAzNTI4ODI1IDAgMCAwLTE2Ljk4MzczODI2IDMyLjAzODQ1OSAyOC4xODA0MjQ5NiAyNS4wMzUyODgyNSAwIDAgMCAzNi4wNjQyMzQ5OCAxNS4wOTY2NTYyMyAyOC4xODA0MjQ5NiAyNS4wMzUyODgyNSAwIDAgMCAxNi45NDE4MDI3OC0zMi4wMzg0NTkwMSAyOC4xODA0MjQ5NiAyNS4wMzUyODgyNSAwIDAgMC01Ljc0NTExNjA4LTguNDcwOTAxODhjMTAuNTI1NzIzODgtMTkuMjA2MzAxMjIgMTkuNTgzNzE3NjItMzUuNzI4NzUzMDggMjUuNDEyNzA0NjUtNDguMTQxNTU4OTcgNy44ODM4MDkwNC0xNi44NTc5MzI3OSAxMS45OTM0NTQ5OS0yOS4zOTY1NDQxNiA4LjM4NzAzMDkxLTQxLjUxNTgwNDYzLTMuNjA2NDIzMTEtMTIuMTE5MjYwNDYtMTQuNjc3MzA0MzQtMjAuMDAzMDY5NS0yOS4zNTQ2MDk2Ni0yNy4yNTc4NTIxNy05LjY0NTA4NTYtNC43Mzg2NzIzMy0yMS42ODA0NzYwNy05Ljc3MDg5MTA2LTM2LjA2NDIzMzk5LTE1LjgwOTU1MzU3YTI4LjE4MDQyNDk2IDI1LjAzNTI4ODI1IDAgMCAwLTEuNTkzNTM1NjItMTAuMDIyNTAyIDI4LjE4MDQyNDk2IDI1LjAzNTI4ODI1IDAgMCAwLTYuMDgwNTk3OTYtOC43NjQ0NDgzbDIyLjE0MTc2MjQ2LTQwLjM4MzU1NTQxIDEyMi42MTgzOTYzOCA1Mi45NjQxMDIyN2MyMi4xNDE3NjI0NyA5LjYwMzE1MTEgMzEuMjgzNjI2MiAzMy4xMjg3NzM3MiAyMC41NDgyMjY4NSA1Mi44MzgyOTY4bC04NC4yODk2NjM5MyAxNTQuMzIxMzc1NDRjLTEwLjc3NzMzNDgyIDE5LjY2NzU4ODU3LTM3LjIzODQxODY5IDI3LjgwMzAwODU1LTU5LjM4MDE4MTE4IDE4LjI0MTc5MjkzbC0xNzMuNDg1NzQxMTUtNzQuOTgwMDU5MjdjLTIyLjE0MTc2MjQ3LTkuNTYxMjE1Ni0zMS4zMjU1NjE2Ny0zMy4xMjg3NzM3Mi0yMC41NDgyMjY4Ny01Mi44MzgyOTY3OWw4NC4yODk2NjM5NS0xNTQuMjc5NDM5OTVjNy4zODA1ODcxNi0xMy41NDUwNTUxMyAyMi4yMjU2MzI0Ni0yMS41OTY2MDUxMSAzNy45NTEzMTctMjIuMjI1NjMyNDZoMi42ODM4NDkzNXoiCiAgICB9CiAgfSldKSwgX3ZtLl92KCIgIiksIF9jKCdzeW1ib2wnLCB7CiAgICBhdHRyczogewogICAgICAiaWQiOiAidnNzdWUtaWNvbi1naXRlZSIsCiAgICAgICJ2aWV3Qm94IjogIjAgMCAxMDI0IDEwMjQiCiAgICB9CiAgfSwgW19jKCdwYXRoJywgewogICAgYXR0cnM6IHsKICAgICAgImQiOiAiTTk3OC40MDQyNzUgNDA5LjU2MTYwNEg0NTUuMDYxMzM4Yy0yNS4xMTc2NDUgMC00NS40OTk3MzQgMjAuMzgyMDg5LTQ1LjQ5OTczNCA0NS40OTk3MzRsLTAuMDMxOTk3IDExMy43ODEzMzNjMCAyNS4xMTc2NDUgMjAuMzUwMDkyIDQ1LjQ5OTczNCA0NS40OTk3MzQgNDUuNTMxNzMxaDMxOC41OTQxMzJjMjUuMTE3NjQ1IDAgNDUuNDk5NzM0IDIwLjM4MjA4OSA0NS40OTk3MzQgNDUuNDk5NzM1djIyLjc0OTg2N2ExMzYuNTMxMiAxMzYuNTMxMiAwIDAgMS0xMzYuNTMxMiAxMzYuNTMxMkgyNTAuMjQ4NTM5YTQ1LjQ5OTczNCA0NS40OTk3MzQgMCAwIDEtNDUuNDk5NzM0LTQ1LjQ5OTczNFYzNDEuMzQzOTk5YTEzNi41MzEyIDEzNi41MzEyIDAgMCAxIDEzNi41MzEyLTEzNi41MzEyTDk3OC4zMDgyODQgMjA0Ljc4MDgwMmMyNS4xMTc2NDUgMCA0NS40OTk3MzQtMjAuMzUwMDkyIDQ1LjQ5OTczNC00NS40Njc3MzhMMTAyMy45MDQwMDkgNDUuNTMxNzMxaDAuMDMxOTk3QTQ1LjQ5OTczNCA0NS40OTk3MzQgMCAwIDAgOTc4LjQ2ODI2OSAwaC0wLjAzMTk5N0wzNDEuMzQzOTk5IDAuMDMxOTk3QzE1Mi44NDk2NyAwLjAzMTk5NyAwLjAzMTk5NyAxNTIuODQ5NjcgMC4wMzE5OTcgMzQxLjM0Mzk5OXY2MzcuMDkyMjczYzAgMjUuMTE3NjQ1IDIwLjM4MjA4OSA0NS40OTk3MzQgNDUuNDk5NzM0IDQ1LjQ5OTczNGg2NzEuMjMzMDcyYTMwNy4xNzEyMDMgMzA3LjE3MTIwMyAwIDAgMCAzMDcuMTcxMjAzLTMwNy4xNzEyMDN2LTI2MS42NzE0NjhjMC0yNS4xMTc2NDUtMjAuMzgyMDg5LTQ1LjQ5OTczNC00NS40OTk3MzQtNDUuNDk5NzM0eiIKICAgIH0KICB9KV0pLCBfdm0uX3YoIiAiKSwgX2MoJ3N5bWJvbCcsIHsKICAgIGF0dHJzOiB7CiAgICAgICJpZCI6ICJ2c3N1ZS1pY29uLWdpdGh1YiIsCiAgICAgICJ2aWV3Qm94IjogIjAgMCAxMDI0IDEwMjQiCiAgICB9CiAgfSwgW19jKCdwYXRoJywgewogICAgYXR0cnM6IHsKICAgICAgImQiOiAiTTUxMiAyMC40NDI1Yy0yNzguMzM0IDAtNTA0IDIyNS42MzQ1LTUwNCA1MDQgMCAyMjIuNjczNSAxNDQuNDI3NSA0MTEuNjEwNSAzNDQuNjczIDQ3OC4yMzMgMjUuMiA0LjY2MiAzNC40NjEtMTAuOTMwNSAzNC40NjEtMjQuMjU1IDAtMTIuMDAxNS0wLjQ3MjUtNTEuNzIzLTAuNjkzLTkzLjgzODUtMTQwLjIzOCAzMC40OTItMTY5LjgxNjUtNTkuNDcyLTE2OS44MTY1LTU5LjQ3Mi0yMi45MzItNTguMjQzNS01NS45NDQtNzMuNzQxNS01NS45NDQtNzMuNzQxNS00NS43MzgtMzEuMjc5NSAzLjQ2NS0zMC42NDk1IDMuNDY1LTMwLjY0OTUgNTAuNTg5IDMuNTU5NSA3Ny4yMzggNTEuOTQzNSA3Ny4yMzggNTEuOTQzNSA0NC45NTA1IDc3LjA0OSAxMTcuOTA0NSA1NC43Nzg1IDE0Ni42NjQgNDEuODk1IDQuNTA0NS0zMi41NzEgMTcuNTc3LTU0LjgxIDMyLjAwNC02Ny40MS0xMTEuOTUxLTEyLjcyNi0yMjkuNjM1LTU1Ljk3NTUtMjI5LjYzNS0yNDkuMDcwNSAwLTU1LjAzMDUgMTkuNjg3NS05OS45ODEgNTEuOTQzNS0xMzUuMjkyNS01LjIyOS0xMi42OTQ1LTIyLjQ5MS02My45NDUgNC44ODI1LTEzMy4zNzEgMCAwIDQyLjMzNi0xMy41NDUgMTM4LjYzMTUgNTEuNjYgNDAuMTk0LTExLjE4MjUgODMuMzE3NS0xNi43NTggMTI2LjE1NzUtMTYuOTc4NSA0Mi44MDg1IDAuMTg5IDg1Ljk2MzUgNS43OTYgMTI2LjI1MiAxNi45Nzg1IDk2LjIwMS02NS4yMDUgMTM4LjQ0MjUtNTEuNjYgMTM4LjQ0MjUtNTEuNjYgMjcuNDM2NSA2OS40MjYgMTAuMTc0NSAxMjAuNjc2NSA0Ljk0NTUgMTMzLjM3MSAzMi4zMTkgMzUuMjggNTEuODgwNSA4MC4yNjIgNTEuODgwNSAxMzUuMjkyNSAwIDE5My41Njc1LTExNy45MDQ1IDIzNi4xODctMjMwLjEzOSAyNDguNjkyNSAxOC4wODEgMTUuNjU1NSAzNC4xNzc1IDQ2LjMwNSAzNC4xNzc1IDkzLjMzNDUgMCA2Ny40NDE1LTAuNTk4NSAxMjEuNzE2LTAuNTk4NSAxMzguMzE2NSAwIDEzLjQxOSA5LjA3MiAyOS4xMzc1IDM0LjYxODUgMjQuMTkyIDIwMC4xNTEtNjYuNzE3IDM0NC4zODk1LTI1NS41NTk1IDM0NC4zODk1LTQ3OC4xNyAwLTI3OC4zNjU1LTIyNS42NjYtNTA0LTUwNC01MDR6IgogICAgfQogIH0pXSksIF92bS5fdigiICIpLCBfYygnc3ltYm9sJywgewogICAgYXR0cnM6IHsKICAgICAgImlkIjogInZzc3VlLWljb24tZ2l0bGFiIiwKICAgICAgInZpZXdCb3giOiAiMCAwIDEwMjQgMTAyNCIKICAgIH0KICB9LCBbX2MoJ3BhdGgnLCB7CiAgICBhdHRyczogewogICAgICAiZCI6ICJNNjYuNjEzNzU5ODYgNDA1LjExNjAwMDQyTDUxMi4xMTM3NjAyOCA5NzYuMDM5OTk5NzIgMjMuODQ1NzYgNjIxLjY1NTk5OTU4YTM5LjMxMiAzOS4zMTIgMCAwIDEtMTQuMDc2MDAwNDItNDMuMzA3OTk5NDRsNTYuODA4MDAwNy0xNzMuMjY4MDAwMjh6IG0yNTkuODg0MDAwMTQgMGgzNzEuMjY4MDAwMTRMNTEyLjE0OTc1OTg2IDk3Ni4wMzk5OTk3MnpNMjE1LjExMzc2IDYwLjg4NDAwMDQybDExMS4zODQgMzQ0LjIzMkg2Ni42MTM3NTk4NmwxMTEuMzg0LTM0NC4yMzJhMTkuNzI4MDAwMTQgMTkuNzI4MDAwMTQgMCAwIDEgMzcuMTE2MDAwMTQgMHogbTc0Mi40OTk5OTk3MiAzNDQuMjMybDU2LjgwODAwMDcgMTczLjI2Nzk5OTNhMzkuMjM5OTk5ODYgMzkuMjM5OTk5ODYgMCAwIDEtMTQuMDc2MDAwNDIgNDMuMzA4MDAwNDJsLTQ4OC4yNjgwMDAyOCAzNTQuMzg0MDAwMTQgNDQ1LjUwMDAwMDQyLTU3MC45MjQwMDAyOHogbTAgMGgtMjU5Ljg4NDAwMDE0bDExMS4zODQtMzQ0LjIzMmExOS43MjgwMDAxNCAxOS43MjgwMDAxNCAwIDAgMSAzNy4xMTYwMDAxNCAweiIKICAgIH0KICB9KV0pLCBfdm0uX3YoIiAiKSwgX2MoJ3N5bWJvbCcsIHsKICAgIGF0dHJzOiB7CiAgICAgICJpZCI6ICJ2c3N1ZS1pY29uLWxvYWRpbmciLAogICAgICAidmlld0JveCI6ICIwIDAgMTAyNCAxMDI0IgogICAgfQogIH0sIFtfYygncGF0aCcsIHsKICAgIGF0dHJzOiB7CiAgICAgICJkIjogIk04NDMuMzA3IDc0Mi4yNGMwIDMuMjE3IDIuNjA3IDUuODI0IDUuODI0IDUuODI0czUuODI0LTIuNjA3IDUuODI0LTUuODI0YTUuODIzIDUuODIzIDAgMCAwLTUuODI0LTUuODI0IDUuODIzIDUuODIzIDAgMCAwLTUuODI0IDUuODI0ek03MTQuNzMxIDg3NC45MTJjMCA2LjM5OCA1LjE4NiAxMS41ODQgMTEuNTg0IDExLjU4NHMxMS41ODQtNS4xODYgMTEuNTg0LTExLjU4NC01LjE4Ni0xMS41ODQtMTEuNTg0LTExLjU4NC0xMS41ODQgNS4xODYtMTEuNTg0IDExLjU4NHpNNTQxLjQxOSA5NDMuMmMwIDkuNjE0IDcuNzk0IDE3LjQwOCAxNy40MDggMTcuNDA4czE3LjQwOC03Ljc5NCAxNy40MDgtMTcuNDA4LTcuNzk0LTE3LjQwOC0xNy40MDgtMTcuNDA4LTE3LjQwOCA3Ljc5NC0xNy40MDggMTcuNDA4eiBtLTE4Ni41Ni05LjE1MmMwIDEyLjc5NSAxMC4zNzMgMjMuMTY4IDIzLjE2OCAyMy4xNjhzMjMuMTY4LTEwLjM3MyAyMy4xNjgtMjMuMTY4LTEwLjM3My0yMy4xNjgtMjMuMTY4LTIzLjE2OC0yMy4xNjggMTAuMzczLTIzLjE2OCAyMy4xNjh6TTE4OS4zNTUgODQ5LjEyYzAgMTYuMDEyIDEyLjk4IDI4Ljk5MiAyOC45OTIgMjguOTkyczI4Ljk5Mi0xMi45OCAyOC45OTItMjguOTkyLTEyLjk4LTI4Ljk5Mi0yOC45OTItMjguOTkyLTI4Ljk5MiAxMi45OC0yOC45OTIgMjguOTkyek03NC43MzEgNzA0LjczNmMwIDE5LjIyOCAxNS41ODggMzQuODE2IDM0LjgxNiAzNC44MTZzMzQuODE2LTE1LjU4OCAzNC44MTYtMzQuODE2LTE1LjU4OC0zNC44MTYtMzQuODE2LTM0LjgxNi0zNC44MTYgMTUuNTg4LTM0LjgxNiAzNC44MTZ6IG0tNDMuMDA4LTE3Ny4yOGMwIDIyLjQxIDE4LjE2NiA0MC41NzYgNDAuNTc2IDQwLjU3NnM0MC41NzYtMTguMTY2IDQwLjU3Ni00MC41NzYtMTguMTY2LTQwLjU3Ni00MC41NzYtNDAuNTc2LTQwLjU3NiAxOC4xNjYtNDAuNTc2IDQwLjU3NnogbTM1LjM5Mi0xNzYuMTI4YzAgMjUuNjI2IDIwLjc3NCA0Ni40IDQ2LjQgNDYuNHM0Ni40LTIwLjc3NCA0Ni40LTQ2LjRjMC0yNS42MjYtMjAuNzc0LTQ2LjQtNDYuNC00Ni40LTI1LjYyNiAwLTQ2LjQgMjAuNzc0LTQ2LjQgNDYuNHogbTEwNi4xNzYtMTQyLjAxNmMwIDI4Ljg0MyAyMy4zODEgNTIuMjI0IDUyLjIyNCA1Mi4yMjRzNTIuMjI0LTIzLjM4MSA1Mi4yMjQtNTIuMjI0YzAtMjguODQzLTIzLjM4MS01Mi4yMjQtNTIuMjI0LTUyLjIyNC0yOC44NDMgMC01Mi4yMjQgMjMuMzgxLTUyLjIyNCA1Mi4yMjR6IG0xNTUuOTA0LTgxLjM0NGMwIDMyLjAyNCAyNS45NiA1Ny45ODQgNTcuOTg0IDU3Ljk4NHM1Ny45ODQtMjUuOTYgNTcuOTg0LTU3Ljk4NC0yNS45Ni01Ny45ODQtNTcuOTg0LTU3Ljk4NC01Ny45ODQgMjUuOTYtNTcuOTg0IDU3Ljk4NHogbTE3NS4xMDQtNS4wNTZjMCAzNS4yNCAyOC41NjggNjMuODA4IDYzLjgwOCA2My44MDhzNjMuODA4LTI4LjU2OCA2My44MDgtNjMuODA4YzAtMzUuMjQtMjguNTY4LTYzLjgwOC02My44MDgtNjMuODA4LTM1LjI0IDAtNjMuODA4IDI4LjU2OC02My44MDggNjMuODA4eiBtMTYwLjMyIDcyLjEyOGMwIDM4LjQyMSAzMS4xNDcgNjkuNTY4IDY5LjU2OCA2OS41NjhzNjkuNTY4LTMxLjE0NyA2OS41NjgtNjkuNTY4LTMxLjE0Ny02OS41NjgtNjkuNTY4LTY5LjU2OC02OS41NjggMzEuMTQ3LTY5LjU2OCA2OS41Njh6IG0xMTMuOTIgMTM1LjQ4OGMwIDQxLjYzOCAzMy43NTQgNzUuMzkyIDc1LjM5MiA3NS4zOTJzNzUuMzkyLTMzLjc1NCA3NS4zOTItNzUuMzkyLTMzLjc1NC03NS4zOTItNzUuMzkyLTc1LjM5Mi03NS4zOTIgMzMuNzU0LTc1LjM5MiA3NS4zOTJ6IG00NS4zMTIgMTc1LjQ4OGMwIDQ0Ljg1NCAzNi4zNjIgODEuMjE2IDgxLjIxNiA4MS4yMTZzODEuMjE2LTM2LjM2MiA4MS4yMTYtODEuMjE2YzAtNDQuODU0LTM2LjM2Mi04MS4yMTYtODEuMjE2LTgxLjIxNi00NC44NTQgMC04MS4yMTYgMzYuMzYyLTgxLjIxNiA4MS4yMTZ6IgogICAgfQogIH0pXSksIF92bS5fdigiICIpLCBfYygnc3ltYm9sJywgewogICAgYXR0cnM6IHsKICAgICAgImlkIjogInZzc3VlLWljb24tbGlrZSIsCiAgICAgICJ2aWV3Qm94IjogIjAgMCAxMDI0IDEwMjQiCiAgICB9CiAgfSwgW19jKCdwYXRoJywgewogICAgYXR0cnM6IHsKICAgICAgImQiOiAiTTg4NS45IDUzMy43YzE2LjgtMjIuMiAyNi4xLTQ5LjQgMjYuMS03Ny43IDAtNDQuOS0yNS4xLTg3LjQtNjUuNS0xMTEuMWE2Ny42NyA2Ny42NyAwIDAgMC0zNC4zLTkuM0g1NzIuNGw2LTEyMi45YzEuNC0yOS43LTkuMS01Ny45LTI5LjUtNzkuNC0yMC41LTIxLjUtNDguMS0zMy40LTc3LjktMzMuNC01MiAwLTk4IDM1LTExMS44IDg1LjFsLTg1LjkgMzExSDE0NGMtMTcuNyAwLTMyIDE0LjMtMzIgMzJ2MzY0YzAgMTcuNyAxNC4zIDMyIDMyIDMyaDYwMS4zYzkuMiAwIDE4LjItMS44IDI2LjUtNS40IDQ3LjYtMjAuMyA3OC4zLTY2LjggNzguMy0xMTguNCAwLTEyLjYtMS44LTI1LTUuNC0zNyAxNi44LTIyLjIgMjYuMS00OS40IDI2LjEtNzcuNyAwLTEyLjYtMS44LTI1LTUuNC0zNyAxNi44LTIyLjIgMjYuMS00OS40IDI2LjEtNzcuNy0wLjItMTIuNi0yLTI1LjEtNS42LTM3LjF6TTE4NCA4NTJWNTY4aDgxdjI4NGgtODF6IG02MzYuNC0zNTNsLTIxLjkgMTkgMTMuOSAyNS40YzQuNiA4LjQgNi45IDE3LjYgNi45IDI3LjMgMCAxNi41LTcuMiAzMi4yLTE5LjYgNDNsLTIxLjkgMTkgMTMuOSAyNS40YzQuNiA4LjQgNi45IDE3LjYgNi45IDI3LjMgMCAxNi41LTcuMiAzMi4yLTE5LjYgNDNsLTIxLjkgMTkgMTMuOSAyNS40YzQuNiA4LjQgNi45IDE3LjYgNi45IDI3LjMgMCAyMi40LTEzLjIgNDIuNi0zMy42IDUxLjhIMzI5VjU2NC44bDk5LjUtMzYwLjVjNS4yLTE4LjkgMjIuNS0zMi4yIDQyLjItMzIuMyA3LjYgMCAxNS4xIDIuMiAyMS4xIDYuNyA5LjkgNy40IDE1LjIgMTguNiAxNC42IDMwLjVsLTkuNiAxOTguNGgzMTQuNEM4MjkgNDE4LjUgODQwIDQzNi45IDg0MCA0NTZjMCAxNi41LTcuMiAzMi4xLTE5LjYgNDN6IgogICAgfQogIH0pXSksIF92bS5fdigiICIpLCBfYygnc3ltYm9sJywgewogICAgYXR0cnM6IHsKICAgICAgImlkIjogInZzc3VlLWljb24tdW5saWtlIiwKICAgICAgInZpZXdCb3giOiAiMCAwIDEwMjQgMTAyNCIKICAgIH0KICB9LCBbX2MoJ3BhdGgnLCB7CiAgICBhdHRyczogewogICAgICAiZCI6ICJNODg1LjkgNDkwLjNjMy42LTEyIDUuNC0yNC40IDUuNC0zNyAwLTI4LjMtOS4zLTU1LjUtMjYuMS03Ny43IDMuNi0xMiA1LjQtMjQuNCA1LjQtMzcgMC0yOC4zLTkuMy01NS41LTI2LjEtNzcuNyAzLjYtMTIgNS40LTI0LjQgNS40LTM3IDAtNTEuNi0zMC43LTk4LjEtNzguMy0xMTguNC04LjMtMy42LTE3LjItNS40LTI2LjUtNS40SDE0NGMtMTcuNyAwLTMyIDE0LjMtMzIgMzJ2MzY0YzAgMTcuNyAxNC4zIDMyIDMyIDMyaDEyOS4zbDg1LjggMzEwLjhDMzcyLjkgODg5IDQxOC45IDkyNCA0NzAuOSA5MjRjMjkuNyAwIDU3LjQtMTEuOCA3Ny45LTMzLjQgMjAuNS0yMS41IDMxLTQ5LjcgMjkuNS03OS40bC02LTEyMi45aDIzOS45YzEyLjEgMCAyMy45LTMuMiAzNC4zLTkuMyA0MC40LTIzLjUgNjUuNS02Ni4xIDY1LjUtMTExIDAtMjguMy05LjMtNTUuNS0yNi4xLTc3Ljd6TTE4NCA0NTZWMTcyaDgxdjI4NGgtODF6IG02MjcuMiAxNjAuNEg0OTYuOGw5LjYgMTk4LjRjMC42IDExLjktNC43IDIzLjEtMTQuNiAzMC41LTYuMSA0LjUtMTMuNiA2LjgtMjEuMSA2LjctMTkuNi0wLjEtMzYuOS0xMy40LTQyLjItMzIuM0wzMjkgNDU5LjJWMTcyaDQxNS40YzIwLjQgOS4yIDMzLjYgMjkuNCAzMy42IDUxLjggMCA5LjctMi4zIDE4LjktNi45IDI3LjNsLTEzLjkgMjUuNCAyMS45IDE5YzEyLjUgMTAuOCAxOS42IDI2LjUgMTkuNiA0MyAwIDkuNy0yLjMgMTguOS02LjkgMjcuM2wtMTMuOSAyNS40IDIxLjkgMTljMTIuNSAxMC44IDE5LjYgMjYuNSAxOS42IDQzIDAgOS43LTIuMyAxOC45LTYuOSAyNy4zbC0xNCAyNS41IDIxLjkgMTljMTIuNSAxMC44IDE5LjYgMjYuNSAxOS42IDQzIDAgMTkuMS0xMSAzNy41LTI4LjggNDguNHoiCiAgICB9CiAgfSldKSwgX3ZtLl92KCIgIiksIF9jKCdzeW1ib2wnLCB7CiAgICBhdHRyczogewogICAgICAiaWQiOiAidnNzdWUtaWNvbi1oZWFydCIsCiAgICAgICJ2aWV3Qm94IjogIjAgMCAxMDI0IDEwMjQiCiAgICB9CiAgfSwgW19jKCdwYXRoJywgewogICAgYXR0cnM6IHsKICAgICAgImQiOiAiTTkyMyAyODMuNmMtMTMuNC0zMS4xLTMyLjYtNTguOS01Ni45LTgyLjgtMjQuMy0yMy44LTUyLjUtNDIuNC04NC01NS41LTMyLjUtMTMuNS02Ni45LTIwLjMtMTAyLjQtMjAuMy00OS4zIDAtOTcuNCAxMy41LTEzOS4yIDM5LTEwIDYuMS0xOS41IDEyLjgtMjguNSAyMC4xLTktNy4zLTE4LjUtMTQtMjguNS0yMC4xLTQxLjgtMjUuNS04OS45LTM5LTEzOS4yLTM5LTM1LjUgMC02OS45IDYuOC0xMDIuNCAyMC4zLTMxLjQgMTMtNTkuNyAzMS43LTg0IDU1LjUtMjQuNCAyMy45LTQzLjUgNTEuNy01Ni45IDgyLjgtMTMuOSAzMi4zLTIxIDY2LjYtMjEgMTAxLjkgMCAzMy4zIDYuOCA2OCAyMC4zIDEwMy4zIDExLjMgMjkuNSAyNy41IDYwLjEgNDguMiA5MSAzMi44IDQ4LjkgNzcuOSA5OS45IDEzMy45IDE1MS42IDkyLjggODUuNyAxODQuNyAxNDQuOSAxODguNiAxNDcuM2wyMy43IDE1LjJjMTAuNSA2LjcgMjQgNi43IDM0LjUgMGwyMy43LTE1LjJjMy45LTIuNSA5NS43LTYxLjYgMTg4LjYtMTQ3LjMgNTYtNTEuNyAxMDEuMS0xMDIuNyAxMzMuOS0xNTEuNiAyMC43LTMwLjkgMzctNjEuNSA0OC4yLTkxIDEzLjUtMzUuMyAyMC4zLTcwIDIwLjMtMTAzLjMgMC4xLTM1LjMtNy02OS42LTIwLjktMTAxLjl6TTUxMiA4MTQuOFMxNTYgNTg2LjcgMTU2IDM4NS41QzE1NiAyODMuNiAyNDAuMyAyMDEgMzQ0LjMgMjAxYzczLjEgMCAxMzYuNSA0MC44IDE2Ny43IDEwMC40QzU0My4yIDI0MS44IDYwNi42IDIwMSA2NzkuNyAyMDFjMTA0IDAgMTg4LjMgODIuNiAxODguMyAxODQuNSAwIDIwMS4yLTM1NiA0MjkuMy0zNTYgNDI5LjN6IgogICAgfQogIH0pXSksIF92bS5fdigiICIpLCBfYygnc3ltYm9sJywgewogICAgYXR0cnM6IHsKICAgICAgImlkIjogInZzc3VlLWljb24tZWRpdCIsCiAgICAgICJ2aWV3Qm94IjogIjAgMCAxMDI0IDEwMjQiCiAgICB9CiAgfSwgW19jKCdwYXRoJywgewogICAgYXR0cnM6IHsKICAgICAgImQiOiAiTTcyMy4yIDkxNy43NkgyODYuNzJjLTY1LjI4IDAtMTE4LjQtNTEuMi0xMTguNC0xMTMuOTJWMjYxLjc2QzE2OC4zMiAxOTguNCAyMjEuNDQgMTQ3LjIgMjg2LjcyIDE0Ny4yaDM3NS4wNGMxNy45MiAwIDMyIDE0LjA4IDMyIDMycy0xNC4wOCAzMi0zMiAzMkgyODYuNzJjLTMwLjA4IDAtNTQuNCAyMi40LTU0LjQgNDkuOTJ2NTQyLjA4YzAgMjcuNTIgMjQuMzIgNDkuOTIgNTQuNCA0OS45Mkg3MjMuMmMzMC4wOCAwIDU0LjQtMjIuNCA1NC40LTQ5LjkyVjQ0MC4zMmMwLTE3LjkyIDE0LjA4LTMyIDMyLTMyczMyIDE0LjA4IDMyIDMydjM2My41MmMwIDYyLjcyLTUzLjEyIDExMy45Mi0xMTguNCAxMTMuOTJ6IgogICAgfQogIH0pLCBfdm0uX3YoIiAiKSwgX2MoJ3BhdGgnLCB7CiAgICBhdHRyczogewogICAgICAiZCI6ICJNNDk5Ljg0IDYwMi4yNGMtNy42OCAwLTE0LjcyLTIuNTYtMjEuMTItNy42OC0xMy40NC0xMS41Mi0xNC43Mi0zMi0zLjItNDUuNDRMNzgwLjE2IDE5OC40YzExLjUyLTEzLjQ0IDMyLTE0LjcyIDQ1LjQ0LTMuMnMxNC43MiAzMiAzLjIgNDUuNDRMNTI0LjE2IDU5MS4zNmMtNi40IDcuMDQtMTUuMzYgMTAuODgtMjQuMzIgMTAuODh6IgogICAgfQogIH0pXSksIF92bS5fdigiICIpLCBfYygnc3ltYm9sJywgewogICAgYXR0cnM6IHsKICAgICAgImlkIjogInZzc3VlLWljb24tZGVsZXRlIiwKICAgICAgInZpZXdCb3giOiAiMCAwIDEwMjQgMTAyNCIKICAgIH0KICB9LCBbX2MoJ3BhdGgnLCB7CiAgICBhdHRyczogewogICAgICAiZCI6ICJNNjc3LjY0NzA1OSAyNTZsMC05MC4zNTI5NDFjMC0zNy40MzYyMzUtMjMuNDYxNjQ3LTYwLjIzNTI5NC02MS43NzEyOTQtNjAuMjM1Mjk0TDQwOC4wOTQxMTggMTA1LjQxMTc2NWMtMzguMjQ5NDEyIDAtNjEuNzQxMTc2IDIyLjc5OTA1OS02MS43NDExNzYgNjAuMjM1Mjk0bDAgOTAuMzUyOTQxLTE4MC43MDU4ODIgMCAwIDYwLjIzNTI5NCA2MC4yMzUyOTQgMCAwIDUxMmMwIDU0LjI3MiAzMy45NzI3MDYgOTAuMzUyOTQxIDkwLjM1Mjk0MSA5MC4zNTI5NDFsMzkxLjUyOTQxMiAwYzU1LjA4NTE3NiAwIDkwLjM1Mjk0MS0zMy40OTA4MjQgOTAuMzUyOTQxLTkwLjM1Mjk0MWwwLTUxMiA2MC4yMzUyOTQgMCAwLTYwLjIzNTI5NEw2NzcuNjQ3MDU5IDI1NnpNNDA2LjU4ODIzNSAxNjUuNjQ3MDU5bDIxMC44MjM1MjkgMC0xLjI2NDk0MSA5MC4zNTI5NDFMNDA2LjU4ODIzNSAyNTYgNDA2LjU4ODIzNSAxNjUuNjQ3MDU5ek03MzcuODgyMzUzIDg1OC4zNTI5NDFsLTQ1MS43NjQ3MDYgMCAwLTU0Mi4xMTc2NDcgNDUxLjc2NDcwNiAwTDczNy44ODIzNTMgODU4LjM1Mjk0MXpNNDY2LjgyMzUyOSAzNzYuNDcwNTg4bC01OC43Mjk0MTIgMC0xLjUwNTg4MiAzOTEuNTI5NDEyIDYwLjIzNTI5NCAwTDQ2Ni44MjM1MjkgMzc2LjQ3MDU4OHpNNjE3LjQxMTc2NSAzNzYuNDcwNTg4bC02MC4yMzUyOTQgMCAwIDM5MS41Mjk0MTIgNjAuMjM1Mjk0IDBMNjE3LjQxMTc2NSAzNzYuNDcwNTg4eiIKICAgIH0KICB9KV0pLCBfdm0uX3YoIiAiKSwgX2MoJ3N5bWJvbCcsIHsKICAgIGF0dHJzOiB7CiAgICAgICJpZCI6ICJ2c3N1ZS1pY29uLXJlcGx5IiwKICAgICAgInZpZXdCb3giOiAiMCAwIDEwMjQgMTAyNCIKICAgIH0KICB9LCBbX2MoJ3BhdGgnLCB7CiAgICBhdHRyczogewogICAgICAiZCI6ICJNNDI2LjY2NjY2NyAzODQgNDI2LjY2NjY2NyAyMTMuMzMzMzMzIDEyOCA1MTIgNDI2LjY2NjY2NyA4MTAuNjY2NjY3IDQyNi42NjY2NjcgNjM1LjczMzMzM0M2NDAgNjM1LjczMzMzMyA3ODkuMzMzMzMzIDcwNCA4OTYgODUzLjMzMzMzMyA4NTMuMzMzMzMzIDY0MCA3MjUuMzMzMzMzIDQyNi42NjY2NjcgNDI2LjY2NjY2NyAzODRaIgogICAgfQogIH0pXSksIF92bS5fdigiICIpLCBfYygnc3ltYm9sJywgewogICAgYXR0cnM6IHsKICAgICAgImlkIjogInZzc3VlLWljb24tZXJyb3IiLAogICAgICAidmlld0JveCI6ICIwIDAgMTAyNCAxMDI0IgogICAgfQogIH0sIFtfYygncGF0aCcsIHsKICAgIGF0dHJzOiB7CiAgICAgICJkIjogIk01MTIgNzIwbS00OCAwYTQ4IDQ4IDAgMSAwIDk2IDAgNDggNDggMCAxIDAtOTYgMFoiCiAgICB9CiAgfSksIF92bS5fdigiICIpLCBfYygncGF0aCcsIHsKICAgIGF0dHJzOiB7CiAgICAgICJkIjogIk00ODAgNDE2djE4NGMwIDQuNCAzLjYgOCA4IDhoNDhjNC40IDAgOC0zLjYgOC04VjQxNmMwLTQuNC0zLjYtOC04LThoLTQ4Yy00LjQgMC04IDMuNi04IDh6IgogICAgfQogIH0pLCBfdm0uX3YoIiAiKSwgX2MoJ3BhdGgnLCB7CiAgICBhdHRyczogewogICAgICAiZCI6ICJNOTU1LjcgODU2bC00MTYtNzIwYy02LjItMTAuNy0xNi45LTE2LTI3LjctMTZzLTIxLjYgNS4zLTI3LjcgMTZsLTQxNiA3MjBDNTYgODc3LjQgNzEuNCA5MDQgOTYgOTA0aDgzMmMyNC42IDAgNDAtMjYuNiAyNy43LTQ4eiBtLTc4My41LTI3LjlMNTEyIDIzOS45bDMzOS44IDU4OC4ySDE3Mi4yeiIKICAgIH0KICB9KV0pXSk7Cn07Cgp2YXIgX192dWVfc3RhdGljUmVuZGVyRm5zX18gPSBbXTsKLyogc3R5bGUgKi8KCnZhciBfX3Z1ZV9pbmplY3Rfc3R5bGVzX18gPSB1bmRlZmluZWQ7Ci8qIHNjb3BlZCAqLwoKdmFyIF9fdnVlX3Njb3BlX2lkX18gPSB1bmRlZmluZWQ7Ci8qIG1vZHVsZSBpZGVudGlmaWVyICovCgp2YXIgX192dWVfbW9kdWxlX2lkZW50aWZpZXJfXyA9IHVuZGVmaW5lZDsKLyogZnVuY3Rpb25hbCB0ZW1wbGF0ZSAqLwoKdmFyIF9fdnVlX2lzX2Z1bmN0aW9uYWxfdGVtcGxhdGVfXyA9IHRydWU7Ci8qIHN0eWxlIGluamVjdCAqLwoKLyogc3R5bGUgaW5qZWN0IFNTUiAqLwoKLyogc3R5bGUgaW5qZWN0IHNoYWRvdyBkb20gKi8KCnZhciBfX3Z1ZV9jb21wb25lbnRfXyA9IG5vcm1hbGl6ZUNvbXBvbmVudCh7CiAgcmVuZGVyOiBfX3Z1ZV9yZW5kZXJfXywKICBzdGF0aWNSZW5kZXJGbnM6IF9fdnVlX3N0YXRpY1JlbmRlckZuc19fCn0sIF9fdnVlX2luamVjdF9zdHlsZXNfXywgX192dWVfc2NyaXB0X18sIF9fdnVlX3Njb3BlX2lkX18sIF9fdnVlX2lzX2Z1bmN0aW9uYWxfdGVtcGxhdGVfXywgX192dWVfbW9kdWxlX2lkZW50aWZpZXJfXywgZmFsc2UsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB1bmRlZmluZWQpOwoKdmFyIHNjcmlwdCQxID0gVnVlLmV4dGVuZCh7CiAgbmFtZTogJ1RyYW5zaXRpb25GYWRlJywKICBmdW5jdGlvbmFsOiB0cnVlLAogIHByb3BzOiB7CiAgICBncm91cDogewogICAgICB0eXBlOiBCb29sZWFuLAogICAgICByZXF1aXJlZDogZmFsc2UsCiAgICAgICJkZWZhdWx0IjogZmFsc2UKICAgIH0sCiAgICB0YWc6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICByZXF1aXJlZDogZmFsc2UsCiAgICAgICJkZWZhdWx0IjogJ2RpdicKICAgIH0KICB9LAogIHJlbmRlcjogZnVuY3Rpb24gcmVuZGVyKGgsIF9yZWYpIHsKICAgIHZhciBwcm9wcyA9IF9yZWYucHJvcHMsCiAgICAgICAgY2hpbGRyZW4gPSBfcmVmLmNoaWxkcmVuOwogICAgcmV0dXJuIGgocHJvcHMuZ3JvdXAgPyAnVHJhbnNpdGlvbkdyb3VwJyA6ICdUcmFuc2l0aW9uJywgewogICAgICBwcm9wczogewogICAgICAgIG5hbWU6ICdmYWRlJywKICAgICAgICBtb2RlOiAnb3V0LWluJywKICAgICAgICBhcHBlYXI6IHRydWUsCiAgICAgICAgdGFnOiBwcm9wcy50YWcKICAgICAgfQogICAgfSwgY2hpbGRyZW4pOwogIH0KfSk7Ci8qIHNjcmlwdCAqLwoKdmFyIF9fdnVlX3NjcmlwdF9fJDEgPSBzY3JpcHQkMTsKLyogdGVtcGxhdGUgKi8KCi8qIHN0eWxlICovCgp2YXIgX192dWVfaW5qZWN0X3N0eWxlc19fJDEgPSB1bmRlZmluZWQ7Ci8qIHNjb3BlZCAqLwoKdmFyIF9fdnVlX3Njb3BlX2lkX18kMSA9IHVuZGVmaW5lZDsKLyogbW9kdWxlIGlkZW50aWZpZXIgKi8KCnZhciBfX3Z1ZV9tb2R1bGVfaWRlbnRpZmllcl9fJDEgPSB1bmRlZmluZWQ7Ci8qIGZ1bmN0aW9uYWwgdGVtcGxhdGUgKi8KCnZhciBfX3Z1ZV9pc19mdW5jdGlvbmFsX3RlbXBsYXRlX18kMSA9IHVuZGVmaW5lZDsKLyogc3R5bGUgaW5qZWN0ICovCgovKiBzdHlsZSBpbmplY3QgU1NSICovCgovKiBzdHlsZSBpbmplY3Qgc2hhZG93IGRvbSAqLwoKdmFyIF9fdnVlX2NvbXBvbmVudF9fJDEgPSBub3JtYWxpemVDb21wb25lbnQoe30sIF9fdnVlX2luamVjdF9zdHlsZXNfXyQxLCBfX3Z1ZV9zY3JpcHRfXyQxLCBfX3Z1ZV9zY29wZV9pZF9fJDEsIF9fdnVlX2lzX2Z1bmN0aW9uYWxfdGVtcGxhdGVfXyQxLCBfX3Z1ZV9tb2R1bGVfaWRlbnRpZmllcl9fJDEsIGZhbHNlLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgdW5kZWZpbmVkKTsKCnZhciBzY3JpcHQkMiA9IFZ1ZS5leHRlbmQoewogIG5hbWU6ICdWc3N1ZUljb24nLAogIGZ1bmN0aW9uYWw6IHRydWUsCiAgcHJvcHM6IHsKICAgIG5hbWU6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICByZXF1aXJlZDogdHJ1ZQogICAgfSwKICAgIHRpdGxlOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgcmVxdWlyZWQ6IGZhbHNlLAogICAgICAiZGVmYXVsdCI6IG51bGwKICAgIH0KICB9LAogIHJlbmRlcjogZnVuY3Rpb24gcmVuZGVyKGgsIF9yZWYyKSB7CiAgICB2YXIgcHJvcHMgPSBfcmVmMi5wcm9wcywKICAgICAgICBkYXRhID0gX3JlZjIuZGF0YTsKICAgIHJldHVybiBoKCdzdmcnLCBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIGRhdGEpLCB7CiAgICAgICJjbGFzcyI6IFsndnNzdWUtaWNvbicsICJ2c3N1ZS1pY29uLSIuY29uY2F0KHByb3BzLm5hbWUpXSwKICAgICAgYXR0cnM6IHsKICAgICAgICAnYXJpYS1oaWRkZW4nOiAndHJ1ZScKICAgICAgfQogICAgfSksIFtoKCd0aXRsZScsIHByb3BzLnRpdGxlKSwgaCgndXNlJywgewogICAgICBhdHRyczogewogICAgICAgICd4bGluazpocmVmJzogIiN2c3N1ZS1pY29uLSIuY29uY2F0KHByb3BzLm5hbWUpCiAgICAgIH0KICAgIH0pXSk7CiAgfQp9KTsKLyogc2NyaXB0ICovCgp2YXIgX192dWVfc2NyaXB0X18kMiA9IHNjcmlwdCQyOwovKiB0ZW1wbGF0ZSAqLwoKLyogc3R5bGUgKi8KCnZhciBfX3Z1ZV9pbmplY3Rfc3R5bGVzX18kMiA9IHVuZGVmaW5lZDsKLyogc2NvcGVkICovCgp2YXIgX192dWVfc2NvcGVfaWRfXyQyID0gdW5kZWZpbmVkOwovKiBtb2R1bGUgaWRlbnRpZmllciAqLwoKdmFyIF9fdnVlX21vZHVsZV9pZGVudGlmaWVyX18kMiA9IHVuZGVmaW5lZDsKLyogZnVuY3Rpb25hbCB0ZW1wbGF0ZSAqLwoKdmFyIF9fdnVlX2lzX2Z1bmN0aW9uYWxfdGVtcGxhdGVfXyQyID0gdW5kZWZpbmVkOwovKiBzdHlsZSBpbmplY3QgKi8KCi8qIHN0eWxlIGluamVjdCBTU1IgKi8KCi8qIHN0eWxlIGluamVjdCBzaGFkb3cgZG9tICovCgp2YXIgX192dWVfY29tcG9uZW50X18kMiA9IG5vcm1hbGl6ZUNvbXBvbmVudCh7fSwgX192dWVfaW5qZWN0X3N0eWxlc19fJDIsIF9fdnVlX3NjcmlwdF9fJDIsIF9fdnVlX3Njb3BlX2lkX18kMiwgX192dWVfaXNfZnVuY3Rpb25hbF90ZW1wbGF0ZV9fJDIsIF9fdnVlX21vZHVsZV9pZGVudGlmaWVyX18kMiwgZmFsc2UsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB1bmRlZmluZWQpOwoKdmFyIFZzc3VlQ29tbWVudCA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoX1Z1ZSQpIHsKICBfaW5oZXJpdHMoVnNzdWVDb21tZW50LCBfVnVlJCk7CgogIHZhciBfc3VwZXIgPSBfY3JlYXRlU3VwZXIoVnNzdWVDb21tZW50KTsKCiAgZnVuY3Rpb24gVnNzdWVDb21tZW50KCkgewogICAgdmFyIF90aGlzOwoKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBWc3N1ZUNvbW1lbnQpOwoKICAgIF90aGlzID0gX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICBfdGhpcy5lZGl0TW9kZSA9IGZhbHNlOwogICAgX3RoaXMuZWRpdENvbnRlbnQgPSBfdGhpcy5jb21tZW50LmNvbnRlbnRSYXc7CiAgICBfdGhpcy5jcmVhdGluZ1JlYWN0aW9ucyA9IFtdOwogICAgX3RoaXMuaXNQdXRpbmdDb21tZW50ID0gZmFsc2U7CiAgICBfdGhpcy5pc0RlbGV0aW5nQ29tbWVudCA9IGZhbHNlOwogICAgcmV0dXJuIF90aGlzOwogIH0KCiAgX2NyZWF0ZUNsYXNzKFZzc3VlQ29tbWVudCwgW3sKICAgIGtleTogImN1cnJlbnRVc2VyIiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICByZXR1cm4gdGhpcy52c3N1ZS51c2VyID8gdGhpcy52c3N1ZS51c2VyLnVzZXJuYW1lIDogbnVsbDsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJjb250ZW50IiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICByZXR1cm4gdGhpcy5jb21tZW50LmNvbnRlbnQ7CiAgICB9CiAgfSwgewogICAga2V5OiAiYXV0aG9yIiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICByZXR1cm4gdGhpcy5jb21tZW50LmF1dGhvcjsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJjcmVhdGVkQXQiLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHJldHVybiBmb3JtYXREYXRlVGltZSh0aGlzLmNvbW1lbnQuY3JlYXRlZEF0KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJ1cGRhdGVkQXQiLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHJldHVybiBmb3JtYXREYXRlVGltZSh0aGlzLmNvbW1lbnQudXBkYXRlZEF0KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJzaG93UmVhY3Rpb25zIiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICByZXR1cm4gQm9vbGVhbih0aGlzLnZzc3VlLkFQSSAmJiB0aGlzLnZzc3VlLkFQSS5wbGF0Zm9ybS5tZXRhLnJlYWN0YWJsZSAmJiB0aGlzLmNvbW1lbnQucmVhY3Rpb25zICYmICF0aGlzLmVkaXRNb2RlKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJyZWFjdGlvbktleXMiLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHJldHVybiBbJ2hlYXJ0JywgJ2xpa2UnLCAndW5saWtlJ107CiAgICB9CiAgfSwgewogICAga2V5OiAiZWRpdENvbnRlbnRSb3dzIiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICByZXR1cm4gdGhpcy5lZGl0Q29udGVudC5zcGxpdCgnXG4nKS5sZW5ndGggLSAxOwogICAgfQogIH0sIHsKICAgIGtleTogImVkaXRJbnB1dFJvd3MiLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHJldHVybiB0aGlzLmVkaXRDb250ZW50Um93cyA8IDMgPyA1IDogdGhpcy5lZGl0Q29udGVudFJvd3MgKyAyOwogICAgfQogIH0sIHsKICAgIGtleTogInBvc3RSZWFjdGlvbiIsCiAgICB2YWx1ZTogZnVuY3Rpb24gKCkgewogICAgICB2YXIgX3Bvc3RSZWFjdGlvbiA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZShfcmVmMykgewogICAgICAgIHZhciByZWFjdGlvbiwgc3VjY2VzcywgcmVhY3Rpb25zOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIHJlYWN0aW9uID0gX3JlZjMucmVhY3Rpb247CiAgICAgICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMTsKCiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuY3JlYXRpbmdSZWFjdGlvbnMuaW5jbHVkZXMocmVhY3Rpb24pKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA0OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgICAgdGhpcy5jcmVhdGluZ1JlYWN0aW9ucy5wdXNoKHJlYWN0aW9uKTsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA3OwogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMudnNzdWUucG9zdENvbW1lbnRSZWFjdGlvbih7CiAgICAgICAgICAgICAgICAgIGNvbW1lbnRJZDogdGhpcy5jb21tZW50LmlkLAogICAgICAgICAgICAgICAgICByZWFjdGlvbjogcmVhY3Rpb24KICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgICBzdWNjZXNzID0gX2NvbnRleHQuc2VudDsKCiAgICAgICAgICAgICAgICBpZiAoIXN1Y2Nlc3MpIHsKICAgICAgICAgICAgICAgICAgdGhpcy52c3N1ZS4kZW1pdCgnZXJyb3InLCBuZXcgRXJyb3IodGhpcy52c3N1ZS4kdCgncmVhY3Rpb25HaXZlbicsIHsKICAgICAgICAgICAgICAgICAgICByZWFjdGlvbjogdGhpcy52c3N1ZS4kdChyZWFjdGlvbikKICAgICAgICAgICAgICAgICAgfSkpKTsKICAgICAgICAgICAgICAgIH0gLy8gYWx3YXlzIHJlZnJlc2ggcmVhY3Rpb25zIGV2ZW4gYWxyZWFkeSBnaXZlbgoKCiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTE7CiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy52c3N1ZS5nZXRDb21tZW50UmVhY3Rpb25zKHsKICAgICAgICAgICAgICAgICAgY29tbWVudElkOiB0aGlzLmNvbW1lbnQuaWQKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDExOgogICAgICAgICAgICAgICAgcmVhY3Rpb25zID0gX2NvbnRleHQuc2VudDsKCiAgICAgICAgICAgICAgICBpZiAocmVhY3Rpb25zKSB7CiAgICAgICAgICAgICAgICAgIHRoaXMuY29tbWVudC5yZWFjdGlvbnMgPSByZWFjdGlvbnM7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGNhc2UgMTM6CiAgICAgICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMTM7CiAgICAgICAgICAgICAgICB0aGlzLmNyZWF0aW5nUmVhY3Rpb25zLnNwbGljZSh0aGlzLmNyZWF0aW5nUmVhY3Rpb25zLmZpbmRJbmRleChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgICAgICAgICByZXR1cm4gaXRlbSA9PT0gcmVhY3Rpb247CiAgICAgICAgICAgICAgICB9KSwgMSk7CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuZmluaXNoKDEzKTsKCiAgICAgICAgICAgICAgY2FzZSAxNjoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUsIHRoaXMsIFtbMSwsIDEzLCAxNl1dKTsKICAgICAgfSkpOwoKICAgICAgZnVuY3Rpb24gcG9zdFJlYWN0aW9uKF94KSB7CiAgICAgICAgcmV0dXJuIF9wb3N0UmVhY3Rpb24uYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfQoKICAgICAgcmV0dXJuIHBvc3RSZWFjdGlvbjsKICAgIH0oKQogIH0sIHsKICAgIGtleTogImVudGVyRWRpdCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZW50ZXJFZGl0KCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHRoaXMuZWRpdE1vZGUgPSB0cnVlOwogICAgICB0aGlzLiRuZXh0VGljayhmdW5jdGlvbiAoKSB7CiAgICAgICAgX3RoaXMyLiRyZWZzLmlucHV0LmZvY3VzKCk7CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogInJlc2V0RWRpdCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcmVzZXRFZGl0KCkgewogICAgICB0aGlzLmVkaXRNb2RlID0gZmFsc2U7CiAgICAgIHRoaXMuZWRpdENvbnRlbnQgPSB0aGlzLmNvbW1lbnQuY29udGVudFJhdzsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJwdXRDb21tZW50IiwKICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfcHV0Q29tbWVudCA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIoKSB7CiAgICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgICAgIHZhciBjb21tZW50OwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfY29udGV4dDIucHJldiA9IDA7CgogICAgICAgICAgICAgICAgaWYgKCF0aGlzLnZzc3VlLmlzUGVuZGluZykgewogICAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDM7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgaWYgKCEodGhpcy5lZGl0Q29udGVudCAhPT0gdGhpcy5jb21tZW50LmNvbnRlbnRSYXcpKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMTA7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHRoaXMuaXNQdXRpbmdDb21tZW50ID0gdHJ1ZTsKICAgICAgICAgICAgICAgIHRoaXMudnNzdWUuaXNVcGRhdGluZ0NvbW1lbnQgPSB0cnVlOwogICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA4OwogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMudnNzdWUucHV0Q29tbWVudCh7CiAgICAgICAgICAgICAgICAgIGNvbW1lbnRJZDogdGhpcy5jb21tZW50LmlkLAogICAgICAgICAgICAgICAgICBjb250ZW50OiB0aGlzLmVkaXRDb250ZW50CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICAgICAgY29tbWVudCA9IF9jb250ZXh0Mi5zZW50OwoKICAgICAgICAgICAgICAgIGlmIChjb21tZW50KSB7CiAgICAgICAgICAgICAgICAgIHRoaXMudnNzdWUuY29tbWVudHMuZGF0YS5zcGxpY2UodGhpcy52c3N1ZS5jb21tZW50cy5kYXRhLmZpbmRJbmRleChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBpdGVtLmlkID09PSBfdGhpczMuY29tbWVudC5pZDsKICAgICAgICAgICAgICAgICAgfSksIDEsIGNvbW1lbnQpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICAgICAgdGhpcy5lZGl0TW9kZSA9IGZhbHNlOwoKICAgICAgICAgICAgICBjYXNlIDExOgogICAgICAgICAgICAgICAgX2NvbnRleHQyLnByZXYgPSAxMTsKICAgICAgICAgICAgICAgIHRoaXMuaXNQdXRpbmdDb21tZW50ID0gZmFsc2U7CiAgICAgICAgICAgICAgICB0aGlzLnZzc3VlLmlzVXBkYXRpbmdDb21tZW50ID0gZmFsc2U7CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLmZpbmlzaCgxMSk7CgogICAgICAgICAgICAgIGNhc2UgMTU6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTIsIHRoaXMsIFtbMCwsIDExLCAxNV1dKTsKICAgICAgfSkpOwoKICAgICAgZnVuY3Rpb24gcHV0Q29tbWVudCgpIHsKICAgICAgICByZXR1cm4gX3B1dENvbW1lbnQuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfQoKICAgICAgcmV0dXJuIHB1dENvbW1lbnQ7CiAgICB9KCkKICB9LCB7CiAgICBrZXk6ICJkZWxldGVDb21tZW50IiwKICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfZGVsZXRlQ29tbWVudCA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTMoKSB7CiAgICAgICAgdmFyIF90aGlzNCA9IHRoaXM7CgogICAgICAgIHZhciBzdWNjZXNzOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMyQoX2NvbnRleHQzKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0My5wcmV2ID0gX2NvbnRleHQzLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfY29udGV4dDMucHJldiA9IDA7CgogICAgICAgICAgICAgICAgaWYgKCF0aGlzLnZzc3VlLmlzUGVuZGluZykgewogICAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDM7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgaWYgKHdpbmRvdy5jb25maXJtKHRoaXMudnNzdWUuJHQoJ2RlbGV0ZUNvbmZpcm0nKSkpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSA1OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICAgIHRoaXMuaXNEZWxldGluZ0NvbW1lbnQgPSB0cnVlOwogICAgICAgICAgICAgICAgdGhpcy52c3N1ZS5pc1VwZGF0aW5nQ29tbWVudCA9IHRydWU7CiAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDk7CiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy52c3N1ZS5kZWxldGVDb21tZW50KHsKICAgICAgICAgICAgICAgICAgY29tbWVudElkOiB0aGlzLmNvbW1lbnQuaWQKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICAgICAgICBzdWNjZXNzID0gX2NvbnRleHQzLnNlbnQ7CgogICAgICAgICAgICAgICAgaWYgKCFzdWNjZXNzKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMjE7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIC8vIGRlY3JlYXNlIGNvdW50IGltbWVkaWF0ZWx5CiAgICAgICAgICAgICAgICB0aGlzLnZzc3VlLmNvbW1lbnRzLmNvdW50IC09IDE7IC8vIGlmIHRoZXJlIGFyZSBtb3JlIHRoYW4gb25lIGNvbW1lbnQgb24gdGhpcyBwYWdlLCByZW1vdmUgdGhlIGRlbGV0ZWQgY29tbWVudCBpbW1lZGlhdGVseQoKICAgICAgICAgICAgICAgIGlmICh0aGlzLnZzc3VlLmNvbW1lbnRzLmRhdGEubGVuZ3RoID4gMSkgewogICAgICAgICAgICAgICAgICB0aGlzLnZzc3VlLmNvbW1lbnRzLmRhdGEuc3BsaWNlKHRoaXMudnNzdWUuY29tbWVudHMuZGF0YS5maW5kSW5kZXgoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gaXRlbS5pZCA9PT0gX3RoaXM0LmNvbW1lbnQuaWQ7CiAgICAgICAgICAgICAgICAgIH0pLCAxKTsKICAgICAgICAgICAgICAgIH0gLy8gaWYgdGhlIHBhZ2UgY291bnQgc2hvdWxkIGJlIGRlY3JlYXNlZCwgY2hhbmdlIHRoZSBxdWVyeSBwYXJhbSB0byB0cmlnZ2VyIGNvbW1lbnRzIHJlbG9hZAoKCiAgICAgICAgICAgICAgICBpZiAoISh0aGlzLnZzc3VlLnF1ZXJ5LnBhZ2UgPiAxICYmIHRoaXMudnNzdWUucXVlcnkucGFnZSA+IE1hdGguY2VpbCh0aGlzLnZzc3VlLmNvbW1lbnRzLmNvdW50IC8gdGhpcy52c3N1ZS5xdWVyeS5wZXJQYWdlKSkpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAxNzsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgdGhpcy52c3N1ZS5xdWVyeS5wYWdlIC09IDE7CiAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDE5OwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgMTc6CiAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDE5OwogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMudnNzdWUuZ2V0Q29tbWVudHMoKTsKCiAgICAgICAgICAgICAgY2FzZSAxOToKICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMjI7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSAyMToKICAgICAgICAgICAgICAgIHRoaXMudnNzdWUuJGVtaXQoJ2Vycm9yJywgbmV3IEVycm9yKHRoaXMudnNzdWUuJHQoJ2RlbGV0ZUZhaWxlZCcpKSk7CgogICAgICAgICAgICAgIGNhc2UgMjI6CiAgICAgICAgICAgICAgICBfY29udGV4dDMucHJldiA9IDIyOwogICAgICAgICAgICAgICAgdGhpcy5pc0RlbGV0aW5nQ29tbWVudCA9IGZhbHNlOwogICAgICAgICAgICAgICAgdGhpcy52c3N1ZS5pc1VwZGF0aW5nQ29tbWVudCA9IGZhbHNlOwogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5maW5pc2goMjIpOwoKICAgICAgICAgICAgICBjYXNlIDI2OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUzLCB0aGlzLCBbWzAsLCAyMiwgMjZdXSk7CiAgICAgIH0pKTsKCiAgICAgIGZ1bmN0aW9uIGRlbGV0ZUNvbW1lbnQoKSB7CiAgICAgICAgcmV0dXJuIF9kZWxldGVDb21tZW50LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KCiAgICAgIHJldHVybiBkZWxldGVDb21tZW50OwogICAgfSgpCiAgfV0pOwoKICByZXR1cm4gVnNzdWVDb21tZW50Owp9KFZ1ZSQxKTsKCl9fZGVjb3JhdGUoW1Byb3AoewogIHR5cGU6IE9iamVjdCwKICByZXF1aXJlZDogdHJ1ZQp9KV0sIFZzc3VlQ29tbWVudC5wcm90b3R5cGUsICJjb21tZW50Iiwgdm9pZCAwKTsKCl9fZGVjb3JhdGUoW0luamVjdCgpXSwgVnNzdWVDb21tZW50LnByb3RvdHlwZSwgInZzc3VlIiwgdm9pZCAwKTsKClZzc3VlQ29tbWVudCA9IF9fZGVjb3JhdGUoW0NvbXBvbmVudCh7CiAgY29tcG9uZW50czogewogICAgVnNzdWVJY29uOiBfX3Z1ZV9jb21wb25lbnRfXyQyCiAgfQp9KV0sIFZzc3VlQ29tbWVudCk7CnZhciBzY3JpcHQkMyA9IFZzc3VlQ29tbWVudDsKLyogc2NyaXB0ICovCgp2YXIgX192dWVfc2NyaXB0X18kMyA9IHNjcmlwdCQzOwovKiB0ZW1wbGF0ZSAqLwoKdmFyIF9fdnVlX3JlbmRlcl9fJDEgPSBmdW5jdGlvbiBfX3Z1ZV9yZW5kZXJfXyQxKCkgewogIHZhciBfdm0gPSB0aGlzOwoKICB2YXIgX2ggPSBfdm0uJGNyZWF0ZUVsZW1lbnQ7CgogIHZhciBfYyA9IF92bS5fc2VsZi5fYyB8fCBfaDsKCiAgcmV0dXJuIF9jKCdkaXYnLCB7CiAgICBzdGF0aWNDbGFzczogInZzc3VlLWNvbW1lbnQiLAogICAgImNsYXNzIjogewogICAgICAndnNzdWUtY29tbWVudC1lZGl0LW1vZGUnOiBfdm0uZWRpdE1vZGUsCiAgICAgICd2c3N1ZS1jb21tZW50LWRpc2FibGVkJzogX3ZtLmlzRGVsZXRpbmdDb21tZW50IHx8IF92bS5pc1B1dGluZ0NvbW1lbnQKICAgIH0KICB9LCBbX2MoJ2RpdicsIHsKICAgIHN0YXRpY0NsYXNzOiAidnNzdWUtY29tbWVudC1hdmF0YXIiCiAgfSwgW19jKCdhJywgewogICAgYXR0cnM6IHsKICAgICAgImhyZWYiOiBfdm0uYXV0aG9yLmhvbWVwYWdlLAogICAgICAidGl0bGUiOiBfdm0uYXV0aG9yLnVzZXJuYW1lLAogICAgICAidGFyZ2V0IjogIl9ibGFuayIsCiAgICAgICJyZWwiOiAibm9vcGVuZXIgbm9yZWZlcnJlciIKICAgIH0KICB9LCBbX2MoJ2ltZycsIHsKICAgIGF0dHJzOiB7CiAgICAgICJzcmMiOiBfdm0uYXV0aG9yLmF2YXRhciwKICAgICAgImFsdCI6IF92bS5hdXRob3IudXNlcm5hbWUKICAgIH0KICB9KV0pXSksIF92bS5fdigiICIpLCBfYygnZGl2JywgewogICAgc3RhdGljQ2xhc3M6ICJ2c3N1ZS1jb21tZW50LWJvZHkiCiAgfSwgW192bS5fdCgiYm9keSIsIFtfYygnZGl2JywgewogICAgc3RhdGljQ2xhc3M6ICJ2c3N1ZS1jb21tZW50LWhlYWRlciIKICB9LCBbX2MoJ3NwYW4nLCB7CiAgICBzdGF0aWNDbGFzczogInZzc3VlLWNvbW1lbnQtYXV0aG9yIgogIH0sIFtfYygnYScsIHsKICAgIGF0dHJzOiB7CiAgICAgICJocmVmIjogX3ZtLmF1dGhvci5ob21lcGFnZSwKICAgICAgInRpdGxlIjogX3ZtLmF1dGhvci51c2VybmFtZSwKICAgICAgInRhcmdldCI6ICJfYmxhbmsiLAogICAgICAicmVsIjogIm5vb3BlbmVyIG5vcmVmZXJyZXIiCiAgICB9CiAgfSwgW192bS5fdigiXG4gICAgICAgICAgICAiICsgX3ZtLl9zKF92bS5hdXRob3IudXNlcm5hbWUpICsgIlxuICAgICAgICAgICIpXSldKSwgX3ZtLl92KCIgIiksIF9jKCdzcGFuJywgewogICAgc3RhdGljQ2xhc3M6ICJ2c3N1ZS1jb21tZW50LWNyZWF0ZWQtYXQiCiAgfSwgW192bS5fdigiXG4gICAgICAgICAgIiArIF92bS5fcyhfdm0uY3JlYXRlZEF0KSArICJcbiAgICAgICAgIildKV0pLCBfdm0uX3YoIiAiKSwgX2MoJ2RpdicsIHsKICAgIHN0YXRpY0NsYXNzOiAidnNzdWUtY29tbWVudC1tYWluIgogIH0sIFtfdm0uZWRpdE1vZGUgPyBfYygndGV4dGFyZWEnLCB7CiAgICBkaXJlY3RpdmVzOiBbewogICAgICBuYW1lOiAibW9kZWwiLAogICAgICByYXdOYW1lOiAidi1tb2RlbCIsCiAgICAgIHZhbHVlOiBfdm0uZWRpdENvbnRlbnQsCiAgICAgIGV4cHJlc3Npb246ICJlZGl0Q29udGVudCIKICAgIH1dLAogICAgcmVmOiAiaW5wdXQiLAogICAgc3RhdGljQ2xhc3M6ICJ2c3N1ZS1lZGl0LWNvbW1lbnQtaW5wdXQiLAogICAgYXR0cnM6IHsKICAgICAgInJvd3MiOiBfdm0uZWRpdElucHV0Um93cwogICAgfSwKICAgIGRvbVByb3BzOiB7CiAgICAgICJ2YWx1ZSI6IF92bS5lZGl0Q29udGVudAogICAgfSwKICAgIG9uOiB7CiAgICAgICJrZXl1cCI6IGZ1bmN0aW9uIGtleXVwKCRldmVudCkgewogICAgICAgIGlmICghJGV2ZW50LnR5cGUuaW5kZXhPZigna2V5JykgJiYgX3ZtLl9rKCRldmVudC5rZXlDb2RlLCAiZW50ZXIiLCAxMywgJGV2ZW50LmtleSwgIkVudGVyIikpIHsKICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgIH0KCiAgICAgICAgaWYgKCEkZXZlbnQuY3RybEtleSkgewogICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gX3ZtLnB1dENvbW1lbnQoKTsKICAgICAgfSwKICAgICAgImlucHV0IjogZnVuY3Rpb24gaW5wdXQoJGV2ZW50KSB7CiAgICAgICAgaWYgKCRldmVudC50YXJnZXQuY29tcG9zaW5nKSB7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICBfdm0uZWRpdENvbnRlbnQgPSAkZXZlbnQudGFyZ2V0LnZhbHVlOwogICAgICB9CiAgICB9CiAgfSkgOiBfYygnYXJ0aWNsZScsIHsKICAgIHN0YXRpY0NsYXNzOiAibWFya2Rvd24tYm9keSIsCiAgICBkb21Qcm9wczogewogICAgICAiaW5uZXJIVE1MIjogX3ZtLl9zKF92bS5jb250ZW50KQogICAgfQogIH0pXSksIF92bS5fdigiICIpLCBfYygnZGl2JywgewogICAgc3RhdGljQ2xhc3M6ICJ2c3N1ZS1jb21tZW50LWZvb3RlciIKICB9LCBbX3ZtLmVkaXRNb2RlID8gX2MoJ3NwYW4nLCB7CiAgICBzdGF0aWNDbGFzczogInZzc3VlLWNvbW1lbnQtaGludCIKICB9LCBbX3ZtLl92KCJcbiAgICAgICAgICAiICsgX3ZtLl9zKF92bS52c3N1ZS4kdCgnZWRpdE1vZGUnKSkgKyAiXG4gICAgICAgICIpXSkgOiBfdm0uX2UoKSwgX3ZtLl92KCIgIiksIF92bS5zaG93UmVhY3Rpb25zID8gX2MoJ3NwYW4nLCB7CiAgICBzdGF0aWNDbGFzczogInZzc3VlLWNvbW1lbnQtcmVhY3Rpb25zIgogIH0sIF92bS5fbChfdm0ucmVhY3Rpb25LZXlzLCBmdW5jdGlvbiAocmVhY3Rpb24pIHsKICAgIHJldHVybiBfYygnc3BhbicsIHsKICAgICAga2V5OiByZWFjdGlvbiwKICAgICAgc3RhdGljQ2xhc3M6ICJ2c3N1ZS1jb21tZW50LXJlYWN0aW9uIiwKICAgICAgYXR0cnM6IHsKICAgICAgICAidGl0bGUiOiBfdm0udnNzdWUuJHQoX3ZtLmNyZWF0aW5nUmVhY3Rpb25zLmluY2x1ZGVzKHJlYWN0aW9uKSA/ICdsb2FkaW5nJyA6IHJlYWN0aW9uKQogICAgICB9LAogICAgICBvbjogewogICAgICAgICJjbGljayI6IGZ1bmN0aW9uIGNsaWNrKCRldmVudCkgewogICAgICAgICAgcmV0dXJuIF92bS5wb3N0UmVhY3Rpb24oewogICAgICAgICAgICByZWFjdGlvbjogcmVhY3Rpb24KICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfQogICAgfSwgW19jKCdWc3N1ZUljb24nLCB7CiAgICAgIGF0dHJzOiB7CiAgICAgICAgIm5hbWUiOiBfdm0uY3JlYXRpbmdSZWFjdGlvbnMuaW5jbHVkZXMocmVhY3Rpb24pID8gJ2xvYWRpbmcnIDogcmVhY3Rpb24sCiAgICAgICAgInRpdGxlIjogX3ZtLnZzc3VlLiR0KF92bS5jcmVhdGluZ1JlYWN0aW9ucy5pbmNsdWRlcyhyZWFjdGlvbikgPyAnbG9hZGluZycgOiByZWFjdGlvbikKICAgICAgfQogICAgfSksIF92bS5fdigiICIpLCBfYygnc3BhbicsIHsKICAgICAgc3RhdGljQ2xhc3M6ICJ2c3N1ZS1jb21tZW50LXJlYWN0aW9uLW51bWJlciIKICAgIH0sIFtfdm0uX3YoIlxuICAgICAgICAgICAgICAiICsgX3ZtLl9zKF92bS5jb21tZW50LnJlYWN0aW9uc1tyZWFjdGlvbl0pICsgIlxuICAgICAgICAgICAgIildKV0sIDEpOwogIH0pLCAwKSA6IF92bS5fZSgpLCBfdm0uX3YoIiAiKSwgX2MoJ3NwYW4nLCB7CiAgICBzdGF0aWNDbGFzczogInZzc3VlLWNvbW1lbnQtb3BlcmF0aW9ucyIKICB9LCBbX3ZtLmNvbW1lbnQuYXV0aG9yLnVzZXJuYW1lID09PSBfdm0uY3VycmVudFVzZXIgJiYgX3ZtLmVkaXRNb2RlID8gX2MoJ3NwYW4nLCB7CiAgICBzdGF0aWNDbGFzczogInZzc3VlLWNvbW1lbnQtb3BlcmF0aW9uIiwKICAgICJjbGFzcyI6IHsKICAgICAgJ3Zzc3VlLWNvbW1lbnQtb3BlcmF0aW9uLW11dGVkJzogX3ZtLmlzUHV0aW5nQ29tbWVudAogICAgfSwKICAgIGF0dHJzOiB7CiAgICAgICJ0aXRsZSI6IF92bS52c3N1ZS4kdChfdm0uaXNQdXRpbmdDb21tZW50ID8gJ2xvYWRpbmcnIDogJ3N1Ym1pdCcpCiAgICB9LAogICAgb246IHsKICAgICAgImNsaWNrIjogZnVuY3Rpb24gY2xpY2soJGV2ZW50KSB7CiAgICAgICAgcmV0dXJuIF92bS5wdXRDb21tZW50KCk7CiAgICAgIH0KICAgIH0KICB9LCBbX2MoJ1Zzc3VlSWNvbicsIHsKICAgIGRpcmVjdGl2ZXM6IFt7CiAgICAgIG5hbWU6ICJzaG93IiwKICAgICAgcmF3TmFtZTogInYtc2hvdyIsCiAgICAgIHZhbHVlOiBfdm0uaXNQdXRpbmdDb21tZW50LAogICAgICBleHByZXNzaW9uOiAiaXNQdXRpbmdDb21tZW50IgogICAgfV0sCiAgICBhdHRyczogewogICAgICAibmFtZSI6ICJsb2FkaW5nIiwKICAgICAgInRpdGxlIjogX3ZtLnZzc3VlLiR0KCdsb2FkaW5nJykKICAgIH0KICB9KSwgX3ZtLl92KCJcblxuICAgICAgICAgICAgIiArIF92bS5fcyhfdm0udnNzdWUuJHQoJ3N1Ym1pdCcpKSArICJcbiAgICAgICAgICAiKV0sIDEpIDogX3ZtLl9lKCksIF92bS5fdigiICIpLCBfdm0uY29tbWVudC5hdXRob3IudXNlcm5hbWUgPT09IF92bS5jdXJyZW50VXNlciAmJiBfdm0uZWRpdE1vZGUgPyBfYygnc3BhbicsIHsKICAgIHN0YXRpY0NsYXNzOiAidnNzdWUtY29tbWVudC1vcGVyYXRpb24gdnNzdWUtY29tbWVudC1vcGVyYXRpb24tbXV0ZWQiLAogICAgYXR0cnM6IHsKICAgICAgInRpdGxlIjogX3ZtLnZzc3VlLiR0KCdjYW5jZWwnKQogICAgfSwKICAgIG9uOiB7CiAgICAgICJjbGljayI6IGZ1bmN0aW9uIGNsaWNrKCRldmVudCkgewogICAgICAgIHJldHVybiBfdm0ucmVzZXRFZGl0KCk7CiAgICAgIH0KICAgIH0KICB9LCBbX3ZtLl92KCJcbiAgICAgICAgICAgICIgKyBfdm0uX3MoX3ZtLnZzc3VlLiR0KCdjYW5jZWwnKSkgKyAiXG4gICAgICAgICAgIildKSA6IF92bS5fZSgpLCBfdm0uX3YoIiAiKSwgX3ZtLmNvbW1lbnQuYXV0aG9yLnVzZXJuYW1lID09PSBfdm0uY3VycmVudFVzZXIgPyBfYygnc3BhbicsIHsKICAgIGRpcmVjdGl2ZXM6IFt7CiAgICAgIG5hbWU6ICJzaG93IiwKICAgICAgcmF3TmFtZTogInYtc2hvdyIsCiAgICAgIHZhbHVlOiAhX3ZtLmVkaXRNb2RlLAogICAgICBleHByZXNzaW9uOiAiIWVkaXRNb2RlIgogICAgfV0sCiAgICBzdGF0aWNDbGFzczogInZzc3VlLWNvbW1lbnQtb3BlcmF0aW9uIiwKICAgIG9uOiB7CiAgICAgICJjbGljayI6IGZ1bmN0aW9uIGNsaWNrKCRldmVudCkgewogICAgICAgIHJldHVybiBfdm0uZW50ZXJFZGl0KCk7CiAgICAgIH0KICAgIH0KICB9LCBbX2MoJ1Zzc3VlSWNvbicsIHsKICAgIGF0dHJzOiB7CiAgICAgICJuYW1lIjogImVkaXQiLAogICAgICAidGl0bGUiOiBfdm0udnNzdWUuJHQoJ2VkaXQnKQogICAgfQogIH0pXSwgMSkgOiBfdm0uX2UoKSwgX3ZtLl92KCIgIiksIF92bS5jb21tZW50LmF1dGhvci51c2VybmFtZSA9PT0gX3ZtLmN1cnJlbnRVc2VyIHx8IF92bS52c3N1ZS5pc0FkbWluID8gX2MoJ3NwYW4nLCB7CiAgICBkaXJlY3RpdmVzOiBbewogICAgICBuYW1lOiAic2hvdyIsCiAgICAgIHJhd05hbWU6ICJ2LXNob3ciLAogICAgICB2YWx1ZTogIV92bS5lZGl0TW9kZSwKICAgICAgZXhwcmVzc2lvbjogIiFlZGl0TW9kZSIKICAgIH1dLAogICAgc3RhdGljQ2xhc3M6ICJ2c3N1ZS1jb21tZW50LW9wZXJhdGlvbiIsCiAgICBvbjogewogICAgICAiY2xpY2siOiBmdW5jdGlvbiBjbGljaygkZXZlbnQpIHsKICAgICAgICByZXR1cm4gX3ZtLmRlbGV0ZUNvbW1lbnQoKTsKICAgICAgfQogICAgfQogIH0sIFtfYygnVnNzdWVJY29uJywgewogICAgYXR0cnM6IHsKICAgICAgIm5hbWUiOiBfdm0uaXNEZWxldGluZ0NvbW1lbnQgPyAnbG9hZGluZycgOiAnZGVsZXRlJywKICAgICAgInRpdGxlIjogX3ZtLnZzc3VlLiR0KF92bS5pc0RlbGV0aW5nQ29tbWVudCA/ICdsb2FkaW5nJyA6ICdkZWxldGUnKQogICAgfQogIH0pXSwgMSkgOiBfdm0uX2UoKSwgX3ZtLl92KCIgIiksIF9jKCdzcGFuJywgewogICAgZGlyZWN0aXZlczogW3sKICAgICAgbmFtZTogInNob3ciLAogICAgICByYXdOYW1lOiAidi1zaG93IiwKICAgICAgdmFsdWU6ICFfdm0uZWRpdE1vZGUsCiAgICAgIGV4cHJlc3Npb246ICIhZWRpdE1vZGUiCiAgICB9XSwKICAgIHN0YXRpY0NsYXNzOiAidnNzdWUtY29tbWVudC1vcGVyYXRpb24iLAogICAgb246IHsKICAgICAgImNsaWNrIjogZnVuY3Rpb24gY2xpY2soJGV2ZW50KSB7CiAgICAgICAgcmV0dXJuIF92bS52c3N1ZS4kZW1pdCgncmVwbHktY29tbWVudCcsIF92bS5jb21tZW50KTsKICAgICAgfQogICAgfQogIH0sIFtfYygnVnNzdWVJY29uJywgewogICAgYXR0cnM6IHsKICAgICAgIm5hbWUiOiAicmVwbHkiLAogICAgICAidGl0bGUiOiBfdm0udnNzdWUuJHQoJ3JlcGx5JykKICAgIH0KICB9KV0sIDEpXSldKV0pXSwgMildKTsKfTsKCnZhciBfX3Z1ZV9zdGF0aWNSZW5kZXJGbnNfXyQxID0gW107Ci8qIHN0eWxlICovCgp2YXIgX192dWVfaW5qZWN0X3N0eWxlc19fJDMgPSB1bmRlZmluZWQ7Ci8qIHNjb3BlZCAqLwoKdmFyIF9fdnVlX3Njb3BlX2lkX18kMyA9IHVuZGVmaW5lZDsKLyogbW9kdWxlIGlkZW50aWZpZXIgKi8KCnZhciBfX3Z1ZV9tb2R1bGVfaWRlbnRpZmllcl9fJDMgPSB1bmRlZmluZWQ7Ci8qIGZ1bmN0aW9uYWwgdGVtcGxhdGUgKi8KCnZhciBfX3Z1ZV9pc19mdW5jdGlvbmFsX3RlbXBsYXRlX18kMyA9IGZhbHNlOwovKiBzdHlsZSBpbmplY3QgKi8KCi8qIHN0eWxlIGluamVjdCBTU1IgKi8KCi8qIHN0eWxlIGluamVjdCBzaGFkb3cgZG9tICovCgp2YXIgX192dWVfY29tcG9uZW50X18kMyA9IG5vcm1hbGl6ZUNvbXBvbmVudCh7CiAgcmVuZGVyOiBfX3Z1ZV9yZW5kZXJfXyQxLAogIHN0YXRpY1JlbmRlckZuczogX192dWVfc3RhdGljUmVuZGVyRm5zX18kMQp9LCBfX3Z1ZV9pbmplY3Rfc3R5bGVzX18kMywgX192dWVfc2NyaXB0X18kMywgX192dWVfc2NvcGVfaWRfXyQzLCBfX3Z1ZV9pc19mdW5jdGlvbmFsX3RlbXBsYXRlX18kMywgX192dWVfbW9kdWxlX2lkZW50aWZpZXJfXyQzLCBmYWxzZSwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIHVuZGVmaW5lZCk7Cgp2YXIgVnNzdWVQYWdpbmF0aW9uID0gLyojX19QVVJFX18qL2Z1bmN0aW9uIChfVnVlJDIpIHsKICBfaW5oZXJpdHMoVnNzdWVQYWdpbmF0aW9uLCBfVnVlJDIpOwoKICB2YXIgX3N1cGVyMiA9IF9jcmVhdGVTdXBlcihWc3N1ZVBhZ2luYXRpb24pOwoKICBmdW5jdGlvbiBWc3N1ZVBhZ2luYXRpb24oKSB7CiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgVnNzdWVQYWdpbmF0aW9uKTsKCiAgICByZXR1cm4gX3N1cGVyMi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogIH0KCiAgX2NyZWF0ZUNsYXNzKFZzc3VlUGFnaW5hdGlvbiwgW3sKICAgIGtleTogImRpc2FibGVkIiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICByZXR1cm4gdGhpcy52c3N1ZS5pc1BlbmRpbmc7CiAgICB9CiAgfSwgewogICAga2V5OiAicGFnZUNvdW50IiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICB2YXIgcGFnZUNvdW50ID0gTWF0aC5jZWlsKHRoaXMudnNzdWUuY29tbWVudHMuY291bnQgLyB0aGlzLnZzc3VlLmNvbW1lbnRzLnBlclBhZ2UpOwogICAgICByZXR1cm4gcGFnZUNvdW50ID4gMSA/IHBhZ2VDb3VudCA6IDE7CiAgICB9CiAgfSwgewogICAga2V5OiAicGVyUGFnZU9wdGlvbnMiLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHZhciBwZXJQYWdlT3B0aW9ucyA9IFs1LCAxMCwgMjAsIDUwXTsKCiAgICAgIGlmICghcGVyUGFnZU9wdGlvbnMuaW5jbHVkZXModGhpcy52c3N1ZS5vcHRpb25zLnBlclBhZ2UpICYmIHRoaXMudnNzdWUub3B0aW9ucy5wZXJQYWdlIDwgMTAwKSB7CiAgICAgICAgcGVyUGFnZU9wdGlvbnMucHVzaCh0aGlzLnZzc3VlLm9wdGlvbnMucGVyUGFnZSk7CiAgICAgIH0KCiAgICAgIHJldHVybiBwZXJQYWdlT3B0aW9ucy5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7CiAgICAgICAgcmV0dXJuIGEgLSBiOwogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJwYWdlIiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICByZXR1cm4gdGhpcy52c3N1ZS5xdWVyeS5wYWdlID4gdGhpcy5wYWdlQ291bnQgPyB0aGlzLnBhZ2VDb3VudCA6IHRoaXMudnNzdWUucXVlcnkucGFnZTsKICAgIH0sCiAgICBzZXQ6IGZ1bmN0aW9uIHNldCh2YWwpIHsKICAgICAgaWYgKHZhbCA+IDAgJiYgdmFsIDw9IHRoaXMucGFnZUNvdW50KSB7CiAgICAgICAgdGhpcy52c3N1ZS5xdWVyeS5wYWdlID0gdmFsOwogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAicGVyUGFnZSIsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgcmV0dXJuIHRoaXMudnNzdWUucXVlcnkucGVyUGFnZTsKICAgIH0sCiAgICBzZXQ6IGZ1bmN0aW9uIHNldCh2YWwpIHsKICAgICAgaWYgKHRoaXMucGVyUGFnZU9wdGlvbnMuaW5jbHVkZXModmFsKSkgewogICAgICAgIHRoaXMudnNzdWUucXVlcnkucGVyUGFnZSA9IHZhbDsKICAgICAgfQogICAgfQogIH1dKTsKCiAgcmV0dXJuIFZzc3VlUGFnaW5hdGlvbjsKfShWdWUkMSk7CgpfX2RlY29yYXRlKFtJbmplY3QoKV0sIFZzc3VlUGFnaW5hdGlvbi5wcm90b3R5cGUsICJ2c3N1ZSIsIHZvaWQgMCk7CgpWc3N1ZVBhZ2luYXRpb24gPSBfX2RlY29yYXRlKFtDb21wb25lbnQoewogIGNvbXBvbmVudHM6IHsKICAgIFZzc3VlSWNvbjogX192dWVfY29tcG9uZW50X18kMgogIH0KfSldLCBWc3N1ZVBhZ2luYXRpb24pOwp2YXIgc2NyaXB0JDQgPSBWc3N1ZVBhZ2luYXRpb247Ci8qIHNjcmlwdCAqLwoKdmFyIF9fdnVlX3NjcmlwdF9fJDQgPSBzY3JpcHQkNDsKLyogdGVtcGxhdGUgKi8KCnZhciBfX3Z1ZV9yZW5kZXJfXyQyID0gZnVuY3Rpb24gX192dWVfcmVuZGVyX18kMigpIHsKICB2YXIgX3ZtID0gdGhpczsKCiAgdmFyIF9oID0gX3ZtLiRjcmVhdGVFbGVtZW50OwoKICB2YXIgX2MgPSBfdm0uX3NlbGYuX2MgfHwgX2g7CgogIHJldHVybiBfYygnZGl2JywgewogICAgc3RhdGljQ2xhc3M6ICJ2c3N1ZS1wYWdpbmF0aW9uIgogIH0sIFtfYygnZGl2JywgewogICAgc3RhdGljQ2xhc3M6ICJ2c3N1ZS1wYWdpbmF0aW9uLXBlci1wYWdlIgogIH0sIFtfYygnbGFiZWwnLCBbX2MoJ3NlbGVjdCcsIHsKICAgIGRpcmVjdGl2ZXM6IFt7CiAgICAgIG5hbWU6ICJtb2RlbCIsCiAgICAgIHJhd05hbWU6ICJ2LW1vZGVsIiwKICAgICAgdmFsdWU6IF92bS5wZXJQYWdlLAogICAgICBleHByZXNzaW9uOiAicGVyUGFnZSIKICAgIH1dLAogICAgc3RhdGljQ2xhc3M6ICJ2c3N1ZS1wYWdpbmF0aW9uLXNlbGVjdCIsCiAgICBhdHRyczogewogICAgICAiZGlzYWJsZWQiOiBfdm0uZGlzYWJsZWQKICAgIH0sCiAgICBvbjogewogICAgICAiY2hhbmdlIjogZnVuY3Rpb24gY2hhbmdlKCRldmVudCkgewogICAgICAgIHZhciAkJHNlbGVjdGVkVmFsID0gQXJyYXkucHJvdG90eXBlLmZpbHRlci5jYWxsKCRldmVudC50YXJnZXQub3B0aW9ucywgZnVuY3Rpb24gKG8pIHsKICAgICAgICAgIHJldHVybiBvLnNlbGVjdGVkOwogICAgICAgIH0pLm1hcChmdW5jdGlvbiAobykgewogICAgICAgICAgdmFyIHZhbCA9ICJfdmFsdWUiIGluIG8gPyBvLl92YWx1ZSA6IG8udmFsdWU7CiAgICAgICAgICByZXR1cm4gdmFsOwogICAgICAgIH0pOwogICAgICAgIF92bS5wZXJQYWdlID0gJGV2ZW50LnRhcmdldC5tdWx0aXBsZSA/ICQkc2VsZWN0ZWRWYWwgOiAkJHNlbGVjdGVkVmFsWzBdOwogICAgICB9CiAgICB9CiAgfSwgX3ZtLl9sKF92bS5wZXJQYWdlT3B0aW9ucywgZnVuY3Rpb24gKHZhbCkgewogICAgcmV0dXJuIF9jKCdvcHRpb24nLCB7CiAgICAgIGtleTogdmFsLAogICAgICBkb21Qcm9wczogewogICAgICAgICJ2YWx1ZSI6IHZhbAogICAgICB9CiAgICB9LCBbX3ZtLl92KCJcbiAgICAgICAgICAiICsgX3ZtLl9zKHZhbCkgKyAiXG4gICAgICAgICIpXSk7CiAgfSksIDApLCBfdm0uX3YoIiAiKSwgX2MoJ3NwYW4nLCBbX3ZtLl92KCJcbiAgICAgICAgIiArIF92bS5fcyhfdm0udnNzdWUuJHQoJ3BlclBhZ2UnKSkgKyAiXG4gICAgICAiKV0pXSksIF92bS5fdigiICIpLCBfdm0udnNzdWUuQVBJLnBsYXRmb3JtLm1ldGEuc29ydGFibGUgPyBfYygnc3BhbicsIHsKICAgICJjbGFzcyI6IHsKICAgICAgJ3Zzc3VlLXBhZ2luYXRpb24tbGluayc6IHRydWUsCiAgICAgIGRpc2FibGVkOiBfdm0uZGlzYWJsZWQKICAgIH0sCiAgICBhdHRyczogewogICAgICAidGl0bGUiOiBfdm0udnNzdWUuJHQoJ3NvcnQnKQogICAgfSwKICAgIG9uOiB7CiAgICAgICJjbGljayI6IGZ1bmN0aW9uIGNsaWNrKCRldmVudCkgewogICAgICAgIF92bS52c3N1ZS5xdWVyeS5zb3J0ID0gX3ZtLnZzc3VlLnF1ZXJ5LnNvcnQgPT09ICdhc2MnID8gJ2Rlc2MnIDogJ2FzYyc7CiAgICAgIH0KICAgIH0KICB9LCBbX3ZtLl92KCJcbiAgICAgICIgKyBfdm0uX3MoX3ZtLnZzc3VlLnF1ZXJ5LnNvcnQgPT09ICdhc2MnID8gIuKGkSIgOiAi4oaTIikgKyAiXG4gICAgIildKSA6IF92bS5fZSgpXSksIF92bS5fdigiICIpLCBfYygnZGl2JywgewogICAgc3RhdGljQ2xhc3M6ICJ2c3N1ZS1wYWdpbmF0aW9uLXBhZ2UiCiAgfSwgW19jKCdzcGFuJywgewogICAgImNsYXNzIjogewogICAgICAndnNzdWUtcGFnaW5hdGlvbi1saW5rJzogdHJ1ZSwKICAgICAgZGlzYWJsZWQ6IF92bS5wYWdlID09PSAxIHx8IF92bS5kaXNhYmxlZAogICAgfSwKICAgIGF0dHJzOiB7CiAgICAgICJ0aXRsZSI6IF92bS52c3N1ZS4kdCgncHJldicpCiAgICB9LAogICAgZG9tUHJvcHM6IHsKICAgICAgInRleHRDb250ZW50IjogX3ZtLl9zKCI8IikKICAgIH0sCiAgICBvbjogewogICAgICAiY2xpY2siOiBmdW5jdGlvbiBjbGljaygkZXZlbnQpIHsKICAgICAgICBfdm0ucGFnZSAtPSAxOwogICAgICB9CiAgICB9CiAgfSksIF92bS5fdigiICIpLCBfYygnbGFiZWwnLCBbX2MoJ3NwYW4nLCBbX3ZtLl92KCJcbiAgICAgICAgIiArIF92bS5fcyhfdm0udnNzdWUuJHQoJ3BhZ2UnKSkgKyAiXG4gICAgICAiKV0pLCBfdm0uX3YoIiAiKSwgX2MoJ3NlbGVjdCcsIHsKICAgIGRpcmVjdGl2ZXM6IFt7CiAgICAgIG5hbWU6ICJzaG93IiwKICAgICAgcmF3TmFtZTogInYtc2hvdyIsCiAgICAgIHZhbHVlOiBfdm0ucGFnZUNvdW50ID4gMSwKICAgICAgZXhwcmVzc2lvbjogInBhZ2VDb3VudCA+IDEiCiAgICB9LCB7CiAgICAgIG5hbWU6ICJtb2RlbCIsCiAgICAgIHJhd05hbWU6ICJ2LW1vZGVsIiwKICAgICAgdmFsdWU6IF92bS5wYWdlLAogICAgICBleHByZXNzaW9uOiAicGFnZSIKICAgIH1dLAogICAgc3RhdGljQ2xhc3M6ICJ2c3N1ZS1wYWdpbmF0aW9uLXNlbGVjdCIsCiAgICBhdHRyczogewogICAgICAiZGlzYWJsZWQiOiBfdm0uZGlzYWJsZWQKICAgIH0sCiAgICBvbjogewogICAgICAiY2hhbmdlIjogZnVuY3Rpb24gY2hhbmdlKCRldmVudCkgewogICAgICAgIHZhciAkJHNlbGVjdGVkVmFsID0gQXJyYXkucHJvdG90eXBlLmZpbHRlci5jYWxsKCRldmVudC50YXJnZXQub3B0aW9ucywgZnVuY3Rpb24gKG8pIHsKICAgICAgICAgIHJldHVybiBvLnNlbGVjdGVkOwogICAgICAgIH0pLm1hcChmdW5jdGlvbiAobykgewogICAgICAgICAgdmFyIHZhbCA9ICJfdmFsdWUiIGluIG8gPyBvLl92YWx1ZSA6IG8udmFsdWU7CiAgICAgICAgICByZXR1cm4gdmFsOwogICAgICAgIH0pOwogICAgICAgIF92bS5wYWdlID0gJGV2ZW50LnRhcmdldC5tdWx0aXBsZSA/ICQkc2VsZWN0ZWRWYWwgOiAkJHNlbGVjdGVkVmFsWzBdOwogICAgICB9CiAgICB9CiAgfSwgX3ZtLl9sKF92bS5wYWdlQ291bnQsIGZ1bmN0aW9uICh2YWwpIHsKICAgIHJldHVybiBfYygnb3B0aW9uJywgewogICAgICBrZXk6IHZhbCwKICAgICAgZG9tUHJvcHM6IHsKICAgICAgICAidmFsdWUiOiB2YWwKICAgICAgfQogICAgfSwgW192bS5fdigiXG4gICAgICAgICAgIiArIF92bS5fcyh2YWwpICsgIlxuICAgICAgICAiKV0pOwogIH0pLCAwKSwgX3ZtLl92KCIgIiksIF9jKCdzcGFuJywgewogICAgZGlyZWN0aXZlczogW3sKICAgICAgbmFtZTogInNob3ciLAogICAgICByYXdOYW1lOiAidi1zaG93IiwKICAgICAgdmFsdWU6IF92bS5wYWdlQ291bnQgPCAyLAogICAgICBleHByZXNzaW9uOiAicGFnZUNvdW50IDwgMiIKICAgIH1dLAogICAgZG9tUHJvcHM6IHsKICAgICAgInRleHRDb250ZW50IjogX3ZtLl9zKF92bS5wYWdlKQogICAgfQogIH0pLCBfdm0uX3YoIiAiKSwgX2MoJ3NwYW4nLCB7CiAgICBkb21Qcm9wczogewogICAgICAidGV4dENvbnRlbnQiOiBfdm0uX3MoIiAvICIgKyBfdm0ucGFnZUNvdW50ICsgIiAiKQogICAgfQogIH0pXSksIF92bS5fdigiICIpLCBfYygnc3BhbicsIHsKICAgICJjbGFzcyI6IHsKICAgICAgJ3Zzc3VlLXBhZ2luYXRpb24tbGluayc6IHRydWUsCiAgICAgIGRpc2FibGVkOiBfdm0ucGFnZSA9PT0gX3ZtLnBhZ2VDb3VudCB8fCBfdm0uZGlzYWJsZWQKICAgIH0sCiAgICBhdHRyczogewogICAgICAidGl0bGUiOiBfdm0udnNzdWUuJHQoJ25leHQnKQogICAgfSwKICAgIGRvbVByb3BzOiB7CiAgICAgICJ0ZXh0Q29udGVudCI6IF92bS5fcygiPiIpCiAgICB9LAogICAgb246IHsKICAgICAgImNsaWNrIjogZnVuY3Rpb24gY2xpY2soJGV2ZW50KSB7CiAgICAgICAgX3ZtLnBhZ2UgKz0gMTsKICAgICAgfQogICAgfQogIH0pXSldKTsKfTsKCnZhciBfX3Z1ZV9zdGF0aWNSZW5kZXJGbnNfXyQyID0gW107Ci8qIHN0eWxlICovCgp2YXIgX192dWVfaW5qZWN0X3N0eWxlc19fJDQgPSB1bmRlZmluZWQ7Ci8qIHNjb3BlZCAqLwoKdmFyIF9fdnVlX3Njb3BlX2lkX18kNCA9IHVuZGVmaW5lZDsKLyogbW9kdWxlIGlkZW50aWZpZXIgKi8KCnZhciBfX3Z1ZV9tb2R1bGVfaWRlbnRpZmllcl9fJDQgPSB1bmRlZmluZWQ7Ci8qIGZ1bmN0aW9uYWwgdGVtcGxhdGUgKi8KCnZhciBfX3Z1ZV9pc19mdW5jdGlvbmFsX3RlbXBsYXRlX18kNCA9IGZhbHNlOwovKiBzdHlsZSBpbmplY3QgKi8KCi8qIHN0eWxlIGluamVjdCBTU1IgKi8KCi8qIHN0eWxlIGluamVjdCBzaGFkb3cgZG9tICovCgp2YXIgX192dWVfY29tcG9uZW50X18kNCA9IG5vcm1hbGl6ZUNvbXBvbmVudCh7CiAgcmVuZGVyOiBfX3Z1ZV9yZW5kZXJfXyQyLAogIHN0YXRpY1JlbmRlckZuczogX192dWVfc3RhdGljUmVuZGVyRm5zX18kMgp9LCBfX3Z1ZV9pbmplY3Rfc3R5bGVzX18kNCwgX192dWVfc2NyaXB0X18kNCwgX192dWVfc2NvcGVfaWRfXyQ0LCBfX3Z1ZV9pc19mdW5jdGlvbmFsX3RlbXBsYXRlX18kNCwgX192dWVfbW9kdWxlX2lkZW50aWZpZXJfXyQ0LCBmYWxzZSwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIHVuZGVmaW5lZCk7Cgp2YXIgVnNzdWVDb21tZW50cyA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoX1Z1ZSQzKSB7CiAgX2luaGVyaXRzKFZzc3VlQ29tbWVudHMsIF9WdWUkMyk7CgogIHZhciBfc3VwZXIzID0gX2NyZWF0ZVN1cGVyKFZzc3VlQ29tbWVudHMpOwoKICBmdW5jdGlvbiBWc3N1ZUNvbW1lbnRzKCkgewogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFZzc3VlQ29tbWVudHMpOwoKICAgIHJldHVybiBfc3VwZXIzLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgfQoKICByZXR1cm4gVnNzdWVDb21tZW50czsKfShWdWUkMSk7CgpfX2RlY29yYXRlKFtJbmplY3QoKV0sIFZzc3VlQ29tbWVudHMucHJvdG90eXBlLCAidnNzdWUiLCB2b2lkIDApOwoKVnNzdWVDb21tZW50cyA9IF9fZGVjb3JhdGUoW0NvbXBvbmVudCh7CiAgY29tcG9uZW50czogewogICAgVHJhbnNpdGlvbkZhZGU6IF9fdnVlX2NvbXBvbmVudF9fJDEsCiAgICBWc3N1ZUNvbW1lbnQ6IF9fdnVlX2NvbXBvbmVudF9fJDMsCiAgICBWc3N1ZVBhZ2luYXRpb246IF9fdnVlX2NvbXBvbmVudF9fJDQKICB9Cn0pXSwgVnNzdWVDb21tZW50cyk7CnZhciBzY3JpcHQkNSA9IFZzc3VlQ29tbWVudHM7Ci8qIHNjcmlwdCAqLwoKdmFyIF9fdnVlX3NjcmlwdF9fJDUgPSBzY3JpcHQkNTsKLyogdGVtcGxhdGUgKi8KCnZhciBfX3Z1ZV9yZW5kZXJfXyQzID0gZnVuY3Rpb24gX192dWVfcmVuZGVyX18kMygpIHsKICB2YXIgX3ZtID0gdGhpczsKCiAgdmFyIF9oID0gX3ZtLiRjcmVhdGVFbGVtZW50OwoKICB2YXIgX2MgPSBfdm0uX3NlbGYuX2MgfHwgX2g7CgogIHJldHVybiBfYygnZGl2JywgewogICAgc3RhdGljQ2xhc3M6ICJ2c3N1ZS1jb21tZW50cyIKICB9LCBbX2MoJ1Zzc3VlUGFnaW5hdGlvbicpLCBfdm0uX3YoIiAiKSwgX2MoJ1RyYW5zaXRpb25GYWRlJywgewogICAgYXR0cnM6IHsKICAgICAgImdyb3VwIjogIiIKICAgIH0KICB9LCBfdm0uX2woX3ZtLnZzc3VlLmNvbW1lbnRzLmRhdGEsIGZ1bmN0aW9uIChjb21tZW50KSB7CiAgICByZXR1cm4gX2MoJ1Zzc3VlQ29tbWVudCcsIHsKICAgICAga2V5OiBjb21tZW50LmlkLAogICAgICBhdHRyczogewogICAgICAgICJjb21tZW50IjogY29tbWVudAogICAgICB9CiAgICB9KTsKICB9KSwgMSksIF92bS5fdigiICIpLCBfYygnVnNzdWVQYWdpbmF0aW9uJywgewogICAgZGlyZWN0aXZlczogW3sKICAgICAgbmFtZTogInNob3ciLAogICAgICByYXdOYW1lOiAidi1zaG93IiwKICAgICAgdmFsdWU6IF92bS52c3N1ZS5jb21tZW50cy5kYXRhLmxlbmd0aCA+IDUsCiAgICAgIGV4cHJlc3Npb246ICJ2c3N1ZS5jb21tZW50cy5kYXRhLmxlbmd0aCA+IDUiCiAgICB9XQogIH0pXSwgMSk7Cn07Cgp2YXIgX192dWVfc3RhdGljUmVuZGVyRm5zX18kMyA9IFtdOwovKiBzdHlsZSAqLwoKdmFyIF9fdnVlX2luamVjdF9zdHlsZXNfXyQ1ID0gdW5kZWZpbmVkOwovKiBzY29wZWQgKi8KCnZhciBfX3Z1ZV9zY29wZV9pZF9fJDUgPSB1bmRlZmluZWQ7Ci8qIG1vZHVsZSBpZGVudGlmaWVyICovCgp2YXIgX192dWVfbW9kdWxlX2lkZW50aWZpZXJfXyQ1ID0gdW5kZWZpbmVkOwovKiBmdW5jdGlvbmFsIHRlbXBsYXRlICovCgp2YXIgX192dWVfaXNfZnVuY3Rpb25hbF90ZW1wbGF0ZV9fJDUgPSBmYWxzZTsKLyogc3R5bGUgaW5qZWN0ICovCgovKiBzdHlsZSBpbmplY3QgU1NSICovCgovKiBzdHlsZSBpbmplY3Qgc2hhZG93IGRvbSAqLwoKdmFyIF9fdnVlX2NvbXBvbmVudF9fJDUgPSBub3JtYWxpemVDb21wb25lbnQoewogIHJlbmRlcjogX192dWVfcmVuZGVyX18kMywKICBzdGF0aWNSZW5kZXJGbnM6IF9fdnVlX3N0YXRpY1JlbmRlckZuc19fJDMKfSwgX192dWVfaW5qZWN0X3N0eWxlc19fJDUsIF9fdnVlX3NjcmlwdF9fJDUsIF9fdnVlX3Njb3BlX2lkX18kNSwgX192dWVfaXNfZnVuY3Rpb25hbF90ZW1wbGF0ZV9fJDUsIF9fdnVlX21vZHVsZV9pZGVudGlmaWVyX18kNSwgZmFsc2UsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB1bmRlZmluZWQpOwoKdmFyIHNjcmlwdCQ2ID0gVnVlLmV4dGVuZCh7CiAgbmFtZTogJ1Zzc3VlSWNvbicsCiAgZnVuY3Rpb25hbDogdHJ1ZSwKICBwcm9wczogewogICAgdHlwZTogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIHJlcXVpcmVkOiBmYWxzZSwKICAgICAgImRlZmF1bHQiOiAnZGVmYXVsdCcKICAgIH0KICB9LAogIHJlbmRlcjogZnVuY3Rpb24gcmVuZGVyKGgsIF9yZWY0KSB7CiAgICB2YXIgcHJvcHMgPSBfcmVmNC5wcm9wcywKICAgICAgICBkYXRhID0gX3JlZjQuZGF0YSwKICAgICAgICBjaGlsZHJlbiA9IF9yZWY0LmNoaWxkcmVuOwogICAgcmV0dXJuIGgoJ2J1dHRvbicsIE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgZGF0YSksIHsKICAgICAgImNsYXNzIjogWyd2c3N1ZS1idXR0b24nLCAidnNzdWUtYnV0dG9uLSIuY29uY2F0KHByb3BzLnR5cGUpXQogICAgfSksIGNoaWxkcmVuKTsKICB9Cn0pOwovKiBzY3JpcHQgKi8KCnZhciBfX3Z1ZV9zY3JpcHRfXyQ2ID0gc2NyaXB0JDY7Ci8qIHRlbXBsYXRlICovCgovKiBzdHlsZSAqLwoKdmFyIF9fdnVlX2luamVjdF9zdHlsZXNfXyQ2ID0gdW5kZWZpbmVkOwovKiBzY29wZWQgKi8KCnZhciBfX3Z1ZV9zY29wZV9pZF9fJDYgPSB1bmRlZmluZWQ7Ci8qIG1vZHVsZSBpZGVudGlmaWVyICovCgp2YXIgX192dWVfbW9kdWxlX2lkZW50aWZpZXJfXyQ2ID0gdW5kZWZpbmVkOwovKiBmdW5jdGlvbmFsIHRlbXBsYXRlICovCgp2YXIgX192dWVfaXNfZnVuY3Rpb25hbF90ZW1wbGF0ZV9fJDYgPSB1bmRlZmluZWQ7Ci8qIHN0eWxlIGluamVjdCAqLwoKLyogc3R5bGUgaW5qZWN0IFNTUiAqLwoKLyogc3R5bGUgaW5qZWN0IHNoYWRvdyBkb20gKi8KCnZhciBfX3Z1ZV9jb21wb25lbnRfXyQ2ID0gbm9ybWFsaXplQ29tcG9uZW50KHt9LCBfX3Z1ZV9pbmplY3Rfc3R5bGVzX18kNiwgX192dWVfc2NyaXB0X18kNiwgX192dWVfc2NvcGVfaWRfXyQ2LCBfX3Z1ZV9pc19mdW5jdGlvbmFsX3RlbXBsYXRlX18kNiwgX192dWVfbW9kdWxlX2lkZW50aWZpZXJfXyQ2LCBmYWxzZSwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIHVuZGVmaW5lZCk7Cgp2YXIgVnNzdWVOZXdDb21tZW50ID0gLyojX19QVVJFX18qL2Z1bmN0aW9uIChfVnVlJDQpIHsKICBfaW5oZXJpdHMoVnNzdWVOZXdDb21tZW50LCBfVnVlJDQpOwoKICB2YXIgX3N1cGVyNCA9IF9jcmVhdGVTdXBlcihWc3N1ZU5ld0NvbW1lbnQpOwoKICBmdW5jdGlvbiBWc3N1ZU5ld0NvbW1lbnQoKSB7CiAgICB2YXIgX3RoaXM1OwoKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBWc3N1ZU5ld0NvbW1lbnQpOwoKICAgIF90aGlzNSA9IF9zdXBlcjQuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgIF90aGlzNS5jb250ZW50ID0gJyc7CiAgICByZXR1cm4gX3RoaXM1OwogIH0KCiAgX2NyZWF0ZUNsYXNzKFZzc3VlTmV3Q29tbWVudCwgW3sKICAgIGtleTogInVzZXIiLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHJldHVybiB0aGlzLnZzc3VlLnVzZXI7CiAgICB9CiAgfSwgewogICAga2V5OiAicGxhdGZvcm0iLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHJldHVybiB0aGlzLnZzc3VlLkFQSSAmJiB0aGlzLnZzc3VlLkFQSS5wbGF0Zm9ybS5uYW1lOwogICAgfQogIH0sIHsKICAgIGtleTogImlzSW5wdXREaXNhYmxlZCIsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgcmV0dXJuIHRoaXMubG9hZGluZyB8fCB0aGlzLnVzZXIgPT09IG51bGwgfHwgdGhpcy52c3N1ZS5pc3N1ZSA9PT0gbnVsbDsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJpc1N1Ym1pdERpc2FibGVkIiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICByZXR1cm4gdGhpcy5jb250ZW50ID09PSAnJyB8fCB0aGlzLnZzc3VlLmlzUGVuZGluZyB8fCB0aGlzLnZzc3VlLmlzc3VlID09PSBudWxsOwogICAgfQogIH0sIHsKICAgIGtleTogImxvYWRpbmciLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHJldHVybiB0aGlzLnZzc3VlLmlzQ3JlYXRpbmdDb21tZW50OwogICAgfQogIH0sIHsKICAgIGtleTogImNvbnRlbnRSb3dzIiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICByZXR1cm4gdGhpcy5jb250ZW50LnNwbGl0KCdcbicpLmxlbmd0aCAtIDE7CiAgICB9CiAgfSwgewogICAga2V5OiAiaW5wdXRSb3dzIiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICByZXR1cm4gdGhpcy5jb250ZW50Um93cyA8IDMgPyA1IDogdGhpcy5jb250ZW50Um93cyArIDI7CiAgICB9CiAgfSwgewogICAga2V5OiAiY3JlYXRlZCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgICAgdmFyIF90aGlzNiA9IHRoaXM7CgogICAgICB0aGlzLnZzc3VlLiRvbigncmVwbHktY29tbWVudCcsIGZ1bmN0aW9uIChjb21tZW50KSB7CiAgICAgICAgdmFyIHF1b3RlZENvbW1lbnQgPSBjb21tZW50LmNvbnRlbnRSYXcucmVwbGFjZSgvXG4vZywgJ1xuPiAnKTsKICAgICAgICB2YXIgcmVwbHlDb250ZW50ID0gIkAiLmNvbmNhdChjb21tZW50LmF1dGhvci51c2VybmFtZSwgIlxuXG4+ICIpLmNvbmNhdChxdW90ZWRDb21tZW50LCAiXG5cbiIpOwogICAgICAgIF90aGlzNi5jb250ZW50ID0gX3RoaXM2LmNvbnRlbnQuY29uY2F0KHJlcGx5Q29udGVudCk7CgogICAgICAgIF90aGlzNi5mb2N1cygpOwogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJiZWZvcmVEZXN0cm95IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBiZWZvcmVEZXN0cm95KCkgewogICAgICB0aGlzLnZzc3VlLiRvZmYoJ3JlcGx5LWNvbW1lbnQnKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJmb2N1cyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZm9jdXMoKSB7CiAgICAgIHRoaXMuJHJlZnMuaW5wdXQuZm9jdXMoKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJzdWJtaXQiLAogICAgdmFsdWU6IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF9zdWJtaXQgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU0KCkgewogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNCQoX2NvbnRleHQ0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0NC5wcmV2ID0gX2NvbnRleHQ0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuaXNTdWJtaXREaXNhYmxlZCkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDI7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSA0OwogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMudnNzdWUucG9zdENvbW1lbnQoewogICAgICAgICAgICAgICAgICBjb250ZW50OiB0aGlzLmNvbnRlbnQKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgICB0aGlzLmNvbnRlbnQgPSAnJzsKICAgICAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gNzsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnZzc3VlLmdldENvbW1lbnRzKCk7CgogICAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlNCwgdGhpcyk7CiAgICAgIH0pKTsKCiAgICAgIGZ1bmN0aW9uIHN1Ym1pdCgpIHsKICAgICAgICByZXR1cm4gX3N1Ym1pdC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9CgogICAgICByZXR1cm4gc3VibWl0OwogICAgfSgpCiAgfV0pOwoKICByZXR1cm4gVnNzdWVOZXdDb21tZW50Owp9KFZ1ZSQxKTsKCl9fZGVjb3JhdGUoW0luamVjdCgpXSwgVnNzdWVOZXdDb21tZW50LnByb3RvdHlwZSwgInZzc3VlIiwgdm9pZCAwKTsKClZzc3VlTmV3Q29tbWVudCA9IF9fZGVjb3JhdGUoW0NvbXBvbmVudCh7CiAgY29tcG9uZW50czogewogICAgVnNzdWVCdXR0b246IF9fdnVlX2NvbXBvbmVudF9fJDYsCiAgICBWc3N1ZUljb246IF9fdnVlX2NvbXBvbmVudF9fJDIKICB9Cn0pXSwgVnNzdWVOZXdDb21tZW50KTsKdmFyIHNjcmlwdCQ3ID0gVnNzdWVOZXdDb21tZW50OwovKiBzY3JpcHQgKi8KCnZhciBfX3Z1ZV9zY3JpcHRfXyQ3ID0gc2NyaXB0JDc7Ci8qIHRlbXBsYXRlICovCgp2YXIgX192dWVfcmVuZGVyX18kNCA9IGZ1bmN0aW9uIF9fdnVlX3JlbmRlcl9fJDQoKSB7CiAgdmFyIF92bSA9IHRoaXM7CgogIHZhciBfaCA9IF92bS4kY3JlYXRlRWxlbWVudDsKCiAgdmFyIF9jID0gX3ZtLl9zZWxmLl9jIHx8IF9oOwoKICByZXR1cm4gX2MoJ2RpdicsIHsKICAgIHN0YXRpY0NsYXNzOiAidnNzdWUtbmV3LWNvbW1lbnQiCiAgfSwgW19jKCdkaXYnLCB7CiAgICBzdGF0aWNDbGFzczogInZzc3VlLWNvbW1lbnQtYXZhdGFyIgogIH0sIFtfdm0udXNlciA/IF9jKCdhJywgewogICAgYXR0cnM6IHsKICAgICAgImhyZWYiOiBfdm0udXNlci5ob21lcGFnZSwKICAgICAgInRpdGxlIjogX3ZtLnVzZXIudXNlcm5hbWUsCiAgICAgICJ0YXJnZXQiOiAiX2JsYW5rIiwKICAgICAgInJlbCI6ICJub29wZW5lciBub3JlZmVycmVyIgogICAgfQogIH0sIFtfYygnaW1nJywgewogICAgYXR0cnM6IHsKICAgICAgInNyYyI6IF92bS51c2VyLmF2YXRhciwKICAgICAgImFsdCI6IF92bS51c2VyLnVzZXJuYW1lCiAgICB9CiAgfSldKSA6IF9jKCdWc3N1ZUljb24nLCB7CiAgICBhdHRyczogewogICAgICAibmFtZSI6IF92bS5wbGF0Zm9ybS50b0xvd2VyQ2FzZSgpLAogICAgICAidGl0bGUiOiBfdm0udnNzdWUuJHQoJ2xvZ2luVG9Db21tZW50JywgewogICAgICAgIHBsYXRmb3JtOiBfdm0ucGxhdGZvcm0KICAgICAgfSkKICAgIH0sCiAgICBvbjogewogICAgICAiY2xpY2siOiBmdW5jdGlvbiBjbGljaygkZXZlbnQpIHsKICAgICAgICByZXR1cm4gX3ZtLnZzc3VlLmxvZ2luKCk7CiAgICAgIH0KICAgIH0KICB9KV0sIDEpLCBfdm0uX3YoIiAiKSwgX2MoJ2RpdicsIHsKICAgIHN0YXRpY0NsYXNzOiAidnNzdWUtbmV3LWNvbW1lbnQtYm9keSIKICB9LCBbX2MoJ3RleHRhcmVhJywgewogICAgZGlyZWN0aXZlczogW3sKICAgICAgbmFtZTogIm1vZGVsIiwKICAgICAgcmF3TmFtZTogInYtbW9kZWwiLAogICAgICB2YWx1ZTogX3ZtLmNvbnRlbnQsCiAgICAgIGV4cHJlc3Npb246ICJjb250ZW50IgogICAgfV0sCiAgICByZWY6ICJpbnB1dCIsCiAgICBzdGF0aWNDbGFzczogInZzc3VlLW5ldy1jb21tZW50LWlucHV0IiwKICAgIGF0dHJzOiB7CiAgICAgICJyb3dzIjogX3ZtLmlucHV0Um93cywKICAgICAgImRpc2FibGVkIjogX3ZtLmlzSW5wdXREaXNhYmxlZCwKICAgICAgInBsYWNlaG9sZGVyIjogX3ZtLnZzc3VlLiR0KF92bS51c2VyID8gJ3BsYWNlaG9sZGVyJyA6ICdub0xvZ2luUGxhY2VIb2xkZXInKSwKICAgICAgInNwZWxsY2hlY2siOiBmYWxzZSwKICAgICAgImFyaWEtbGFiZWwiOiAibGVhdmUgYSBjb21tZW50IgogICAgfSwKICAgIGRvbVByb3BzOiB7CiAgICAgICJ2YWx1ZSI6IF92bS5jb250ZW50CiAgICB9LAogICAgb246IHsKICAgICAgImtleXVwIjogZnVuY3Rpb24ga2V5dXAoJGV2ZW50KSB7CiAgICAgICAgaWYgKCEkZXZlbnQudHlwZS5pbmRleE9mKCdrZXknKSAmJiBfdm0uX2soJGV2ZW50LmtleUNvZGUsICJlbnRlciIsIDEzLCAkZXZlbnQua2V5LCAiRW50ZXIiKSkgewogICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgfQoKICAgICAgICBpZiAoISRldmVudC5jdHJsS2V5KSB7CiAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICB9CgogICAgICAgIHJldHVybiBfdm0uc3VibWl0KCk7CiAgICAgIH0sCiAgICAgICJpbnB1dCI6IGZ1bmN0aW9uIGlucHV0KCRldmVudCkgewogICAgICAgIGlmICgkZXZlbnQudGFyZ2V0LmNvbXBvc2luZykgewogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgX3ZtLmNvbnRlbnQgPSAkZXZlbnQudGFyZ2V0LnZhbHVlOwogICAgICB9CiAgICB9CiAgfSldKSwgX3ZtLl92KCIgIiksIF9jKCdkaXYnLCB7CiAgICBzdGF0aWNDbGFzczogInZzc3VlLW5ldy1jb21tZW50LWZvb3RlciIKICB9LCBbX3ZtLnVzZXIgPyBfYygnc3BhbicsIHsKICAgIHN0YXRpY0NsYXNzOiAidnNzdWUtY3VycmVudC11c2VyIgogIH0sIFtfYygnc3BhbicsIFtfdm0uX3YoX3ZtLl9zKF92bS52c3N1ZS4kdCgnY3VycmVudFVzZXInKSkgKyAiIC0gIiArIF92bS5fcyhfdm0udXNlci51c2VybmFtZSkgKyAiIC0gIildKSwgX3ZtLl92KCIgIiksIF9jKCdhJywgewogICAgc3RhdGljQ2xhc3M6ICJ2c3N1ZS1sb2dvdXQiLAogICAgb246IHsKICAgICAgImNsaWNrIjogZnVuY3Rpb24gY2xpY2soJGV2ZW50KSB7CiAgICAgICAgcmV0dXJuIF92bS52c3N1ZS5sb2dvdXQoKTsKICAgICAgfQogICAgfQogIH0sIFtfdm0uX3YoIlxuICAgICAgICAiICsgX3ZtLl9zKF92bS52c3N1ZS4kdCgnbG9nb3V0JykpICsgIlxuICAgICAgIildKV0pIDogX2MoJ3NwYW4nLCB7CiAgICBzdGF0aWNDbGFzczogInZzc3VlLWN1cnJlbnQtdXNlciIKICB9LCBbX3ZtLl92KCJcbiAgICAgICIgKyBfdm0uX3MoX3ZtLnZzc3VlLiR0KCdsb2dpblRvQ29tbWVudCcsIHsKICAgIHBsYXRmb3JtOiBfdm0ucGxhdGZvcm0KICB9KSkgKyAiXG4gICAgIildKSwgX3ZtLl92KCIgIiksIF9jKCdkaXYnLCB7CiAgICBzdGF0aWNDbGFzczogInZzc3VlLW5ldy1jb21tZW50LW9wZXJhdGlvbnMiCiAgfSwgW192bS51c2VyID8gX2MoJ1Zzc3VlQnV0dG9uJywgewogICAgc3RhdGljQ2xhc3M6ICJ2c3N1ZS1idXR0b24tc3VibWl0LWNvbW1lbnQiLAogICAgYXR0cnM6IHsKICAgICAgInR5cGUiOiAicHJpbWFyeSIsCiAgICAgICJkaXNhYmxlZCI6IF92bS5pc1N1Ym1pdERpc2FibGVkCiAgICB9LAogICAgb246IHsKICAgICAgImNsaWNrIjogZnVuY3Rpb24gY2xpY2soJGV2ZW50KSB7CiAgICAgICAgcmV0dXJuIF92bS5zdWJtaXQoKTsKICAgICAgfQogICAgfQogIH0sIFtfYygnVnNzdWVJY29uJywgewogICAgZGlyZWN0aXZlczogW3sKICAgICAgbmFtZTogInNob3ciLAogICAgICByYXdOYW1lOiAidi1zaG93IiwKICAgICAgdmFsdWU6IF92bS5sb2FkaW5nLAogICAgICBleHByZXNzaW9uOiAibG9hZGluZyIKICAgIH1dLAogICAgYXR0cnM6IHsKICAgICAgIm5hbWUiOiAibG9hZGluZyIKICAgIH0KICB9KSwgX3ZtLl92KCJcblxuICAgICAgICAiICsgX3ZtLl9zKF92bS52c3N1ZS4kdChfdm0ubG9hZGluZyA/ICdzdWJtaXR0aW5nJyA6ICdzdWJtaXRDb21tZW50JykpICsgIlxuICAgICAgIildLCAxKSA6IF9jKCdWc3N1ZUJ1dHRvbicsIHsKICAgIHN0YXRpY0NsYXNzOiAidnNzdWUtYnV0dG9uLWxvZ2luIiwKICAgIGF0dHJzOiB7CiAgICAgICJ0eXBlIjogInByaW1hcnkiLAogICAgICAidGl0bGUiOiBfdm0udnNzdWUuJHQoJ2xvZ2luVG9Db21tZW50JywgewogICAgICAgIHBsYXRmb3JtOiBfdm0ucGxhdGZvcm0KICAgICAgfSkKICAgIH0sCiAgICBvbjogewogICAgICAiY2xpY2siOiBmdW5jdGlvbiBjbGljaygkZXZlbnQpIHsKICAgICAgICByZXR1cm4gX3ZtLnZzc3VlLmxvZ2luKCk7CiAgICAgIH0KICAgIH0KICB9LCBbX3ZtLl92KCJcbiAgICAgICAgIiArIF92bS5fcyhfdm0udnNzdWUuJHQoJ2xvZ2luJywgewogICAgcGxhdGZvcm06IF92bS5wbGF0Zm9ybQogIH0pKSArICJcbiAgICAgICIpXSldLCAxKV0pXSk7Cn07Cgp2YXIgX192dWVfc3RhdGljUmVuZGVyRm5zX18kNCA9IFtdOwovKiBzdHlsZSAqLwoKdmFyIF9fdnVlX2luamVjdF9zdHlsZXNfXyQ3ID0gdW5kZWZpbmVkOwovKiBzY29wZWQgKi8KCnZhciBfX3Z1ZV9zY29wZV9pZF9fJDcgPSB1bmRlZmluZWQ7Ci8qIG1vZHVsZSBpZGVudGlmaWVyICovCgp2YXIgX192dWVfbW9kdWxlX2lkZW50aWZpZXJfXyQ3ID0gdW5kZWZpbmVkOwovKiBmdW5jdGlvbmFsIHRlbXBsYXRlICovCgp2YXIgX192dWVfaXNfZnVuY3Rpb25hbF90ZW1wbGF0ZV9fJDcgPSBmYWxzZTsKLyogc3R5bGUgaW5qZWN0ICovCgovKiBzdHlsZSBpbmplY3QgU1NSICovCgovKiBzdHlsZSBpbmplY3Qgc2hhZG93IGRvbSAqLwoKdmFyIF9fdnVlX2NvbXBvbmVudF9fJDcgPSBub3JtYWxpemVDb21wb25lbnQoewogIHJlbmRlcjogX192dWVfcmVuZGVyX18kNCwKICBzdGF0aWNSZW5kZXJGbnM6IF9fdnVlX3N0YXRpY1JlbmRlckZuc19fJDQKfSwgX192dWVfaW5qZWN0X3N0eWxlc19fJDcsIF9fdnVlX3NjcmlwdF9fJDcsIF9fdnVlX3Njb3BlX2lkX18kNywgX192dWVfaXNfZnVuY3Rpb25hbF90ZW1wbGF0ZV9fJDcsIF9fdnVlX21vZHVsZV9pZGVudGlmaWVyX18kNywgZmFsc2UsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB1bmRlZmluZWQpOwoKdmFyIFZzc3VlTm90aWNlID0gLyojX19QVVJFX18qL2Z1bmN0aW9uIChfVnVlJDUpIHsKICBfaW5oZXJpdHMoVnNzdWVOb3RpY2UsIF9WdWUkNSk7CgogIHZhciBfc3VwZXI1ID0gX2NyZWF0ZVN1cGVyKFZzc3VlTm90aWNlKTsKCiAgZnVuY3Rpb24gVnNzdWVOb3RpY2UoKSB7CiAgICB2YXIgX3RoaXM3OwoKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBWc3N1ZU5vdGljZSk7CgogICAgX3RoaXM3ID0gX3N1cGVyNS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOyAvLyBwcm9ncmVzcyBkYXRhCgogICAgX3RoaXM3LnByb2dyZXNzID0gewogICAgICBzaG93OiBmYWxzZSwKICAgICAgcGVyY2VudDogMCwKICAgICAgdGltZXI6IG51bGwsCiAgICAgIHNwZWVkOiAyMDAKICAgIH07IC8vIGFsZXJ0IGRhdGEKCiAgICBfdGhpczcuYWxlcnQgPSB7CiAgICAgIHNob3c6IGZhbHNlLAogICAgICBtZXNzYWdlOiBudWxsLAogICAgICB0aW1lcjogbnVsbAogICAgfTsKICAgIHJldHVybiBfdGhpczc7CiAgfQogIC8qKgogICAqIFNob3cgcHJvZ3Jlc3Mgd2hlbiBsb2FkaW5nIGNvbW1lbnRzCiAgICovCgoKICBfY3JlYXRlQ2xhc3MoVnNzdWVOb3RpY2UsIFt7CiAgICBrZXk6ICJvbkxvYWRpbmdDb21tZW50c0NoYW5nZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gb25Mb2FkaW5nQ29tbWVudHNDaGFuZ2UodmFsKSB7CiAgICAgIGlmICh0aGlzLnZzc3VlLmNvbW1lbnRzKSB7CiAgICAgICAgaWYgKHZhbCkgewogICAgICAgICAgdGhpcy5wcm9ncmVzc1N0YXJ0KCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMucHJvZ3Jlc3NEb25lKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAiY3JlYXRlZCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgICAgdmFyIF90aGlzOCA9IHRoaXM7CgogICAgICB0aGlzLnZzc3VlLiRvbignZXJyb3InLCBmdW5jdGlvbiAoZSkgewogICAgICAgIHJldHVybiBfdGhpczguYWxlcnRTaG93KGUubWVzc2FnZSk7CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogImJlZm9yZURlc3Ryb3kiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGJlZm9yZURlc3Ryb3koKSB7CiAgICAgIHRoaXMudnNzdWUuJG9mZignZXJyb3InKTsKICAgICAgaWYgKHRoaXMucHJvZ3Jlc3MudGltZXIgIT09IG51bGwpIHdpbmRvdy5jbGVhclRpbWVvdXQodGhpcy5wcm9ncmVzcy50aW1lcik7CiAgICAgIGlmICh0aGlzLmFsZXJ0LnRpbWVyICE9PSBudWxsKSB3aW5kb3cuY2xlYXJUaW1lb3V0KHRoaXMuYWxlcnQudGltZXIpOwogICAgfQogICAgLyoqCiAgICAgKiBQcm9ncmVzcyBzdGFydAogICAgICovCgogIH0sIHsKICAgIGtleTogInByb2dyZXNzU3RhcnQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHByb2dyZXNzU3RhcnQoKSB7CiAgICAgIHZhciBfdGhpczkgPSB0aGlzOwoKICAgICAgdGhpcy5wcm9ncmVzcy5zaG93ID0gdHJ1ZTsKICAgICAgdGhpcy5wcm9ncmVzcy5wZXJjZW50ID0gMDsKICAgICAgdGhpcy5wcm9ncmVzcy50aW1lciA9IHdpbmRvdy5zZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7CiAgICAgICAgX3RoaXM5LnByb2dyZXNzLnBlcmNlbnQgKz0gNTsKCiAgICAgICAgaWYgKF90aGlzOS5wcm9ncmVzcy5wZXJjZW50ID4gOTQpIHsKICAgICAgICAgIGlmIChfdGhpczkucHJvZ3Jlc3MudGltZXIgIT09IG51bGwpIHdpbmRvdy5jbGVhckludGVydmFsKF90aGlzOS5wcm9ncmVzcy50aW1lcik7CiAgICAgICAgfQogICAgICB9LCB0aGlzLnByb2dyZXNzLnNwZWVkKTsKICAgIH0KICAgIC8qKgogICAgICogUHJvZ3Jlc3Mgc3RvcAogICAgICovCgogIH0sIHsKICAgIGtleTogInByb2dyZXNzRG9uZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcHJvZ3Jlc3NEb25lKCkgewogICAgICB2YXIgX3RoaXMxMCA9IHRoaXM7CgogICAgICB0aGlzLnByb2dyZXNzLnBlcmNlbnQgPSAxMDA7CiAgICAgIGlmICh0aGlzLnByb2dyZXNzLnRpbWVyICE9PSBudWxsKSB3aW5kb3cuY2xlYXJUaW1lb3V0KHRoaXMucHJvZ3Jlc3MudGltZXIpOwogICAgICB0aGlzLnByb2dyZXNzLnRpbWVyID0gbnVsbDsKICAgICAgd2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgIF90aGlzMTAucHJvZ3Jlc3Muc2hvdyA9IGZhbHNlOwogICAgICB9LCB0aGlzLnByb2dyZXNzLnNwZWVkKTsKICAgIH0KICAgIC8qKgogICAgICogU2hvdyBhbGVydCBtZXNzYWdlCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAiYWxlcnRTaG93IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBhbGVydFNob3coY29udGVudCkgewogICAgICB2YXIgX3RoaXMxMSA9IHRoaXM7CgogICAgICB0aGlzLmFsZXJ0LnNob3cgPSB0cnVlOwogICAgICB0aGlzLmFsZXJ0Lm1lc3NhZ2UgPSBjb250ZW50OwogICAgICBpZiAodGhpcy5hbGVydC50aW1lciAhPT0gbnVsbCkgd2luZG93LmNsZWFyVGltZW91dCh0aGlzLmFsZXJ0LnRpbWVyKTsKICAgICAgdGhpcy5hbGVydC50aW1lciA9IHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICBfdGhpczExLmFsZXJ0SGlkZSgpOwogICAgICB9LCAzMDAwKTsKICAgIH0KICAgIC8qKgogICAgICogSGlkZSBhbGVydCBtZXNzYWdlCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAiYWxlcnRIaWRlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBhbGVydEhpZGUoKSB7CiAgICAgIHRoaXMuYWxlcnQuc2hvdyA9IGZhbHNlOwogICAgICBpZiAodGhpcy5hbGVydC50aW1lciAhPT0gbnVsbCkgd2luZG93LmNsZWFyVGltZW91dCh0aGlzLmFsZXJ0LnRpbWVyKTsKICAgICAgdGhpcy5hbGVydC50aW1lciA9IG51bGw7CiAgICB9CiAgfV0pOwoKICByZXR1cm4gVnNzdWVOb3RpY2U7Cn0oVnVlJDEpOwoKX19kZWNvcmF0ZShbSW5qZWN0KCldLCBWc3N1ZU5vdGljZS5wcm90b3R5cGUsICJ2c3N1ZSIsIHZvaWQgMCk7CgpfX2RlY29yYXRlKFtXYXRjaCgndnNzdWUuaXNMb2FkaW5nQ29tbWVudHMnKV0sIFZzc3VlTm90aWNlLnByb3RvdHlwZSwgIm9uTG9hZGluZ0NvbW1lbnRzQ2hhbmdlIiwgbnVsbCk7CgpWc3N1ZU5vdGljZSA9IF9fZGVjb3JhdGUoW0NvbXBvbmVudCh7CiAgY29tcG9uZW50czogewogICAgVHJhbnNpdGlvbkZhZGU6IF9fdnVlX2NvbXBvbmVudF9fJDEKICB9Cn0pXSwgVnNzdWVOb3RpY2UpOwp2YXIgc2NyaXB0JDggPSBWc3N1ZU5vdGljZTsKLyogc2NyaXB0ICovCgp2YXIgX192dWVfc2NyaXB0X18kOCA9IHNjcmlwdCQ4OwovKiB0ZW1wbGF0ZSAqLwoKdmFyIF9fdnVlX3JlbmRlcl9fJDUgPSBmdW5jdGlvbiBfX3Z1ZV9yZW5kZXJfXyQ1KCkgewogIHZhciBfdm0gPSB0aGlzOwoKICB2YXIgX2ggPSBfdm0uJGNyZWF0ZUVsZW1lbnQ7CgogIHZhciBfYyA9IF92bS5fc2VsZi5fYyB8fCBfaDsKCiAgcmV0dXJuIF9jKCdkaXYnLCB7CiAgICBzdGF0aWNDbGFzczogInZzc3VlLW5vdGljZSIKICB9LCBbX2MoJ2RpdicsIHsKICAgIGRpcmVjdGl2ZXM6IFt7CiAgICAgIG5hbWU6ICJzaG93IiwKICAgICAgcmF3TmFtZTogInYtc2hvdyIsCiAgICAgIHZhbHVlOiBfdm0ucHJvZ3Jlc3Muc2hvdywKICAgICAgZXhwcmVzc2lvbjogInByb2dyZXNzLnNob3ciCiAgICB9XSwKICAgIHN0YXRpY0NsYXNzOiAidnNzdWUtcHJvZ3Jlc3MiLAogICAgc3R5bGU6IHsKICAgICAgd2lkdGg6IF92bS5wcm9ncmVzcy5wZXJjZW50ICsgIiUiLAogICAgICB0cmFuc2l0aW9uOiAiYWxsICIgKyBfdm0ucHJvZ3Jlc3Muc3BlZWQgKyAibXMgbGluZWFyIgogICAgfQogIH0pLCBfdm0uX3YoIiAiKSwgX2MoJ1RyYW5zaXRpb25GYWRlJywgW19jKCdkaXYnLCB7CiAgICBkaXJlY3RpdmVzOiBbewogICAgICBuYW1lOiAic2hvdyIsCiAgICAgIHJhd05hbWU6ICJ2LXNob3ciLAogICAgICB2YWx1ZTogX3ZtLmFsZXJ0LnNob3csCiAgICAgIGV4cHJlc3Npb246ICJhbGVydC5zaG93IgogICAgfV0sCiAgICBzdGF0aWNDbGFzczogInZzc3VlLWFsZXJ0IiwKICAgIGRvbVByb3BzOiB7CiAgICAgICJ0ZXh0Q29udGVudCI6IF92bS5fcyhfdm0uYWxlcnQubWVzc2FnZSkKICAgIH0sCiAgICBvbjogewogICAgICAiY2xpY2siOiBmdW5jdGlvbiBjbGljaygkZXZlbnQpIHsKICAgICAgICByZXR1cm4gX3ZtLmFsZXJ0SGlkZSgpOwogICAgICB9CiAgICB9CiAgfSldKV0sIDEpOwp9OwoKdmFyIF9fdnVlX3N0YXRpY1JlbmRlckZuc19fJDUgPSBbXTsKLyogc3R5bGUgKi8KCnZhciBfX3Z1ZV9pbmplY3Rfc3R5bGVzX18kOCA9IHVuZGVmaW5lZDsKLyogc2NvcGVkICovCgp2YXIgX192dWVfc2NvcGVfaWRfXyQ4ID0gdW5kZWZpbmVkOwovKiBtb2R1bGUgaWRlbnRpZmllciAqLwoKdmFyIF9fdnVlX21vZHVsZV9pZGVudGlmaWVyX18kOCA9IHVuZGVmaW5lZDsKLyogZnVuY3Rpb25hbCB0ZW1wbGF0ZSAqLwoKdmFyIF9fdnVlX2lzX2Z1bmN0aW9uYWxfdGVtcGxhdGVfXyQ4ID0gZmFsc2U7Ci8qIHN0eWxlIGluamVjdCAqLwoKLyogc3R5bGUgaW5qZWN0IFNTUiAqLwoKLyogc3R5bGUgaW5qZWN0IHNoYWRvdyBkb20gKi8KCnZhciBfX3Z1ZV9jb21wb25lbnRfXyQ4ID0gbm9ybWFsaXplQ29tcG9uZW50KHsKICByZW5kZXI6IF9fdnVlX3JlbmRlcl9fJDUsCiAgc3RhdGljUmVuZGVyRm5zOiBfX3Z1ZV9zdGF0aWNSZW5kZXJGbnNfXyQ1Cn0sIF9fdnVlX2luamVjdF9zdHlsZXNfXyQ4LCBfX3Z1ZV9zY3JpcHRfXyQ4LCBfX3Z1ZV9zY29wZV9pZF9fJDgsIF9fdnVlX2lzX2Z1bmN0aW9uYWxfdGVtcGxhdGVfXyQ4LCBfX3Z1ZV9tb2R1bGVfaWRlbnRpZmllcl9fJDgsIGZhbHNlLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgdW5kZWZpbmVkKTsKCnZhciBWc3N1ZVN0YXR1cyA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoX1Z1ZSQ2KSB7CiAgX2luaGVyaXRzKFZzc3VlU3RhdHVzLCBfVnVlJDYpOwoKICB2YXIgX3N1cGVyNiA9IF9jcmVhdGVTdXBlcihWc3N1ZVN0YXR1cyk7CgogIGZ1bmN0aW9uIFZzc3VlU3RhdHVzKCkgewogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFZzc3VlU3RhdHVzKTsKCiAgICByZXR1cm4gX3N1cGVyNi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogIH0KCiAgX2NyZWF0ZUNsYXNzKFZzc3VlU3RhdHVzLCBbewogICAga2V5OiAic3RhdHVzIiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICBpZiAodGhpcy52c3N1ZS5pc0ZhaWxlZCkgewogICAgICAgIHJldHVybiAnZmFpbGVkJzsKICAgICAgfSBlbHNlIGlmICh0aGlzLnZzc3VlLmlzSW5pdGlhbGl6aW5nKSB7CiAgICAgICAgcmV0dXJuICdpbml0aWFsaXppbmcnOwogICAgICB9IGVsc2UgaWYgKHRoaXMudnNzdWUuaXNJc3N1ZU5vdENyZWF0ZWQgJiYgIXRoaXMudnNzdWUuaXNDcmVhdGluZ0lzc3VlKSB7CiAgICAgICAgaWYgKHRoaXMudnNzdWUuaXNBZG1pbiB8fCAhdGhpcy52c3N1ZS5pc0xvZ2luZWQpIHsKICAgICAgICAgIHJldHVybiAnaXNzdWVOb3RDcmVhdGVkJzsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgcmV0dXJuICdmYWlsZWQnOwogICAgICAgIH0KICAgICAgfSBlbHNlIGlmICh0aGlzLnZzc3VlLmlzTG9naW5SZXF1aXJlZCkgewogICAgICAgIHJldHVybiAnbG9naW5SZXF1aXJlZCc7CiAgICAgIH0gZWxzZSBpZiAoIXRoaXMudnNzdWUuY29tbWVudHMgfHwgdGhpcy52c3N1ZS5pc0NyZWF0aW5nSXNzdWUpIHsKICAgICAgICByZXR1cm4gJ2xvYWRpbmdDb21tZW50cyc7CiAgICAgIH0gZWxzZSBpZiAodGhpcy52c3N1ZS5jb21tZW50cy5kYXRhLmxlbmd0aCA9PT0gMCkgewogICAgICAgIHJldHVybiAnbm9Db21tZW50cyc7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICJoYW5kbGVDbGljayIsCiAgICB2YWx1ZTogZnVuY3Rpb24gaGFuZGxlQ2xpY2soKSB7CiAgICAgIGlmICh0aGlzLnN0YXR1cyA9PT0gJ2lzc3VlTm90Q3JlYXRlZCcpIHsKICAgICAgICB0aGlzLnZzc3VlLnBvc3RJc3N1ZSgpOwogICAgICB9IGVsc2UgaWYgKHRoaXMuc3RhdHVzID09PSAnbG9naW5SZXF1aXJlZCcpIHsKICAgICAgICB0aGlzLnZzc3VlLmxvZ2luKCk7CiAgICAgIH0KICAgIH0KICB9XSk7CgogIHJldHVybiBWc3N1ZVN0YXR1czsKfShWdWUkMSk7CgpfX2RlY29yYXRlKFtJbmplY3QoKV0sIFZzc3VlU3RhdHVzLnByb3RvdHlwZSwgInZzc3VlIiwgdm9pZCAwKTsKClZzc3VlU3RhdHVzID0gX19kZWNvcmF0ZShbQ29tcG9uZW50KHsKICBjb21wb25lbnRzOiB7CiAgICBUcmFuc2l0aW9uRmFkZTogX192dWVfY29tcG9uZW50X18kMSwKICAgIFZzc3VlSWNvbjogX192dWVfY29tcG9uZW50X18kMgogIH0KfSldLCBWc3N1ZVN0YXR1cyk7CnZhciBzY3JpcHQkOSA9IFZzc3VlU3RhdHVzOwovKiBzY3JpcHQgKi8KCnZhciBfX3Z1ZV9zY3JpcHRfXyQ5ID0gc2NyaXB0JDk7Ci8qIHRlbXBsYXRlICovCgp2YXIgX192dWVfcmVuZGVyX18kNiA9IGZ1bmN0aW9uIF9fdnVlX3JlbmRlcl9fJDYoKSB7CiAgdmFyIF92bSA9IHRoaXM7CgogIHZhciBfaCA9IF92bS4kY3JlYXRlRWxlbWVudDsKCiAgdmFyIF9jID0gX3ZtLl9zZWxmLl9jIHx8IF9oOwoKICByZXR1cm4gX2MoJ1RyYW5zaXRpb25GYWRlJywgW192bS5zdGF0dXMgPyBfYygnZGl2JywgewogICAga2V5OiBfdm0uc3RhdHVzLAogICAgc3RhdGljQ2xhc3M6ICJ2c3N1ZS1zdGF0dXMiCiAgfSwgW1snZmFpbGVkJywgJ2xvYWRpbmdDb21tZW50cycsICdpbml0aWFsaXppbmcnXS5pbmNsdWRlcyhfdm0uc3RhdHVzKSA/IF9jKCdWc3N1ZUljb24nLCB7CiAgICBhdHRyczogewogICAgICAibmFtZSI6IF92bS5zdGF0dXMgPT09ICdmYWlsZWQnID8gJ2Vycm9yJyA6ICdsb2FkaW5nJwogICAgfQogIH0pIDogX3ZtLl9lKCksIF92bS5fdigiICIpLCBfYygncCcsIHsKICAgIHN0YXRpY0NsYXNzOiAidnNzdWUtc3RhdHVzLWluZm8iCiAgfSwgW19jKFsnaXNzdWVOb3RDcmVhdGVkJywgJ2xvZ2luUmVxdWlyZWQnXS5pbmNsdWRlcyhfdm0uc3RhdHVzKSA/ICdhJyA6ICdzcGFuJywgewogICAgdGFnOiAiQ29tcG9uZW50IiwKICAgIG9uOiB7CiAgICAgICJjbGljayI6IF92bS5oYW5kbGVDbGljawogICAgfQogIH0sIFtfdm0uX3YoIlxuICAgICAgICAiICsgX3ZtLl9zKF92bS52c3N1ZS4kdChfdm0uc3RhdHVzKSkgKyAiXG4gICAgICAiKV0pXSwgMSldLCAxKSA6IF92bS5fZSgpXSk7Cn07Cgp2YXIgX192dWVfc3RhdGljUmVuZGVyRm5zX18kNiA9IFtdOwovKiBzdHlsZSAqLwoKdmFyIF9fdnVlX2luamVjdF9zdHlsZXNfXyQ5ID0gdW5kZWZpbmVkOwovKiBzY29wZWQgKi8KCnZhciBfX3Z1ZV9zY29wZV9pZF9fJDkgPSB1bmRlZmluZWQ7Ci8qIG1vZHVsZSBpZGVudGlmaWVyICovCgp2YXIgX192dWVfbW9kdWxlX2lkZW50aWZpZXJfXyQ5ID0gdW5kZWZpbmVkOwovKiBmdW5jdGlvbmFsIHRlbXBsYXRlICovCgp2YXIgX192dWVfaXNfZnVuY3Rpb25hbF90ZW1wbGF0ZV9fJDkgPSBmYWxzZTsKLyogc3R5bGUgaW5qZWN0ICovCgovKiBzdHlsZSBpbmplY3QgU1NSICovCgovKiBzdHlsZSBpbmplY3Qgc2hhZG93IGRvbSAqLwoKdmFyIF9fdnVlX2NvbXBvbmVudF9fJDkgPSBub3JtYWxpemVDb21wb25lbnQoewogIHJlbmRlcjogX192dWVfcmVuZGVyX18kNiwKICBzdGF0aWNSZW5kZXJGbnM6IF9fdnVlX3N0YXRpY1JlbmRlckZuc19fJDYKfSwgX192dWVfaW5qZWN0X3N0eWxlc19fJDksIF9fdnVlX3NjcmlwdF9fJDksIF9fdnVlX3Njb3BlX2lkX18kOSwgX192dWVfaXNfZnVuY3Rpb25hbF90ZW1wbGF0ZV9fJDksIF9fdnVlX21vZHVsZV9pZGVudGlmaWVyX18kOSwgZmFsc2UsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB1bmRlZmluZWQpOwoKdmFyIFZzc3VlQm9keSA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoX1Z1ZSQ3KSB7CiAgX2luaGVyaXRzKFZzc3VlQm9keSwgX1Z1ZSQ3KTsKCiAgdmFyIF9zdXBlcjcgPSBfY3JlYXRlU3VwZXIoVnNzdWVCb2R5KTsKCiAgZnVuY3Rpb24gVnNzdWVCb2R5KCkgewogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFZzc3VlQm9keSk7CgogICAgcmV0dXJuIF9zdXBlcjcuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICB9CgogIHJldHVybiBWc3N1ZUJvZHk7Cn0oVnVlJDEpOwoKX19kZWNvcmF0ZShbSW5qZWN0KCldLCBWc3N1ZUJvZHkucHJvdG90eXBlLCAidnNzdWUiLCB2b2lkIDApOwoKVnNzdWVCb2R5ID0gX19kZWNvcmF0ZShbQ29tcG9uZW50KHsKICBjb21wb25lbnRzOiB7CiAgICBUcmFuc2l0aW9uRmFkZTogX192dWVfY29tcG9uZW50X18kMSwKICAgIFZzc3VlSWNvbjogX192dWVfY29tcG9uZW50X18kMiwKICAgIFZzc3VlQ29tbWVudHM6IF9fdnVlX2NvbXBvbmVudF9fJDUsCiAgICBWc3N1ZU5ld0NvbW1lbnQ6IF9fdnVlX2NvbXBvbmVudF9fJDcsCiAgICBWc3N1ZU5vdGljZTogX192dWVfY29tcG9uZW50X18kOCwKICAgIFZzc3VlU3RhdHVzOiBfX3Z1ZV9jb21wb25lbnRfXyQ5CiAgfQp9KV0sIFZzc3VlQm9keSk7CnZhciBzY3JpcHQkYSA9IFZzc3VlQm9keTsKLyogc2NyaXB0ICovCgp2YXIgX192dWVfc2NyaXB0X18kYSA9IHNjcmlwdCRhOwovKiB0ZW1wbGF0ZSAqLwoKdmFyIF9fdnVlX3JlbmRlcl9fJDcgPSBmdW5jdGlvbiBfX3Z1ZV9yZW5kZXJfXyQ3KCkgewogIHZhciBfdm0gPSB0aGlzOwoKICB2YXIgX2ggPSBfdm0uJGNyZWF0ZUVsZW1lbnQ7CgogIHZhciBfYyA9IF92bS5fc2VsZi5fYyB8fCBfaDsKCiAgcmV0dXJuIF9jKCdUcmFuc2l0aW9uRmFkZScsIFshX3ZtLnZzc3VlLmlzSW5pdGlhbGl6aW5nID8gX2MoJ2RpdicsIHsKICAgIHN0YXRpY0NsYXNzOiAidnNzdWUtYm9keSIKICB9LCBbX3ZtLnZzc3VlLkFQSSA/IF9jKCdWc3N1ZU5ld0NvbW1lbnQnKSA6IF92bS5fZSgpLCBfdm0uX3YoIiAiKSwgX2MoJ1Zzc3VlTm90aWNlJyksIF92bS5fdigiICIpLCBfYygnVHJhbnNpdGlvbkZhZGUnLCBbX3ZtLnZzc3VlLmNvbW1lbnRzICYmIF92bS52c3N1ZS5jb21tZW50cy5kYXRhLmxlbmd0aCA+IDAgPyBfYygnVnNzdWVDb21tZW50cycpIDogX2MoJ1Zzc3VlU3RhdHVzJyldLCAxKV0sIDEpIDogX2MoJ1Zzc3VlU3RhdHVzJyldLCAxKTsKfTsKCnZhciBfX3Z1ZV9zdGF0aWNSZW5kZXJGbnNfXyQ3ID0gW107Ci8qIHN0eWxlICovCgp2YXIgX192dWVfaW5qZWN0X3N0eWxlc19fJGEgPSB1bmRlZmluZWQ7Ci8qIHNjb3BlZCAqLwoKdmFyIF9fdnVlX3Njb3BlX2lkX18kYSA9IHVuZGVmaW5lZDsKLyogbW9kdWxlIGlkZW50aWZpZXIgKi8KCnZhciBfX3Z1ZV9tb2R1bGVfaWRlbnRpZmllcl9fJGEgPSB1bmRlZmluZWQ7Ci8qIGZ1bmN0aW9uYWwgdGVtcGxhdGUgKi8KCnZhciBfX3Z1ZV9pc19mdW5jdGlvbmFsX3RlbXBsYXRlX18kYSA9IGZhbHNlOwovKiBzdHlsZSBpbmplY3QgKi8KCi8qIHN0eWxlIGluamVjdCBTU1IgKi8KCi8qIHN0eWxlIGluamVjdCBzaGFkb3cgZG9tICovCgp2YXIgX192dWVfY29tcG9uZW50X18kYSA9IG5vcm1hbGl6ZUNvbXBvbmVudCh7CiAgcmVuZGVyOiBfX3Z1ZV9yZW5kZXJfXyQ3LAogIHN0YXRpY1JlbmRlckZuczogX192dWVfc3RhdGljUmVuZGVyRm5zX18kNwp9LCBfX3Z1ZV9pbmplY3Rfc3R5bGVzX18kYSwgX192dWVfc2NyaXB0X18kYSwgX192dWVfc2NvcGVfaWRfXyRhLCBfX3Z1ZV9pc19mdW5jdGlvbmFsX3RlbXBsYXRlX18kYSwgX192dWVfbW9kdWxlX2lkZW50aWZpZXJfXyRhLCBmYWxzZSwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIHVuZGVmaW5lZCk7Cgp2YXIgVnNzdWVIZWFkZXIgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKF9WdWUkOCkgewogIF9pbmhlcml0cyhWc3N1ZUhlYWRlciwgX1Z1ZSQ4KTsKCiAgdmFyIF9zdXBlcjggPSBfY3JlYXRlU3VwZXIoVnNzdWVIZWFkZXIpOwoKICBmdW5jdGlvbiBWc3N1ZUhlYWRlcigpIHsKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBWc3N1ZUhlYWRlcik7CgogICAgcmV0dXJuIF9zdXBlcjguYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICB9CgogIHJldHVybiBWc3N1ZUhlYWRlcjsKfShWdWUkMSk7CgpfX2RlY29yYXRlKFtJbmplY3QoKV0sIFZzc3VlSGVhZGVyLnByb3RvdHlwZSwgInZzc3VlIiwgdm9pZCAwKTsKClZzc3VlSGVhZGVyID0gX19kZWNvcmF0ZShbQ29tcG9uZW50XSwgVnNzdWVIZWFkZXIpOwp2YXIgc2NyaXB0JGIgPSBWc3N1ZUhlYWRlcjsKLyogc2NyaXB0ICovCgp2YXIgX192dWVfc2NyaXB0X18kYiA9IHNjcmlwdCRiOwovKiB0ZW1wbGF0ZSAqLwoKdmFyIF9fdnVlX3JlbmRlcl9fJDggPSBmdW5jdGlvbiBfX3Z1ZV9yZW5kZXJfXyQ4KCkgewogIHZhciBfdm0gPSB0aGlzOwoKICB2YXIgX2ggPSBfdm0uJGNyZWF0ZUVsZW1lbnQ7CgogIHZhciBfYyA9IF92bS5fc2VsZi5fYyB8fCBfaDsKCiAgcmV0dXJuIF9jKCdkaXYnLCB7CiAgICBzdGF0aWNDbGFzczogInZzc3VlLWhlYWRlciIKICB9LCBbX2MoJ2EnLCB7CiAgICBzdGF0aWNDbGFzczogInZzc3VlLWhlYWRlci1jb21tZW50cy1jb3VudCIsCiAgICBhdHRyczogewogICAgICAiaHJlZiI6IF92bS52c3N1ZS5pc3N1ZSA/IF92bS52c3N1ZS5pc3N1ZS5saW5rIDogbnVsbCwKICAgICAgInRhcmdldCI6ICJfYmxhbmsiLAogICAgICAicmVsIjogIm5vb3BlbmVyIG5vcmVmZXJyZXIiCiAgICB9CiAgfSwgW19jKCdzcGFuJywgW192bS5fdigiXG4gICAgICAiICsgX3ZtLl9zKF92bS52c3N1ZS5jb21tZW50cyA/IF92bS52c3N1ZS4kdGMoJ2NvbW1lbnRzJywgX3ZtLnZzc3VlLmNvbW1lbnRzLmNvdW50LCB7CiAgICBjb3VudDogX3ZtLnZzc3VlLmNvbW1lbnRzLmNvdW50CiAgfSkgOiBfdm0udnNzdWUuJHRjKCdjb21tZW50cycsIDApKSArICJcbiAgICAiKV0pXSksIF92bS5fdigiICIpLCBfYygnc3BhbicsIHsKICAgIHN0YXRpY0NsYXNzOiAidnNzdWUtaGVhZGVyLXBvd2VyZWQtYnkiCiAgfSwgW19jKCdzcGFuJywgW192bS5fdigiUG93ZXJlZCBieSIpXSksIF92bS5fdigiICIpLCBfdm0udnNzdWUuQVBJID8gX2MoJ3NwYW4nLCBbX2MoJ2EnLCB7CiAgICBhdHRyczogewogICAgICAiaHJlZiI6IF92bS52c3N1ZS5BUEkucGxhdGZvcm0ubGluaywKICAgICAgInRpdGxlIjogX3ZtLnZzc3VlLkFQSS5wbGF0Zm9ybS5uYW1lICsgIiBBUEkgIiArIF92bS52c3N1ZS5BUEkucGxhdGZvcm0udmVyc2lvbiwKICAgICAgInRhcmdldCI6ICJfYmxhbmsiLAogICAgICAicmVsIjogIm5vb3BlbmVyIG5vcmVmZXJyZXIiCiAgICB9CiAgfSwgW192bS5fdigiXG4gICAgICAgICIgKyBfdm0uX3MoX3ZtLnZzc3VlLkFQSS5wbGF0Zm9ybS5uYW1lKSArICJcbiAgICAgICIpXSksIF92bS5fdigiICIpLCBfYygnc3BhbicsIFtfdm0uX3YoIiYiKV0pXSkgOiBfdm0uX2UoKSwgX3ZtLl92KCIgIiksIF9jKCdhJywgewogICAgYXR0cnM6IHsKICAgICAgImhyZWYiOiAiaHR0cHM6Ly9naXRodWIuY29tL21ldGVvcmx4eS92c3N1ZSIsCiAgICAgICJ0aXRsZSI6ICJWc3N1ZSB2IiArIF92bS52c3N1ZS52ZXJzaW9uLAogICAgICAidGFyZ2V0IjogIl9ibGFuayIsCiAgICAgICJyZWwiOiAibm9vcGVuZXIgbm9yZWZlcnJlciIKICAgIH0KICB9LCBbX3ZtLl92KCJcbiAgICAgIFZzc3VlXG4gICAgIildKV0pXSk7Cn07Cgp2YXIgX192dWVfc3RhdGljUmVuZGVyRm5zX18kOCA9IFtdOwovKiBzdHlsZSAqLwoKdmFyIF9fdnVlX2luamVjdF9zdHlsZXNfXyRiID0gdW5kZWZpbmVkOwovKiBzY29wZWQgKi8KCnZhciBfX3Z1ZV9zY29wZV9pZF9fJGIgPSB1bmRlZmluZWQ7Ci8qIG1vZHVsZSBpZGVudGlmaWVyICovCgp2YXIgX192dWVfbW9kdWxlX2lkZW50aWZpZXJfXyRiID0gdW5kZWZpbmVkOwovKiBmdW5jdGlvbmFsIHRlbXBsYXRlICovCgp2YXIgX192dWVfaXNfZnVuY3Rpb25hbF90ZW1wbGF0ZV9fJGIgPSBmYWxzZTsKLyogc3R5bGUgaW5qZWN0ICovCgovKiBzdHlsZSBpbmplY3QgU1NSICovCgovKiBzdHlsZSBpbmplY3Qgc2hhZG93IGRvbSAqLwoKdmFyIF9fdnVlX2NvbXBvbmVudF9fJGIgPSBub3JtYWxpemVDb21wb25lbnQoewogIHJlbmRlcjogX192dWVfcmVuZGVyX18kOCwKICBzdGF0aWNSZW5kZXJGbnM6IF9fdnVlX3N0YXRpY1JlbmRlckZuc19fJDgKfSwgX192dWVfaW5qZWN0X3N0eWxlc19fJGIsIF9fdnVlX3NjcmlwdF9fJGIsIF9fdnVlX3Njb3BlX2lkX18kYiwgX192dWVfaXNfZnVuY3Rpb25hbF90ZW1wbGF0ZV9fJGIsIF9fdnVlX21vZHVsZV9pZGVudGlmaWVyX18kYiwgZmFsc2UsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB1bmRlZmluZWQpOwoKdmFyIG1lc3NhZ2VzID0gewogIC8vIGF1dGgKICBsb2dpbjogJ0xvZ2luIHdpdGgge3BsYXRmb3JtfScsCiAgbG9nb3V0OiAnTG9nb3V0JywKICBjdXJyZW50VXNlcjogJ0N1cnJlbnQgVXNlcicsCiAgLy8gY29tbWVudCBpbnB1dAogIGxvYWRpbmc6ICdMb2FkaW5nJywKICBzdWJtaXQ6ICdTdWJtaXQnLAogIHN1Ym1pdHRpbmc6ICdTdWJtaXR0aW5nJywKICBzdWJtaXRDb21tZW50OiAnU3VibWl0IENvbW1lbnQnLAogIGNhbmNlbDogJ0NhbmNlbCcsCiAgZWRpdDogJ0VkaXQnLAogIGVkaXRNb2RlOiAnRWRpdCBNb2RlJywKICAiZGVsZXRlIjogJ0RlbGV0ZScsCiAgcmVwbHk6ICdSZXBseScsCiAgLy8gcmVhY3Rpb25zCiAgaGVhcnQ6ICdIZWFydCcsCiAgbGlrZTogJ0xpa2UnLAogIHVubGlrZTogJ1VubGlrZScsCiAgLy8gcGFnaW5hdGlvbgogIHBlclBhZ2U6ICdDb21tZW50cyBwZXIgcGFnZScsCiAgc29ydDogJ0NsaWNrIHRvIGNoYW5nZSB0aGUgc29ydCBkaXJlY3Rpb24nLAogIHBhZ2U6ICdQYWdlJywKICBwcmV2OiAnUHJldmlvdXMgUGFnZScsCiAgbmV4dDogJ05leHQgUGFnZScsCiAgLy8gaGludAogIGNvbW1lbnRzOiAnQ29tbWVudHMgfCB7Y291bnR9IENvbW1lbnQgfCB7Y291bnR9IENvbW1lbnRzJywKICBsb2dpblRvQ29tbWVudDogJ0xvZ2luIHdpdGgge3BsYXRmb3JtfSBhY2NvdW50IHRvIGxlYXZlIGEgY29tbWVudCcsCiAgcGxhY2Vob2xkZXI6ICdMZWF2ZSBhIGNvbW1lbnQuIFN0eWxpbmcgd2l0aCBNYXJrZG93biBpcyBzdXBwb3J0ZWQuIEN0cmwgKyBFbnRlciB0byBzdWJtaXQuJywKICBub0xvZ2luUGxhY2VIb2xkZXI6ICdMb2dpbiB0byBsZWF2ZSBhIGNvbW1lbnQuIFN0eWxpbmcgd2l0aCBNYXJrZG93biBpcyBzdXBwb3J0ZWQuICcsCiAgLy8gc3RhdHVzCiAgZmFpbGVkOiAnRmFpbGVkIHRvIGxvYWQgY29tbWVudHMnLAogIGluaXRpYWxpemluZzogJ0luaXRpYWxpemluZy4uLicsCiAgaXNzdWVOb3RDcmVhdGVkOiAnQ2xpY2sgdG8gY3JlYXRlIGlzc3VlJywKICBsb2FkaW5nQ29tbWVudHM6ICdMb2FkaW5nIGNvbW1lbnRzLi4uJywKICBsb2dpblJlcXVpcmVkOiAnTG9naW4gdG8gdmlldyBjb21tZW50cycsCiAgbm9Db21tZW50czogJ05vIGNvbW1lbnRzIHlldC4gTGVhdmUgdGhlIGZpcnN0IGNvbW1lbnQgIScsCiAgLy8gYWxlcnRzCiAgcmVhY3Rpb25HaXZlbjogIkFscmVhZHkgZ2l2ZW4gJ3tyZWFjdGlvbn0nIHJlYWN0aW9uIiwKICBkZWxldGVDb25maXJtOiAnQ29uZmlybSB0byBkZWxldGUgdGhpcyBjb21tZW50ID8nLAogIGRlbGV0ZUZhaWxlZDogJ0ZhaWxlZCB0byBkZWxldGUgY29tbWVudCcKfTsKdmFyIG1lc3NhZ2VzJDEgPSB7CiAgLy8gYXV0aAogIGxvZ2luOiAn5L2/55SoIHtwbGF0Zm9ybX0g55m75b2VJywKICBsb2dvdXQ6ICfpgIDlh7rnmbvlvZUnLAogIGN1cnJlbnRVc2VyOiAn5b2T5YmN55So5oi3JywKICAvLyBjb21tZW50IGlucHV0CiAgbG9hZGluZzogJ+WKoOi9veS4rScsCiAgc3VibWl0OiAn5o+Q5LqkJywKICBzdWJtaXR0aW5nOiAn5Y+R6KGo5LitJywKICBzdWJtaXRDb21tZW50OiAn5Y+R6KGo6K+E6K66JywKICBjYW5jZWw6ICflj5bmtognLAogIGVkaXQ6ICfnvJbovpEnLAogIGVkaXRNb2RlOiAn57yW6L6R5qih5byPJywKICAiZGVsZXRlIjogJ+WIoOmZpCcsCiAgcmVwbHk6ICflm57lpI0nLAogIC8vIHJlYWN0aW9ucwogIGhlYXJ0OiAn5Zac5qyiJywKICBsaWtlOiAn6LWeJywKICB1bmxpa2U6ICfouKknLAogIC8vIHBhZ2luYXRpb24KICBwZXJQYWdlOiAn5q+P6aG16K+E6K665pWwJywKICBzb3J0OiAn54K55Ye75pS55Y+Y5o6S5bqP5pa55byPJywKICBwYWdlOiAn6aG15pWwJywKICBwcmV2OiAn5LiK5LiA6aG1JywKICBuZXh0OiAn5LiL5LiA6aG1JywKICAvLyBoaW50CiAgY29tbWVudHM6ICfor4TorrogfCB7Y291bnR9IOadoeivhOiuuiB8IHtjb3VudH0g5p2h6K+E6K66JywKICBsb2dpblRvQ29tbWVudDogJ+S9v+eUqCB7cGxhdGZvcm19IOW4kOWPt+eZu+W9leWQjuWPkeihqOivhOiuuicsCiAgcGxhY2Vob2xkZXI6ICfnlZnkuIvkvaDnmoTor4TorrrkuKjmlK/mjIEgTWFya2Rvd24g6K+t5rOV5LioQ3RybCArIEVudGVyIOWPkeihqOivhOiuuicsCiAgbm9Mb2dpblBsYWNlSG9sZGVyOiAn55m75b2V5ZCO5omN6IO95Y+R6KGo6K+E6K665Lio5pSv5oyBIE1hcmtkb3duIOivreazlScsCiAgLy8gc3RhdHVzCiAgZmFpbGVkOiAn6K+E6K665Yqg6L295aSx6LSlJywKICBpbml0aWFsaXppbmc6ICfmraPlnKjliJ3lp4vljJYuLi4nLAogIGlzc3VlTm90Q3JlYXRlZDogJ+eCueWHu+WIm+W7uiBJc3N1ZScsCiAgbG9hZGluZ0NvbW1lbnRzOiAn5q2j5Zyo5Yqg6L296K+E6K66Li4uJywKICBsb2dpblJlcXVpcmVkOiAn55m75b2V5ZCO5p+l55yL6K+E6K66JywKICBub0NvbW1lbnRzOiAn6L+Y5rKh5pyJ6K+E6K6677yM5p2l5Y+R6KGo56ys5LiA5p2h6K+E6K665ZCn77yBJywKICAvLyBhbGVydHMKICByZWFjdGlvbkdpdmVuOiAiXHU1REYyXHU3RUNGXHU2REZCXHU1MkEwXHU4RkM3ICd7cmVhY3Rpb259JyBcdTRFODYiLAogIGRlbGV0ZUNvbmZpcm06ICfnoa7orqTopoHliKDpmaTor6Xor4TorrrlkJfvvJ8nLAogIGRlbGV0ZUZhaWxlZDogJ+ivhOiuuuWIoOmZpOWksei0pScKfTsKdmFyIG1lc3NhZ2VzJDIgPSB7CiAgLy8gYXV0aAogIGxvZ2luOiAnRW50cmFyIGNvbSB7cGxhdGZvcm19JywKICBsb2dvdXQ6ICdTYWlyJywKICBjdXJyZW50VXNlcjogJ1VzdcOhcmlvIEF0dWFsJywKICAvLyBjb21tZW50IGlucHV0CiAgbG9hZGluZzogJ0NhcnJlZ2FuZG8nLAogIHN1Ym1pdDogJ0VudmlhcicsCiAgc3VibWl0dGluZzogJ0VudmlhbmRvJywKICBzdWJtaXRDb21tZW50OiAnRW52aWFyIENvbWVudMOhcmlvJywKICBjYW5jZWw6ICdDYW5jZWxhcicsCiAgZWRpdDogJ0VkaXRhcicsCiAgZWRpdE1vZGU6ICdNb2RvIGRlIEVkacOnw6NvJywKICAiZGVsZXRlIjogJ0FwYWdhcicsCiAgcmVwbHk6ICdSZXNwb25kZXInLAogIC8vIHJlYWN0aW9ucwogIGhlYXJ0OiAnSGVhcnQnLAogIGxpa2U6ICdMaWtlJywKICB1bmxpa2U6ICdVbmxpa2UnLAogIC8vIHBhZ2luYXRpb24KICBwZXJQYWdlOiAnQ29tZW50w6FyaW9zIHBvciBww6FnaW5hJywKICBzb3J0OiAnQ2xpcXVlIHBhcmEgYWx0ZXJhciBhIG9yZGVuYcOnw6NvJywKICBwYWdlOiAnUMOhZ2luYScsCiAgcHJldjogJ1DDoWdpbmEgQW50ZXJpb3InLAogIG5leHQ6ICdQcsOzeGltYSBQw6FnaW5hJywKICAvLyBoaW50CiAgY29tbWVudHM6ICdDb21lbnTDoXJpb3MgfCB7Y291bnR9IENvbWVudMOhcmlvIHwge2NvdW50fSBDb21lbnTDoXJpb3MnLAogIGxvZ2luVG9Db21tZW50OiAnRW50cmUgY29tIHVtYSBjb250YSB7cGxhdGZvcm19IHBhcmEgZGVpeGFyIHVtIGNvbWVudMOhcmlvJywKICBwbGFjZWhvbGRlcjogJ0RlaXhlIHVtIGNvbWVudMOhcmlvLiBFc3RpbG9zIGNvbSBNYXJrZG93biBzdXBvcnRhZG9zLiBDdHJsICsgRW50ZXIgcGFyYSBlbnZpYXIuJywKICBub0xvZ2luUGxhY2VIb2xkZXI6ICdFbnRyZSBwYXJhIGRlaXhhciB1bSBjb21lbnTDoXJpby4gRXN0aWxvcyBjb20gTWFya2Rvd24gc3Vwb3J0YWRvcy4gJywKICAvLyBzdGF0dXMKICBmYWlsZWQ6ICdGYWxoYSBhbyBjYXJyZWdhciBjb21lbnTDoXJpb3MnLAogIGluaXRpYWxpemluZzogJ0luaWNpYWxpemFuZG8uLi4nLAogIGlzc3VlTm90Q3JlYXRlZDogJ0NsaWNrIHRvIGNyZWF0ZSBpc3N1ZScsCiAgbG9hZGluZ0NvbW1lbnRzOiAnQ2FycmVnYW5kbyBjb21lbnTDoXJpb3MuLi4nLAogIGxvZ2luUmVxdWlyZWQ6ICdFbnRyYXIgcGFyYSB2aXN1YWxpemFyIGNvbWVudMOhcmlvcycsCiAgbm9Db21tZW50czogJ05lbmh1bSBjb21lbnTDoXJpby4gRGVpeGUgbyBwcmltZWlybyBjb21lbnTDoXJpbyEnLAogIC8vIGFsZXJ0cwogIHJlYWN0aW9uR2l2ZW46ICJKXHhFMSByZWFnaXUgY29tICd7cmVhY3Rpb259JyIsCiAgZGVsZXRlQ29uZmlybTogJ0FwYWdhciBlc3RlIGNvbWVudMOhcmlvPycsCiAgZGVsZXRlRmFpbGVkOiAnRmFsaGEgYW8gYXBhZ2FyIGNvbWVudMOhcmlvJwp9Owp2YXIgbWVzc2FnZXMkMyA9IHsKICAvLyBhdXRoCiAgbG9naW46ICd7cGxhdGZvcm19IOOBp+ODreOCsOOCpOODsycsCiAgbG9nb3V0OiAn44Ot44Kw44Ki44Km44OIJywKICBjdXJyZW50VXNlcjogJ+ePvuWcqOOBruODpuODvOOCtuODvCcsCiAgLy8gY29tbWVudCBpbnB1dAogIGxvYWRpbmc6ICfoqq3jgb/ovrzjgb/kuK0nLAogIHN1Ym1pdDogJ+mAgeS/oScsCiAgc3VibWl0dGluZzogJ+mAgeS/oeS4rScsCiAgc3VibWl0Q29tbWVudDogJ+OCs+ODoeODs+ODiOOCkumAgeS/oScsCiAgY2FuY2VsOiAn44Kt44Oj44Oz44K744OrJywKICBlZGl0OiAn57eo6ZuGJywKICBlZGl0TW9kZTogJ+e3qOmbhuODouODvOODiScsCiAgImRlbGV0ZSI6ICfliYrpmaQnLAogIHJlcGx5OiAn6L+U5L+hJywKICAvLyByZWFjdGlvbnMKICBoZWFydDogJ+ODj+ODvOODiCcsCiAgbGlrZTogJ+mrmOipleS+oScsCiAgdW5saWtlOiAn5L2O6KmV5L6hJywKICAvLyBwYWdpbmF0aW9uCiAgcGVyUGFnZTogJ+OCs+ODoeODs+ODiC/jg5rjg7zjgrgnLAogIHNvcnQ6ICfkuKbjgbPpoIbjgpLlpInmm7TjgZnjgovjgavjga/jgq/jg6rjg4Pjgq/jgZfjgabjgY/jgaDjgZXjgYQnLAogIHBhZ2U6ICfjg5rjg7zjgrgnLAogIHByZXY6ICfliY3jga7jg5rjg7zjgrgnLAogIG5leHQ6ICfmrKHjga7jg5rjg7zjgrgnLAogIC8vIGhpbnQKICBjb21tZW50czogJ+OCs+ODoeODs+ODiCB8IHtjb3VudH0g44Kz44Oh44Oz44OIIHwge2NvdW50fSDjgrPjg6Hjg7Pjg4gnLAogIGxvZ2luVG9Db21tZW50OiAn44Kz44Oh44Oz44OI44KS5q6L44GZ44Gr44GvIHtwbGF0Zm9ybX0g44Ki44Kr44Km44Oz44OI44Gn44Ot44Kw44Kk44Oz44GX44Gm44GP44Gg44GV44GE44CCJywKICBwbGFjZWhvbGRlcjogJ+OCs+ODoeODs+ODiOOCkuaui+OBl+OBpuOBj+OBoOOBleOBhOOAgk1hcmtkb3duIOiomOazleOCkuOCteODneODvOODiOOBl+OBpuOBhOOBvuOBmeOAgiBDdHJsICsgRW50ZXIg44Gn6YCB5L+h44Gn44GN44G+44GZ44CCJywKICBub0xvZ2luUGxhY2VIb2xkZXI6ICfjgrPjg6Hjg7Pjg4jjgpLmrovjgZnjgavjga/jg63jgrDjgqTjg7PjgZfjgabjgY/jgaDjgZXjgYTjgILjg57jg7zjgq/jg4Djgqbjg7PoqJjms5XjgpLjgrXjg53jg7zjg4jjgZfjgabjgYTjgb7jgZnjgIInLAogIC8vIHN0YXR1cwogIGZhaWxlZDogJ+OCs+ODoeODs+ODiOOBruiqreOBv+i+vOOBv+OBq+WkseaVl+OBl+OBvuOBl+OBnycsCiAgaW5pdGlhbGl6aW5nOiAn5Yid5pyf5YyW5LitLi4uJywKICBpc3N1ZU5vdENyZWF0ZWQ6ICdDbGljayB0byBjcmVhdGUgaXNzdWUnLAogIGxvYWRpbmdDb21tZW50czogJ+OCs+ODoeODs+ODiOOBruiqreOBv+i+vOOBv+S4rS4uLicsCiAgbG9naW5SZXF1aXJlZDogJ+OCs+ODoeODs+ODiOOCkuimi+OCi+OBq+OBr+ODreOCsOOCpOODs+OBl+OBpuOBj+OBoOOBleOBhCcsCiAgbm9Db21tZW50czogJ+OBvuOBoOOCs+ODoeODs+ODiOOBjOOBguOCiuOBvuOBm+OCk+OAguacgOWIneOBruOCs+ODoeODs+ODiOOCkuaui+OBl+OBvuOBl+OCh+OBhu+8gScsCiAgLy8gYWxlcnRzCiAgcmVhY3Rpb25HaXZlbjogIlx1NjVFMlx1MzA2QiAne3JlYWN0aW9ufScgXHUzMDZFXHUzMEVBXHUzMEEyXHUzMEFGXHUzMEI3XHUzMEU3XHUzMEYzXHUzMDkyXHUzMDU3XHUzMDY2XHUzMDQ0XHUzMDdFXHUzMDU5IiwKICBkZWxldGVDb25maXJtOiAn5pys5b2T44Gr44Kz44Oh44Oz44OI44KS5YmK6Zmk44GX44Gm44KC44GE44GE44Gn44GZ44GL77yfJywKICBkZWxldGVGYWlsZWQ6ICfjgrPjg6Hjg7Pjg4jjga7liYrpmaTjgavlpLHmlZfjgZfjgb7jgZfjgZ8nCn07CnZhciBtZXNzYWdlcyQ0ID0gewogIC8vIGF1dGgKICBsb2dpbjogJ9eU16rXl9eR16jXlSDXotedIHtwbGF0Zm9ybX0nLAogIGxvZ291dDogJ9eU16rXoNeq16fXlScsCiAgY3VycmVudFVzZXI6ICfXntep16rXntepL9eqINeg15XXm9eX15kv16onLAogIC8vIGNvbW1lbnQgaW5wdXQKICBsb2FkaW5nOiAn15jXldei158nLAogIHN1Ym1pdDogJ9ep15zXmdeX15QnLAogIHN1Ym1pdHRpbmc6ICfXqdeV15zXlycsCiAgc3VibWl0Q29tbWVudDogJ9ep15zXmdeX16og16rXkteV15HXlCcsCiAgY2FuY2VsOiAn15HXmdeY15wnLAogIGVkaXQ6ICfXoteo15nXm9eUJywKICBlZGl0TW9kZTogJ9ee16bXkSDXoteo15nXm9eUJywKICAiZGVsZXRlIjogJ9ee15fXmden15QnLAogIHJlcGx5OiAn16rXqdeV15HXlCcsCiAgLy8gcmVhY3Rpb25zCiAgaGVhcnQ6ICfXnNeRJywKICBsaWtlOiAn15zXmdeZ16cnLAogIHVubGlrZTogJ9eQ16DXnNeZ15nXpycsCiAgLy8gcGFnaW5hdGlvbgogIHBlclBhZ2U6ICfXqteS15XXkdeV16og15zXk9ejJywKICBzb3J0OiAn15zXl9em15Ug15vXk9eZINec16nXoNeV16og15DXqiDXm9eZ15XXldefINeU157XmdeV158nLAogIHBhZ2U6ICfXk9ejJywKICBwcmV2OiAn15TXk9ejINeU16fXldeT150nLAogIG5leHQ6ICfXlNeT16Mg15TXkdeQJywKICAvLyBoaW50CiAgY29tbWVudHM6ICfXqteS15XXkdeV16ogfCB7Y291bnR9INeq15LXldeR15QgfCB7Y291bnR9INeq15LXldeR15XXqicsCiAgbG9naW5Ub0NvbW1lbnQ6ICfXlNeq15fXkdeo15Ug16LXnSDXl9ep15HXldefIHtwbGF0Zm9ybX0g15vXk9eZINec15TXqdeQ15nXqCDXqteS15XXkdeUJywKICBwbGFjZWhvbGRlcjogJ9eU16nXkNeZ16jXlSDXqteS15XXkdeULiDXmdepINeq157Xmdeb15Qg15HXoteZ16bXldeRINeR16LXlteo16ogTWFya2Rvd24uIEN0cmwgKyBFbnRlciDXm9eT15kg15zXqdec15XXly4nLAogIG5vTG9naW5QbGFjZUhvbGRlcjogJ9eU16rXl9eR16jXlSDXm9eT15kg15zXlNep15DXmdeoINeq15LXldeR15QuINeZ16kg16rXnteZ15vXlCDXkdei15nXpteV15Eg15HXoteW16jXqiBNYXJrZG93bi4gJywKICAvLyBzdGF0dXMKICBmYWlsZWQ6ICfXm9ep15zXldefINeR15jXoteZ16DXqiDXlNeq15LXldeR15XXqicsCiAgaW5pdGlhbGl6aW5nOiAn157XkNeq15fXnC4uLicsCiAgaXNzdWVOb3RDcmVhdGVkOiAn15zXl9em15Ug15zXmdem15nXqNeqIGlzc3VlJywKICBsb2FkaW5nQ29tbWVudHM6ICfXmNeV16LXnyDXqteS15XXkdeV16ouLi4nLAogIGxvZ2luUmVxdWlyZWQ6ICfXlNeq15fXkdeo15Ug15vXk9eZINec16bXpNeV16og15HXqteS15XXkdeV16onLAogIG5vQ29tbWVudHM6ICfXoteT15nXmdefINeQ15nXnyDXqteS15XXkdeV16ouINeU16nXkNeZ16jXlSDXqteS15XXkdeUINeo15DXqdeV16DXlCAhJywKICAvLyBhbGVydHMKICByZWFjdGlvbkdpdmVuOiAiXHUwNURCXHUwNUQxXHUwNUU4IFx1MDVFMFx1MDVEOVx1MDVFQVx1MDVERiBcdTA1RDdcdTA1RDlcdTA1RDVcdTA1RDVcdTA1RDkgJ3tyZWFjdGlvbn0nIiwKICBkZWxldGVDb25maXJtOiAn15HXmNeV15fXmdedINeR157Xl9eZ16fXqiDXlNeq15LXldeR15QgPycsCiAgZGVsZXRlRmFpbGVkOiAn15vXqdec15XXnyDXkdee15fXmden16og15TXqteS15XXkdeUJwp9OwoKaWYgKCFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoVnVlLCAnJGkxOG4nKSkgewogIFZ1ZS51c2UoVnVlSTE4bik7Cn0KCnZhciBpMThuID0gbmV3IFZ1ZUkxOG4oewogIGxvY2FsZTogJ2VuJywKICBmYWxsYmFja0xvY2FsZTogJ2VuJywKICBtZXNzYWdlczogewogICAgZW46IG1lc3NhZ2VzLAogICAgJ2VuLVVTJzogbWVzc2FnZXMsCiAgICB6aDogbWVzc2FnZXMkMSwKICAgICd6aC1DTic6IG1lc3NhZ2VzJDEsCiAgICBwdDogbWVzc2FnZXMkMiwKICAgICdwdC1CUic6IG1lc3NhZ2VzJDIsCiAgICBqYTogbWVzc2FnZXMkMywKICAgICdqYS1KUCc6IG1lc3NhZ2VzJDMsCiAgICBoZTogbWVzc2FnZXMkNCwKICAgICdoZS1JTCc6IG1lc3NhZ2VzJDQKICB9Cn0pOwoKdmFyIFZzc3VlU3RvcmUgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKF9WdWUkOSkgewogIF9pbmhlcml0cyhWc3N1ZVN0b3JlLCBfVnVlJDkpOwoKICB2YXIgX3N1cGVyOSA9IF9jcmVhdGVTdXBlcihWc3N1ZVN0b3JlKTsKCiAgZnVuY3Rpb24gVnNzdWVTdG9yZSgpIHsKICAgIHZhciBfdGhpczEyOwoKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBWc3N1ZVN0b3JlKTsKCiAgICBfdGhpczEyID0gX3N1cGVyOS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwoKICAgIF90aGlzMTIudGl0bGUgPSBmdW5jdGlvbiAob3B0aW9ucykgewogICAgICByZXR1cm4gIiIuY29uY2F0KG9wdGlvbnMucHJlZml4KS5jb25jYXQoZG9jdW1lbnQudGl0bGUpOwogICAgfTsKCiAgICBfdGhpczEyLmlzc3VlSWQgPSBudWxsOwogICAgX3RoaXMxMi5vcHRpb25zID0gbnVsbDsKICAgIF90aGlzMTIuQVBJID0gbnVsbDsKICAgIF90aGlzMTIuYWNjZXNzVG9rZW4gPSBudWxsOwogICAgX3RoaXMxMi51c2VyID0gbnVsbDsKICAgIF90aGlzMTIuaXNzdWUgPSBudWxsOwogICAgX3RoaXMxMi5jb21tZW50cyA9IG51bGw7CiAgICBfdGhpczEyLnF1ZXJ5ID0gewogICAgICBwYWdlOiAxLAogICAgICBwZXJQYWdlOiAxMCwKICAgICAgc29ydDogJ2Rlc2MnCiAgICB9OwogICAgX3RoaXMxMi5pc0luaXRpYWxpemluZyA9IHRydWU7CiAgICBfdGhpczEyLmlzSXNzdWVOb3RDcmVhdGVkID0gZmFsc2U7CiAgICBfdGhpczEyLmlzTG9naW5SZXF1aXJlZCA9IGZhbHNlOwogICAgX3RoaXMxMi5pc0ZhaWxlZCA9IGZhbHNlOwogICAgX3RoaXMxMi5pc0NyZWF0aW5nSXNzdWUgPSBmYWxzZTsKICAgIF90aGlzMTIuaXNMb2FkaW5nQ29tbWVudHMgPSBmYWxzZTsKICAgIF90aGlzMTIuaXNDcmVhdGluZ0NvbW1lbnQgPSBmYWxzZTsKICAgIF90aGlzMTIuaXNVcGRhdGluZ0NvbW1lbnQgPSBmYWxzZTsKICAgIHJldHVybiBfdGhpczEyOwogIH0KCiAgX2NyZWF0ZUNsYXNzKFZzc3VlU3RvcmUsIFt7CiAgICBrZXk6ICJ2ZXJzaW9uIiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICByZXR1cm4gIjEuNC44IjsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJpc3N1ZVRpdGxlIiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICBpZiAodGhpcy5vcHRpb25zID09PSBudWxsKSB7CiAgICAgICAgcmV0dXJuICcnOwogICAgICB9CgogICAgICByZXR1cm4gdHlwZW9mIHRoaXMudGl0bGUgPT09ICdmdW5jdGlvbicgPyB0aGlzLnRpdGxlKHRoaXMub3B0aW9ucykgOiAiIi5jb25jYXQodGhpcy5vcHRpb25zLnByZWZpeCkuY29uY2F0KHRoaXMudGl0bGUpOwogICAgfQogIH0sIHsKICAgIGtleTogImlzUGVuZGluZyIsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgcmV0dXJuIHRoaXMuaXNMb2FkaW5nQ29tbWVudHMgfHwgdGhpcy5pc0NyZWF0aW5nQ29tbWVudCB8fCB0aGlzLmlzVXBkYXRpbmdDb21tZW50OwogICAgfQogIH0sIHsKICAgIGtleTogImlzTG9naW5lZCIsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgcmV0dXJuIHRoaXMuYWNjZXNzVG9rZW4gIT09IG51bGwgJiYgdGhpcy51c2VyICE9PSBudWxsOwogICAgfQogIH0sIHsKICAgIGtleTogImlzQWRtaW4iLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHJldHVybiB0aGlzLm9wdGlvbnMgIT09IG51bGwgJiYgdGhpcy5hY2Nlc3NUb2tlbiAhPT0gbnVsbCAmJiB0aGlzLnVzZXIgIT09IG51bGwgJiYgKHRoaXMudXNlci51c2VybmFtZSA9PT0gdGhpcy5vcHRpb25zLm93bmVyIHx8IHRoaXMub3B0aW9ucy5hZG1pbnMuaW5jbHVkZXModGhpcy51c2VyLnVzZXJuYW1lKSk7CiAgICB9CiAgICAvKioKICAgICAqIHRoZSBrZXkgb2YgYWNjZXNzIHRva2VuIGZvciBsb2NhbCBzdG9yYWdlCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAiYWNjZXNzVG9rZW5LZXkiLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHJldHVybiB0aGlzLkFQSSA/ICJWc3N1ZS4iLmNvbmNhdCh0aGlzLkFQSS5wbGF0Zm9ybS5uYW1lLnRvTG93ZXJDYXNlKCksICIuYWNjZXNzX3Rva2VuIikgOiAnJzsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJvblF1ZXJ5UGVyUGFnZUNoYW5nZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gb25RdWVyeVBlclBhZ2VDaGFuZ2UoKSB7CiAgICAgIHRoaXMucXVlcnkucGFnZSA9IDE7CiAgICAgIHRoaXMuZ2V0Q29tbWVudHMoKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJvblF1ZXJ5Q2hhbmdlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBvblF1ZXJ5Q2hhbmdlKCkgewogICAgICB0aGlzLmdldENvbW1lbnRzKCk7CiAgICB9CiAgICAvKioKICAgICAqIFNldCBvcHRpb25zIG9mIFZzc3VlCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAic2V0T3B0aW9ucyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gc2V0T3B0aW9ucyhvcHRpb25zKSB7CiAgICAgIHRoaXMub3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oewogICAgICAgIGxhYmVsczogWydWc3N1ZSddLAogICAgICAgIHN0YXRlOiAnVnNzdWUnLAogICAgICAgIHByZWZpeDogJ1tWc3N1ZV0nLAogICAgICAgIGFkbWluczogW10sCiAgICAgICAgcGVyUGFnZTogMTAsCiAgICAgICAgcHJveHk6IGZ1bmN0aW9uIHByb3h5KHVybCkgewogICAgICAgICAgcmV0dXJuICJodHRwczovL2NvcnMtYW55d2hlcmUuYXptLndvcmtlcnMuZGV2LyIuY29uY2F0KHVybCk7CiAgICAgICAgfSwKICAgICAgICBpc3N1ZUNvbnRlbnQ6IGZ1bmN0aW9uIGlzc3VlQ29udGVudChfcmVmNSkgewogICAgICAgICAgdmFyIHVybCA9IF9yZWY1LnVybDsKICAgICAgICAgIHJldHVybiB1cmw7CiAgICAgICAgfSwKICAgICAgICBhdXRvQ3JlYXRlSXNzdWU6IGZhbHNlCiAgICAgIH0sIG9wdGlvbnMpOyAvLyBjaGVjayBvcHRpb25zCgogICAgICB2YXIgcmVxdWlyZWRPcHRpb25zID0gWydhcGknLCAnb3duZXInLCAncmVwbycsICdjbGllbnRJZCddOwoKICAgICAgZm9yICh2YXIgX2kgPSAwLCBfcmVxdWlyZWRPcHRpb25zID0gcmVxdWlyZWRPcHRpb25zOyBfaSA8IF9yZXF1aXJlZE9wdGlvbnMubGVuZ3RoOyBfaSsrKSB7CiAgICAgICAgdmFyIG9wdCA9IF9yZXF1aXJlZE9wdGlvbnNbX2ldOwoKICAgICAgICBpZiAoIXRoaXMub3B0aW9uc1tvcHRdKSB7CiAgICAgICAgICBjb25zb2xlLndhcm4oIltWc3N1ZV0gdGhlIG9wdGlvbiAnIi5jb25jYXQob3B0LCAiJyBpcyByZXF1aXJlZCIpKTsKICAgICAgICB9CiAgICAgIH0gLy8gc2V0IGxvY2FsZQoKCiAgICAgIGlmICh0aGlzLm9wdGlvbnMubG9jYWxlKSB7CiAgICAgICAgdGhpcy4kaTE4bi5sb2NhbGUgPSB0aGlzLm9wdGlvbnMubG9jYWxlOwogICAgICB9IGVsc2UgewogICAgICAgIHZhciBsb2NhbGVzID0gT2JqZWN0LmtleXModGhpcy4kaTE4bi5tZXNzYWdlcyk7CiAgICAgICAgdmFyIG5hdkxhbmdzID0gd2luZG93Lm5hdmlnYXRvci5sYW5ndWFnZXM7CiAgICAgICAgdGhpcy4kaTE4bi5sb2NhbGUgPSBuYXZMYW5ncy5maWx0ZXIoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgIHJldHVybiBsb2NhbGVzLmluY2x1ZGVzKGl0ZW0pOwogICAgICAgIH0pLnNoaWZ0KCkgfHwgJ2VuJzsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBJbml0aWFsaXphdGlvbgogICAgICovCgogIH0sIHsKICAgIGtleTogImluaXQiLAogICAgdmFsdWU6IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF9pbml0ID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNSgpIHsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTUkKF9jb250ZXh0NSkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDUucHJldiA9IF9jb250ZXh0NS5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX2NvbnRleHQ1LnByZXYgPSAwOwogICAgICAgICAgICAgICAgX2NvbnRleHQ1Lm5leHQgPSAzOwogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuaW5pdFN0b3JlKCk7CgogICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgIF9jb250ZXh0NS5uZXh0ID0gNTsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmluaXRDb21tZW50cygpOwoKICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgICBfY29udGV4dDUubmV4dCA9IDExOwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgICAgIF9jb250ZXh0NS5wcmV2ID0gNzsKICAgICAgICAgICAgICAgIF9jb250ZXh0NS50MCA9IF9jb250ZXh0NVsiY2F0Y2giXSgwKTsKCiAgICAgICAgICAgICAgICBpZiAoX2NvbnRleHQ1LnQwLnJlc3BvbnNlICYmIFs0MDEsIDQwM10uaW5jbHVkZXMoX2NvbnRleHQ1LnQwLnJlc3BvbnNlLnN0YXR1cykpIHsKICAgICAgICAgICAgICAgICAgLy8gaW4gc29tZSBjYXNlcywgcmVxdWlyZSBsb2dpbiB0byBsb2FkIGNvbW1lbnRzCiAgICAgICAgICAgICAgICAgIHRoaXMuaXNMb2dpblJlcXVpcmVkID0gdHJ1ZTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgIHRoaXMuaXNGYWlsZWQgPSB0cnVlOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoX2NvbnRleHQ1LnQwKTsKCiAgICAgICAgICAgICAgY2FzZSAxMToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NS5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlNSwgdGhpcywgW1swLCA3XV0pOwogICAgICB9KSk7CgogICAgICBmdW5jdGlvbiBpbml0KCkgewogICAgICAgIHJldHVybiBfaW5pdC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9CgogICAgICByZXR1cm4gaW5pdDsKICAgIH0oKQogICAgLyoqCiAgICAgKiBJbml0IFZzc3VlU3RvcmUKICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJpbml0U3RvcmUiLAogICAgdmFsdWU6IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF9pbml0U3RvcmUgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU2KCkgewogICAgICAgIHZhciBBUElDb25zdHJ1Y3RvcjsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTYkKF9jb250ZXh0NikgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDYucHJldiA9IF9jb250ZXh0Ni5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX2NvbnRleHQ2LnByZXYgPSAwOwoKICAgICAgICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQ2Lm5leHQgPSAzOwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ09wdGlvbnMgYXJlIHJlcXVpcmVkIHRvIGluaXRpYWxpemUgVnNzdWUnKTsKCiAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgLy8gcmVzZXQgZGF0YQogICAgICAgICAgICAgICAgdGhpcy5BUEkgPSBudWxsOwogICAgICAgICAgICAgICAgdGhpcy5hY2Nlc3NUb2tlbiA9IG51bGw7CiAgICAgICAgICAgICAgICB0aGlzLnVzZXIgPSBudWxsOwogICAgICAgICAgICAgICAgdGhpcy5pc3N1ZSA9IG51bGw7CiAgICAgICAgICAgICAgICB0aGlzLmNvbW1lbnRzID0gbnVsbDsKICAgICAgICAgICAgICAgIHRoaXMucXVlcnkgPSB7CiAgICAgICAgICAgICAgICAgIHBhZ2U6IDEsCiAgICAgICAgICAgICAgICAgIHBlclBhZ2U6IHRoaXMub3B0aW9ucy5wZXJQYWdlLAogICAgICAgICAgICAgICAgICBzb3J0OiAnZGVzYycKICAgICAgICAgICAgICAgIH07IC8vIHJlc2V0IHN0YXR1cwoKICAgICAgICAgICAgICAgIHRoaXMuaXNJbml0aWFsaXppbmcgPSB0cnVlOwogICAgICAgICAgICAgICAgdGhpcy5pc0lzc3VlTm90Q3JlYXRlZCA9IGZhbHNlOwogICAgICAgICAgICAgICAgdGhpcy5pc0xvZ2luUmVxdWlyZWQgPSBmYWxzZTsKICAgICAgICAgICAgICAgIHRoaXMuaXNGYWlsZWQgPSBmYWxzZTsKICAgICAgICAgICAgICAgIHRoaXMuaXNDcmVhdGluZ0lzc3VlID0gZmFsc2U7CiAgICAgICAgICAgICAgICB0aGlzLmlzTG9hZGluZ0NvbW1lbnRzID0gZmFsc2U7CiAgICAgICAgICAgICAgICB0aGlzLmlzQ3JlYXRpbmdDb21tZW50ID0gZmFsc2U7CiAgICAgICAgICAgICAgICB0aGlzLmlzVXBkYXRpbmdDb21tZW50ID0gZmFsc2U7IC8vIGdldCB0aGUgVnNzdWVBUEkgaW5zdGFuY2UgYWNjb3JkaW5nIHRvIHRoZSBvcHRpb25zLmFwaQoKICAgICAgICAgICAgICAgIEFQSUNvbnN0cnVjdG9yID0gdGhpcy5vcHRpb25zLmFwaTsKICAgICAgICAgICAgICAgIHRoaXMuQVBJID0gbmV3IEFQSUNvbnN0cnVjdG9yKHsKICAgICAgICAgICAgICAgICAgYmFzZVVSTDogdGhpcy5vcHRpb25zLmJhc2VVUkwsCiAgICAgICAgICAgICAgICAgIGxhYmVsczogdGhpcy5vcHRpb25zLmxhYmVscywKICAgICAgICAgICAgICAgICAgc3RhdGU6IHRoaXMub3B0aW9ucy5zdGF0ZSwKICAgICAgICAgICAgICAgICAgb3duZXI6IHRoaXMub3B0aW9ucy5vd25lciwKICAgICAgICAgICAgICAgICAgcmVwbzogdGhpcy5vcHRpb25zLnJlcG8sCiAgICAgICAgICAgICAgICAgIGNsaWVudElkOiB0aGlzLm9wdGlvbnMuY2xpZW50SWQsCiAgICAgICAgICAgICAgICAgIGNsaWVudFNlY3JldDogdGhpcy5vcHRpb25zLmNsaWVudFNlY3JldCwKICAgICAgICAgICAgICAgICAgcHJveHk6IHRoaXMub3B0aW9ucy5wcm94eQogICAgICAgICAgICAgICAgfSk7IC8vIGhhbmRsZSBhdXRob3JpemF0aW9uCgogICAgICAgICAgICAgICAgX2NvbnRleHQ2Lm5leHQgPSAyMTsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmhhbmRsZUF1dGgoKTsKCiAgICAgICAgICAgICAgY2FzZSAyMToKICAgICAgICAgICAgICAgIF9jb250ZXh0Ni5wcmV2ID0gMjE7CiAgICAgICAgICAgICAgICB0aGlzLmlzSW5pdGlhbGl6aW5nID0gZmFsc2U7CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ2LmZpbmlzaCgyMSk7CgogICAgICAgICAgICAgIGNhc2UgMjQ6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDYuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTYsIHRoaXMsIFtbMCwsIDIxLCAyNF1dKTsKICAgICAgfSkpOwoKICAgICAgZnVuY3Rpb24gaW5pdFN0b3JlKCkgewogICAgICAgIHJldHVybiBfaW5pdFN0b3JlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KCiAgICAgIHJldHVybiBpbml0U3RvcmU7CiAgICB9KCkKICAgIC8qKgogICAgICogSW5pdCBjb21tZW50cwogICAgICovCgogIH0sIHsKICAgIGtleTogImluaXRDb21tZW50cyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gKCkgewogICAgICB2YXIgX2luaXRDb21tZW50cyA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTcoKSB7CiAgICAgICAgdmFyIF95aWVsZCRQcm9taXNlJGFsbCwgX3lpZWxkJFByb21pc2UkYWxsMiwgaXNzdWUsIGNvbW1lbnRzOwoKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTckKF9jb250ZXh0NykgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDcucHJldiA9IF9jb250ZXh0Ny5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgaWYgKCEoIXRoaXMuQVBJIHx8ICF0aGlzLm9wdGlvbnMpKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Ny5uZXh0ID0gMjsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Ny5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuaXNzdWVJZCkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDcubmV4dCA9IDEzOwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBfY29udGV4dDcubmV4dCA9IDU7CiAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwoW3RoaXMuQVBJLmdldElzc3VlKHsKICAgICAgICAgICAgICAgICAgYWNjZXNzVG9rZW46IHRoaXMuYWNjZXNzVG9rZW4sCiAgICAgICAgICAgICAgICAgIGlzc3VlSWQ6IHRoaXMuaXNzdWVJZAogICAgICAgICAgICAgICAgfSksIHRoaXMuQVBJLmdldENvbW1lbnRzKHsKICAgICAgICAgICAgICAgICAgYWNjZXNzVG9rZW46IHRoaXMuYWNjZXNzVG9rZW4sCiAgICAgICAgICAgICAgICAgIGlzc3VlSWQ6IHRoaXMuaXNzdWVJZCwKICAgICAgICAgICAgICAgICAgcXVlcnk6IHRoaXMucXVlcnkKICAgICAgICAgICAgICAgIH0pXSk7CgogICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICAgIF95aWVsZCRQcm9taXNlJGFsbCA9IF9jb250ZXh0Ny5zZW50OwogICAgICAgICAgICAgICAgX3lpZWxkJFByb21pc2UkYWxsMiA9IF9zbGljZWRUb0FycmF5KF95aWVsZCRQcm9taXNlJGFsbCwgMik7CiAgICAgICAgICAgICAgICBpc3N1ZSA9IF95aWVsZCRQcm9taXNlJGFsbDJbMF07CiAgICAgICAgICAgICAgICBjb21tZW50cyA9IF95aWVsZCRQcm9taXNlJGFsbDJbMV07CiAgICAgICAgICAgICAgICB0aGlzLmlzc3VlID0gaXNzdWU7CiAgICAgICAgICAgICAgICB0aGlzLmNvbW1lbnRzID0gY29tbWVudHM7CiAgICAgICAgICAgICAgICBfY29udGV4dDcubmV4dCA9IDI1OwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgMTM6CiAgICAgICAgICAgICAgICBfY29udGV4dDcubmV4dCA9IDE1OwogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuQVBJLmdldElzc3VlKHsKICAgICAgICAgICAgICAgICAgYWNjZXNzVG9rZW46IHRoaXMuYWNjZXNzVG9rZW4sCiAgICAgICAgICAgICAgICAgIGlzc3VlVGl0bGU6IHRoaXMuaXNzdWVUaXRsZQogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgMTU6CiAgICAgICAgICAgICAgICB0aGlzLmlzc3VlID0gX2NvbnRleHQ3LnNlbnQ7CgogICAgICAgICAgICAgICAgaWYgKCEodGhpcy5pc3N1ZSA9PT0gbnVsbCkpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQ3Lm5leHQgPSAyMzsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgLy8gaWYgdGhlIGlzc3VlIG9mIHRoaXMgcGFnZSBkb2VzIG5vdCBleGlzdAogICAgICAgICAgICAgICAgdGhpcy5pc0lzc3VlTm90Q3JlYXRlZCA9IHRydWU7IC8vIHRyeSB0byBjcmVhdGUgaXNzdWUgd2hlbiBgYXV0b0NyZWF0ZUlzc3VlID0gdHJ1ZWAKCiAgICAgICAgICAgICAgICBpZiAoIXRoaXMub3B0aW9ucy5hdXRvQ3JlYXRlSXNzdWUpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQ3Lm5leHQgPSAyMTsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgX2NvbnRleHQ3Lm5leHQgPSAyMTsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnBvc3RJc3N1ZSgpOwoKICAgICAgICAgICAgICBjYXNlIDIxOgogICAgICAgICAgICAgICAgX2NvbnRleHQ3Lm5leHQgPSAyNTsKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICBjYXNlIDIzOgogICAgICAgICAgICAgICAgX2NvbnRleHQ3Lm5leHQgPSAyNTsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmdldENvbW1lbnRzKCk7CgogICAgICAgICAgICAgIGNhc2UgMjU6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDcuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTcsIHRoaXMpOwogICAgICB9KSk7CgogICAgICBmdW5jdGlvbiBpbml0Q29tbWVudHMoKSB7CiAgICAgICAgcmV0dXJuIF9pbml0Q29tbWVudHMuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfQoKICAgICAgcmV0dXJuIGluaXRDb21tZW50czsKICAgIH0oKQogICAgLyoqCiAgICAgKiBQb3N0IGEgbmV3IGlzc3VlCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAicG9zdElzc3VlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfcG9zdElzc3VlID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlOCgpIHsKICAgICAgICB2YXIgaXNzdWU7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU4JChfY29udGV4dDgpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ4LnByZXYgPSBfY29udGV4dDgubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGlmICghKCF0aGlzLkFQSSB8fCAhdGhpcy5vcHRpb25zIHx8IHRoaXMuaXNzdWUgfHwgdGhpcy5pc3N1ZUlkKSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDgubmV4dCA9IDI7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDguYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgLy8gbG9naW4gdG8gY3JlYXRlIGlzc3VlCiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuaXNMb2dpbmVkKSB7CiAgICAgICAgICAgICAgICAgIHRoaXMubG9naW4oKTsKICAgICAgICAgICAgICAgIH0gLy8gb25seSBvd25lci9hZG1pbnMgY2FuIGNyZWF0ZSBpc3N1ZQoKCiAgICAgICAgICAgICAgICBpZiAodGhpcy5pc0FkbWluKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0OC5uZXh0ID0gNTsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0OC5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgICBfY29udGV4dDgucHJldiA9IDU7CiAgICAgICAgICAgICAgICB0aGlzLmlzQ3JlYXRpbmdJc3N1ZSA9IHRydWU7CiAgICAgICAgICAgICAgICBfY29udGV4dDgudDAgPSB0aGlzLkFQSTsKICAgICAgICAgICAgICAgIF9jb250ZXh0OC50MSA9IHRoaXMuaXNzdWVUaXRsZTsKICAgICAgICAgICAgICAgIF9jb250ZXh0OC5uZXh0ID0gMTE7CiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5vcHRpb25zLmlzc3VlQ29udGVudCh7CiAgICAgICAgICAgICAgICAgIG9wdGlvbnM6IHRoaXMub3B0aW9ucywKICAgICAgICAgICAgICAgICAgdXJsOiBnZXRDbGVhblVSTCh3aW5kb3cubG9jYXRpb24uaHJlZikKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDExOgogICAgICAgICAgICAgICAgX2NvbnRleHQ4LnQyID0gX2NvbnRleHQ4LnNlbnQ7CiAgICAgICAgICAgICAgICBfY29udGV4dDgudDMgPSB0aGlzLmFjY2Vzc1Rva2VuOwogICAgICAgICAgICAgICAgX2NvbnRleHQ4LnQ0ID0gewogICAgICAgICAgICAgICAgICB0aXRsZTogX2NvbnRleHQ4LnQxLAogICAgICAgICAgICAgICAgICBjb250ZW50OiBfY29udGV4dDgudDIsCiAgICAgICAgICAgICAgICAgIGFjY2Vzc1Rva2VuOiBfY29udGV4dDgudDMKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICBfY29udGV4dDgubmV4dCA9IDE2OwogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0OC50MC5wb3N0SXNzdWUuY2FsbChfY29udGV4dDgudDAsIF9jb250ZXh0OC50NCk7CgogICAgICAgICAgICAgIGNhc2UgMTY6CiAgICAgICAgICAgICAgICBpc3N1ZSA9IF9jb250ZXh0OC5zZW50OwogICAgICAgICAgICAgICAgdGhpcy5pc3N1ZSA9IGlzc3VlOwogICAgICAgICAgICAgICAgdGhpcy5pc0lzc3VlTm90Q3JlYXRlZCA9IGZhbHNlOwogICAgICAgICAgICAgICAgX2NvbnRleHQ4Lm5leHQgPSAyMTsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmdldENvbW1lbnRzKCk7CgogICAgICAgICAgICAgIGNhc2UgMjE6CiAgICAgICAgICAgICAgICBfY29udGV4dDgubmV4dCA9IDI2OwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgMjM6CiAgICAgICAgICAgICAgICBfY29udGV4dDgucHJldiA9IDIzOwogICAgICAgICAgICAgICAgX2NvbnRleHQ4LnQ1ID0gX2NvbnRleHQ4WyJjYXRjaCJdKDUpOwogICAgICAgICAgICAgICAgdGhpcy5pc0ZhaWxlZCA9IHRydWU7CgogICAgICAgICAgICAgIGNhc2UgMjY6CiAgICAgICAgICAgICAgICBfY29udGV4dDgucHJldiA9IDI2OwogICAgICAgICAgICAgICAgdGhpcy5pc0NyZWF0aW5nSXNzdWUgPSBmYWxzZTsKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDguZmluaXNoKDI2KTsKCiAgICAgICAgICAgICAgY2FzZSAyOToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0OC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlOCwgdGhpcywgW1s1LCAyMywgMjYsIDI5XV0pOwogICAgICB9KSk7CgogICAgICBmdW5jdGlvbiBwb3N0SXNzdWUoKSB7CiAgICAgICAgcmV0dXJuIF9wb3N0SXNzdWUuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfQoKICAgICAgcmV0dXJuIHBvc3RJc3N1ZTsKICAgIH0oKQogICAgLyoqCiAgICAgKiBHZXQgY29tbWVudHMgb2YgdGhpcyB2c3N1ZSBhY2NvcmRpbmcgdG8gdGhlIGlzc3VlIGlkCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAiZ2V0Q29tbWVudHMiLAogICAgdmFsdWU6IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF9nZXRDb21tZW50cyA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTkoKSB7CiAgICAgICAgdmFyIGNvbW1lbnRzOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlOSQoX2NvbnRleHQ5KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0OS5wcmV2ID0gX2NvbnRleHQ5Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfY29udGV4dDkucHJldiA9IDA7CgogICAgICAgICAgICAgICAgaWYgKCEoIXRoaXMuQVBJIHx8ICF0aGlzLmlzc3VlIHx8IHRoaXMuaXNMb2FkaW5nQ29tbWVudHMpKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0OS5uZXh0ID0gMzsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0OS5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICB0aGlzLmlzTG9hZGluZ0NvbW1lbnRzID0gdHJ1ZTsKICAgICAgICAgICAgICAgIF9jb250ZXh0OS5uZXh0ID0gNjsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLkFQSS5nZXRDb21tZW50cyh7CiAgICAgICAgICAgICAgICAgIGFjY2Vzc1Rva2VuOiB0aGlzLmFjY2Vzc1Rva2VuLAogICAgICAgICAgICAgICAgICBpc3N1ZUlkOiB0aGlzLmlzc3VlLmlkLAogICAgICAgICAgICAgICAgICBxdWVyeTogdGhpcy5xdWVyeQogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICAgIGNvbW1lbnRzID0gX2NvbnRleHQ5LnNlbnQ7CiAgICAgICAgICAgICAgICB0aGlzLmNvbW1lbnRzID0gY29tbWVudHM7CgogICAgICAgICAgICAgICAgaWYgKHRoaXMucXVlcnkucGFnZSAhPT0gY29tbWVudHMucGFnZSkgewogICAgICAgICAgICAgICAgICB0aGlzLnF1ZXJ5LnBhZ2UgPSBjb21tZW50cy5wYWdlOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGlmICh0aGlzLnF1ZXJ5LnBlclBhZ2UgIT09IGNvbW1lbnRzLnBlclBhZ2UpIHsKICAgICAgICAgICAgICAgICAgdGhpcy5xdWVyeS5wZXJQYWdlID0gY29tbWVudHMucGVyUGFnZTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ5LmFicnVwdCgicmV0dXJuIiwgY29tbWVudHMpOwoKICAgICAgICAgICAgICBjYXNlIDEzOgogICAgICAgICAgICAgICAgX2NvbnRleHQ5LnByZXYgPSAxMzsKICAgICAgICAgICAgICAgIF9jb250ZXh0OS50MCA9IF9jb250ZXh0OVsiY2F0Y2giXSgwKTsKCiAgICAgICAgICAgICAgICBpZiAoIShfY29udGV4dDkudDAucmVzcG9uc2UgJiYgWzQwMSwgNDAzXS5pbmNsdWRlcyhfY29udGV4dDkudDAucmVzcG9uc2Uuc3RhdHVzKSAmJiAhdGhpcy5pc0xvZ2luZWQpKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0OS5uZXh0ID0gMTk7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHRoaXMuaXNMb2dpblJlcXVpcmVkID0gdHJ1ZTsKICAgICAgICAgICAgICAgIF9jb250ZXh0OS5uZXh0ID0gMjE7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSAxOToKICAgICAgICAgICAgICAgIHRoaXMuJGVtaXQoJ2Vycm9yJywgX2NvbnRleHQ5LnQwKTsKICAgICAgICAgICAgICAgIHRocm93IF9jb250ZXh0OS50MDsKCiAgICAgICAgICAgICAgY2FzZSAyMToKICAgICAgICAgICAgICAgIF9jb250ZXh0OS5wcmV2ID0gMjE7CiAgICAgICAgICAgICAgICB0aGlzLmlzTG9hZGluZ0NvbW1lbnRzID0gZmFsc2U7CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ5LmZpbmlzaCgyMSk7CgogICAgICAgICAgICAgIGNhc2UgMjQ6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDkuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTksIHRoaXMsIFtbMCwgMTMsIDIxLCAyNF1dKTsKICAgICAgfSkpOwoKICAgICAgZnVuY3Rpb24gZ2V0Q29tbWVudHMoKSB7CiAgICAgICAgcmV0dXJuIF9nZXRDb21tZW50cy5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9CgogICAgICByZXR1cm4gZ2V0Q29tbWVudHM7CiAgICB9KCkKICAgIC8qKgogICAgICogUG9zdCBhIG5ldyBjb21tZW50CiAgICAgKi8KCiAgfSwgewogICAga2V5OiAicG9zdENvbW1lbnQiLAogICAgdmFsdWU6IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF9wb3N0Q29tbWVudCA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTEwKF9yZWY2KSB7CiAgICAgICAgdmFyIGNvbnRlbnQsIGNvbW1lbnQ7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUxMCQoX2NvbnRleHQxMCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDEwLnByZXYgPSBfY29udGV4dDEwLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBjb250ZW50ID0gX3JlZjYuY29udGVudDsKICAgICAgICAgICAgICAgIF9jb250ZXh0MTAucHJldiA9IDE7CgogICAgICAgICAgICAgICAgaWYgKCEoIXRoaXMuQVBJIHx8ICF0aGlzLmlzc3VlIHx8IHRoaXMuaXNDcmVhdGluZ0NvbW1lbnQpKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0MTAubmV4dCA9IDQ7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDEwLmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICAgIHRoaXMuaXNDcmVhdGluZ0NvbW1lbnQgPSB0cnVlOwogICAgICAgICAgICAgICAgX2NvbnRleHQxMC5uZXh0ID0gNzsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLkFQSS5wb3N0Q29tbWVudCh7CiAgICAgICAgICAgICAgICAgIGFjY2Vzc1Rva2VuOiB0aGlzLmFjY2Vzc1Rva2VuLAogICAgICAgICAgICAgICAgICBjb250ZW50OiBjb250ZW50LAogICAgICAgICAgICAgICAgICBpc3N1ZUlkOiB0aGlzLmlzc3VlLmlkCiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgICAgY29tbWVudCA9IF9jb250ZXh0MTAuc2VudDsKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDEwLmFicnVwdCgicmV0dXJuIiwgY29tbWVudCk7CgogICAgICAgICAgICAgIGNhc2UgMTE6CiAgICAgICAgICAgICAgICBfY29udGV4dDEwLnByZXYgPSAxMTsKICAgICAgICAgICAgICAgIF9jb250ZXh0MTAudDAgPSBfY29udGV4dDEwWyJjYXRjaCJdKDEpOwogICAgICAgICAgICAgICAgdGhpcy4kZW1pdCgnZXJyb3InLCBfY29udGV4dDEwLnQwKTsKICAgICAgICAgICAgICAgIHRocm93IF9jb250ZXh0MTAudDA7CgogICAgICAgICAgICAgIGNhc2UgMTU6CiAgICAgICAgICAgICAgICBfY29udGV4dDEwLnByZXYgPSAxNTsKICAgICAgICAgICAgICAgIHRoaXMuaXNDcmVhdGluZ0NvbW1lbnQgPSBmYWxzZTsKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDEwLmZpbmlzaCgxNSk7CgogICAgICAgICAgICAgIGNhc2UgMTg6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDEwLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUxMCwgdGhpcywgW1sxLCAxMSwgMTUsIDE4XV0pOwogICAgICB9KSk7CgogICAgICBmdW5jdGlvbiBwb3N0Q29tbWVudChfeDIpIHsKICAgICAgICByZXR1cm4gX3Bvc3RDb21tZW50LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KCiAgICAgIHJldHVybiBwb3N0Q29tbWVudDsKICAgIH0oKQogICAgLyoqCiAgICAgKiBFZGl0IGEgY29tbWVudAogICAgICovCgogIH0sIHsKICAgIGtleTogInB1dENvbW1lbnQiLAogICAgdmFsdWU6IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF9wdXRDb21tZW50MiA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTExKF9yZWY3KSB7CiAgICAgICAgdmFyIGNvbW1lbnRJZCwgY29udGVudCwgY29tbWVudDsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTExJChfY29udGV4dDExKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MTEucHJldiA9IF9jb250ZXh0MTEubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGNvbW1lbnRJZCA9IF9yZWY3LmNvbW1lbnRJZCwgY29udGVudCA9IF9yZWY3LmNvbnRlbnQ7CiAgICAgICAgICAgICAgICBfY29udGV4dDExLnByZXYgPSAxOwoKICAgICAgICAgICAgICAgIGlmICghKCF0aGlzLkFQSSB8fCAhdGhpcy5pc3N1ZSkpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQxMS5uZXh0ID0gNDsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTEuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgICAgX2NvbnRleHQxMS5uZXh0ID0gNjsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLkFQSS5wdXRDb21tZW50KHsKICAgICAgICAgICAgICAgICAgYWNjZXNzVG9rZW46IHRoaXMuYWNjZXNzVG9rZW4sCiAgICAgICAgICAgICAgICAgIGlzc3VlSWQ6IHRoaXMuaXNzdWUuaWQsCiAgICAgICAgICAgICAgICAgIGNvbW1lbnRJZDogY29tbWVudElkLAogICAgICAgICAgICAgICAgICBjb250ZW50OiBjb250ZW50CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgICAgY29tbWVudCA9IF9jb250ZXh0MTEuc2VudDsKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDExLmFicnVwdCgicmV0dXJuIiwgY29tbWVudCk7CgogICAgICAgICAgICAgIGNhc2UgMTA6CiAgICAgICAgICAgICAgICBfY29udGV4dDExLnByZXYgPSAxMDsKICAgICAgICAgICAgICAgIF9jb250ZXh0MTEudDAgPSBfY29udGV4dDExWyJjYXRjaCJdKDEpOwogICAgICAgICAgICAgICAgdGhpcy4kZW1pdCgnZXJyb3InLCBfY29udGV4dDExLnQwKTsKICAgICAgICAgICAgICAgIHRocm93IF9jb250ZXh0MTEudDA7CgogICAgICAgICAgICAgIGNhc2UgMTQ6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDExLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUxMSwgdGhpcywgW1sxLCAxMF1dKTsKICAgICAgfSkpOwoKICAgICAgZnVuY3Rpb24gcHV0Q29tbWVudChfeDMpIHsKICAgICAgICByZXR1cm4gX3B1dENvbW1lbnQyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KCiAgICAgIHJldHVybiBwdXRDb21tZW50OwogICAgfSgpCiAgICAvKioKICAgICAqIERlbGV0ZSBhIG5ldyBjb21tZW50CiAgICAgKi8KCiAgfSwgewogICAga2V5OiAiZGVsZXRlQ29tbWVudCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gKCkgewogICAgICB2YXIgX2RlbGV0ZUNvbW1lbnQyID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMTIoX3JlZjgpIHsKICAgICAgICB2YXIgY29tbWVudElkLCBzdWNjZXNzOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMTIkKF9jb250ZXh0MTIpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQxMi5wcmV2ID0gX2NvbnRleHQxMi5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgY29tbWVudElkID0gX3JlZjguY29tbWVudElkOwogICAgICAgICAgICAgICAgX2NvbnRleHQxMi5wcmV2ID0gMTsKCiAgICAgICAgICAgICAgICBpZiAoISghdGhpcy5BUEkgfHwgIXRoaXMuaXNzdWUpKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0MTIubmV4dCA9IDQ7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDEyLmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICAgIF9jb250ZXh0MTIubmV4dCA9IDY7CiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5BUEkuZGVsZXRlQ29tbWVudCh7CiAgICAgICAgICAgICAgICAgIGFjY2Vzc1Rva2VuOiB0aGlzLmFjY2Vzc1Rva2VuLAogICAgICAgICAgICAgICAgICBpc3N1ZUlkOiB0aGlzLmlzc3VlLmlkLAogICAgICAgICAgICAgICAgICBjb21tZW50SWQ6IGNvbW1lbnRJZAogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICAgIHN1Y2Nlc3MgPSBfY29udGV4dDEyLnNlbnQ7CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxMi5hYnJ1cHQoInJldHVybiIsIHN1Y2Nlc3MpOwoKICAgICAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICAgICAgX2NvbnRleHQxMi5wcmV2ID0gMTA7CiAgICAgICAgICAgICAgICBfY29udGV4dDEyLnQwID0gX2NvbnRleHQxMlsiY2F0Y2giXSgxKTsKICAgICAgICAgICAgICAgIHRoaXMuJGVtaXQoJ2Vycm9yJywgX2NvbnRleHQxMi50MCk7CiAgICAgICAgICAgICAgICB0aHJvdyBfY29udGV4dDEyLnQwOwoKICAgICAgICAgICAgICBjYXNlIDE0OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxMi5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMTIsIHRoaXMsIFtbMSwgMTBdXSk7CiAgICAgIH0pKTsKCiAgICAgIGZ1bmN0aW9uIGRlbGV0ZUNvbW1lbnQoX3g0KSB7CiAgICAgICAgcmV0dXJuIF9kZWxldGVDb21tZW50Mi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9CgogICAgICByZXR1cm4gZGVsZXRlQ29tbWVudDsKICAgIH0oKQogICAgLyoqCiAgICAgKiBHZXQgcmVhY3Rpb25zIG9mIGEgY29tbWVudAogICAgICovCgogIH0sIHsKICAgIGtleTogImdldENvbW1lbnRSZWFjdGlvbnMiLAogICAgdmFsdWU6IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF9nZXRDb21tZW50UmVhY3Rpb25zID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMTMoX3JlZjkpIHsKICAgICAgICB2YXIgY29tbWVudElkLCByZWFjdGlvbnM7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUxMyQoX2NvbnRleHQxMykgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDEzLnByZXYgPSBfY29udGV4dDEzLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBjb21tZW50SWQgPSBfcmVmOS5jb21tZW50SWQ7CiAgICAgICAgICAgICAgICBfY29udGV4dDEzLnByZXYgPSAxOwoKICAgICAgICAgICAgICAgIGlmICghKCF0aGlzLkFQSSB8fCAhdGhpcy5pc3N1ZSkpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQxMy5uZXh0ID0gNDsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTMuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgICAgX2NvbnRleHQxMy5uZXh0ID0gNjsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLkFQSS5nZXRDb21tZW50UmVhY3Rpb25zKHsKICAgICAgICAgICAgICAgICAgYWNjZXNzVG9rZW46IHRoaXMuYWNjZXNzVG9rZW4sCiAgICAgICAgICAgICAgICAgIGlzc3VlSWQ6IHRoaXMuaXNzdWUuaWQsCiAgICAgICAgICAgICAgICAgIGNvbW1lbnRJZDogY29tbWVudElkCiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgICAgcmVhY3Rpb25zID0gX2NvbnRleHQxMy5zZW50OwogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTMuYWJydXB0KCJyZXR1cm4iLCByZWFjdGlvbnMpOwoKICAgICAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICAgICAgX2NvbnRleHQxMy5wcmV2ID0gMTA7CiAgICAgICAgICAgICAgICBfY29udGV4dDEzLnQwID0gX2NvbnRleHQxM1siY2F0Y2giXSgxKTsKICAgICAgICAgICAgICAgIHRoaXMuJGVtaXQoJ2Vycm9yJywgX2NvbnRleHQxMy50MCk7CiAgICAgICAgICAgICAgICB0aHJvdyBfY29udGV4dDEzLnQwOwoKICAgICAgICAgICAgICBjYXNlIDE0OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxMy5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMTMsIHRoaXMsIFtbMSwgMTBdXSk7CiAgICAgIH0pKTsKCiAgICAgIGZ1bmN0aW9uIGdldENvbW1lbnRSZWFjdGlvbnMoX3g1KSB7CiAgICAgICAgcmV0dXJuIF9nZXRDb21tZW50UmVhY3Rpb25zLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KCiAgICAgIHJldHVybiBnZXRDb21tZW50UmVhY3Rpb25zOwogICAgfSgpCiAgICAvKioKICAgICAqIENyZWF0ZSBhIG5ldyByZWFjdGlvbiB0byBhIGNlcnRhaW4gY29tbWVudAogICAgICovCgogIH0sIHsKICAgIGtleTogInBvc3RDb21tZW50UmVhY3Rpb24iLAogICAgdmFsdWU6IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF9wb3N0Q29tbWVudFJlYWN0aW9uID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMTQoX3JlZjEwKSB7CiAgICAgICAgdmFyIGNvbW1lbnRJZCwgcmVhY3Rpb24sIHN1Y2Nlc3M7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUxNCQoX2NvbnRleHQxNCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDE0LnByZXYgPSBfY29udGV4dDE0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBjb21tZW50SWQgPSBfcmVmMTAuY29tbWVudElkLCByZWFjdGlvbiA9IF9yZWYxMC5yZWFjdGlvbjsKICAgICAgICAgICAgICAgIF9jb250ZXh0MTQucHJldiA9IDE7CgogICAgICAgICAgICAgICAgaWYgKCEoIXRoaXMuQVBJIHx8ICF0aGlzLmlzc3VlKSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDE0Lm5leHQgPSA0OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxNC5hYnJ1cHQoInJldHVybiIsIGZhbHNlKTsKCiAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgICAgX2NvbnRleHQxNC5uZXh0ID0gNjsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLkFQSS5wb3N0Q29tbWVudFJlYWN0aW9uKHsKICAgICAgICAgICAgICAgICAgYWNjZXNzVG9rZW46IHRoaXMuYWNjZXNzVG9rZW4sCiAgICAgICAgICAgICAgICAgIGlzc3VlSWQ6IHRoaXMuaXNzdWUuaWQsCiAgICAgICAgICAgICAgICAgIGNvbW1lbnRJZDogY29tbWVudElkLAogICAgICAgICAgICAgICAgICByZWFjdGlvbjogcmVhY3Rpb24KICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgICBzdWNjZXNzID0gX2NvbnRleHQxNC5zZW50OwogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTQuYWJydXB0KCJyZXR1cm4iLCBzdWNjZXNzKTsKCiAgICAgICAgICAgICAgY2FzZSAxMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0MTQucHJldiA9IDEwOwogICAgICAgICAgICAgICAgX2NvbnRleHQxNC50MCA9IF9jb250ZXh0MTRbImNhdGNoIl0oMSk7CiAgICAgICAgICAgICAgICB0aGlzLiRlbWl0KCdlcnJvcicsIF9jb250ZXh0MTQudDApOwogICAgICAgICAgICAgICAgdGhyb3cgX2NvbnRleHQxNC50MDsKCiAgICAgICAgICAgICAgY2FzZSAxNDoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTE0LCB0aGlzLCBbWzEsIDEwXV0pOwogICAgICB9KSk7CgogICAgICBmdW5jdGlvbiBwb3N0Q29tbWVudFJlYWN0aW9uKF94NikgewogICAgICAgIHJldHVybiBfcG9zdENvbW1lbnRSZWFjdGlvbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9CgogICAgICByZXR1cm4gcG9zdENvbW1lbnRSZWFjdGlvbjsKICAgIH0oKQogICAgLyoqCiAgICAgKiBSZWRpcmVjdCB0byB0aGUgcGxhdGZvcm0ncyBhdXRob3JpemF0aW9uIHBhZ2UKICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJsb2dpbiIsCiAgICB2YWx1ZTogZnVuY3Rpb24gbG9naW4oKSB7CiAgICAgIGlmICghdGhpcy5BUEkpIHJldHVybjsKICAgICAgdGhpcy5BUEkucmVkaXJlY3RBdXRoKCk7CiAgICB9CiAgICAvKioKICAgICAqIENsZWFuIHRoZSBhY2Nlc3MgdG9rZW4gc3RvcmVkIGluIGxvY2FsIHN0b3JhZ2UKICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJsb2dvdXQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGxvZ291dCgpIHsKICAgICAgdGhpcy5zZXRBY2Nlc3NUb2tlbihudWxsKTsKICAgICAgdGhpcy51c2VyID0gbnVsbDsKICAgIH0KICAgIC8qKgogICAgICogSGFuZGxlIGF1dGhvcml6YXRpb24gYW5kIHNldCBhY2Nlc3NfdG9rZW4KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJoYW5kbGVBdXRoIiwKICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfaGFuZGxlQXV0aCA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTE1KCkgewogICAgICAgIHZhciBhY2Nlc3NUb2tlbjsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTE1JChfY29udGV4dDE1KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MTUucHJldiA9IF9jb250ZXh0MTUubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGlmICh0aGlzLkFQSSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDE1Lm5leHQgPSAyOwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxNS5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICBfY29udGV4dDE1Lm5leHQgPSA0OwogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuQVBJLmhhbmRsZUF1dGgoKTsKCiAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgICAgYWNjZXNzVG9rZW4gPSBfY29udGV4dDE1LnNlbnQ7CgogICAgICAgICAgICAgICAgaWYgKCFhY2Nlc3NUb2tlbikgewogICAgICAgICAgICAgICAgICBfY29udGV4dDE1Lm5leHQgPSAxMjsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgLy8gbmV3IGFjY2Vzc190b2tlbgogICAgICAgICAgICAgICAgdGhpcy5zZXRBY2Nlc3NUb2tlbihhY2Nlc3NUb2tlbik7CiAgICAgICAgICAgICAgICBfY29udGV4dDE1Lm5leHQgPSA5OwogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuQVBJLmdldFVzZXIoewogICAgICAgICAgICAgICAgICBhY2Nlc3NUb2tlbjogYWNjZXNzVG9rZW4KICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICAgICAgICB0aGlzLnVzZXIgPSBfY29udGV4dDE1LnNlbnQ7CiAgICAgICAgICAgICAgICBfY29udGV4dDE1Lm5leHQgPSAyMDsKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICBjYXNlIDEyOgogICAgICAgICAgICAgICAgaWYgKCF0aGlzLmdldEFjY2Vzc1Rva2VuKCkpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQxNS5uZXh0ID0gMTg7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIF9jb250ZXh0MTUubmV4dCA9IDE1OwogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuQVBJLmdldFVzZXIoewogICAgICAgICAgICAgICAgICBhY2Nlc3NUb2tlbjogdGhpcy5hY2Nlc3NUb2tlbgogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgMTU6CiAgICAgICAgICAgICAgICB0aGlzLnVzZXIgPSBfY29udGV4dDE1LnNlbnQ7CiAgICAgICAgICAgICAgICBfY29udGV4dDE1Lm5leHQgPSAyMDsKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICBjYXNlIDE4OgogICAgICAgICAgICAgICAgLy8gbm8gYWNjZXNzX3Rva2VuCiAgICAgICAgICAgICAgICB0aGlzLnNldEFjY2Vzc1Rva2VuKG51bGwpOwogICAgICAgICAgICAgICAgdGhpcy51c2VyID0gbnVsbDsKCiAgICAgICAgICAgICAgY2FzZSAyMDoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTUuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTE1LCB0aGlzKTsKICAgICAgfSkpOwoKICAgICAgZnVuY3Rpb24gaGFuZGxlQXV0aCgpIHsKICAgICAgICByZXR1cm4gX2hhbmRsZUF1dGguYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfQoKICAgICAgcmV0dXJuIGhhbmRsZUF1dGg7CiAgICB9KCkKICAgIC8qKgogICAgICogR2V0IGFjY2VzcyB0b2tlbiBmcm9tIGxvY2FsIHN0b3JhZ2UKICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJnZXRBY2Nlc3NUb2tlbiIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0QWNjZXNzVG9rZW4oKSB7CiAgICAgIHRoaXMuYWNjZXNzVG9rZW4gPSB3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0odGhpcy5hY2Nlc3NUb2tlbktleSk7CiAgICAgIHJldHVybiB0aGlzLmFjY2Vzc1Rva2VuOwogICAgfQogICAgLyoqCiAgICAgKiBTYXZlIGFjY2VzcyB0b2tlbiB0byBsb2NhbCBzdG9yYWdlCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAic2V0QWNjZXNzVG9rZW4iLAogICAgdmFsdWU6IGZ1bmN0aW9uIHNldEFjY2Vzc1Rva2VuKHRva2VuKSB7CiAgICAgIGlmICh0b2tlbiA9PT0gbnVsbCkgewogICAgICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSh0aGlzLmFjY2Vzc1Rva2VuS2V5KTsKICAgICAgfSBlbHNlIHsKICAgICAgICB3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0odGhpcy5hY2Nlc3NUb2tlbktleSwgdG9rZW4pOwogICAgICB9CgogICAgICB0aGlzLmFjY2Vzc1Rva2VuID0gdG9rZW47CiAgICB9CiAgfV0pOwoKICByZXR1cm4gVnNzdWVTdG9yZTsKfShWdWUkMSk7CgpfX2RlY29yYXRlKFtXYXRjaCgncXVlcnkucGVyUGFnZScpXSwgVnNzdWVTdG9yZS5wcm90b3R5cGUsICJvblF1ZXJ5UGVyUGFnZUNoYW5nZSIsIG51bGwpOwoKX19kZWNvcmF0ZShbV2F0Y2goJ3F1ZXJ5LnBhZ2UnKSwgV2F0Y2goJ3F1ZXJ5LnNvcnQnKV0sIFZzc3VlU3RvcmUucHJvdG90eXBlLCAib25RdWVyeUNoYW5nZSIsIG51bGwpOwoKVnNzdWVTdG9yZSA9IF9fZGVjb3JhdGUoW0NvbXBvbmVudCh7CiAgaTE4bjogaTE4bgp9KV0sIFZzc3VlU3RvcmUpOwp2YXIgVnNzdWVTdG9yZSQxID0gVnNzdWVTdG9yZTsKCnZhciBWc3N1ZSA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoX1Z1ZSQxMCkgewogIF9pbmhlcml0cyhWc3N1ZSwgX1Z1ZSQxMCk7CgogIHZhciBfc3VwZXIxMCA9IF9jcmVhdGVTdXBlcihWc3N1ZSk7CgogIGZ1bmN0aW9uIFZzc3VlKCkgewogICAgdmFyIF90aGlzMTM7CgogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFZzc3VlKTsKCiAgICBfdGhpczEzID0gX3N1cGVyMTAuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgIC8qKgogICAgICogUHJvdmlkZSB0aGUgVnNzdWVTdG9yZSBmb3IgdGhlIGNoaWxkIGNvbXBvbmVudHMKICAgICAqLwoKICAgIF90aGlzMTMudnNzdWUgPSBuZXcgVnNzdWVTdG9yZSQxKCk7CiAgICByZXR1cm4gX3RoaXMxMzsKICB9CiAgLyoqCiAgICogU2V0IG9wdGlvbnMgb2YgVnNzdWUgaWYgYG9wdGlvbnNgIHByb3AgaXMgY2hhbmdlZAogICAqLwoKCiAgX2NyZWF0ZUNsYXNzKFZzc3VlLCBbewogICAga2V5OiAib25PcHRpb25zQ2hhbmdlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBvbk9wdGlvbnNDaGFuZ2Uob3B0aW9ucykgewogICAgICB0aGlzLnZzc3VlLnNldE9wdGlvbnMob3B0aW9ucyk7CiAgICB9CiAgICAvKioKICAgICAqIG1vdW50ZWQgaG9vawogICAgICovCgogIH0sIHsKICAgIGtleTogIm1vdW50ZWQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICAgIC8vIHNldCBpc3N1ZSB0aXRsZSBhbmQgaXNzdWUgaWQKICAgICAgaWYgKHRoaXMudGl0bGUgIT09IG51bGwpIHsKICAgICAgICB0aGlzLnZzc3VlLnRpdGxlID0gdGhpcy50aXRsZTsKICAgICAgfQoKICAgICAgaWYgKHRoaXMuaXNzdWVJZCAhPT0gbnVsbCkgewogICAgICAgIHRoaXMudnNzdWUuaXNzdWVJZCA9IHRoaXMuaXNzdWVJZDsKICAgICAgfSAvLyBzZXQgb3B0aW9ucwoKCiAgICAgIHRoaXMudnNzdWUuc2V0T3B0aW9ucyh0aGlzLm9wdGlvbnMpOyAvLyBpbml0IHZzc3VlCgogICAgICB0aGlzLnZzc3VlLmluaXQoKTsKICAgIH0KICB9XSk7CgogIHJldHVybiBWc3N1ZTsKfShWdWUkMSk7CgpfX2RlY29yYXRlKFtQcm9wKHsKICB0eXBlOiBbU3RyaW5nLCBGdW5jdGlvbl0sCiAgcmVxdWlyZWQ6IGZhbHNlLAogICJkZWZhdWx0IjogbnVsbAp9KV0sIFZzc3VlLnByb3RvdHlwZSwgInRpdGxlIiwgdm9pZCAwKTsKCl9fZGVjb3JhdGUoW1Byb3AoewogIHR5cGU6IFtTdHJpbmcsIE51bWJlcl0sCiAgcmVxdWlyZWQ6IGZhbHNlLAogICJkZWZhdWx0IjogbnVsbAp9KV0sIFZzc3VlLnByb3RvdHlwZSwgImlzc3VlSWQiLCB2b2lkIDApOwoKX19kZWNvcmF0ZShbUHJvcCh7CiAgdHlwZTogT2JqZWN0LAogIHJlcXVpcmVkOiBmYWxzZSwKICAiZGVmYXVsdCI6IGZ1bmN0aW9uIF9kZWZhdWx0KCkgewogICAgcmV0dXJuIHt9OwogIH0KfSldLCBWc3N1ZS5wcm90b3R5cGUsICJvcHRpb25zIiwgdm9pZCAwKTsKCl9fZGVjb3JhdGUoW1Byb3ZpZGUoJ3Zzc3VlJyldLCBWc3N1ZS5wcm90b3R5cGUsICJ2c3N1ZSIsIHZvaWQgMCk7CgpfX2RlY29yYXRlKFtXYXRjaCgnb3B0aW9ucycsIHsKICBkZWVwOiB0cnVlCn0pXSwgVnNzdWUucHJvdG90eXBlLCAib25PcHRpb25zQ2hhbmdlIiwgbnVsbCk7CgpWc3N1ZSA9IF9fZGVjb3JhdGUoW0NvbXBvbmVudCh7CiAgY29tcG9uZW50czogewogICAgSWNvbmZvbnQ6IF9fdnVlX2NvbXBvbmVudF9fLAogICAgVnNzdWVCb2R5OiBfX3Z1ZV9jb21wb25lbnRfXyRhLAogICAgVnNzdWVIZWFkZXI6IF9fdnVlX2NvbXBvbmVudF9fJGIKICB9Cn0pXSwgVnNzdWUpOwp2YXIgc2NyaXB0JGMgPSBWc3N1ZTsKLyogc2NyaXB0ICovCgp2YXIgX192dWVfc2NyaXB0X18kYyA9IHNjcmlwdCRjOwovKiB0ZW1wbGF0ZSAqLwoKdmFyIF9fdnVlX3JlbmRlcl9fJDkgPSBmdW5jdGlvbiBfX3Z1ZV9yZW5kZXJfXyQ5KCkgewogIHZhciBfdm0gPSB0aGlzOwoKICB2YXIgX2ggPSBfdm0uJGNyZWF0ZUVsZW1lbnQ7CgogIHZhciBfYyA9IF92bS5fc2VsZi5fYyB8fCBfaDsKCiAgcmV0dXJuIF9jKCdkaXYnLCB7CiAgICBzdGF0aWNDbGFzczogInZzc3VlIgogIH0sIFtfYygnSWNvbmZvbnQnKSwgX3ZtLl92KCIgIiksIF9jKCdWc3N1ZUhlYWRlcicpLCBfdm0uX3YoIiAiKSwgX2MoJ1Zzc3VlQm9keScpXSwgMSk7Cn07Cgp2YXIgX192dWVfc3RhdGljUmVuZGVyRm5zX18kOSA9IFtdOwovKiBzdHlsZSAqLwoKdmFyIF9fdnVlX2luamVjdF9zdHlsZXNfXyRjID0gdW5kZWZpbmVkOwovKiBzY29wZWQgKi8KCnZhciBfX3Z1ZV9zY29wZV9pZF9fJGMgPSB1bmRlZmluZWQ7Ci8qIG1vZHVsZSBpZGVudGlmaWVyICovCgp2YXIgX192dWVfbW9kdWxlX2lkZW50aWZpZXJfXyRjID0gdW5kZWZpbmVkOwovKiBmdW5jdGlvbmFsIHRlbXBsYXRlICovCgp2YXIgX192dWVfaXNfZnVuY3Rpb25hbF90ZW1wbGF0ZV9fJGMgPSBmYWxzZTsKLyogc3R5bGUgaW5qZWN0ICovCgovKiBzdHlsZSBpbmplY3QgU1NSICovCgovKiBzdHlsZSBpbmplY3Qgc2hhZG93IGRvbSAqLwoKdmFyIF9fdnVlX2NvbXBvbmVudF9fJGMgPSBub3JtYWxpemVDb21wb25lbnQoewogIHJlbmRlcjogX192dWVfcmVuZGVyX18kOSwKICBzdGF0aWNSZW5kZXJGbnM6IF9fdnVlX3N0YXRpY1JlbmRlckZuc19fJDkKfSwgX192dWVfaW5qZWN0X3N0eWxlc19fJGMsIF9fdnVlX3NjcmlwdF9fJGMsIF9fdnVlX3Njb3BlX2lkX18kYywgX192dWVfaXNfZnVuY3Rpb25hbF90ZW1wbGF0ZV9fJGMsIF9fdnVlX21vZHVsZV9pZGVudGlmaWVyX18kYywgZmFsc2UsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB1bmRlZmluZWQpOwoKdmFyIFZzc3VlUGx1Z2luID0gewogIGdldCB2ZXJzaW9uKCkgewogICAgcmV0dXJuICIxLjQuOCI7CiAgfSwKCiAgaW5zdGFsbGVkOiBmYWxzZSwKICBpbnN0YWxsOiBmdW5jdGlvbiBpbnN0YWxsKFZ1ZSwgb3B0aW9ucykgewogICAgaWYgKHRoaXMuaW5zdGFsbGVkKSB7CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KCiAgICB0aGlzLmluc3RhbGxlZCA9IHRydWU7CiAgICBWdWUuY29tcG9uZW50KCdWc3N1ZScsIHsKICAgICAgZnVuY3Rpb25hbDogdHJ1ZSwKICAgICAgcHJvcHM6IHsKICAgICAgICB0aXRsZTogewogICAgICAgICAgdHlwZTogU3RyaW5nLAogICAgICAgICAgcmVxdWlyZWQ6IGZhbHNlLAogICAgICAgICAgImRlZmF1bHQiOiB1bmRlZmluZWQKICAgICAgICB9LAogICAgICAgIGlzc3VlSWQ6IHsKICAgICAgICAgIHR5cGU6IFtOdW1iZXIsIFN0cmluZ10sCiAgICAgICAgICByZXF1aXJlZDogZmFsc2UsCiAgICAgICAgICAiZGVmYXVsdCI6IHVuZGVmaW5lZAogICAgICAgIH0sCiAgICAgICAgb3B0aW9uczogewogICAgICAgICAgdHlwZTogT2JqZWN0LAogICAgICAgICAgcmVxdWlyZWQ6IGZhbHNlLAogICAgICAgICAgImRlZmF1bHQiOiB1bmRlZmluZWQKICAgICAgICB9CiAgICAgIH0sCiAgICAgIHJlbmRlcjogZnVuY3Rpb24gcmVuZGVyKGgsIF9yZWYxMSkgewogICAgICAgIHZhciBkYXRhID0gX3JlZjExLmRhdGEsCiAgICAgICAgICAgIHByb3BzID0gX3JlZjExLnByb3BzOwogICAgICAgIHJldHVybiBoKF9fdnVlX2NvbXBvbmVudF9fJGMsIE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgZGF0YSksIHsKICAgICAgICAgIHByb3BzOiB7CiAgICAgICAgICAgIHRpdGxlOiBwcm9wcy50aXRsZSwKICAgICAgICAgICAgaXNzdWVJZDogcHJvcHMuaXNzdWVJZCwKICAgICAgICAgICAgb3B0aW9uczogT2JqZWN0LmFzc2lnbih7fSwgb3B0aW9ucywgcHJvcHMub3B0aW9ucykKICAgICAgICAgIH0KICAgICAgICB9KSk7CiAgICAgIH0KICAgIH0pOwogIH0sCiAgVnNzdWVDb21wb25lbnQ6IF9fdnVlX2NvbXBvbmVudF9fJGMKfTsKZXhwb3J0IGRlZmF1bHQgVnNzdWVQbHVnaW47CmV4cG9ydCB7IF9fdnVlX2NvbXBvbmVudF9fJGMgYXMgVnNzdWVDb21wb25lbnQgfTs="},null]}