{"remainingRequest":"D:\\vscodeprojects\\vuepress-theme-reco\\myblogs\\node_modules\\babel-loader\\lib\\index.js??ref--3-1!D:\\vscodeprojects\\vuepress-theme-reco\\myblogs\\node_modules\\core-js\\modules\\web.url.js","dependencies":[{"path":"D:\\vscodeprojects\\vuepress-theme-reco\\myblogs\\node_modules\\core-js\\modules\\web.url.js","mtime":499162500000},{"path":"D:\\vscodeprojects\\vuepress-theme-reco\\myblogs\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\vscodeprojects\\vuepress-theme-reco\\myblogs\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:J3VzZSBzdHJpY3QnOyAvLyBUT0RPOiBpbiBjb3JlLWpzQDQsIG1vdmUgL21vZHVsZXMvIGRlcGVuZGVuY2llcyB0byBwdWJsaWMgZW50cmllcyBmb3IgYmV0dGVyIG9wdGltaXphdGlvbiBieSB0b29scyBsaWtlIGBwcmVzZXQtZW52YAoKcmVxdWlyZSgnLi4vbW9kdWxlcy9lcy5zdHJpbmcuaXRlcmF0b3InKTsKCnZhciAkID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2V4cG9ydCcpOwoKdmFyIERFU0NSSVBUT1JTID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2Rlc2NyaXB0b3JzJyk7Cgp2YXIgVVNFX05BVElWRV9VUkwgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvbmF0aXZlLXVybCcpOwoKdmFyIGdsb2JhbCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9nbG9iYWwnKTsKCnZhciBkZWZpbmVQcm9wZXJ0aWVzID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL29iamVjdC1kZWZpbmUtcHJvcGVydGllcycpOwoKdmFyIHJlZGVmaW5lID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL3JlZGVmaW5lJyk7Cgp2YXIgYW5JbnN0YW5jZSA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9hbi1pbnN0YW5jZScpOwoKdmFyIGhhcyA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9oYXMnKTsKCnZhciBhc3NpZ24gPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvb2JqZWN0LWFzc2lnbicpOwoKdmFyIGFycmF5RnJvbSA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9hcnJheS1mcm9tJyk7Cgp2YXIgY29kZUF0ID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL3N0cmluZy1tdWx0aWJ5dGUnKS5jb2RlQXQ7Cgp2YXIgdG9BU0NJSSA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9zdHJpbmctcHVueWNvZGUtdG8tYXNjaWknKTsKCnZhciBzZXRUb1N0cmluZ1RhZyA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9zZXQtdG8tc3RyaW5nLXRhZycpOwoKdmFyIFVSTFNlYXJjaFBhcmFtc01vZHVsZSA9IHJlcXVpcmUoJy4uL21vZHVsZXMvd2ViLnVybC1zZWFyY2gtcGFyYW1zJyk7Cgp2YXIgSW50ZXJuYWxTdGF0ZU1vZHVsZSA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9pbnRlcm5hbC1zdGF0ZScpOwoKdmFyIE5hdGl2ZVVSTCA9IGdsb2JhbC5VUkw7CnZhciBVUkxTZWFyY2hQYXJhbXMgPSBVUkxTZWFyY2hQYXJhbXNNb2R1bGUuVVJMU2VhcmNoUGFyYW1zOwp2YXIgZ2V0SW50ZXJuYWxTZWFyY2hQYXJhbXNTdGF0ZSA9IFVSTFNlYXJjaFBhcmFtc01vZHVsZS5nZXRTdGF0ZTsKdmFyIHNldEludGVybmFsU3RhdGUgPSBJbnRlcm5hbFN0YXRlTW9kdWxlLnNldDsKdmFyIGdldEludGVybmFsVVJMU3RhdGUgPSBJbnRlcm5hbFN0YXRlTW9kdWxlLmdldHRlckZvcignVVJMJyk7CnZhciBmbG9vciA9IE1hdGguZmxvb3I7CnZhciBwb3cgPSBNYXRoLnBvdzsKdmFyIElOVkFMSURfQVVUSE9SSVRZID0gJ0ludmFsaWQgYXV0aG9yaXR5JzsKdmFyIElOVkFMSURfU0NIRU1FID0gJ0ludmFsaWQgc2NoZW1lJzsKdmFyIElOVkFMSURfSE9TVCA9ICdJbnZhbGlkIGhvc3QnOwp2YXIgSU5WQUxJRF9QT1JUID0gJ0ludmFsaWQgcG9ydCc7CnZhciBBTFBIQSA9IC9bQS1aYS16XS87IC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSByZWdleHAvbm8tb2JzY3VyZS1yYW5nZSAtLSBzYWZlCgp2YXIgQUxQSEFOVU1FUklDID0gL1tcZCstLkEtWmEtel0vOwp2YXIgRElHSVQgPSAvXGQvOwp2YXIgSEVYX1NUQVJUID0gL14oMHh8MFgpLzsKdmFyIE9DVCA9IC9eWzAtN10rJC87CnZhciBERUMgPSAvXlxkKyQvOwp2YXIgSEVYID0gL15bXGRBLUZhLWZdKyQvOwovKiBlc2xpbnQtZGlzYWJsZSBuby1jb250cm9sLXJlZ2V4IC0tIHNhZmUgKi8KCnZhciBGT1JCSURERU5fSE9TVF9DT0RFX1BPSU5UID0gL1tcMFx0XG5cciAjJS86P0BbXFxdXS87CnZhciBGT1JCSURERU5fSE9TVF9DT0RFX1BPSU5UX0VYQ0xVRElOR19QRVJDRU5UID0gL1tcMFx0XG5cciAjLzo/QFtcXF1dLzsKdmFyIExFQURJTkdfQU5EX1RSQUlMSU5HX0MwX0NPTlRST0xfT1JfU1BBQ0UgPSAvXltcdTAwMDAtXHUwMDFGIF0rfFtcdTAwMDAtXHUwMDFGIF0rJC9nOwp2YXIgVEFCX0FORF9ORVdfTElORSA9IC9bXHRcblxyXS9nOwovKiBlc2xpbnQtZW5hYmxlIG5vLWNvbnRyb2wtcmVnZXggLS0gc2FmZSAqLwoKdmFyIEVPRjsKCnZhciBwYXJzZUhvc3QgPSBmdW5jdGlvbiAodXJsLCBpbnB1dCkgewogIHZhciByZXN1bHQsIGNvZGVQb2ludHMsIGluZGV4OwoKICBpZiAoaW5wdXQuY2hhckF0KDApID09ICdbJykgewogICAgaWYgKGlucHV0LmNoYXJBdChpbnB1dC5sZW5ndGggLSAxKSAhPSAnXScpIHJldHVybiBJTlZBTElEX0hPU1Q7CiAgICByZXN1bHQgPSBwYXJzZUlQdjYoaW5wdXQuc2xpY2UoMSwgLTEpKTsKICAgIGlmICghcmVzdWx0KSByZXR1cm4gSU5WQUxJRF9IT1NUOwogICAgdXJsLmhvc3QgPSByZXN1bHQ7IC8vIG9wYXF1ZSBob3N0CiAgfSBlbHNlIGlmICghaXNTcGVjaWFsKHVybCkpIHsKICAgIGlmIChGT1JCSURERU5fSE9TVF9DT0RFX1BPSU5UX0VYQ0xVRElOR19QRVJDRU5ULnRlc3QoaW5wdXQpKSByZXR1cm4gSU5WQUxJRF9IT1NUOwogICAgcmVzdWx0ID0gJyc7CiAgICBjb2RlUG9pbnRzID0gYXJyYXlGcm9tKGlucHV0KTsKCiAgICBmb3IgKGluZGV4ID0gMDsgaW5kZXggPCBjb2RlUG9pbnRzLmxlbmd0aDsgaW5kZXgrKykgewogICAgICByZXN1bHQgKz0gcGVyY2VudEVuY29kZShjb2RlUG9pbnRzW2luZGV4XSwgQzBDb250cm9sUGVyY2VudEVuY29kZVNldCk7CiAgICB9CgogICAgdXJsLmhvc3QgPSByZXN1bHQ7CiAgfSBlbHNlIHsKICAgIGlucHV0ID0gdG9BU0NJSShpbnB1dCk7CiAgICBpZiAoRk9SQklEREVOX0hPU1RfQ09ERV9QT0lOVC50ZXN0KGlucHV0KSkgcmV0dXJuIElOVkFMSURfSE9TVDsKICAgIHJlc3VsdCA9IHBhcnNlSVB2NChpbnB1dCk7CiAgICBpZiAocmVzdWx0ID09PSBudWxsKSByZXR1cm4gSU5WQUxJRF9IT1NUOwogICAgdXJsLmhvc3QgPSByZXN1bHQ7CiAgfQp9OwoKdmFyIHBhcnNlSVB2NCA9IGZ1bmN0aW9uIChpbnB1dCkgewogIHZhciBwYXJ0cyA9IGlucHV0LnNwbGl0KCcuJyk7CiAgdmFyIHBhcnRzTGVuZ3RoLCBudW1iZXJzLCBpbmRleCwgcGFydCwgcmFkaXgsIG51bWJlciwgaXB2NDsKCiAgaWYgKHBhcnRzLmxlbmd0aCAmJiBwYXJ0c1twYXJ0cy5sZW5ndGggLSAxXSA9PSAnJykgewogICAgcGFydHMucG9wKCk7CiAgfQoKICBwYXJ0c0xlbmd0aCA9IHBhcnRzLmxlbmd0aDsKICBpZiAocGFydHNMZW5ndGggPiA0KSByZXR1cm4gaW5wdXQ7CiAgbnVtYmVycyA9IFtdOwoKICBmb3IgKGluZGV4ID0gMDsgaW5kZXggPCBwYXJ0c0xlbmd0aDsgaW5kZXgrKykgewogICAgcGFydCA9IHBhcnRzW2luZGV4XTsKICAgIGlmIChwYXJ0ID09ICcnKSByZXR1cm4gaW5wdXQ7CiAgICByYWRpeCA9IDEwOwoKICAgIGlmIChwYXJ0Lmxlbmd0aCA+IDEgJiYgcGFydC5jaGFyQXQoMCkgPT0gJzAnKSB7CiAgICAgIHJhZGl4ID0gSEVYX1NUQVJULnRlc3QocGFydCkgPyAxNiA6IDg7CiAgICAgIHBhcnQgPSBwYXJ0LnNsaWNlKHJhZGl4ID09IDggPyAxIDogMik7CiAgICB9CgogICAgaWYgKHBhcnQgPT09ICcnKSB7CiAgICAgIG51bWJlciA9IDA7CiAgICB9IGVsc2UgewogICAgICBpZiAoIShyYWRpeCA9PSAxMCA/IERFQyA6IHJhZGl4ID09IDggPyBPQ1QgOiBIRVgpLnRlc3QocGFydCkpIHJldHVybiBpbnB1dDsKICAgICAgbnVtYmVyID0gcGFyc2VJbnQocGFydCwgcmFkaXgpOwogICAgfQoKICAgIG51bWJlcnMucHVzaChudW1iZXIpOwogIH0KCiAgZm9yIChpbmRleCA9IDA7IGluZGV4IDwgcGFydHNMZW5ndGg7IGluZGV4KyspIHsKICAgIG51bWJlciA9IG51bWJlcnNbaW5kZXhdOwoKICAgIGlmIChpbmRleCA9PSBwYXJ0c0xlbmd0aCAtIDEpIHsKICAgICAgaWYgKG51bWJlciA+PSBwb3coMjU2LCA1IC0gcGFydHNMZW5ndGgpKSByZXR1cm4gbnVsbDsKICAgIH0gZWxzZSBpZiAobnVtYmVyID4gMjU1KSByZXR1cm4gbnVsbDsKICB9CgogIGlwdjQgPSBudW1iZXJzLnBvcCgpOwoKICBmb3IgKGluZGV4ID0gMDsgaW5kZXggPCBudW1iZXJzLmxlbmd0aDsgaW5kZXgrKykgewogICAgaXB2NCArPSBudW1iZXJzW2luZGV4XSAqIHBvdygyNTYsIDMgLSBpbmRleCk7CiAgfQoKICByZXR1cm4gaXB2NDsKfTsgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG1heC1zdGF0ZW1lbnRzIC0tIFRPRE8KCgp2YXIgcGFyc2VJUHY2ID0gZnVuY3Rpb24gKGlucHV0KSB7CiAgdmFyIGFkZHJlc3MgPSBbMCwgMCwgMCwgMCwgMCwgMCwgMCwgMF07CiAgdmFyIHBpZWNlSW5kZXggPSAwOwogIHZhciBjb21wcmVzcyA9IG51bGw7CiAgdmFyIHBvaW50ZXIgPSAwOwogIHZhciB2YWx1ZSwgbGVuZ3RoLCBudW1iZXJzU2VlbiwgaXB2NFBpZWNlLCBudW1iZXIsIHN3YXBzLCBzd2FwOwoKICB2YXIgY2hhciA9IGZ1bmN0aW9uICgpIHsKICAgIHJldHVybiBpbnB1dC5jaGFyQXQocG9pbnRlcik7CiAgfTsKCiAgaWYgKGNoYXIoKSA9PSAnOicpIHsKICAgIGlmIChpbnB1dC5jaGFyQXQoMSkgIT0gJzonKSByZXR1cm47CiAgICBwb2ludGVyICs9IDI7CiAgICBwaWVjZUluZGV4Kys7CiAgICBjb21wcmVzcyA9IHBpZWNlSW5kZXg7CiAgfQoKICB3aGlsZSAoY2hhcigpKSB7CiAgICBpZiAocGllY2VJbmRleCA9PSA4KSByZXR1cm47CgogICAgaWYgKGNoYXIoKSA9PSAnOicpIHsKICAgICAgaWYgKGNvbXByZXNzICE9PSBudWxsKSByZXR1cm47CiAgICAgIHBvaW50ZXIrKzsKICAgICAgcGllY2VJbmRleCsrOwogICAgICBjb21wcmVzcyA9IHBpZWNlSW5kZXg7CiAgICAgIGNvbnRpbnVlOwogICAgfQoKICAgIHZhbHVlID0gbGVuZ3RoID0gMDsKCiAgICB3aGlsZSAobGVuZ3RoIDwgNCAmJiBIRVgudGVzdChjaGFyKCkpKSB7CiAgICAgIHZhbHVlID0gdmFsdWUgKiAxNiArIHBhcnNlSW50KGNoYXIoKSwgMTYpOwogICAgICBwb2ludGVyKys7CiAgICAgIGxlbmd0aCsrOwogICAgfQoKICAgIGlmIChjaGFyKCkgPT0gJy4nKSB7CiAgICAgIGlmIChsZW5ndGggPT0gMCkgcmV0dXJuOwogICAgICBwb2ludGVyIC09IGxlbmd0aDsKICAgICAgaWYgKHBpZWNlSW5kZXggPiA2KSByZXR1cm47CiAgICAgIG51bWJlcnNTZWVuID0gMDsKCiAgICAgIHdoaWxlIChjaGFyKCkpIHsKICAgICAgICBpcHY0UGllY2UgPSBudWxsOwoKICAgICAgICBpZiAobnVtYmVyc1NlZW4gPiAwKSB7CiAgICAgICAgICBpZiAoY2hhcigpID09ICcuJyAmJiBudW1iZXJzU2VlbiA8IDQpIHBvaW50ZXIrKztlbHNlIHJldHVybjsKICAgICAgICB9CgogICAgICAgIGlmICghRElHSVQudGVzdChjaGFyKCkpKSByZXR1cm47CgogICAgICAgIHdoaWxlIChESUdJVC50ZXN0KGNoYXIoKSkpIHsKICAgICAgICAgIG51bWJlciA9IHBhcnNlSW50KGNoYXIoKSwgMTApOwogICAgICAgICAgaWYgKGlwdjRQaWVjZSA9PT0gbnVsbCkgaXB2NFBpZWNlID0gbnVtYmVyO2Vsc2UgaWYgKGlwdjRQaWVjZSA9PSAwKSByZXR1cm47ZWxzZSBpcHY0UGllY2UgPSBpcHY0UGllY2UgKiAxMCArIG51bWJlcjsKICAgICAgICAgIGlmIChpcHY0UGllY2UgPiAyNTUpIHJldHVybjsKICAgICAgICAgIHBvaW50ZXIrKzsKICAgICAgICB9CgogICAgICAgIGFkZHJlc3NbcGllY2VJbmRleF0gPSBhZGRyZXNzW3BpZWNlSW5kZXhdICogMjU2ICsgaXB2NFBpZWNlOwogICAgICAgIG51bWJlcnNTZWVuKys7CiAgICAgICAgaWYgKG51bWJlcnNTZWVuID09IDIgfHwgbnVtYmVyc1NlZW4gPT0gNCkgcGllY2VJbmRleCsrOwogICAgICB9CgogICAgICBpZiAobnVtYmVyc1NlZW4gIT0gNCkgcmV0dXJuOwogICAgICBicmVhazsKICAgIH0gZWxzZSBpZiAoY2hhcigpID09ICc6JykgewogICAgICBwb2ludGVyKys7CiAgICAgIGlmICghY2hhcigpKSByZXR1cm47CiAgICB9IGVsc2UgaWYgKGNoYXIoKSkgcmV0dXJuOwoKICAgIGFkZHJlc3NbcGllY2VJbmRleCsrXSA9IHZhbHVlOwogIH0KCiAgaWYgKGNvbXByZXNzICE9PSBudWxsKSB7CiAgICBzd2FwcyA9IHBpZWNlSW5kZXggLSBjb21wcmVzczsKICAgIHBpZWNlSW5kZXggPSA3OwoKICAgIHdoaWxlIChwaWVjZUluZGV4ICE9IDAgJiYgc3dhcHMgPiAwKSB7CiAgICAgIHN3YXAgPSBhZGRyZXNzW3BpZWNlSW5kZXhdOwogICAgICBhZGRyZXNzW3BpZWNlSW5kZXgtLV0gPSBhZGRyZXNzW2NvbXByZXNzICsgc3dhcHMgLSAxXTsKICAgICAgYWRkcmVzc1tjb21wcmVzcyArIC0tc3dhcHNdID0gc3dhcDsKICAgIH0KICB9IGVsc2UgaWYgKHBpZWNlSW5kZXggIT0gOCkgcmV0dXJuOwoKICByZXR1cm4gYWRkcmVzczsKfTsKCnZhciBmaW5kTG9uZ2VzdFplcm9TZXF1ZW5jZSA9IGZ1bmN0aW9uIChpcHY2KSB7CiAgdmFyIG1heEluZGV4ID0gbnVsbDsKICB2YXIgbWF4TGVuZ3RoID0gMTsKICB2YXIgY3VyclN0YXJ0ID0gbnVsbDsKICB2YXIgY3Vyckxlbmd0aCA9IDA7CiAgdmFyIGluZGV4ID0gMDsKCiAgZm9yICg7IGluZGV4IDwgODsgaW5kZXgrKykgewogICAgaWYgKGlwdjZbaW5kZXhdICE9PSAwKSB7CiAgICAgIGlmIChjdXJyTGVuZ3RoID4gbWF4TGVuZ3RoKSB7CiAgICAgICAgbWF4SW5kZXggPSBjdXJyU3RhcnQ7CiAgICAgICAgbWF4TGVuZ3RoID0gY3Vyckxlbmd0aDsKICAgICAgfQoKICAgICAgY3VyclN0YXJ0ID0gbnVsbDsKICAgICAgY3Vyckxlbmd0aCA9IDA7CiAgICB9IGVsc2UgewogICAgICBpZiAoY3VyclN0YXJ0ID09PSBudWxsKSBjdXJyU3RhcnQgPSBpbmRleDsKICAgICAgKytjdXJyTGVuZ3RoOwogICAgfQogIH0KCiAgaWYgKGN1cnJMZW5ndGggPiBtYXhMZW5ndGgpIHsKICAgIG1heEluZGV4ID0gY3VyclN0YXJ0OwogICAgbWF4TGVuZ3RoID0gY3Vyckxlbmd0aDsKICB9CgogIHJldHVybiBtYXhJbmRleDsKfTsKCnZhciBzZXJpYWxpemVIb3N0ID0gZnVuY3Rpb24gKGhvc3QpIHsKICB2YXIgcmVzdWx0LCBpbmRleCwgY29tcHJlc3MsIGlnbm9yZTA7IC8vIGlwdjQKCiAgaWYgKHR5cGVvZiBob3N0ID09ICdudW1iZXInKSB7CiAgICByZXN1bHQgPSBbXTsKCiAgICBmb3IgKGluZGV4ID0gMDsgaW5kZXggPCA0OyBpbmRleCsrKSB7CiAgICAgIHJlc3VsdC51bnNoaWZ0KGhvc3QgJSAyNTYpOwogICAgICBob3N0ID0gZmxvb3IoaG9zdCAvIDI1Nik7CiAgICB9CgogICAgcmV0dXJuIHJlc3VsdC5qb2luKCcuJyk7IC8vIGlwdjYKICB9IGVsc2UgaWYgKHR5cGVvZiBob3N0ID09ICdvYmplY3QnKSB7CiAgICByZXN1bHQgPSAnJzsKICAgIGNvbXByZXNzID0gZmluZExvbmdlc3RaZXJvU2VxdWVuY2UoaG9zdCk7CgogICAgZm9yIChpbmRleCA9IDA7IGluZGV4IDwgODsgaW5kZXgrKykgewogICAgICBpZiAoaWdub3JlMCAmJiBob3N0W2luZGV4XSA9PT0gMCkgY29udGludWU7CiAgICAgIGlmIChpZ25vcmUwKSBpZ25vcmUwID0gZmFsc2U7CgogICAgICBpZiAoY29tcHJlc3MgPT09IGluZGV4KSB7CiAgICAgICAgcmVzdWx0ICs9IGluZGV4ID8gJzonIDogJzo6JzsKICAgICAgICBpZ25vcmUwID0gdHJ1ZTsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXN1bHQgKz0gaG9zdFtpbmRleF0udG9TdHJpbmcoMTYpOwogICAgICAgIGlmIChpbmRleCA8IDcpIHJlc3VsdCArPSAnOic7CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gJ1snICsgcmVzdWx0ICsgJ10nOwogIH0KCiAgcmV0dXJuIGhvc3Q7Cn07Cgp2YXIgQzBDb250cm9sUGVyY2VudEVuY29kZVNldCA9IHt9Owp2YXIgZnJhZ21lbnRQZXJjZW50RW5jb2RlU2V0ID0gYXNzaWduKHt9LCBDMENvbnRyb2xQZXJjZW50RW5jb2RlU2V0LCB7CiAgJyAnOiAxLAogICciJzogMSwKICAnPCc6IDEsCiAgJz4nOiAxLAogICdgJzogMQp9KTsKdmFyIHBhdGhQZXJjZW50RW5jb2RlU2V0ID0gYXNzaWduKHt9LCBmcmFnbWVudFBlcmNlbnRFbmNvZGVTZXQsIHsKICAnIyc6IDEsCiAgJz8nOiAxLAogICd7JzogMSwKICAnfSc6IDEKfSk7CnZhciB1c2VyaW5mb1BlcmNlbnRFbmNvZGVTZXQgPSBhc3NpZ24oe30sIHBhdGhQZXJjZW50RW5jb2RlU2V0LCB7CiAgJy8nOiAxLAogICc6JzogMSwKICAnOyc6IDEsCiAgJz0nOiAxLAogICdAJzogMSwKICAnWyc6IDEsCiAgJ1xcJzogMSwKICAnXSc6IDEsCiAgJ14nOiAxLAogICd8JzogMQp9KTsKCnZhciBwZXJjZW50RW5jb2RlID0gZnVuY3Rpb24gKGNoYXIsIHNldCkgewogIHZhciBjb2RlID0gY29kZUF0KGNoYXIsIDApOwogIHJldHVybiBjb2RlID4gMHgyMCAmJiBjb2RlIDwgMHg3RiAmJiAhaGFzKHNldCwgY2hhcikgPyBjaGFyIDogZW5jb2RlVVJJQ29tcG9uZW50KGNoYXIpOwp9OwoKdmFyIHNwZWNpYWxTY2hlbWVzID0gewogIGZ0cDogMjEsCiAgZmlsZTogbnVsbCwKICBodHRwOiA4MCwKICBodHRwczogNDQzLAogIHdzOiA4MCwKICB3c3M6IDQ0Mwp9OwoKdmFyIGlzU3BlY2lhbCA9IGZ1bmN0aW9uICh1cmwpIHsKICByZXR1cm4gaGFzKHNwZWNpYWxTY2hlbWVzLCB1cmwuc2NoZW1lKTsKfTsKCnZhciBpbmNsdWRlc0NyZWRlbnRpYWxzID0gZnVuY3Rpb24gKHVybCkgewogIHJldHVybiB1cmwudXNlcm5hbWUgIT0gJycgfHwgdXJsLnBhc3N3b3JkICE9ICcnOwp9OwoKdmFyIGNhbm5vdEhhdmVVc2VybmFtZVBhc3N3b3JkUG9ydCA9IGZ1bmN0aW9uICh1cmwpIHsKICByZXR1cm4gIXVybC5ob3N0IHx8IHVybC5jYW5ub3RCZUFCYXNlVVJMIHx8IHVybC5zY2hlbWUgPT0gJ2ZpbGUnOwp9OwoKdmFyIGlzV2luZG93c0RyaXZlTGV0dGVyID0gZnVuY3Rpb24gKHN0cmluZywgbm9ybWFsaXplZCkgewogIHZhciBzZWNvbmQ7CiAgcmV0dXJuIHN0cmluZy5sZW5ndGggPT0gMiAmJiBBTFBIQS50ZXN0KHN0cmluZy5jaGFyQXQoMCkpICYmICgoc2Vjb25kID0gc3RyaW5nLmNoYXJBdCgxKSkgPT0gJzonIHx8ICFub3JtYWxpemVkICYmIHNlY29uZCA9PSAnfCcpOwp9OwoKdmFyIHN0YXJ0c1dpdGhXaW5kb3dzRHJpdmVMZXR0ZXIgPSBmdW5jdGlvbiAoc3RyaW5nKSB7CiAgdmFyIHRoaXJkOwogIHJldHVybiBzdHJpbmcubGVuZ3RoID4gMSAmJiBpc1dpbmRvd3NEcml2ZUxldHRlcihzdHJpbmcuc2xpY2UoMCwgMikpICYmIChzdHJpbmcubGVuZ3RoID09IDIgfHwgKHRoaXJkID0gc3RyaW5nLmNoYXJBdCgyKSkgPT09ICcvJyB8fCB0aGlyZCA9PT0gJ1xcJyB8fCB0aGlyZCA9PT0gJz8nIHx8IHRoaXJkID09PSAnIycpOwp9OwoKdmFyIHNob3J0ZW5VUkxzUGF0aCA9IGZ1bmN0aW9uICh1cmwpIHsKICB2YXIgcGF0aCA9IHVybC5wYXRoOwogIHZhciBwYXRoU2l6ZSA9IHBhdGgubGVuZ3RoOwoKICBpZiAocGF0aFNpemUgJiYgKHVybC5zY2hlbWUgIT0gJ2ZpbGUnIHx8IHBhdGhTaXplICE9IDEgfHwgIWlzV2luZG93c0RyaXZlTGV0dGVyKHBhdGhbMF0sIHRydWUpKSkgewogICAgcGF0aC5wb3AoKTsKICB9Cn07Cgp2YXIgaXNTaW5nbGVEb3QgPSBmdW5jdGlvbiAoc2VnbWVudCkgewogIHJldHVybiBzZWdtZW50ID09PSAnLicgfHwgc2VnbWVudC50b0xvd2VyQ2FzZSgpID09PSAnJTJlJzsKfTsKCnZhciBpc0RvdWJsZURvdCA9IGZ1bmN0aW9uIChzZWdtZW50KSB7CiAgc2VnbWVudCA9IHNlZ21lbnQudG9Mb3dlckNhc2UoKTsKICByZXR1cm4gc2VnbWVudCA9PT0gJy4uJyB8fCBzZWdtZW50ID09PSAnJTJlLicgfHwgc2VnbWVudCA9PT0gJy4lMmUnIHx8IHNlZ21lbnQgPT09ICclMmUlMmUnOwp9OyAvLyBTdGF0ZXM6CgoKdmFyIFNDSEVNRV9TVEFSVCA9IHt9Owp2YXIgU0NIRU1FID0ge307CnZhciBOT19TQ0hFTUUgPSB7fTsKdmFyIFNQRUNJQUxfUkVMQVRJVkVfT1JfQVVUSE9SSVRZID0ge307CnZhciBQQVRIX09SX0FVVEhPUklUWSA9IHt9Owp2YXIgUkVMQVRJVkUgPSB7fTsKdmFyIFJFTEFUSVZFX1NMQVNIID0ge307CnZhciBTUEVDSUFMX0FVVEhPUklUWV9TTEFTSEVTID0ge307CnZhciBTUEVDSUFMX0FVVEhPUklUWV9JR05PUkVfU0xBU0hFUyA9IHt9Owp2YXIgQVVUSE9SSVRZID0ge307CnZhciBIT1NUID0ge307CnZhciBIT1NUTkFNRSA9IHt9Owp2YXIgUE9SVCA9IHt9Owp2YXIgRklMRSA9IHt9Owp2YXIgRklMRV9TTEFTSCA9IHt9Owp2YXIgRklMRV9IT1NUID0ge307CnZhciBQQVRIX1NUQVJUID0ge307CnZhciBQQVRIID0ge307CnZhciBDQU5OT1RfQkVfQV9CQVNFX1VSTF9QQVRIID0ge307CnZhciBRVUVSWSA9IHt9Owp2YXIgRlJBR01FTlQgPSB7fTsgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG1heC1zdGF0ZW1lbnRzIC0tIFRPRE8KCnZhciBwYXJzZVVSTCA9IGZ1bmN0aW9uICh1cmwsIGlucHV0LCBzdGF0ZU92ZXJyaWRlLCBiYXNlKSB7CiAgdmFyIHN0YXRlID0gc3RhdGVPdmVycmlkZSB8fCBTQ0hFTUVfU1RBUlQ7CiAgdmFyIHBvaW50ZXIgPSAwOwogIHZhciBidWZmZXIgPSAnJzsKICB2YXIgc2VlbkF0ID0gZmFsc2U7CiAgdmFyIHNlZW5CcmFja2V0ID0gZmFsc2U7CiAgdmFyIHNlZW5QYXNzd29yZFRva2VuID0gZmFsc2U7CiAgdmFyIGNvZGVQb2ludHMsIGNoYXIsIGJ1ZmZlckNvZGVQb2ludHMsIGZhaWx1cmU7CgogIGlmICghc3RhdGVPdmVycmlkZSkgewogICAgdXJsLnNjaGVtZSA9ICcnOwogICAgdXJsLnVzZXJuYW1lID0gJyc7CiAgICB1cmwucGFzc3dvcmQgPSAnJzsKICAgIHVybC5ob3N0ID0gbnVsbDsKICAgIHVybC5wb3J0ID0gbnVsbDsKICAgIHVybC5wYXRoID0gW107CiAgICB1cmwucXVlcnkgPSBudWxsOwogICAgdXJsLmZyYWdtZW50ID0gbnVsbDsKICAgIHVybC5jYW5ub3RCZUFCYXNlVVJMID0gZmFsc2U7CiAgICBpbnB1dCA9IGlucHV0LnJlcGxhY2UoTEVBRElOR19BTkRfVFJBSUxJTkdfQzBfQ09OVFJPTF9PUl9TUEFDRSwgJycpOwogIH0KCiAgaW5wdXQgPSBpbnB1dC5yZXBsYWNlKFRBQl9BTkRfTkVXX0xJTkUsICcnKTsKICBjb2RlUG9pbnRzID0gYXJyYXlGcm9tKGlucHV0KTsKCiAgd2hpbGUgKHBvaW50ZXIgPD0gY29kZVBvaW50cy5sZW5ndGgpIHsKICAgIGNoYXIgPSBjb2RlUG9pbnRzW3BvaW50ZXJdOwoKICAgIHN3aXRjaCAoc3RhdGUpIHsKICAgICAgY2FzZSBTQ0hFTUVfU1RBUlQ6CiAgICAgICAgaWYgKGNoYXIgJiYgQUxQSEEudGVzdChjaGFyKSkgewogICAgICAgICAgYnVmZmVyICs9IGNoYXIudG9Mb3dlckNhc2UoKTsKICAgICAgICAgIHN0YXRlID0gU0NIRU1FOwogICAgICAgIH0gZWxzZSBpZiAoIXN0YXRlT3ZlcnJpZGUpIHsKICAgICAgICAgIHN0YXRlID0gTk9fU0NIRU1FOwogICAgICAgICAgY29udGludWU7CiAgICAgICAgfSBlbHNlIHJldHVybiBJTlZBTElEX1NDSEVNRTsKCiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlIFNDSEVNRToKICAgICAgICBpZiAoY2hhciAmJiAoQUxQSEFOVU1FUklDLnRlc3QoY2hhcikgfHwgY2hhciA9PSAnKycgfHwgY2hhciA9PSAnLScgfHwgY2hhciA9PSAnLicpKSB7CiAgICAgICAgICBidWZmZXIgKz0gY2hhci50b0xvd2VyQ2FzZSgpOwogICAgICAgIH0gZWxzZSBpZiAoY2hhciA9PSAnOicpIHsKICAgICAgICAgIGlmIChzdGF0ZU92ZXJyaWRlICYmIChpc1NwZWNpYWwodXJsKSAhPSBoYXMoc3BlY2lhbFNjaGVtZXMsIGJ1ZmZlcikgfHwgYnVmZmVyID09ICdmaWxlJyAmJiAoaW5jbHVkZXNDcmVkZW50aWFscyh1cmwpIHx8IHVybC5wb3J0ICE9PSBudWxsKSB8fCB1cmwuc2NoZW1lID09ICdmaWxlJyAmJiAhdXJsLmhvc3QpKSByZXR1cm47CiAgICAgICAgICB1cmwuc2NoZW1lID0gYnVmZmVyOwoKICAgICAgICAgIGlmIChzdGF0ZU92ZXJyaWRlKSB7CiAgICAgICAgICAgIGlmIChpc1NwZWNpYWwodXJsKSAmJiBzcGVjaWFsU2NoZW1lc1t1cmwuc2NoZW1lXSA9PSB1cmwucG9ydCkgdXJsLnBvcnQgPSBudWxsOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgICB9CgogICAgICAgICAgYnVmZmVyID0gJyc7CgogICAgICAgICAgaWYgKHVybC5zY2hlbWUgPT0gJ2ZpbGUnKSB7CiAgICAgICAgICAgIHN0YXRlID0gRklMRTsKICAgICAgICAgIH0gZWxzZSBpZiAoaXNTcGVjaWFsKHVybCkgJiYgYmFzZSAmJiBiYXNlLnNjaGVtZSA9PSB1cmwuc2NoZW1lKSB7CiAgICAgICAgICAgIHN0YXRlID0gU1BFQ0lBTF9SRUxBVElWRV9PUl9BVVRIT1JJVFk7CiAgICAgICAgICB9IGVsc2UgaWYgKGlzU3BlY2lhbCh1cmwpKSB7CiAgICAgICAgICAgIHN0YXRlID0gU1BFQ0lBTF9BVVRIT1JJVFlfU0xBU0hFUzsKICAgICAgICAgIH0gZWxzZSBpZiAoY29kZVBvaW50c1twb2ludGVyICsgMV0gPT0gJy8nKSB7CiAgICAgICAgICAgIHN0YXRlID0gUEFUSF9PUl9BVVRIT1JJVFk7CiAgICAgICAgICAgIHBvaW50ZXIrKzsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHVybC5jYW5ub3RCZUFCYXNlVVJMID0gdHJ1ZTsKICAgICAgICAgICAgdXJsLnBhdGgucHVzaCgnJyk7CiAgICAgICAgICAgIHN0YXRlID0gQ0FOTk9UX0JFX0FfQkFTRV9VUkxfUEFUSDsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgaWYgKCFzdGF0ZU92ZXJyaWRlKSB7CiAgICAgICAgICBidWZmZXIgPSAnJzsKICAgICAgICAgIHN0YXRlID0gTk9fU0NIRU1FOwogICAgICAgICAgcG9pbnRlciA9IDA7CiAgICAgICAgICBjb250aW51ZTsKICAgICAgICB9IGVsc2UgcmV0dXJuIElOVkFMSURfU0NIRU1FOwoKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgTk9fU0NIRU1FOgogICAgICAgIGlmICghYmFzZSB8fCBiYXNlLmNhbm5vdEJlQUJhc2VVUkwgJiYgY2hhciAhPSAnIycpIHJldHVybiBJTlZBTElEX1NDSEVNRTsKCiAgICAgICAgaWYgKGJhc2UuY2Fubm90QmVBQmFzZVVSTCAmJiBjaGFyID09ICcjJykgewogICAgICAgICAgdXJsLnNjaGVtZSA9IGJhc2Uuc2NoZW1lOwogICAgICAgICAgdXJsLnBhdGggPSBiYXNlLnBhdGguc2xpY2UoKTsKICAgICAgICAgIHVybC5xdWVyeSA9IGJhc2UucXVlcnk7CiAgICAgICAgICB1cmwuZnJhZ21lbnQgPSAnJzsKICAgICAgICAgIHVybC5jYW5ub3RCZUFCYXNlVVJMID0gdHJ1ZTsKICAgICAgICAgIHN0YXRlID0gRlJBR01FTlQ7CiAgICAgICAgICBicmVhazsKICAgICAgICB9CgogICAgICAgIHN0YXRlID0gYmFzZS5zY2hlbWUgPT0gJ2ZpbGUnID8gRklMRSA6IFJFTEFUSVZFOwogICAgICAgIGNvbnRpbnVlOwoKICAgICAgY2FzZSBTUEVDSUFMX1JFTEFUSVZFX09SX0FVVEhPUklUWToKICAgICAgICBpZiAoY2hhciA9PSAnLycgJiYgY29kZVBvaW50c1twb2ludGVyICsgMV0gPT0gJy8nKSB7CiAgICAgICAgICBzdGF0ZSA9IFNQRUNJQUxfQVVUSE9SSVRZX0lHTk9SRV9TTEFTSEVTOwogICAgICAgICAgcG9pbnRlcisrOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBzdGF0ZSA9IFJFTEFUSVZFOwogICAgICAgICAgY29udGludWU7CiAgICAgICAgfQoKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgUEFUSF9PUl9BVVRIT1JJVFk6CiAgICAgICAgaWYgKGNoYXIgPT0gJy8nKSB7CiAgICAgICAgICBzdGF0ZSA9IEFVVEhPUklUWTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBzdGF0ZSA9IFBBVEg7CiAgICAgICAgICBjb250aW51ZTsKICAgICAgICB9CgogICAgICBjYXNlIFJFTEFUSVZFOgogICAgICAgIHVybC5zY2hlbWUgPSBiYXNlLnNjaGVtZTsKCiAgICAgICAgaWYgKGNoYXIgPT0gRU9GKSB7CiAgICAgICAgICB1cmwudXNlcm5hbWUgPSBiYXNlLnVzZXJuYW1lOwogICAgICAgICAgdXJsLnBhc3N3b3JkID0gYmFzZS5wYXNzd29yZDsKICAgICAgICAgIHVybC5ob3N0ID0gYmFzZS5ob3N0OwogICAgICAgICAgdXJsLnBvcnQgPSBiYXNlLnBvcnQ7CiAgICAgICAgICB1cmwucGF0aCA9IGJhc2UucGF0aC5zbGljZSgpOwogICAgICAgICAgdXJsLnF1ZXJ5ID0gYmFzZS5xdWVyeTsKICAgICAgICB9IGVsc2UgaWYgKGNoYXIgPT0gJy8nIHx8IGNoYXIgPT0gJ1xcJyAmJiBpc1NwZWNpYWwodXJsKSkgewogICAgICAgICAgc3RhdGUgPSBSRUxBVElWRV9TTEFTSDsKICAgICAgICB9IGVsc2UgaWYgKGNoYXIgPT0gJz8nKSB7CiAgICAgICAgICB1cmwudXNlcm5hbWUgPSBiYXNlLnVzZXJuYW1lOwogICAgICAgICAgdXJsLnBhc3N3b3JkID0gYmFzZS5wYXNzd29yZDsKICAgICAgICAgIHVybC5ob3N0ID0gYmFzZS5ob3N0OwogICAgICAgICAgdXJsLnBvcnQgPSBiYXNlLnBvcnQ7CiAgICAgICAgICB1cmwucGF0aCA9IGJhc2UucGF0aC5zbGljZSgpOwogICAgICAgICAgdXJsLnF1ZXJ5ID0gJyc7CiAgICAgICAgICBzdGF0ZSA9IFFVRVJZOwogICAgICAgIH0gZWxzZSBpZiAoY2hhciA9PSAnIycpIHsKICAgICAgICAgIHVybC51c2VybmFtZSA9IGJhc2UudXNlcm5hbWU7CiAgICAgICAgICB1cmwucGFzc3dvcmQgPSBiYXNlLnBhc3N3b3JkOwogICAgICAgICAgdXJsLmhvc3QgPSBiYXNlLmhvc3Q7CiAgICAgICAgICB1cmwucG9ydCA9IGJhc2UucG9ydDsKICAgICAgICAgIHVybC5wYXRoID0gYmFzZS5wYXRoLnNsaWNlKCk7CiAgICAgICAgICB1cmwucXVlcnkgPSBiYXNlLnF1ZXJ5OwogICAgICAgICAgdXJsLmZyYWdtZW50ID0gJyc7CiAgICAgICAgICBzdGF0ZSA9IEZSQUdNRU5UOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB1cmwudXNlcm5hbWUgPSBiYXNlLnVzZXJuYW1lOwogICAgICAgICAgdXJsLnBhc3N3b3JkID0gYmFzZS5wYXNzd29yZDsKICAgICAgICAgIHVybC5ob3N0ID0gYmFzZS5ob3N0OwogICAgICAgICAgdXJsLnBvcnQgPSBiYXNlLnBvcnQ7CiAgICAgICAgICB1cmwucGF0aCA9IGJhc2UucGF0aC5zbGljZSgpOwogICAgICAgICAgdXJsLnBhdGgucG9wKCk7CiAgICAgICAgICBzdGF0ZSA9IFBBVEg7CiAgICAgICAgICBjb250aW51ZTsKICAgICAgICB9CgogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSBSRUxBVElWRV9TTEFTSDoKICAgICAgICBpZiAoaXNTcGVjaWFsKHVybCkgJiYgKGNoYXIgPT0gJy8nIHx8IGNoYXIgPT0gJ1xcJykpIHsKICAgICAgICAgIHN0YXRlID0gU1BFQ0lBTF9BVVRIT1JJVFlfSUdOT1JFX1NMQVNIRVM7CiAgICAgICAgfSBlbHNlIGlmIChjaGFyID09ICcvJykgewogICAgICAgICAgc3RhdGUgPSBBVVRIT1JJVFk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHVybC51c2VybmFtZSA9IGJhc2UudXNlcm5hbWU7CiAgICAgICAgICB1cmwucGFzc3dvcmQgPSBiYXNlLnBhc3N3b3JkOwogICAgICAgICAgdXJsLmhvc3QgPSBiYXNlLmhvc3Q7CiAgICAgICAgICB1cmwucG9ydCA9IGJhc2UucG9ydDsKICAgICAgICAgIHN0YXRlID0gUEFUSDsKICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgIH0KCiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlIFNQRUNJQUxfQVVUSE9SSVRZX1NMQVNIRVM6CiAgICAgICAgc3RhdGUgPSBTUEVDSUFMX0FVVEhPUklUWV9JR05PUkVfU0xBU0hFUzsKICAgICAgICBpZiAoY2hhciAhPSAnLycgfHwgYnVmZmVyLmNoYXJBdChwb2ludGVyICsgMSkgIT0gJy8nKSBjb250aW51ZTsKICAgICAgICBwb2ludGVyKys7CiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlIFNQRUNJQUxfQVVUSE9SSVRZX0lHTk9SRV9TTEFTSEVTOgogICAgICAgIGlmIChjaGFyICE9ICcvJyAmJiBjaGFyICE9ICdcXCcpIHsKICAgICAgICAgIHN0YXRlID0gQVVUSE9SSVRZOwogICAgICAgICAgY29udGludWU7CiAgICAgICAgfQoKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgQVVUSE9SSVRZOgogICAgICAgIGlmIChjaGFyID09ICdAJykgewogICAgICAgICAgaWYgKHNlZW5BdCkgYnVmZmVyID0gJyU0MCcgKyBidWZmZXI7CiAgICAgICAgICBzZWVuQXQgPSB0cnVlOwogICAgICAgICAgYnVmZmVyQ29kZVBvaW50cyA9IGFycmF5RnJvbShidWZmZXIpOwoKICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYnVmZmVyQ29kZVBvaW50cy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICB2YXIgY29kZVBvaW50ID0gYnVmZmVyQ29kZVBvaW50c1tpXTsKCiAgICAgICAgICAgIGlmIChjb2RlUG9pbnQgPT0gJzonICYmICFzZWVuUGFzc3dvcmRUb2tlbikgewogICAgICAgICAgICAgIHNlZW5QYXNzd29yZFRva2VuID0gdHJ1ZTsKICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgdmFyIGVuY29kZWRDb2RlUG9pbnRzID0gcGVyY2VudEVuY29kZShjb2RlUG9pbnQsIHVzZXJpbmZvUGVyY2VudEVuY29kZVNldCk7CiAgICAgICAgICAgIGlmIChzZWVuUGFzc3dvcmRUb2tlbikgdXJsLnBhc3N3b3JkICs9IGVuY29kZWRDb2RlUG9pbnRzO2Vsc2UgdXJsLnVzZXJuYW1lICs9IGVuY29kZWRDb2RlUG9pbnRzOwogICAgICAgICAgfQoKICAgICAgICAgIGJ1ZmZlciA9ICcnOwogICAgICAgIH0gZWxzZSBpZiAoY2hhciA9PSBFT0YgfHwgY2hhciA9PSAnLycgfHwgY2hhciA9PSAnPycgfHwgY2hhciA9PSAnIycgfHwgY2hhciA9PSAnXFwnICYmIGlzU3BlY2lhbCh1cmwpKSB7CiAgICAgICAgICBpZiAoc2VlbkF0ICYmIGJ1ZmZlciA9PSAnJykgcmV0dXJuIElOVkFMSURfQVVUSE9SSVRZOwogICAgICAgICAgcG9pbnRlciAtPSBhcnJheUZyb20oYnVmZmVyKS5sZW5ndGggKyAxOwogICAgICAgICAgYnVmZmVyID0gJyc7CiAgICAgICAgICBzdGF0ZSA9IEhPU1Q7CiAgICAgICAgfSBlbHNlIGJ1ZmZlciArPSBjaGFyOwoKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgSE9TVDoKICAgICAgY2FzZSBIT1NUTkFNRToKICAgICAgICBpZiAoc3RhdGVPdmVycmlkZSAmJiB1cmwuc2NoZW1lID09ICdmaWxlJykgewogICAgICAgICAgc3RhdGUgPSBGSUxFX0hPU1Q7CiAgICAgICAgICBjb250aW51ZTsKICAgICAgICB9IGVsc2UgaWYgKGNoYXIgPT0gJzonICYmICFzZWVuQnJhY2tldCkgewogICAgICAgICAgaWYgKGJ1ZmZlciA9PSAnJykgcmV0dXJuIElOVkFMSURfSE9TVDsKICAgICAgICAgIGZhaWx1cmUgPSBwYXJzZUhvc3QodXJsLCBidWZmZXIpOwogICAgICAgICAgaWYgKGZhaWx1cmUpIHJldHVybiBmYWlsdXJlOwogICAgICAgICAgYnVmZmVyID0gJyc7CiAgICAgICAgICBzdGF0ZSA9IFBPUlQ7CiAgICAgICAgICBpZiAoc3RhdGVPdmVycmlkZSA9PSBIT1NUTkFNRSkgcmV0dXJuOwogICAgICAgIH0gZWxzZSBpZiAoY2hhciA9PSBFT0YgfHwgY2hhciA9PSAnLycgfHwgY2hhciA9PSAnPycgfHwgY2hhciA9PSAnIycgfHwgY2hhciA9PSAnXFwnICYmIGlzU3BlY2lhbCh1cmwpKSB7CiAgICAgICAgICBpZiAoaXNTcGVjaWFsKHVybCkgJiYgYnVmZmVyID09ICcnKSByZXR1cm4gSU5WQUxJRF9IT1NUOwogICAgICAgICAgaWYgKHN0YXRlT3ZlcnJpZGUgJiYgYnVmZmVyID09ICcnICYmIChpbmNsdWRlc0NyZWRlbnRpYWxzKHVybCkgfHwgdXJsLnBvcnQgIT09IG51bGwpKSByZXR1cm47CiAgICAgICAgICBmYWlsdXJlID0gcGFyc2VIb3N0KHVybCwgYnVmZmVyKTsKICAgICAgICAgIGlmIChmYWlsdXJlKSByZXR1cm4gZmFpbHVyZTsKICAgICAgICAgIGJ1ZmZlciA9ICcnOwogICAgICAgICAgc3RhdGUgPSBQQVRIX1NUQVJUOwogICAgICAgICAgaWYgKHN0YXRlT3ZlcnJpZGUpIHJldHVybjsKICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBpZiAoY2hhciA9PSAnWycpIHNlZW5CcmFja2V0ID0gdHJ1ZTtlbHNlIGlmIChjaGFyID09ICddJykgc2VlbkJyYWNrZXQgPSBmYWxzZTsKICAgICAgICAgIGJ1ZmZlciArPSBjaGFyOwogICAgICAgIH0KCiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlIFBPUlQ6CiAgICAgICAgaWYgKERJR0lULnRlc3QoY2hhcikpIHsKICAgICAgICAgIGJ1ZmZlciArPSBjaGFyOwogICAgICAgIH0gZWxzZSBpZiAoY2hhciA9PSBFT0YgfHwgY2hhciA9PSAnLycgfHwgY2hhciA9PSAnPycgfHwgY2hhciA9PSAnIycgfHwgY2hhciA9PSAnXFwnICYmIGlzU3BlY2lhbCh1cmwpIHx8IHN0YXRlT3ZlcnJpZGUpIHsKICAgICAgICAgIGlmIChidWZmZXIgIT0gJycpIHsKICAgICAgICAgICAgdmFyIHBvcnQgPSBwYXJzZUludChidWZmZXIsIDEwKTsKICAgICAgICAgICAgaWYgKHBvcnQgPiAweEZGRkYpIHJldHVybiBJTlZBTElEX1BPUlQ7CiAgICAgICAgICAgIHVybC5wb3J0ID0gaXNTcGVjaWFsKHVybCkgJiYgcG9ydCA9PT0gc3BlY2lhbFNjaGVtZXNbdXJsLnNjaGVtZV0gPyBudWxsIDogcG9ydDsKICAgICAgICAgICAgYnVmZmVyID0gJyc7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKHN0YXRlT3ZlcnJpZGUpIHJldHVybjsKICAgICAgICAgIHN0YXRlID0gUEFUSF9TVEFSVDsKICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgIH0gZWxzZSByZXR1cm4gSU5WQUxJRF9QT1JUOwoKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgRklMRToKICAgICAgICB1cmwuc2NoZW1lID0gJ2ZpbGUnOwogICAgICAgIGlmIChjaGFyID09ICcvJyB8fCBjaGFyID09ICdcXCcpIHN0YXRlID0gRklMRV9TTEFTSDtlbHNlIGlmIChiYXNlICYmIGJhc2Uuc2NoZW1lID09ICdmaWxlJykgewogICAgICAgICAgaWYgKGNoYXIgPT0gRU9GKSB7CiAgICAgICAgICAgIHVybC5ob3N0ID0gYmFzZS5ob3N0OwogICAgICAgICAgICB1cmwucGF0aCA9IGJhc2UucGF0aC5zbGljZSgpOwogICAgICAgICAgICB1cmwucXVlcnkgPSBiYXNlLnF1ZXJ5OwogICAgICAgICAgfSBlbHNlIGlmIChjaGFyID09ICc/JykgewogICAgICAgICAgICB1cmwuaG9zdCA9IGJhc2UuaG9zdDsKICAgICAgICAgICAgdXJsLnBhdGggPSBiYXNlLnBhdGguc2xpY2UoKTsKICAgICAgICAgICAgdXJsLnF1ZXJ5ID0gJyc7CiAgICAgICAgICAgIHN0YXRlID0gUVVFUlk7CiAgICAgICAgICB9IGVsc2UgaWYgKGNoYXIgPT0gJyMnKSB7CiAgICAgICAgICAgIHVybC5ob3N0ID0gYmFzZS5ob3N0OwogICAgICAgICAgICB1cmwucGF0aCA9IGJhc2UucGF0aC5zbGljZSgpOwogICAgICAgICAgICB1cmwucXVlcnkgPSBiYXNlLnF1ZXJ5OwogICAgICAgICAgICB1cmwuZnJhZ21lbnQgPSAnJzsKICAgICAgICAgICAgc3RhdGUgPSBGUkFHTUVOVDsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGlmICghc3RhcnRzV2l0aFdpbmRvd3NEcml2ZUxldHRlcihjb2RlUG9pbnRzLnNsaWNlKHBvaW50ZXIpLmpvaW4oJycpKSkgewogICAgICAgICAgICAgIHVybC5ob3N0ID0gYmFzZS5ob3N0OwogICAgICAgICAgICAgIHVybC5wYXRoID0gYmFzZS5wYXRoLnNsaWNlKCk7CiAgICAgICAgICAgICAgc2hvcnRlblVSTHNQYXRoKHVybCk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHN0YXRlID0gUEFUSDsKICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHN0YXRlID0gUEFUSDsKICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgIH0KICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgRklMRV9TTEFTSDoKICAgICAgICBpZiAoY2hhciA9PSAnLycgfHwgY2hhciA9PSAnXFwnKSB7CiAgICAgICAgICBzdGF0ZSA9IEZJTEVfSE9TVDsKICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KCiAgICAgICAgaWYgKGJhc2UgJiYgYmFzZS5zY2hlbWUgPT0gJ2ZpbGUnICYmICFzdGFydHNXaXRoV2luZG93c0RyaXZlTGV0dGVyKGNvZGVQb2ludHMuc2xpY2UocG9pbnRlcikuam9pbignJykpKSB7CiAgICAgICAgICBpZiAoaXNXaW5kb3dzRHJpdmVMZXR0ZXIoYmFzZS5wYXRoWzBdLCB0cnVlKSkgdXJsLnBhdGgucHVzaChiYXNlLnBhdGhbMF0pO2Vsc2UgdXJsLmhvc3QgPSBiYXNlLmhvc3Q7CiAgICAgICAgfQoKICAgICAgICBzdGF0ZSA9IFBBVEg7CiAgICAgICAgY29udGludWU7CgogICAgICBjYXNlIEZJTEVfSE9TVDoKICAgICAgICBpZiAoY2hhciA9PSBFT0YgfHwgY2hhciA9PSAnLycgfHwgY2hhciA9PSAnXFwnIHx8IGNoYXIgPT0gJz8nIHx8IGNoYXIgPT0gJyMnKSB7CiAgICAgICAgICBpZiAoIXN0YXRlT3ZlcnJpZGUgJiYgaXNXaW5kb3dzRHJpdmVMZXR0ZXIoYnVmZmVyKSkgewogICAgICAgICAgICBzdGF0ZSA9IFBBVEg7CiAgICAgICAgICB9IGVsc2UgaWYgKGJ1ZmZlciA9PSAnJykgewogICAgICAgICAgICB1cmwuaG9zdCA9ICcnOwogICAgICAgICAgICBpZiAoc3RhdGVPdmVycmlkZSkgcmV0dXJuOwogICAgICAgICAgICBzdGF0ZSA9IFBBVEhfU1RBUlQ7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBmYWlsdXJlID0gcGFyc2VIb3N0KHVybCwgYnVmZmVyKTsKICAgICAgICAgICAgaWYgKGZhaWx1cmUpIHJldHVybiBmYWlsdXJlOwogICAgICAgICAgICBpZiAodXJsLmhvc3QgPT0gJ2xvY2FsaG9zdCcpIHVybC5ob3N0ID0gJyc7CiAgICAgICAgICAgIGlmIChzdGF0ZU92ZXJyaWRlKSByZXR1cm47CiAgICAgICAgICAgIGJ1ZmZlciA9ICcnOwogICAgICAgICAgICBzdGF0ZSA9IFBBVEhfU1RBUlQ7CiAgICAgICAgICB9CgogICAgICAgICAgY29udGludWU7CiAgICAgICAgfSBlbHNlIGJ1ZmZlciArPSBjaGFyOwoKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgUEFUSF9TVEFSVDoKICAgICAgICBpZiAoaXNTcGVjaWFsKHVybCkpIHsKICAgICAgICAgIHN0YXRlID0gUEFUSDsKICAgICAgICAgIGlmIChjaGFyICE9ICcvJyAmJiBjaGFyICE9ICdcXCcpIGNvbnRpbnVlOwogICAgICAgIH0gZWxzZSBpZiAoIXN0YXRlT3ZlcnJpZGUgJiYgY2hhciA9PSAnPycpIHsKICAgICAgICAgIHVybC5xdWVyeSA9ICcnOwogICAgICAgICAgc3RhdGUgPSBRVUVSWTsKICAgICAgICB9IGVsc2UgaWYgKCFzdGF0ZU92ZXJyaWRlICYmIGNoYXIgPT0gJyMnKSB7CiAgICAgICAgICB1cmwuZnJhZ21lbnQgPSAnJzsKICAgICAgICAgIHN0YXRlID0gRlJBR01FTlQ7CiAgICAgICAgfSBlbHNlIGlmIChjaGFyICE9IEVPRikgewogICAgICAgICAgc3RhdGUgPSBQQVRIOwogICAgICAgICAgaWYgKGNoYXIgIT0gJy8nKSBjb250aW51ZTsKICAgICAgICB9CgogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSBQQVRIOgogICAgICAgIGlmIChjaGFyID09IEVPRiB8fCBjaGFyID09ICcvJyB8fCBjaGFyID09ICdcXCcgJiYgaXNTcGVjaWFsKHVybCkgfHwgIXN0YXRlT3ZlcnJpZGUgJiYgKGNoYXIgPT0gJz8nIHx8IGNoYXIgPT0gJyMnKSkgewogICAgICAgICAgaWYgKGlzRG91YmxlRG90KGJ1ZmZlcikpIHsKICAgICAgICAgICAgc2hvcnRlblVSTHNQYXRoKHVybCk7CgogICAgICAgICAgICBpZiAoY2hhciAhPSAnLycgJiYgIShjaGFyID09ICdcXCcgJiYgaXNTcGVjaWFsKHVybCkpKSB7CiAgICAgICAgICAgICAgdXJsLnBhdGgucHVzaCgnJyk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0gZWxzZSBpZiAoaXNTaW5nbGVEb3QoYnVmZmVyKSkgewogICAgICAgICAgICBpZiAoY2hhciAhPSAnLycgJiYgIShjaGFyID09ICdcXCcgJiYgaXNTcGVjaWFsKHVybCkpKSB7CiAgICAgICAgICAgICAgdXJsLnBhdGgucHVzaCgnJyk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGlmICh1cmwuc2NoZW1lID09ICdmaWxlJyAmJiAhdXJsLnBhdGgubGVuZ3RoICYmIGlzV2luZG93c0RyaXZlTGV0dGVyKGJ1ZmZlcikpIHsKICAgICAgICAgICAgICBpZiAodXJsLmhvc3QpIHVybC5ob3N0ID0gJyc7CiAgICAgICAgICAgICAgYnVmZmVyID0gYnVmZmVyLmNoYXJBdCgwKSArICc6JzsgLy8gbm9ybWFsaXplIHdpbmRvd3MgZHJpdmUgbGV0dGVyCiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHVybC5wYXRoLnB1c2goYnVmZmVyKTsKICAgICAgICAgIH0KCiAgICAgICAgICBidWZmZXIgPSAnJzsKCiAgICAgICAgICBpZiAodXJsLnNjaGVtZSA9PSAnZmlsZScgJiYgKGNoYXIgPT0gRU9GIHx8IGNoYXIgPT0gJz8nIHx8IGNoYXIgPT0gJyMnKSkgewogICAgICAgICAgICB3aGlsZSAodXJsLnBhdGgubGVuZ3RoID4gMSAmJiB1cmwucGF0aFswXSA9PT0gJycpIHsKICAgICAgICAgICAgICB1cmwucGF0aC5zaGlmdCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKGNoYXIgPT0gJz8nKSB7CiAgICAgICAgICAgIHVybC5xdWVyeSA9ICcnOwogICAgICAgICAgICBzdGF0ZSA9IFFVRVJZOwogICAgICAgICAgfSBlbHNlIGlmIChjaGFyID09ICcjJykgewogICAgICAgICAgICB1cmwuZnJhZ21lbnQgPSAnJzsKICAgICAgICAgICAgc3RhdGUgPSBGUkFHTUVOVDsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgYnVmZmVyICs9IHBlcmNlbnRFbmNvZGUoY2hhciwgcGF0aFBlcmNlbnRFbmNvZGVTZXQpOwogICAgICAgIH0KCiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlIENBTk5PVF9CRV9BX0JBU0VfVVJMX1BBVEg6CiAgICAgICAgaWYgKGNoYXIgPT0gJz8nKSB7CiAgICAgICAgICB1cmwucXVlcnkgPSAnJzsKICAgICAgICAgIHN0YXRlID0gUVVFUlk7CiAgICAgICAgfSBlbHNlIGlmIChjaGFyID09ICcjJykgewogICAgICAgICAgdXJsLmZyYWdtZW50ID0gJyc7CiAgICAgICAgICBzdGF0ZSA9IEZSQUdNRU5UOwogICAgICAgIH0gZWxzZSBpZiAoY2hhciAhPSBFT0YpIHsKICAgICAgICAgIHVybC5wYXRoWzBdICs9IHBlcmNlbnRFbmNvZGUoY2hhciwgQzBDb250cm9sUGVyY2VudEVuY29kZVNldCk7CiAgICAgICAgfQoKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgUVVFUlk6CiAgICAgICAgaWYgKCFzdGF0ZU92ZXJyaWRlICYmIGNoYXIgPT0gJyMnKSB7CiAgICAgICAgICB1cmwuZnJhZ21lbnQgPSAnJzsKICAgICAgICAgIHN0YXRlID0gRlJBR01FTlQ7CiAgICAgICAgfSBlbHNlIGlmIChjaGFyICE9IEVPRikgewogICAgICAgICAgaWYgKGNoYXIgPT0gIiciICYmIGlzU3BlY2lhbCh1cmwpKSB1cmwucXVlcnkgKz0gJyUyNyc7ZWxzZSBpZiAoY2hhciA9PSAnIycpIHVybC5xdWVyeSArPSAnJTIzJztlbHNlIHVybC5xdWVyeSArPSBwZXJjZW50RW5jb2RlKGNoYXIsIEMwQ29udHJvbFBlcmNlbnRFbmNvZGVTZXQpOwogICAgICAgIH0KCiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlIEZSQUdNRU5UOgogICAgICAgIGlmIChjaGFyICE9IEVPRikgdXJsLmZyYWdtZW50ICs9IHBlcmNlbnRFbmNvZGUoY2hhciwgZnJhZ21lbnRQZXJjZW50RW5jb2RlU2V0KTsKICAgICAgICBicmVhazsKICAgIH0KCiAgICBwb2ludGVyKys7CiAgfQp9OyAvLyBgVVJMYCBjb25zdHJ1Y3RvcgovLyBodHRwczovL3VybC5zcGVjLndoYXR3Zy5vcmcvI3VybC1jbGFzcwoKCnZhciBVUkxDb25zdHJ1Y3RvciA9IGZ1bmN0aW9uIFVSTCh1cmwKLyogLCBiYXNlICovCikgewogIHZhciB0aGF0ID0gYW5JbnN0YW5jZSh0aGlzLCBVUkxDb25zdHJ1Y3RvciwgJ1VSTCcpOwogIHZhciBiYXNlID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgPyBhcmd1bWVudHNbMV0gOiB1bmRlZmluZWQ7CiAgdmFyIHVybFN0cmluZyA9IFN0cmluZyh1cmwpOwogIHZhciBzdGF0ZSA9IHNldEludGVybmFsU3RhdGUodGhhdCwgewogICAgdHlwZTogJ1VSTCcKICB9KTsKICB2YXIgYmFzZVN0YXRlLCBmYWlsdXJlOwoKICBpZiAoYmFzZSAhPT0gdW5kZWZpbmVkKSB7CiAgICBpZiAoYmFzZSBpbnN0YW5jZW9mIFVSTENvbnN0cnVjdG9yKSBiYXNlU3RhdGUgPSBnZXRJbnRlcm5hbFVSTFN0YXRlKGJhc2UpO2Vsc2UgewogICAgICBmYWlsdXJlID0gcGFyc2VVUkwoYmFzZVN0YXRlID0ge30sIFN0cmluZyhiYXNlKSk7CiAgICAgIGlmIChmYWlsdXJlKSB0aHJvdyBUeXBlRXJyb3IoZmFpbHVyZSk7CiAgICB9CiAgfQoKICBmYWlsdXJlID0gcGFyc2VVUkwoc3RhdGUsIHVybFN0cmluZywgbnVsbCwgYmFzZVN0YXRlKTsKICBpZiAoZmFpbHVyZSkgdGhyb3cgVHlwZUVycm9yKGZhaWx1cmUpOwogIHZhciBzZWFyY2hQYXJhbXMgPSBzdGF0ZS5zZWFyY2hQYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKCk7CiAgdmFyIHNlYXJjaFBhcmFtc1N0YXRlID0gZ2V0SW50ZXJuYWxTZWFyY2hQYXJhbXNTdGF0ZShzZWFyY2hQYXJhbXMpOwogIHNlYXJjaFBhcmFtc1N0YXRlLnVwZGF0ZVNlYXJjaFBhcmFtcyhzdGF0ZS5xdWVyeSk7CgogIHNlYXJjaFBhcmFtc1N0YXRlLnVwZGF0ZVVSTCA9IGZ1bmN0aW9uICgpIHsKICAgIHN0YXRlLnF1ZXJ5ID0gU3RyaW5nKHNlYXJjaFBhcmFtcykgfHwgbnVsbDsKICB9OwoKICBpZiAoIURFU0NSSVBUT1JTKSB7CiAgICB0aGF0LmhyZWYgPSBzZXJpYWxpemVVUkwuY2FsbCh0aGF0KTsKICAgIHRoYXQub3JpZ2luID0gZ2V0T3JpZ2luLmNhbGwodGhhdCk7CiAgICB0aGF0LnByb3RvY29sID0gZ2V0UHJvdG9jb2wuY2FsbCh0aGF0KTsKICAgIHRoYXQudXNlcm5hbWUgPSBnZXRVc2VybmFtZS5jYWxsKHRoYXQpOwogICAgdGhhdC5wYXNzd29yZCA9IGdldFBhc3N3b3JkLmNhbGwodGhhdCk7CiAgICB0aGF0Lmhvc3QgPSBnZXRIb3N0LmNhbGwodGhhdCk7CiAgICB0aGF0Lmhvc3RuYW1lID0gZ2V0SG9zdG5hbWUuY2FsbCh0aGF0KTsKICAgIHRoYXQucG9ydCA9IGdldFBvcnQuY2FsbCh0aGF0KTsKICAgIHRoYXQucGF0aG5hbWUgPSBnZXRQYXRobmFtZS5jYWxsKHRoYXQpOwogICAgdGhhdC5zZWFyY2ggPSBnZXRTZWFyY2guY2FsbCh0aGF0KTsKICAgIHRoYXQuc2VhcmNoUGFyYW1zID0gZ2V0U2VhcmNoUGFyYW1zLmNhbGwodGhhdCk7CiAgICB0aGF0Lmhhc2ggPSBnZXRIYXNoLmNhbGwodGhhdCk7CiAgfQp9OwoKdmFyIFVSTFByb3RvdHlwZSA9IFVSTENvbnN0cnVjdG9yLnByb3RvdHlwZTsKCnZhciBzZXJpYWxpemVVUkwgPSBmdW5jdGlvbiAoKSB7CiAgdmFyIHVybCA9IGdldEludGVybmFsVVJMU3RhdGUodGhpcyk7CiAgdmFyIHNjaGVtZSA9IHVybC5zY2hlbWU7CiAgdmFyIHVzZXJuYW1lID0gdXJsLnVzZXJuYW1lOwogIHZhciBwYXNzd29yZCA9IHVybC5wYXNzd29yZDsKICB2YXIgaG9zdCA9IHVybC5ob3N0OwogIHZhciBwb3J0ID0gdXJsLnBvcnQ7CiAgdmFyIHBhdGggPSB1cmwucGF0aDsKICB2YXIgcXVlcnkgPSB1cmwucXVlcnk7CiAgdmFyIGZyYWdtZW50ID0gdXJsLmZyYWdtZW50OwogIHZhciBvdXRwdXQgPSBzY2hlbWUgKyAnOic7CgogIGlmIChob3N0ICE9PSBudWxsKSB7CiAgICBvdXRwdXQgKz0gJy8vJzsKCiAgICBpZiAoaW5jbHVkZXNDcmVkZW50aWFscyh1cmwpKSB7CiAgICAgIG91dHB1dCArPSB1c2VybmFtZSArIChwYXNzd29yZCA/ICc6JyArIHBhc3N3b3JkIDogJycpICsgJ0AnOwogICAgfQoKICAgIG91dHB1dCArPSBzZXJpYWxpemVIb3N0KGhvc3QpOwogICAgaWYgKHBvcnQgIT09IG51bGwpIG91dHB1dCArPSAnOicgKyBwb3J0OwogIH0gZWxzZSBpZiAoc2NoZW1lID09ICdmaWxlJykgb3V0cHV0ICs9ICcvLyc7CgogIG91dHB1dCArPSB1cmwuY2Fubm90QmVBQmFzZVVSTCA/IHBhdGhbMF0gOiBwYXRoLmxlbmd0aCA/ICcvJyArIHBhdGguam9pbignLycpIDogJyc7CiAgaWYgKHF1ZXJ5ICE9PSBudWxsKSBvdXRwdXQgKz0gJz8nICsgcXVlcnk7CiAgaWYgKGZyYWdtZW50ICE9PSBudWxsKSBvdXRwdXQgKz0gJyMnICsgZnJhZ21lbnQ7CiAgcmV0dXJuIG91dHB1dDsKfTsKCnZhciBnZXRPcmlnaW4gPSBmdW5jdGlvbiAoKSB7CiAgdmFyIHVybCA9IGdldEludGVybmFsVVJMU3RhdGUodGhpcyk7CiAgdmFyIHNjaGVtZSA9IHVybC5zY2hlbWU7CiAgdmFyIHBvcnQgPSB1cmwucG9ydDsKICBpZiAoc2NoZW1lID09ICdibG9iJykgdHJ5IHsKICAgIHJldHVybiBuZXcgVVJMQ29uc3RydWN0b3Ioc2NoZW1lLnBhdGhbMF0pLm9yaWdpbjsKICB9IGNhdGNoIChlcnJvcikgewogICAgcmV0dXJuICdudWxsJzsKICB9CiAgaWYgKHNjaGVtZSA9PSAnZmlsZScgfHwgIWlzU3BlY2lhbCh1cmwpKSByZXR1cm4gJ251bGwnOwogIHJldHVybiBzY2hlbWUgKyAnOi8vJyArIHNlcmlhbGl6ZUhvc3QodXJsLmhvc3QpICsgKHBvcnQgIT09IG51bGwgPyAnOicgKyBwb3J0IDogJycpOwp9OwoKdmFyIGdldFByb3RvY29sID0gZnVuY3Rpb24gKCkgewogIHJldHVybiBnZXRJbnRlcm5hbFVSTFN0YXRlKHRoaXMpLnNjaGVtZSArICc6JzsKfTsKCnZhciBnZXRVc2VybmFtZSA9IGZ1bmN0aW9uICgpIHsKICByZXR1cm4gZ2V0SW50ZXJuYWxVUkxTdGF0ZSh0aGlzKS51c2VybmFtZTsKfTsKCnZhciBnZXRQYXNzd29yZCA9IGZ1bmN0aW9uICgpIHsKICByZXR1cm4gZ2V0SW50ZXJuYWxVUkxTdGF0ZSh0aGlzKS5wYXNzd29yZDsKfTsKCnZhciBnZXRIb3N0ID0gZnVuY3Rpb24gKCkgewogIHZhciB1cmwgPSBnZXRJbnRlcm5hbFVSTFN0YXRlKHRoaXMpOwogIHZhciBob3N0ID0gdXJsLmhvc3Q7CiAgdmFyIHBvcnQgPSB1cmwucG9ydDsKICByZXR1cm4gaG9zdCA9PT0gbnVsbCA/ICcnIDogcG9ydCA9PT0gbnVsbCA/IHNlcmlhbGl6ZUhvc3QoaG9zdCkgOiBzZXJpYWxpemVIb3N0KGhvc3QpICsgJzonICsgcG9ydDsKfTsKCnZhciBnZXRIb3N0bmFtZSA9IGZ1bmN0aW9uICgpIHsKICB2YXIgaG9zdCA9IGdldEludGVybmFsVVJMU3RhdGUodGhpcykuaG9zdDsKICByZXR1cm4gaG9zdCA9PT0gbnVsbCA/ICcnIDogc2VyaWFsaXplSG9zdChob3N0KTsKfTsKCnZhciBnZXRQb3J0ID0gZnVuY3Rpb24gKCkgewogIHZhciBwb3J0ID0gZ2V0SW50ZXJuYWxVUkxTdGF0ZSh0aGlzKS5wb3J0OwogIHJldHVybiBwb3J0ID09PSBudWxsID8gJycgOiBTdHJpbmcocG9ydCk7Cn07Cgp2YXIgZ2V0UGF0aG5hbWUgPSBmdW5jdGlvbiAoKSB7CiAgdmFyIHVybCA9IGdldEludGVybmFsVVJMU3RhdGUodGhpcyk7CiAgdmFyIHBhdGggPSB1cmwucGF0aDsKICByZXR1cm4gdXJsLmNhbm5vdEJlQUJhc2VVUkwgPyBwYXRoWzBdIDogcGF0aC5sZW5ndGggPyAnLycgKyBwYXRoLmpvaW4oJy8nKSA6ICcnOwp9OwoKdmFyIGdldFNlYXJjaCA9IGZ1bmN0aW9uICgpIHsKICB2YXIgcXVlcnkgPSBnZXRJbnRlcm5hbFVSTFN0YXRlKHRoaXMpLnF1ZXJ5OwogIHJldHVybiBxdWVyeSA/ICc/JyArIHF1ZXJ5IDogJyc7Cn07Cgp2YXIgZ2V0U2VhcmNoUGFyYW1zID0gZnVuY3Rpb24gKCkgewogIHJldHVybiBnZXRJbnRlcm5hbFVSTFN0YXRlKHRoaXMpLnNlYXJjaFBhcmFtczsKfTsKCnZhciBnZXRIYXNoID0gZnVuY3Rpb24gKCkgewogIHZhciBmcmFnbWVudCA9IGdldEludGVybmFsVVJMU3RhdGUodGhpcykuZnJhZ21lbnQ7CiAgcmV0dXJuIGZyYWdtZW50ID8gJyMnICsgZnJhZ21lbnQgOiAnJzsKfTsKCnZhciBhY2Nlc3NvckRlc2NyaXB0b3IgPSBmdW5jdGlvbiAoZ2V0dGVyLCBzZXR0ZXIpIHsKICByZXR1cm4gewogICAgZ2V0OiBnZXR0ZXIsCiAgICBzZXQ6IHNldHRlciwKICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSwKICAgIGVudW1lcmFibGU6IHRydWUKICB9Owp9OwoKaWYgKERFU0NSSVBUT1JTKSB7CiAgZGVmaW5lUHJvcGVydGllcyhVUkxQcm90b3R5cGUsIHsKICAgIC8vIGBVUkwucHJvdG90eXBlLmhyZWZgIGFjY2Vzc29ycyBwYWlyCiAgICAvLyBodHRwczovL3VybC5zcGVjLndoYXR3Zy5vcmcvI2RvbS11cmwtaHJlZgogICAgaHJlZjogYWNjZXNzb3JEZXNjcmlwdG9yKHNlcmlhbGl6ZVVSTCwgZnVuY3Rpb24gKGhyZWYpIHsKICAgICAgdmFyIHVybCA9IGdldEludGVybmFsVVJMU3RhdGUodGhpcyk7CiAgICAgIHZhciB1cmxTdHJpbmcgPSBTdHJpbmcoaHJlZik7CiAgICAgIHZhciBmYWlsdXJlID0gcGFyc2VVUkwodXJsLCB1cmxTdHJpbmcpOwogICAgICBpZiAoZmFpbHVyZSkgdGhyb3cgVHlwZUVycm9yKGZhaWx1cmUpOwogICAgICBnZXRJbnRlcm5hbFNlYXJjaFBhcmFtc1N0YXRlKHVybC5zZWFyY2hQYXJhbXMpLnVwZGF0ZVNlYXJjaFBhcmFtcyh1cmwucXVlcnkpOwogICAgfSksCiAgICAvLyBgVVJMLnByb3RvdHlwZS5vcmlnaW5gIGdldHRlcgogICAgLy8gaHR0cHM6Ly91cmwuc3BlYy53aGF0d2cub3JnLyNkb20tdXJsLW9yaWdpbgogICAgb3JpZ2luOiBhY2Nlc3NvckRlc2NyaXB0b3IoZ2V0T3JpZ2luKSwKICAgIC8vIGBVUkwucHJvdG90eXBlLnByb3RvY29sYCBhY2Nlc3NvcnMgcGFpcgogICAgLy8gaHR0cHM6Ly91cmwuc3BlYy53aGF0d2cub3JnLyNkb20tdXJsLXByb3RvY29sCiAgICBwcm90b2NvbDogYWNjZXNzb3JEZXNjcmlwdG9yKGdldFByb3RvY29sLCBmdW5jdGlvbiAocHJvdG9jb2wpIHsKICAgICAgdmFyIHVybCA9IGdldEludGVybmFsVVJMU3RhdGUodGhpcyk7CiAgICAgIHBhcnNlVVJMKHVybCwgU3RyaW5nKHByb3RvY29sKSArICc6JywgU0NIRU1FX1NUQVJUKTsKICAgIH0pLAogICAgLy8gYFVSTC5wcm90b3R5cGUudXNlcm5hbWVgIGFjY2Vzc29ycyBwYWlyCiAgICAvLyBodHRwczovL3VybC5zcGVjLndoYXR3Zy5vcmcvI2RvbS11cmwtdXNlcm5hbWUKICAgIHVzZXJuYW1lOiBhY2Nlc3NvckRlc2NyaXB0b3IoZ2V0VXNlcm5hbWUsIGZ1bmN0aW9uICh1c2VybmFtZSkgewogICAgICB2YXIgdXJsID0gZ2V0SW50ZXJuYWxVUkxTdGF0ZSh0aGlzKTsKICAgICAgdmFyIGNvZGVQb2ludHMgPSBhcnJheUZyb20oU3RyaW5nKHVzZXJuYW1lKSk7CiAgICAgIGlmIChjYW5ub3RIYXZlVXNlcm5hbWVQYXNzd29yZFBvcnQodXJsKSkgcmV0dXJuOwogICAgICB1cmwudXNlcm5hbWUgPSAnJzsKCiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY29kZVBvaW50cy5sZW5ndGg7IGkrKykgewogICAgICAgIHVybC51c2VybmFtZSArPSBwZXJjZW50RW5jb2RlKGNvZGVQb2ludHNbaV0sIHVzZXJpbmZvUGVyY2VudEVuY29kZVNldCk7CiAgICAgIH0KICAgIH0pLAogICAgLy8gYFVSTC5wcm90b3R5cGUucGFzc3dvcmRgIGFjY2Vzc29ycyBwYWlyCiAgICAvLyBodHRwczovL3VybC5zcGVjLndoYXR3Zy5vcmcvI2RvbS11cmwtcGFzc3dvcmQKICAgIHBhc3N3b3JkOiBhY2Nlc3NvckRlc2NyaXB0b3IoZ2V0UGFzc3dvcmQsIGZ1bmN0aW9uIChwYXNzd29yZCkgewogICAgICB2YXIgdXJsID0gZ2V0SW50ZXJuYWxVUkxTdGF0ZSh0aGlzKTsKICAgICAgdmFyIGNvZGVQb2ludHMgPSBhcnJheUZyb20oU3RyaW5nKHBhc3N3b3JkKSk7CiAgICAgIGlmIChjYW5ub3RIYXZlVXNlcm5hbWVQYXNzd29yZFBvcnQodXJsKSkgcmV0dXJuOwogICAgICB1cmwucGFzc3dvcmQgPSAnJzsKCiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY29kZVBvaW50cy5sZW5ndGg7IGkrKykgewogICAgICAgIHVybC5wYXNzd29yZCArPSBwZXJjZW50RW5jb2RlKGNvZGVQb2ludHNbaV0sIHVzZXJpbmZvUGVyY2VudEVuY29kZVNldCk7CiAgICAgIH0KICAgIH0pLAogICAgLy8gYFVSTC5wcm90b3R5cGUuaG9zdGAgYWNjZXNzb3JzIHBhaXIKICAgIC8vIGh0dHBzOi8vdXJsLnNwZWMud2hhdHdnLm9yZy8jZG9tLXVybC1ob3N0CiAgICBob3N0OiBhY2Nlc3NvckRlc2NyaXB0b3IoZ2V0SG9zdCwgZnVuY3Rpb24gKGhvc3QpIHsKICAgICAgdmFyIHVybCA9IGdldEludGVybmFsVVJMU3RhdGUodGhpcyk7CiAgICAgIGlmICh1cmwuY2Fubm90QmVBQmFzZVVSTCkgcmV0dXJuOwogICAgICBwYXJzZVVSTCh1cmwsIFN0cmluZyhob3N0KSwgSE9TVCk7CiAgICB9KSwKICAgIC8vIGBVUkwucHJvdG90eXBlLmhvc3RuYW1lYCBhY2Nlc3NvcnMgcGFpcgogICAgLy8gaHR0cHM6Ly91cmwuc3BlYy53aGF0d2cub3JnLyNkb20tdXJsLWhvc3RuYW1lCiAgICBob3N0bmFtZTogYWNjZXNzb3JEZXNjcmlwdG9yKGdldEhvc3RuYW1lLCBmdW5jdGlvbiAoaG9zdG5hbWUpIHsKICAgICAgdmFyIHVybCA9IGdldEludGVybmFsVVJMU3RhdGUodGhpcyk7CiAgICAgIGlmICh1cmwuY2Fubm90QmVBQmFzZVVSTCkgcmV0dXJuOwogICAgICBwYXJzZVVSTCh1cmwsIFN0cmluZyhob3N0bmFtZSksIEhPU1ROQU1FKTsKICAgIH0pLAogICAgLy8gYFVSTC5wcm90b3R5cGUucG9ydGAgYWNjZXNzb3JzIHBhaXIKICAgIC8vIGh0dHBzOi8vdXJsLnNwZWMud2hhdHdnLm9yZy8jZG9tLXVybC1wb3J0CiAgICBwb3J0OiBhY2Nlc3NvckRlc2NyaXB0b3IoZ2V0UG9ydCwgZnVuY3Rpb24gKHBvcnQpIHsKICAgICAgdmFyIHVybCA9IGdldEludGVybmFsVVJMU3RhdGUodGhpcyk7CiAgICAgIGlmIChjYW5ub3RIYXZlVXNlcm5hbWVQYXNzd29yZFBvcnQodXJsKSkgcmV0dXJuOwogICAgICBwb3J0ID0gU3RyaW5nKHBvcnQpOwogICAgICBpZiAocG9ydCA9PSAnJykgdXJsLnBvcnQgPSBudWxsO2Vsc2UgcGFyc2VVUkwodXJsLCBwb3J0LCBQT1JUKTsKICAgIH0pLAogICAgLy8gYFVSTC5wcm90b3R5cGUucGF0aG5hbWVgIGFjY2Vzc29ycyBwYWlyCiAgICAvLyBodHRwczovL3VybC5zcGVjLndoYXR3Zy5vcmcvI2RvbS11cmwtcGF0aG5hbWUKICAgIHBhdGhuYW1lOiBhY2Nlc3NvckRlc2NyaXB0b3IoZ2V0UGF0aG5hbWUsIGZ1bmN0aW9uIChwYXRobmFtZSkgewogICAgICB2YXIgdXJsID0gZ2V0SW50ZXJuYWxVUkxTdGF0ZSh0aGlzKTsKICAgICAgaWYgKHVybC5jYW5ub3RCZUFCYXNlVVJMKSByZXR1cm47CiAgICAgIHVybC5wYXRoID0gW107CiAgICAgIHBhcnNlVVJMKHVybCwgcGF0aG5hbWUgKyAnJywgUEFUSF9TVEFSVCk7CiAgICB9KSwKICAgIC8vIGBVUkwucHJvdG90eXBlLnNlYXJjaGAgYWNjZXNzb3JzIHBhaXIKICAgIC8vIGh0dHBzOi8vdXJsLnNwZWMud2hhdHdnLm9yZy8jZG9tLXVybC1zZWFyY2gKICAgIHNlYXJjaDogYWNjZXNzb3JEZXNjcmlwdG9yKGdldFNlYXJjaCwgZnVuY3Rpb24gKHNlYXJjaCkgewogICAgICB2YXIgdXJsID0gZ2V0SW50ZXJuYWxVUkxTdGF0ZSh0aGlzKTsKICAgICAgc2VhcmNoID0gU3RyaW5nKHNlYXJjaCk7CgogICAgICBpZiAoc2VhcmNoID09ICcnKSB7CiAgICAgICAgdXJsLnF1ZXJ5ID0gbnVsbDsKICAgICAgfSBlbHNlIHsKICAgICAgICBpZiAoJz8nID09IHNlYXJjaC5jaGFyQXQoMCkpIHNlYXJjaCA9IHNlYXJjaC5zbGljZSgxKTsKICAgICAgICB1cmwucXVlcnkgPSAnJzsKICAgICAgICBwYXJzZVVSTCh1cmwsIHNlYXJjaCwgUVVFUlkpOwogICAgICB9CgogICAgICBnZXRJbnRlcm5hbFNlYXJjaFBhcmFtc1N0YXRlKHVybC5zZWFyY2hQYXJhbXMpLnVwZGF0ZVNlYXJjaFBhcmFtcyh1cmwucXVlcnkpOwogICAgfSksCiAgICAvLyBgVVJMLnByb3RvdHlwZS5zZWFyY2hQYXJhbXNgIGdldHRlcgogICAgLy8gaHR0cHM6Ly91cmwuc3BlYy53aGF0d2cub3JnLyNkb20tdXJsLXNlYXJjaHBhcmFtcwogICAgc2VhcmNoUGFyYW1zOiBhY2Nlc3NvckRlc2NyaXB0b3IoZ2V0U2VhcmNoUGFyYW1zKSwKICAgIC8vIGBVUkwucHJvdG90eXBlLmhhc2hgIGFjY2Vzc29ycyBwYWlyCiAgICAvLyBodHRwczovL3VybC5zcGVjLndoYXR3Zy5vcmcvI2RvbS11cmwtaGFzaAogICAgaGFzaDogYWNjZXNzb3JEZXNjcmlwdG9yKGdldEhhc2gsIGZ1bmN0aW9uIChoYXNoKSB7CiAgICAgIHZhciB1cmwgPSBnZXRJbnRlcm5hbFVSTFN0YXRlKHRoaXMpOwogICAgICBoYXNoID0gU3RyaW5nKGhhc2gpOwoKICAgICAgaWYgKGhhc2ggPT0gJycpIHsKICAgICAgICB1cmwuZnJhZ21lbnQgPSBudWxsOwogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgaWYgKCcjJyA9PSBoYXNoLmNoYXJBdCgwKSkgaGFzaCA9IGhhc2guc2xpY2UoMSk7CiAgICAgIHVybC5mcmFnbWVudCA9ICcnOwogICAgICBwYXJzZVVSTCh1cmwsIGhhc2gsIEZSQUdNRU5UKTsKICAgIH0pCiAgfSk7Cn0gLy8gYFVSTC5wcm90b3R5cGUudG9KU09OYCBtZXRob2QKLy8gaHR0cHM6Ly91cmwuc3BlYy53aGF0d2cub3JnLyNkb20tdXJsLXRvanNvbgoKCnJlZGVmaW5lKFVSTFByb3RvdHlwZSwgJ3RvSlNPTicsIGZ1bmN0aW9uIHRvSlNPTigpIHsKICByZXR1cm4gc2VyaWFsaXplVVJMLmNhbGwodGhpcyk7Cn0sIHsKICBlbnVtZXJhYmxlOiB0cnVlCn0pOyAvLyBgVVJMLnByb3RvdHlwZS50b1N0cmluZ2AgbWV0aG9kCi8vIGh0dHBzOi8vdXJsLnNwZWMud2hhdHdnLm9yZy8jVVJMLXN0cmluZ2lmaWNhdGlvbi1iZWhhdmlvcgoKcmVkZWZpbmUoVVJMUHJvdG90eXBlLCAndG9TdHJpbmcnLCBmdW5jdGlvbiB0b1N0cmluZygpIHsKICByZXR1cm4gc2VyaWFsaXplVVJMLmNhbGwodGhpcyk7Cn0sIHsKICBlbnVtZXJhYmxlOiB0cnVlCn0pOwoKaWYgKE5hdGl2ZVVSTCkgewogIHZhciBuYXRpdmVDcmVhdGVPYmplY3RVUkwgPSBOYXRpdmVVUkwuY3JlYXRlT2JqZWN0VVJMOwogIHZhciBuYXRpdmVSZXZva2VPYmplY3RVUkwgPSBOYXRpdmVVUkwucmV2b2tlT2JqZWN0VVJMOyAvLyBgVVJMLmNyZWF0ZU9iamVjdFVSTGAgbWV0aG9kCiAgLy8gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL1VSTC9jcmVhdGVPYmplY3RVUkwKICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW51c2VkLXZhcnMgLS0gcmVxdWlyZWQgZm9yIGAubGVuZ3RoYAoKICBpZiAobmF0aXZlQ3JlYXRlT2JqZWN0VVJMKSByZWRlZmluZShVUkxDb25zdHJ1Y3RvciwgJ2NyZWF0ZU9iamVjdFVSTCcsIGZ1bmN0aW9uIGNyZWF0ZU9iamVjdFVSTChibG9iKSB7CiAgICByZXR1cm4gbmF0aXZlQ3JlYXRlT2JqZWN0VVJMLmFwcGx5KE5hdGl2ZVVSTCwgYXJndW1lbnRzKTsKICB9KTsgLy8gYFVSTC5yZXZva2VPYmplY3RVUkxgIG1ldGhvZAogIC8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9VUkwvcmV2b2tlT2JqZWN0VVJMCiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVudXNlZC12YXJzIC0tIHJlcXVpcmVkIGZvciBgLmxlbmd0aGAKCiAgaWYgKG5hdGl2ZVJldm9rZU9iamVjdFVSTCkgcmVkZWZpbmUoVVJMQ29uc3RydWN0b3IsICdyZXZva2VPYmplY3RVUkwnLCBmdW5jdGlvbiByZXZva2VPYmplY3RVUkwodXJsKSB7CiAgICByZXR1cm4gbmF0aXZlUmV2b2tlT2JqZWN0VVJMLmFwcGx5KE5hdGl2ZVVSTCwgYXJndW1lbnRzKTsKICB9KTsKfQoKc2V0VG9TdHJpbmdUYWcoVVJMQ29uc3RydWN0b3IsICdVUkwnKTsKJCh7CiAgZ2xvYmFsOiB0cnVlLAogIGZvcmNlZDogIVVTRV9OQVRJVkVfVVJMLAogIHNoYW06ICFERVNDUklQVE9SUwp9LCB7CiAgVVJMOiBVUkxDb25zdHJ1Y3Rvcgp9KTs="},null]}