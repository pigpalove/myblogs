{"remainingRequest":"D:\\vscodeprojects\\vuepress-theme-reco\\myblogs\\node_modules\\babel-loader\\lib\\index.js??ref--3-1!D:\\vscodeprojects\\vuepress-theme-reco\\myblogs\\node_modules\\@vue\\composition-api\\dist\\vue-composition-api.esm.js","dependencies":[{"path":"D:\\vscodeprojects\\vuepress-theme-reco\\myblogs\\node_modules\\@vue\\composition-api\\dist\\vue-composition-api.esm.js","mtime":1619669377000},{"path":"D:\\vscodeprojects\\vuepress-theme-reco\\myblogs\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\vscodeprojects\\vuepress-theme-reco\\myblogs\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF90eXBlb2YgZnJvbSAiRDovdnNjb2RlcHJvamVjdHMvdnVlcHJlc3MtdGhlbWUtcmVjby9teWJsb2dzL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS90eXBlb2YiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZGF0ZS50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sLmRlc2NyaXB0aW9uLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVmbGVjdC5vd24ta2V5cy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5kZWZpbmUtcHJvcGVydHkuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5pcy1hcnJheS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnBhcnNlLWZsb2F0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLndlYWstbWFwLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLmJpbmQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5mb3ItZWFjaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN5bWJvbC5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5zZWFsLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmtleXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QuZ2V0LW93bi1wcm9wZXJ0eS1kZXNjcmlwdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmlzLWV4dGVuc2libGUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zcGxpY2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zbGljZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5Lm1hcC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5mcmVlemUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMubWFwLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc29tZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN5bWJvbC50by1zdHJpbmctdGFnLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuanNvbi50by1zdHJpbmctdGFnLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMubWF0aC50by1zdHJpbmctdGFnLmpzIjsKaW1wb3J0IFZ1ZSBmcm9tICd2dWUnOwoKdmFyIHRvU3RyaW5nID0gZnVuY3Rpb24gdG9TdHJpbmcoeCkgewogIHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoeCk7Cn07CgpmdW5jdGlvbiBpc05hdGl2ZShDdG9yKSB7CiAgcmV0dXJuIHR5cGVvZiBDdG9yID09PSAnZnVuY3Rpb24nICYmIC9uYXRpdmUgY29kZS8udGVzdChDdG9yLnRvU3RyaW5nKCkpOwp9Cgp2YXIgaGFzU3ltYm9sID0gdHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgaXNOYXRpdmUoU3ltYm9sKSAmJiB0eXBlb2YgUmVmbGVjdCAhPT0gJ3VuZGVmaW5lZCcgJiYgaXNOYXRpdmUoUmVmbGVjdC5vd25LZXlzKTsKCnZhciBub29wRm4gPSBmdW5jdGlvbiBub29wRm4oXykgewogIHJldHVybiBfOwp9OwoKZnVuY3Rpb24gcHJveHkodGFyZ2V0LCBrZXksIF9hKSB7CiAgdmFyIGdldCA9IF9hLmdldCwKICAgICAgc2V0ID0gX2Euc2V0OwogIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgewogICAgZW51bWVyYWJsZTogdHJ1ZSwKICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSwKICAgIGdldDogZ2V0IHx8IG5vb3BGbiwKICAgIHNldDogc2V0IHx8IG5vb3BGbgogIH0pOwp9CgpmdW5jdGlvbiBkZWYob2JqLCBrZXksIHZhbCwgZW51bWVyYWJsZSkgewogIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgewogICAgdmFsdWU6IHZhbCwKICAgIGVudW1lcmFibGU6ICEhZW51bWVyYWJsZSwKICAgIHdyaXRhYmxlOiB0cnVlLAogICAgY29uZmlndXJhYmxlOiB0cnVlCiAgfSk7Cn0KCmZ1bmN0aW9uIGhhc093bihvYmosIGtleSkgewogIHJldHVybiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSk7Cn0KCmZ1bmN0aW9uIGFzc2VydChjb25kaXRpb24sIG1zZykgewogIGlmICghY29uZGl0aW9uKSB7CiAgICB0aHJvdyBuZXcgRXJyb3IoIlt2dWUtY29tcG9zaXRpb24tYXBpXSAiICsgbXNnKTsKICB9Cn0KCmZ1bmN0aW9uIGlzUHJpbWl0aXZlKHZhbHVlKSB7CiAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycgfHwgdHlwZW9mIHZhbHVlID09PSAnbnVtYmVyJyB8fCAvLyAkZmxvdy1kaXNhYmxlLWxpbmUKICBfdHlwZW9mKHZhbHVlKSA9PT0gJ3N5bWJvbCcgfHwgdHlwZW9mIHZhbHVlID09PSAnYm9vbGVhbic7Cn0KCmZ1bmN0aW9uIGlzQXJyYXkoeCkgewogIHJldHVybiBBcnJheS5pc0FycmF5KHgpOwp9CgpmdW5jdGlvbiBpc1ZhbGlkQXJyYXlJbmRleCh2YWwpIHsKICB2YXIgbiA9IHBhcnNlRmxvYXQoU3RyaW5nKHZhbCkpOwogIHJldHVybiBuID49IDAgJiYgTWF0aC5mbG9vcihuKSA9PT0gbiAmJiBpc0Zpbml0ZSh2YWwpOwp9CgpmdW5jdGlvbiBpc09iamVjdCh2YWwpIHsKICByZXR1cm4gdmFsICE9PSBudWxsICYmIF90eXBlb2YodmFsKSA9PT0gJ29iamVjdCc7Cn0KCmZ1bmN0aW9uIGlzUGxhaW5PYmplY3QoeCkgewogIHJldHVybiB0b1N0cmluZyh4KSA9PT0gJ1tvYmplY3QgT2JqZWN0XSc7Cn0KCmZ1bmN0aW9uIGlzRnVuY3Rpb24oeCkgewogIHJldHVybiB0eXBlb2YgeCA9PT0gJ2Z1bmN0aW9uJzsKfQoKZnVuY3Rpb24gaXNVbmRlZih2KSB7CiAgcmV0dXJuIHYgPT09IHVuZGVmaW5lZCB8fCB2ID09PSBudWxsOwp9CgpmdW5jdGlvbiB3YXJuJDEobXNnLCB2bSkgewogIFZ1ZS51dGlsLndhcm4obXNnLCB2bSk7Cn0KCmZ1bmN0aW9uIGxvZ0Vycm9yKGVyciwgdm0sIGluZm8pIHsKICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgewogICAgd2FybiQxKCJFcnJvciBpbiAiICsgaW5mbyArICI6IFwiIiArIGVyci50b1N0cmluZygpICsgIlwiIiwgdm0pOwogIH0KCiAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBjb25zb2xlICE9PSAndW5kZWZpbmVkJykgewogICAgY29uc29sZS5lcnJvcihlcnIpOwogIH0gZWxzZSB7CiAgICB0aHJvdyBlcnI7CiAgfQp9Cgp2YXIgdnVlRGVwZW5kZW5jeSA9IHVuZGVmaW5lZDsKCnRyeSB7CiAgdmFyIHJlcXVpcmVkVnVlID0gcmVxdWlyZSgndnVlJyk7CgogIGlmIChyZXF1aXJlZFZ1ZSAmJiBpc1Z1ZShyZXF1aXJlZFZ1ZSkpIHsKICAgIHZ1ZURlcGVuZGVuY3kgPSByZXF1aXJlZFZ1ZTsKICB9IGVsc2UgaWYgKHJlcXVpcmVkVnVlICYmICdkZWZhdWx0JyBpbiByZXF1aXJlZFZ1ZSAmJiBpc1Z1ZShyZXF1aXJlZFZ1ZVsiZGVmYXVsdCJdKSkgewogICAgdnVlRGVwZW5kZW5jeSA9IHJlcXVpcmVkVnVlWyJkZWZhdWx0Il07CiAgfQp9IGNhdGNoIChfYSkgey8vIG5vdCBhdmFpbGFibGUKfQoKdmFyIHZ1ZUNvbnN0cnVjdG9yID0gbnVsbDsKdmFyIGN1cnJlbnRJbnN0YW5jZSA9IG51bGw7CnZhciBQbHVnaW5JbnN0YWxsZWRGbGFnID0gJ19fY29tcG9zaXRpb25fYXBpX2luc3RhbGxlZF9fJzsKCmZ1bmN0aW9uIGlzVnVlKG9iaikgewogIHJldHVybiBvYmogJiYgdHlwZW9mIG9iaiA9PT0gJ2Z1bmN0aW9uJyAmJiBvYmoubmFtZSA9PT0gJ1Z1ZSc7Cn0KCmZ1bmN0aW9uIGlzVnVlUmVnaXN0ZXJlZChWdWUpIHsKICByZXR1cm4gaGFzT3duKFZ1ZSwgUGx1Z2luSW5zdGFsbGVkRmxhZyk7Cn0KCmZ1bmN0aW9uIGdldFZ1ZUNvbnN0cnVjdG9yKCkgewogIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7CiAgICBhc3NlcnQodnVlQ29uc3RydWN0b3IsICJtdXN0IGNhbGwgVnVlLnVzZShWdWVDb21wb3NpdGlvbkFQSSkgYmVmb3JlIHVzaW5nIGFueSBmdW5jdGlvbi4iKTsKICB9CgogIHJldHVybiB2dWVDb25zdHJ1Y3RvcjsKfSAvLyByZXR1cm5zIHJlZ2lzdGVyZWQgdnVlIG9yIGB2dWVgIGRlcGVuZGVuY3kKCgpmdW5jdGlvbiBnZXRSZWdpc3RlcmVkVnVlT3JEZWZhdWx0KCkgewogIHZhciBjb25zdHJ1Y3RvciA9IHZ1ZUNvbnN0cnVjdG9yIHx8IHZ1ZURlcGVuZGVuY3k7CgogIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7CiAgICBhc3NlcnQoY29uc3RydWN0b3IsICJObyB2dWUgZGVwZW5kZW5jeSBmb3VuZC4iKTsKICB9CgogIHJldHVybiBjb25zdHJ1Y3RvcjsKfQoKZnVuY3Rpb24gc2V0VnVlQ29uc3RydWN0b3IoVnVlKSB7CiAgLy8gQHRzLWlnbm9yZQogIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHZ1ZUNvbnN0cnVjdG9yICYmIFZ1ZS5fX3Byb3RvX18gIT09IHZ1ZUNvbnN0cnVjdG9yLl9fcHJvdG9fXykgewogICAgd2FybiQxKCdbdnVlLWNvbXBvc2l0aW9uLWFwaV0gYW5vdGhlciBpbnN0YW5jZSBvZiBWdWUgaW5zdGFsbGVkJyk7CiAgfQoKICB2dWVDb25zdHJ1Y3RvciA9IFZ1ZTsKICBPYmplY3QuZGVmaW5lUHJvcGVydHkoVnVlLCBQbHVnaW5JbnN0YWxsZWRGbGFnLCB7CiAgICBjb25maWd1cmFibGU6IHRydWUsCiAgICB3cml0YWJsZTogdHJ1ZSwKICAgIHZhbHVlOiB0cnVlCiAgfSk7Cn0KCmZ1bmN0aW9uIHNldEN1cnJlbnRJbnN0YW5jZSh2bSkgewogIC8vIGN1cnJlbnRJbnN0YW5jZT8uJHNjb3BlZFNsb3RzCiAgY3VycmVudEluc3RhbmNlID0gdm07Cn0KCmZ1bmN0aW9uIGdldEN1cnJlbnRWdWUySW5zdGFuY2UoKSB7CiAgcmV0dXJuIGN1cnJlbnRJbnN0YW5jZTsKfQoKZnVuY3Rpb24gZ2V0Q3VycmVudEluc3RhbmNlKCkgewogIGlmIChjdXJyZW50SW5zdGFuY2UpIHsKICAgIHJldHVybiB0b1Z1ZTNDb21wb25lbnRJbnN0YW5jZShjdXJyZW50SW5zdGFuY2UpOwogIH0KCiAgcmV0dXJuIG51bGw7Cn0KCnZhciBpbnN0YW5jZU1hcENhY2hlID0gbmV3IFdlYWtNYXAoKTsKCmZ1bmN0aW9uIHRvVnVlM0NvbXBvbmVudEluc3RhbmNlKHZ1ZTJJbnN0YW5jZSkgewogIGlmIChpbnN0YW5jZU1hcENhY2hlLmhhcyh2dWUySW5zdGFuY2UpKSB7CiAgICByZXR1cm4gaW5zdGFuY2VNYXBDYWNoZS5nZXQodnVlMkluc3RhbmNlKTsKICB9CgogIHZhciBpbnN0YW5jZSA9IHsKICAgIHByb3h5OiB2dWUySW5zdGFuY2UsCiAgICB1cGRhdGU6IHZ1ZTJJbnN0YW5jZS4kZm9yY2VVcGRhdGUsCiAgICB1aWQ6IHZ1ZTJJbnN0YW5jZS5fdWlkLAogICAgLy8gJGVtaXQgaXMgZGVmaW5lZCBvbiBwcm90b3R5cGUgYW5kIGl0IGV4cGVjdGVkIHRvIGJlIGJvdW5kCiAgICBlbWl0OiB2dWUySW5zdGFuY2UuJGVtaXQuYmluZCh2dWUySW5zdGFuY2UpLAogICAgcGFyZW50OiBudWxsLAogICAgcm9vdDogbnVsbAogIH07IC8vIG1hcCB2bS4kcHJvcHMgPQoKICB2YXIgaW5zdGFuY2VQcm9wcyA9IFsnZGF0YScsICdwcm9wcycsICdhdHRycycsICdyZWZzJywgJ3Zub2RlJywgJ3Nsb3RzJ107CiAgaW5zdGFuY2VQcm9wcy5mb3JFYWNoKGZ1bmN0aW9uIChwcm9wKSB7CiAgICBwcm94eShpbnN0YW5jZSwgcHJvcCwgewogICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgICByZXR1cm4gdnVlMkluc3RhbmNlWyIkIiArIHByb3BdOwogICAgICB9CiAgICB9KTsKICB9KTsKICBwcm94eShpbnN0YW5jZSwgJ2lzTW91bnRlZCcsIHsKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICAvLyBAdHMtZXhwZWN0LWVycm9yIHByaXZhdGUgYXBpCiAgICAgIHJldHVybiB2dWUySW5zdGFuY2UuX2lzTW91bnRlZDsKICAgIH0KICB9KTsKICBwcm94eShpbnN0YW5jZSwgJ2lzVW5tb3VudGVkJywgewogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgcHJpdmF0ZSBhcGkKICAgICAgcmV0dXJuIHZ1ZTJJbnN0YW5jZS5faXNEZXN0cm95ZWQ7CiAgICB9CiAgfSk7CiAgcHJveHkoaW5zdGFuY2UsICdpc0RlYWN0aXZhdGVkJywgewogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgcHJpdmF0ZSBhcGkKICAgICAgcmV0dXJuIHZ1ZTJJbnN0YW5jZS5faW5hY3RpdmU7CiAgICB9CiAgfSk7CiAgcHJveHkoaW5zdGFuY2UsICdlbWl0dGVkJywgewogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgcHJpdmF0ZSBhcGkKICAgICAgcmV0dXJuIHZ1ZTJJbnN0YW5jZS5fZXZlbnRzOwogICAgfQogIH0pOwogIGluc3RhbmNlTWFwQ2FjaGUuc2V0KHZ1ZTJJbnN0YW5jZSwgaW5zdGFuY2UpOwoKICBpZiAodnVlMkluc3RhbmNlLiRwYXJlbnQpIHsKICAgIGluc3RhbmNlLnBhcmVudCA9IHRvVnVlM0NvbXBvbmVudEluc3RhbmNlKHZ1ZTJJbnN0YW5jZS4kcGFyZW50KTsKICB9CgogIGlmICh2dWUySW5zdGFuY2UuJHJvb3QpIHsKICAgIGluc3RhbmNlLnJvb3QgPSB0b1Z1ZTNDb21wb25lbnRJbnN0YW5jZSh2dWUySW5zdGFuY2UuJHJvb3QpOwogIH0KCiAgcmV0dXJuIGluc3RhbmNlOwp9CgpmdW5jdGlvbiBjdXJyZW50Vk1JbkZuKGhvb2spIHsKICB2YXIgdm0gPSBnZXRDdXJyZW50SW5zdGFuY2UoKTsKCiAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgIXZtKSB7CiAgICB3YXJuJDEoaG9vayArICIgaXMgY2FsbGVkIHdoZW4gdGhlcmUgaXMgbm8gYWN0aXZlIGNvbXBvbmVudCBpbnN0YW5jZSB0byBiZSAiICsgImFzc29jaWF0ZWQgd2l0aC4gIiArICJMaWZlY3ljbGUgaW5qZWN0aW9uIEFQSXMgY2FuIG9ubHkgYmUgdXNlZCBkdXJpbmcgZXhlY3V0aW9uIG9mIHNldHVwKCkuIik7CiAgfQoKICByZXR1cm4gdm0gPT09IG51bGwgfHwgdm0gPT09IHZvaWQgMCA/IHZvaWQgMCA6IHZtLnByb3h5Owp9CgpmdW5jdGlvbiBkZWZpbmVDb21wb25lbnRJbnN0YW5jZShDdG9yLCBvcHRpb25zKSB7CiAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkgewogICAgb3B0aW9ucyA9IHt9OwogIH0KCiAgdmFyIHNpbGVudCA9IEN0b3IuY29uZmlnLnNpbGVudDsKICBDdG9yLmNvbmZpZy5zaWxlbnQgPSB0cnVlOwogIHZhciB2bSA9IG5ldyBDdG9yKG9wdGlvbnMpOwogIEN0b3IuY29uZmlnLnNpbGVudCA9IHNpbGVudDsKICByZXR1cm4gdm07Cn0KCmZ1bmN0aW9uIGlzQ29tcG9uZW50SW5zdGFuY2Uob2JqKSB7CiAgdmFyIFZ1ZSA9IGdldFZ1ZUNvbnN0cnVjdG9yKCk7CiAgcmV0dXJuIFZ1ZSAmJiBvYmogaW5zdGFuY2VvZiBWdWU7Cn0KCmZ1bmN0aW9uIGNyZWF0ZVNsb3RQcm94eSh2bSwgc2xvdE5hbWUpIHsKICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgdmFyIGFyZ3MgPSBbXTsKCiAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykgewogICAgICBhcmdzW19pXSA9IGFyZ3VtZW50c1tfaV07CiAgICB9CgogICAgaWYgKCF2bS4kc2NvcGVkU2xvdHNbc2xvdE5hbWVdKSB7CiAgICAgIHJldHVybiB3YXJuJDEoInNsb3RzLiIgKyBzbG90TmFtZSArICIoKSBnb3QgY2FsbGVkIG91dHNpZGUgb2YgdGhlIFwicmVuZGVyKClcIiBzY29wZSIsIHZtKTsKICAgIH0KCiAgICByZXR1cm4gdm0uJHNjb3BlZFNsb3RzW3Nsb3ROYW1lXS5hcHBseSh2bSwgYXJncyk7CiAgfTsKfQoKZnVuY3Rpb24gcmVzb2x2ZVNsb3RzKHNsb3RzLCBub3JtYWxTbG90cykgewogIHZhciByZXM7CgogIGlmICghc2xvdHMpIHsKICAgIHJlcyA9IHt9OwogIH0gZWxzZSBpZiAoc2xvdHMuX25vcm1hbGl6ZWQpIHsKICAgIC8vIGZhc3QgcGF0aCAxOiBjaGlsZCBjb21wb25lbnQgcmUtcmVuZGVyIG9ubHksIHBhcmVudCBkaWQgbm90IGNoYW5nZQogICAgcmV0dXJuIHNsb3RzLl9ub3JtYWxpemVkOwogIH0gZWxzZSB7CiAgICByZXMgPSB7fTsKCiAgICBmb3IgKHZhciBrZXkgaW4gc2xvdHMpIHsKICAgICAgaWYgKHNsb3RzW2tleV0gJiYga2V5WzBdICE9PSAnJCcpIHsKICAgICAgICByZXNba2V5XSA9IHRydWU7CiAgICAgIH0KICAgIH0KICB9IC8vIGV4cG9zZSBub3JtYWwgc2xvdHMgb24gc2NvcGVkU2xvdHMKCgogIGZvciAodmFyIGtleSBpbiBub3JtYWxTbG90cykgewogICAgaWYgKCEoa2V5IGluIHJlcykpIHsKICAgICAgcmVzW2tleV0gPSB0cnVlOwogICAgfQogIH0KCiAgcmV0dXJuIHJlczsKfQoKdmFyIHZ1ZUludGVybmFsQ2xhc3NlczsKCnZhciBnZXRWdWVJbnRlcm5hbENsYXNzZXMgPSBmdW5jdGlvbiBnZXRWdWVJbnRlcm5hbENsYXNzZXMoKSB7CiAgaWYgKCF2dWVJbnRlcm5hbENsYXNzZXMpIHsKICAgIHZhciB2bSA9IGRlZmluZUNvbXBvbmVudEluc3RhbmNlKGdldFZ1ZUNvbnN0cnVjdG9yKCksIHsKICAgICAgY29tcHV0ZWQ6IHsKICAgICAgICB2YWx1ZTogZnVuY3Rpb24gdmFsdWUoKSB7CiAgICAgICAgICByZXR1cm4gMDsKICAgICAgICB9CiAgICAgIH0KICAgIH0pOyAvLyB0byBnZXQgV2F0Y2hlciBjbGFzcwoKICAgIHZhciBXYXRjaGVyID0gdm0uX2NvbXB1dGVkV2F0Y2hlcnMudmFsdWUuY29uc3RydWN0b3I7IC8vIHRvIGdldCBEZXAgY2xhc3MKCiAgICB2YXIgRGVwID0gdm0uX2RhdGEuX19vYl9fLmRlcC5jb25zdHJ1Y3RvcjsKICAgIHZ1ZUludGVybmFsQ2xhc3NlcyA9IHsKICAgICAgV2F0Y2hlcjogV2F0Y2hlciwKICAgICAgRGVwOiBEZXAKICAgIH07CiAgICB2bS4kZGVzdHJveSgpOwogIH0KCiAgcmV0dXJuIHZ1ZUludGVybmFsQ2xhc3NlczsKfTsKLyohICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqDQpDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4NCg0KUGVybWlzc2lvbiB0byB1c2UsIGNvcHksIG1vZGlmeSwgYW5kL29yIGRpc3RyaWJ1dGUgdGhpcyBzb2Z0d2FyZSBmb3IgYW55DQpwdXJwb3NlIHdpdGggb3Igd2l0aG91dCBmZWUgaXMgaGVyZWJ5IGdyYW50ZWQuDQoNClRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCAiQVMgSVMiIEFORCBUSEUgQVVUSE9SIERJU0NMQUlNUyBBTEwgV0FSUkFOVElFUyBXSVRIDQpSRUdBUkQgVE8gVEhJUyBTT0ZUV0FSRSBJTkNMVURJTkcgQUxMIElNUExJRUQgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFkNCkFORCBGSVRORVNTLiBJTiBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SIEJFIExJQUJMRSBGT1IgQU5ZIFNQRUNJQUwsIERJUkVDVCwNCklORElSRUNULCBPUiBDT05TRVFVRU5USUFMIERBTUFHRVMgT1IgQU5ZIERBTUFHRVMgV0hBVFNPRVZFUiBSRVNVTFRJTkcgRlJPTQ0KTE9TUyBPRiBVU0UsIERBVEEgT1IgUFJPRklUUywgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIE5FR0xJR0VOQ0UgT1INCk9USEVSIFRPUlRJT1VTIEFDVElPTiwgQVJJU0lORyBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBVU0UgT1INClBFUkZPUk1BTkNFIE9GIFRISVMgU09GVFdBUkUuDQoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiAqLwoKCnZhciBfYXNzaWduID0gZnVuY3Rpb24gX19hc3NpZ24oKSB7CiAgX2Fzc2lnbiA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gX19hc3NpZ24odCkgewogICAgZm9yICh2YXIgcywgaSA9IDEsIG4gPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgbjsgaSsrKSB7CiAgICAgIHMgPSBhcmd1bWVudHNbaV07CgogICAgICBmb3IgKHZhciBwIGluIHMpIHsKICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHApKSB0W3BdID0gc1twXTsKICAgICAgfQogICAgfQoKICAgIHJldHVybiB0OwogIH07CgogIHJldHVybiBfYXNzaWduLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7Cn07CgpmdW5jdGlvbiBfX3ZhbHVlcyhvKSB7CiAgdmFyIHMgPSB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIFN5bWJvbC5pdGVyYXRvciwKICAgICAgbSA9IHMgJiYgb1tzXSwKICAgICAgaSA9IDA7CiAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7CiAgaWYgKG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSAibnVtYmVyIikgcmV0dXJuIHsKICAgIG5leHQ6IGZ1bmN0aW9uIG5leHQoKSB7CiAgICAgIGlmIChvICYmIGkgPj0gby5sZW5ndGgpIG8gPSB2b2lkIDA7CiAgICAgIHJldHVybiB7CiAgICAgICAgdmFsdWU6IG8gJiYgb1tpKytdLAogICAgICAgIGRvbmU6ICFvCiAgICAgIH07CiAgICB9CiAgfTsKICB0aHJvdyBuZXcgVHlwZUVycm9yKHMgPyAiT2JqZWN0IGlzIG5vdCBpdGVyYWJsZS4iIDogIlN5bWJvbC5pdGVyYXRvciBpcyBub3QgZGVmaW5lZC4iKTsKfQoKZnVuY3Rpb24gX19yZWFkKG8sIG4pIHsKICB2YXIgbSA9IHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgb1tTeW1ib2wuaXRlcmF0b3JdOwogIGlmICghbSkgcmV0dXJuIG87CiAgdmFyIGkgPSBtLmNhbGwobyksCiAgICAgIHIsCiAgICAgIGFyID0gW10sCiAgICAgIGU7CgogIHRyeSB7CiAgICB3aGlsZSAoKG4gPT09IHZvaWQgMCB8fCBuLS0gPiAwKSAmJiAhKHIgPSBpLm5leHQoKSkuZG9uZSkgewogICAgICBhci5wdXNoKHIudmFsdWUpOwogICAgfQogIH0gY2F0Y2ggKGVycm9yKSB7CiAgICBlID0gewogICAgICBlcnJvcjogZXJyb3IKICAgIH07CiAgfSBmaW5hbGx5IHsKICAgIHRyeSB7CiAgICAgIGlmIChyICYmICFyLmRvbmUgJiYgKG0gPSBpWyJyZXR1cm4iXSkpIG0uY2FsbChpKTsKICAgIH0gZmluYWxseSB7CiAgICAgIGlmIChlKSB0aHJvdyBlLmVycm9yOwogICAgfQogIH0KCiAgcmV0dXJuIGFyOwp9CgpmdW5jdGlvbiBfX3NwcmVhZEFycmF5KHRvLCBmcm9tKSB7CiAgZm9yICh2YXIgaSA9IDAsIGlsID0gZnJvbS5sZW5ndGgsIGogPSB0by5sZW5ndGg7IGkgPCBpbDsgaSsrLCBqKyspIHsKICAgIHRvW2pdID0gZnJvbVtpXTsKICB9CgogIHJldHVybiB0bzsKfQoKZnVuY3Rpb24gY3JlYXRlU3ltYm9sKG5hbWUpIHsKICByZXR1cm4gaGFzU3ltYm9sID8gU3ltYm9sWyJmb3IiXShuYW1lKSA6IG5hbWU7Cn0KCnZhciBXYXRjaGVyUHJlRmx1c2hRdWV1ZUtleSA9IGNyZWF0ZVN5bWJvbCgnY29tcG9zaXRpb24tYXBpLnByZUZsdXNoUXVldWUnKTsKdmFyIFdhdGNoZXJQb3N0Rmx1c2hRdWV1ZUtleSA9IGNyZWF0ZVN5bWJvbCgnY29tcG9zaXRpb24tYXBpLnBvc3RGbHVzaFF1ZXVlJyk7IC8vIG11c3QgYmUgYSBzdHJpbmcsIHN5bWJvbCBrZXkgaXMgaWdub3JlZCBpbiByZWFjdGl2ZQoKdmFyIFJlZktleSA9ICdjb21wb3NpdGlvbi1hcGkucmVmS2V5JzsKdmFyIGFjY2Vzc01vZGlmaWVkU2V0ID0gbmV3IFdlYWtNYXAoKTsKdmFyIHJhd1NldCA9IG5ldyBXZWFrTWFwKCk7CnZhciByZWFkb25seVNldCA9IG5ldyBXZWFrTWFwKCk7Cgp2YXIgUmVmSW1wbCA9Ci8qKiBAY2xhc3MgKi8KZnVuY3Rpb24gKCkgewogIGZ1bmN0aW9uIFJlZkltcGwoX2EpIHsKICAgIHZhciBnZXQgPSBfYS5nZXQsCiAgICAgICAgc2V0ID0gX2Euc2V0OwogICAgcHJveHkodGhpcywgJ3ZhbHVlJywgewogICAgICBnZXQ6IGdldCwKICAgICAgc2V0OiBzZXQKICAgIH0pOwogIH0KCiAgcmV0dXJuIFJlZkltcGw7Cn0oKTsKCmZ1bmN0aW9uIGNyZWF0ZVJlZihvcHRpb25zLCByZWFkb25seSkgewogIHZhciByID0gbmV3IFJlZkltcGwob3B0aW9ucyk7IC8vIHNlYWwgdGhlIHJlZiwgdGhpcyBjb3VsZCBwcmV2ZW50IHJlZiBmcm9tIGJlaW5nIG9ic2VydmVkCiAgLy8gSXQncyBzYWZlIHRvIHNlYWwgdGhlIHJlZiwgc2luY2Ugd2UgcmVhbGx5IHNob3VsZG4ndCBleHRlbmQgaXQuCiAgLy8gcmVsYXRlZCBpc3N1ZXM6ICM3OQoKICB2YXIgc2VhbGVkID0gT2JqZWN0LnNlYWwocik7CiAgcmVhZG9ubHlTZXQuc2V0KHNlYWxlZCwgdHJ1ZSk7CiAgcmV0dXJuIHNlYWxlZDsKfQoKZnVuY3Rpb24gcmVmKHJhdykgewogIHZhciBfYTsKCiAgaWYgKGlzUmVmKHJhdykpIHsKICAgIHJldHVybiByYXc7CiAgfQoKICB2YXIgdmFsdWUgPSByZWFjdGl2ZSgoX2EgPSB7fSwgX2FbUmVmS2V5XSA9IHJhdywgX2EpKTsKICByZXR1cm4gY3JlYXRlUmVmKHsKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICByZXR1cm4gdmFsdWVbUmVmS2V5XTsKICAgIH0sCiAgICBzZXQ6IGZ1bmN0aW9uIHNldCh2KSB7CiAgICAgIHJldHVybiB2YWx1ZVtSZWZLZXldID0gdjsKICAgIH0KICB9KTsKfQoKZnVuY3Rpb24gaXNSZWYodmFsdWUpIHsKICByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBSZWZJbXBsOwp9CgpmdW5jdGlvbiB1bnJlZihyZWYpIHsKICByZXR1cm4gaXNSZWYocmVmKSA/IHJlZi52YWx1ZSA6IHJlZjsKfQoKZnVuY3Rpb24gdG9SZWZzKG9iaikgewogIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmICFpc1JlYWN0aXZlKG9iaikpIHsKICAgIHdhcm4kMSgidG9SZWZzKCkgZXhwZWN0cyBhIHJlYWN0aXZlIG9iamVjdCBidXQgcmVjZWl2ZWQgYSBwbGFpbiBvbmUuIik7CiAgfQoKICBpZiAoIWlzUGxhaW5PYmplY3Qob2JqKSkgcmV0dXJuIG9iajsKICB2YXIgcmV0ID0ge307CgogIGZvciAodmFyIGtleSBpbiBvYmopIHsKICAgIHJldFtrZXldID0gdG9SZWYob2JqLCBrZXkpOwogIH0KCiAgcmV0dXJuIHJldDsKfQoKZnVuY3Rpb24gY3VzdG9tUmVmKGZhY3RvcnkpIHsKICB2YXIgdmVyc2lvbiA9IHJlZigwKTsKICByZXR1cm4gY3JlYXRlUmVmKGZhY3RvcnkoZnVuY3Rpb24gKCkgewogICAgcmV0dXJuIHZvaWQgdmVyc2lvbi52YWx1ZTsKICB9LCBmdW5jdGlvbiAoKSB7CiAgICArK3ZlcnNpb24udmFsdWU7CiAgfSkpOwp9CgpmdW5jdGlvbiB0b1JlZihvYmplY3QsIGtleSkgewogIHZhciB2ID0gb2JqZWN0W2tleV07CiAgaWYgKGlzUmVmKHYpKSByZXR1cm4gdjsKICByZXR1cm4gY3JlYXRlUmVmKHsKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICByZXR1cm4gb2JqZWN0W2tleV07CiAgICB9LAogICAgc2V0OiBmdW5jdGlvbiBzZXQodikgewogICAgICByZXR1cm4gb2JqZWN0W2tleV0gPSB2OwogICAgfQogIH0pOwp9CgpmdW5jdGlvbiBzaGFsbG93UmVmKHJhdykgewogIHZhciBfYTsKCiAgaWYgKGlzUmVmKHJhdykpIHsKICAgIHJldHVybiByYXc7CiAgfQoKICB2YXIgdmFsdWUgPSBzaGFsbG93UmVhY3RpdmUoKF9hID0ge30sIF9hW1JlZktleV0gPSByYXcsIF9hKSk7CiAgcmV0dXJuIGNyZWF0ZVJlZih7CiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgcmV0dXJuIHZhbHVlW1JlZktleV07CiAgICB9LAogICAgc2V0OiBmdW5jdGlvbiBzZXQodikgewogICAgICByZXR1cm4gdmFsdWVbUmVmS2V5XSA9IHY7CiAgICB9CiAgfSk7Cn0KCmZ1bmN0aW9uIHRyaWdnZXJSZWYodmFsdWUpIHsKICBpZiAoIWlzUmVmKHZhbHVlKSkgcmV0dXJuOwogIHZhbHVlLnZhbHVlID0gdmFsdWUudmFsdWU7Cn0KCmZ1bmN0aW9uIHByb3h5UmVmcyhvYmplY3RXaXRoUmVmcykgewogIHZhciBfYSwgZV8xLCBfYjsKCiAgaWYgKGlzUmVhY3RpdmUob2JqZWN0V2l0aFJlZnMpKSB7CiAgICByZXR1cm4gb2JqZWN0V2l0aFJlZnM7CiAgfQoKICB2YXIgdmFsdWUgPSByZWFjdGl2ZSgoX2EgPSB7fSwgX2FbUmVmS2V5XSA9IG9iamVjdFdpdGhSZWZzLCBfYSkpOwoKICB2YXIgX2xvb3BfMSA9IGZ1bmN0aW9uIF9sb29wXzEoa2V5KSB7CiAgICBwcm94eSh2YWx1ZSwga2V5LCB7CiAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICAgIGlmIChpc1JlZih2YWx1ZVtrZXldKSkgewogICAgICAgICAgcmV0dXJuIHZhbHVlW2tleV0udmFsdWU7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gdmFsdWVba2V5XTsKICAgICAgfSwKICAgICAgc2V0OiBmdW5jdGlvbiBzZXQodikgewogICAgICAgIGlmIChpc1JlZih2YWx1ZVtrZXldKSkgewogICAgICAgICAgcmV0dXJuIHZhbHVlW2tleV0udmFsdWUgPSB1bnJlZih2KTsKICAgICAgICB9CgogICAgICAgIHZhbHVlW2tleV0gPSB1bnJlZih2KTsKICAgICAgfQogICAgfSk7CiAgfTsKCiAgdHJ5IHsKICAgIGZvciAodmFyIF9jID0gX192YWx1ZXMoT2JqZWN0LmtleXMob2JqZWN0V2l0aFJlZnMpKSwgX2QgPSBfYy5uZXh0KCk7ICFfZC5kb25lOyBfZCA9IF9jLm5leHQoKSkgewogICAgICB2YXIga2V5ID0gX2QudmFsdWU7CgogICAgICBfbG9vcF8xKGtleSk7CiAgICB9CiAgfSBjYXRjaCAoZV8xXzEpIHsKICAgIGVfMSA9IHsKICAgICAgZXJyb3I6IGVfMV8xCiAgICB9OwogIH0gZmluYWxseSB7CiAgICB0cnkgewogICAgICBpZiAoX2QgJiYgIV9kLmRvbmUgJiYgKF9iID0gX2NbInJldHVybiJdKSkgX2IuY2FsbChfYyk7CiAgICB9IGZpbmFsbHkgewogICAgICBpZiAoZV8xKSB0aHJvdyBlXzEuZXJyb3I7CiAgICB9CiAgfQoKICByZXR1cm4gdmFsdWU7Cn0KCmZ1bmN0aW9uIGlzUmF3KG9iaikgewogIHZhciBfYTsKCiAgcmV0dXJuIEJvb2xlYW4oKG9iaiA9PT0gbnVsbCB8fCBvYmogPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9iai5fX29iX18pICYmICgoX2EgPSBvYmouX19vYl9fKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuX19yYXdfXykpOwp9CgpmdW5jdGlvbiBpc1JlYWN0aXZlKG9iaikgewogIHZhciBfYTsKCiAgcmV0dXJuIEJvb2xlYW4oKG9iaiA9PT0gbnVsbCB8fCBvYmogPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9iai5fX29iX18pICYmICEoKF9hID0gb2JqLl9fb2JfXykgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLl9fcmF3X18pKTsKfQovKioNCiAqIFByb3hpbmcgcHJvcGVydHkgYWNjZXNzIG9mIHRhcmdldC4NCiAqIFdlIGNhbiBkbyB1bndyYXBwaW5nIGFuZCBvdGhlciB0aGluZ3MgaGVyZS4NCiAqLwoKCmZ1bmN0aW9uIHNldHVwQWNjZXNzQ29udHJvbCh0YXJnZXQpIHsKICBpZiAoIWlzUGxhaW5PYmplY3QodGFyZ2V0KSB8fCBpc1Jhdyh0YXJnZXQpIHx8IEFycmF5LmlzQXJyYXkodGFyZ2V0KSB8fCBpc1JlZih0YXJnZXQpIHx8IGlzQ29tcG9uZW50SW5zdGFuY2UodGFyZ2V0KSB8fCBhY2Nlc3NNb2RpZmllZFNldC5oYXModGFyZ2V0KSkgcmV0dXJuOwogIGFjY2Vzc01vZGlmaWVkU2V0LnNldCh0YXJnZXQsIHRydWUpOwogIHZhciBrZXlzID0gT2JqZWN0LmtleXModGFyZ2V0KTsKCiAgZm9yICh2YXIgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgaSsrKSB7CiAgICBkZWZpbmVBY2Nlc3NDb250cm9sKHRhcmdldCwga2V5c1tpXSk7CiAgfQp9Ci8qKg0KICogQXV0byB1bndyYXBwaW5nIHdoZW4gYWNjZXNzIHByb3BlcnR5DQogKi8KCgpmdW5jdGlvbiBkZWZpbmVBY2Nlc3NDb250cm9sKHRhcmdldCwga2V5LCB2YWwpIHsKICBpZiAoa2V5ID09PSAnX19vYl9fJykgcmV0dXJuOwogIGlmIChpc1Jhdyh0YXJnZXRba2V5XSkpIHJldHVybjsKICB2YXIgZ2V0dGVyOwogIHZhciBzZXR0ZXI7CiAgdmFyIHByb3BlcnR5ID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGtleSk7CgogIGlmIChwcm9wZXJ0eSkgewogICAgaWYgKHByb3BlcnR5LmNvbmZpZ3VyYWJsZSA9PT0gZmFsc2UpIHsKICAgICAgcmV0dXJuOwogICAgfQoKICAgIGdldHRlciA9IHByb3BlcnR5LmdldDsKICAgIHNldHRlciA9IHByb3BlcnR5LnNldDsKCiAgICBpZiAoKCFnZXR0ZXIgfHwgc2V0dGVyKSAmJgogICAgLyogbm90IG9ubHkgaGF2ZSBnZXR0ZXIgKi8KICAgIGFyZ3VtZW50cy5sZW5ndGggPT09IDIpIHsKICAgICAgdmFsID0gdGFyZ2V0W2tleV07CiAgICB9CiAgfQoKICBzZXR1cEFjY2Vzc0NvbnRyb2wodmFsKTsKICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHsKICAgIGVudW1lcmFibGU6IHRydWUsCiAgICBjb25maWd1cmFibGU6IHRydWUsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldHRlckhhbmRsZXIoKSB7CiAgICAgIHZhciB2YWx1ZSA9IGdldHRlciA/IGdldHRlci5jYWxsKHRhcmdldCkgOiB2YWw7IC8vIGlmIHRoZSBrZXkgaXMgZXF1YWwgdG8gUmVmS2V5LCBza2lwIHRoZSB1bndyYXAgbG9naWMKCiAgICAgIGlmIChrZXkgIT09IFJlZktleSAmJiBpc1JlZih2YWx1ZSkpIHsKICAgICAgICByZXR1cm4gdmFsdWUudmFsdWU7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIHZhbHVlOwogICAgICB9CiAgICB9LAogICAgc2V0OiBmdW5jdGlvbiBzZXR0ZXJIYW5kbGVyKG5ld1ZhbCkgewogICAgICBpZiAoZ2V0dGVyICYmICFzZXR0ZXIpIHJldHVybjsKICAgICAgdmFyIHZhbHVlID0gZ2V0dGVyID8gZ2V0dGVyLmNhbGwodGFyZ2V0KSA6IHZhbDsgLy8gSWYgdGhlIGtleSBpcyBlcXVhbCB0byBSZWZLZXksIHNraXAgdGhlIHVud3JhcCBsb2dpYwogICAgICAvLyBJZiBhbmQgb25seSBpZiAidmFsdWUiIGlzIHJlZiBhbmQgIm5ld1ZhbCIgaXMgbm90IGEgcmVmLAogICAgICAvLyB0aGUgYXNzaWdubWVudCBzaG91bGQgYmUgcHJveGllZCB0byAidmFsdWUiIHJlZi4KCiAgICAgIGlmIChrZXkgIT09IFJlZktleSAmJiBpc1JlZih2YWx1ZSkgJiYgIWlzUmVmKG5ld1ZhbCkpIHsKICAgICAgICB2YWx1ZS52YWx1ZSA9IG5ld1ZhbDsKICAgICAgfSBlbHNlIGlmIChzZXR0ZXIpIHsKICAgICAgICBzZXR0ZXIuY2FsbCh0YXJnZXQsIG5ld1ZhbCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdmFsID0gbmV3VmFsOwogICAgICB9CgogICAgICBzZXR1cEFjY2Vzc0NvbnRyb2wobmV3VmFsKTsKICAgIH0KICB9KTsKfQoKZnVuY3Rpb24gb2JzZXJ2ZShvYmopIHsKICB2YXIgVnVlID0gZ2V0UmVnaXN0ZXJlZFZ1ZU9yRGVmYXVsdCgpOwogIHZhciBvYnNlcnZlZDsKCiAgaWYgKFZ1ZS5vYnNlcnZhYmxlKSB7CiAgICBvYnNlcnZlZCA9IFZ1ZS5vYnNlcnZhYmxlKG9iaik7CiAgfSBlbHNlIHsKICAgIHZhciB2bSA9IGRlZmluZUNvbXBvbmVudEluc3RhbmNlKFZ1ZSwgewogICAgICBkYXRhOiB7CiAgICAgICAgJCRzdGF0ZTogb2JqCiAgICAgIH0KICAgIH0pOwogICAgb2JzZXJ2ZWQgPSB2bS5fZGF0YS4kJHN0YXRlOwogIH0gLy8gaW4gU1NSLCB0aGVyZSBpcyBubyBfX29iX18uIE1vY2sgZm9yIHJlYWN0aXZpdHkgY2hlY2sKCgogIGlmICghaGFzT3duKG9ic2VydmVkLCAnX19vYl9fJykpIHsKICAgIGRlZihvYnNlcnZlZCwgJ19fb2JfXycsIG1vY2tPYnNlcnZlcihvYnNlcnZlZCkpOwogIH0KCiAgcmV0dXJuIG9ic2VydmVkOwp9CgpmdW5jdGlvbiBjcmVhdGVPYnNlcnZlcigpIHsKICByZXR1cm4gb2JzZXJ2ZSh7fSkuX19vYl9fOwp9CgpmdW5jdGlvbiBtb2NrT2JzZXJ2ZXIodmFsdWUpIHsKICBpZiAodmFsdWUgPT09IHZvaWQgMCkgewogICAgdmFsdWUgPSB7fTsKICB9CgogIHJldHVybiB7CiAgICB2YWx1ZTogdmFsdWUsCiAgICBkZXA6IHsKICAgICAgbm90aWZ5OiBub29wRm4sCiAgICAgIGRlcGVuZDogbm9vcEZuLAogICAgICBhZGRTdWI6IG5vb3BGbiwKICAgICAgcmVtb3ZlU3ViOiBub29wRm4KICAgIH0KICB9Owp9CgpmdW5jdGlvbiBzaGFsbG93UmVhY3RpdmUob2JqKSB7CiAgdmFyIGVfMSwgX2E7CgogIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmICFvYmopIHsKICAgIHdhcm4kMSgnInNoYWxsb3dSZWFjdGl2ZSgpIiBpcyBjYWxsZWQgd2l0aG91dCBwcm92aWRlIGFuICJvYmplY3QiLicpOwogICAgcmV0dXJuOwogIH0KCiAgaWYgKCEoaXNQbGFpbk9iamVjdChvYmopIHx8IGlzQXJyYXkob2JqKSkgfHwgaXNSYXcob2JqKSB8fCAhT2JqZWN0LmlzRXh0ZW5zaWJsZShvYmopKSB7CiAgICByZXR1cm4gb2JqOwogIH0KCiAgdmFyIG9ic2VydmVkID0gb2JzZXJ2ZSh7fSk7CiAgc2V0dXBBY2Nlc3NDb250cm9sKG9ic2VydmVkKTsKICB2YXIgb2IgPSBvYnNlcnZlZC5fX29iX187CgogIHZhciBfbG9vcF8xID0gZnVuY3Rpb24gX2xvb3BfMShrZXkpIHsKICAgIHZhciB2YWwgPSBvYmpba2V5XTsKICAgIHZhciBnZXR0ZXI7CiAgICB2YXIgc2V0dGVyOwogICAgdmFyIHByb3BlcnR5ID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmosIGtleSk7CgogICAgaWYgKHByb3BlcnR5KSB7CiAgICAgIGlmIChwcm9wZXJ0eS5jb25maWd1cmFibGUgPT09IGZhbHNlKSB7CiAgICAgICAgcmV0dXJuICJjb250aW51ZSI7CiAgICAgIH0KCiAgICAgIGdldHRlciA9IHByb3BlcnR5LmdldDsKICAgICAgc2V0dGVyID0gcHJvcGVydHkuc2V0OwogICAgfQoKICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYnNlcnZlZCwga2V5LCB7CiAgICAgIGVudW1lcmFibGU6IHRydWUsCiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSwKICAgICAgZ2V0OiBmdW5jdGlvbiBnZXR0ZXJIYW5kbGVyKCkgewogICAgICAgIHZhciBfYTsKCiAgICAgICAgdmFyIHZhbHVlID0gZ2V0dGVyID8gZ2V0dGVyLmNhbGwob2JqKSA6IHZhbDsKICAgICAgICAoX2EgPSBvYi5kZXApID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5kZXBlbmQoKTsKICAgICAgICByZXR1cm4gdmFsdWU7CiAgICAgIH0sCiAgICAgIHNldDogZnVuY3Rpb24gc2V0dGVySGFuZGxlcihuZXdWYWwpIHsKICAgICAgICB2YXIgX2E7CgogICAgICAgIGlmIChnZXR0ZXIgJiYgIXNldHRlcikgcmV0dXJuOwoKICAgICAgICBpZiAoc2V0dGVyKSB7CiAgICAgICAgICBzZXR0ZXIuY2FsbChvYmosIG5ld1ZhbCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHZhbCA9IG5ld1ZhbDsKICAgICAgICB9CgogICAgICAgIChfYSA9IG9iLmRlcCkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLm5vdGlmeSgpOwogICAgICB9CiAgICB9KTsKICB9OwoKICB0cnkgewogICAgZm9yICh2YXIgX2IgPSBfX3ZhbHVlcyhPYmplY3Qua2V5cyhvYmopKSwgX2MgPSBfYi5uZXh0KCk7ICFfYy5kb25lOyBfYyA9IF9iLm5leHQoKSkgewogICAgICB2YXIga2V5ID0gX2MudmFsdWU7CgogICAgICBfbG9vcF8xKGtleSk7CiAgICB9CiAgfSBjYXRjaCAoZV8xXzEpIHsKICAgIGVfMSA9IHsKICAgICAgZXJyb3I6IGVfMV8xCiAgICB9OwogIH0gZmluYWxseSB7CiAgICB0cnkgewogICAgICBpZiAoX2MgJiYgIV9jLmRvbmUgJiYgKF9hID0gX2JbInJldHVybiJdKSkgX2EuY2FsbChfYik7CiAgICB9IGZpbmFsbHkgewogICAgICBpZiAoZV8xKSB0aHJvdyBlXzEuZXJyb3I7CiAgICB9CiAgfQoKICByZXR1cm4gb2JzZXJ2ZWQ7Cn0KLyoqDQogKiBNYWtlIG9iaiByZWFjdGl2aXR5DQogKi8KCgpmdW5jdGlvbiByZWFjdGl2ZShvYmopIHsKICBpZiAoIWlzT2JqZWN0KG9iaikpIHsKICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7CiAgICAgIHdhcm4kMSgnInJlYWN0aXZlKCkiIGlzIGNhbGxlZCB3aXRob3V0IHByb3ZpZGUgYW4gIm9iamVjdCIuJyk7CiAgICB9CgogICAgcmV0dXJuIG9iajsKICB9CgogIGlmICghKGlzUGxhaW5PYmplY3Qob2JqKSB8fCBpc0FycmF5KG9iaikpIHx8IGlzUmF3KG9iaikgfHwgIU9iamVjdC5pc0V4dGVuc2libGUob2JqKSkgewogICAgcmV0dXJuIG9iajsKICB9CgogIHZhciBvYnNlcnZlZCA9IG9ic2VydmUob2JqKTsKICBzZXR1cEFjY2Vzc0NvbnRyb2wob2JzZXJ2ZWQpOwogIHJldHVybiBvYnNlcnZlZDsKfQovKioNCiAqIE1ha2Ugc3VyZSBvYmogY2FuJ3QgYmUgYSByZWFjdGl2ZQ0KICovCgoKZnVuY3Rpb24gbWFya1JhdyhvYmopIHsKICBpZiAoIShpc1BsYWluT2JqZWN0KG9iaikgfHwgaXNBcnJheShvYmopKSB8fCAhT2JqZWN0LmlzRXh0ZW5zaWJsZShvYmopKSB7CiAgICByZXR1cm4gb2JqOwogIH0gLy8gc2V0IHRoZSB2dWUgb2JzZXJ2YWJsZSBmbGFnIGF0IG9iagoKCiAgdmFyIG9iID0gY3JlYXRlT2JzZXJ2ZXIoKTsKICBvYi5fX3Jhd19fID0gdHJ1ZTsKICBkZWYob2JqLCAnX19vYl9fJywgb2IpOyAvLyBtYXJrIGFzIFJhdwoKICByYXdTZXQuc2V0KG9iaiwgdHJ1ZSk7CiAgcmV0dXJuIG9iajsKfQoKZnVuY3Rpb24gdG9SYXcob2JzZXJ2ZWQpIHsKICB2YXIgX2EsIF9iOwoKICBpZiAoaXNSYXcob2JzZXJ2ZWQpIHx8ICFPYmplY3QuaXNFeHRlbnNpYmxlKG9ic2VydmVkKSkgewogICAgcmV0dXJuIG9ic2VydmVkOwogIH0KCiAgcmV0dXJuICgoX2IgPSAoX2EgPSBvYnNlcnZlZCkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLl9fb2JfXykgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLnZhbHVlKSB8fCBvYnNlcnZlZDsKfQoKZnVuY3Rpb24gaXNSZWFkb25seShvYmopIHsKICByZXR1cm4gcmVhZG9ubHlTZXQuaGFzKG9iaik7Cn0KLyoqDQogKiAqKkluIEB2dWUvY29tcG9zaXRpb24tYXBpLCBgcmVhY3RpdmVgIG9ubHkgcHJvdmlkZXMgdHlwZS1sZXZlbCByZWFkb25seSBjaGVjayoqDQogKg0KICogQ3JlYXRlcyBhIHJlYWRvbmx5IGNvcHkgb2YgdGhlIG9yaWdpbmFsIG9iamVjdC4gTm90ZSB0aGUgcmV0dXJuZWQgY29weSBpcyBub3QNCiAqIG1hZGUgcmVhY3RpdmUsIGJ1dCBgcmVhZG9ubHlgIGNhbiBiZSBjYWxsZWQgb24gYW4gYWxyZWFkeSByZWFjdGl2ZSBvYmplY3QuDQogKi8KCgpmdW5jdGlvbiByZWFkb25seSh0YXJnZXQpIHsKICByZXR1cm4gdGFyZ2V0Owp9CgpmdW5jdGlvbiBzaGFsbG93UmVhZG9ubHkob2JqKSB7CiAgdmFyIGVfMSwgX2E7CgogIGlmICghKGlzUGxhaW5PYmplY3Qob2JqKSB8fCBpc0FycmF5KG9iaikpIHx8ICFPYmplY3QuaXNFeHRlbnNpYmxlKG9iaikpIHsKICAgIHJldHVybiBvYmo7CiAgfQoKICB2YXIgcmVhZG9ubHlPYmogPSB7fTsKICB2YXIgc291cmNlID0gcmVhY3RpdmUoe30pOwogIHZhciBvYiA9IHNvdXJjZS5fX29iX187CgogIHZhciBfbG9vcF8xID0gZnVuY3Rpb24gX2xvb3BfMShrZXkpIHsKICAgIHZhciB2YWwgPSBvYmpba2V5XTsKICAgIHZhciBnZXR0ZXI7CiAgICB2YXIgcHJvcGVydHkgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iaiwga2V5KTsKCiAgICBpZiAocHJvcGVydHkpIHsKICAgICAgaWYgKHByb3BlcnR5LmNvbmZpZ3VyYWJsZSA9PT0gZmFsc2UpIHsKICAgICAgICByZXR1cm4gImNvbnRpbnVlIjsKICAgICAgfQoKICAgICAgZ2V0dGVyID0gcHJvcGVydHkuZ2V0OwogICAgfQoKICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShyZWFkb25seU9iaiwga2V5LCB7CiAgICAgIGVudW1lcmFibGU6IHRydWUsCiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSwKICAgICAgZ2V0OiBmdW5jdGlvbiBnZXR0ZXJIYW5kbGVyKCkgewogICAgICAgIHZhciB2YWx1ZSA9IGdldHRlciA/IGdldHRlci5jYWxsKG9iaikgOiB2YWw7CiAgICAgICAgb2IuZGVwLmRlcGVuZCgpOwogICAgICAgIHJldHVybiB2YWx1ZTsKICAgICAgfSwKICAgICAgc2V0OiBmdW5jdGlvbiBzZXQodikgewogICAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7CiAgICAgICAgICB3YXJuJDEoIlNldCBvcGVyYXRpb24gb24ga2V5IFwiIiArIGtleSArICJcIiBmYWlsZWQ6IHRhcmdldCBpcyByZWFkb25seS4iKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0pOwogIH07CgogIHRyeSB7CiAgICBmb3IgKHZhciBfYiA9IF9fdmFsdWVzKE9iamVjdC5rZXlzKG9iaikpLCBfYyA9IF9iLm5leHQoKTsgIV9jLmRvbmU7IF9jID0gX2IubmV4dCgpKSB7CiAgICAgIHZhciBrZXkgPSBfYy52YWx1ZTsKCiAgICAgIF9sb29wXzEoa2V5KTsKICAgIH0KICB9IGNhdGNoIChlXzFfMSkgewogICAgZV8xID0gewogICAgICBlcnJvcjogZV8xXzEKICAgIH07CiAgfSBmaW5hbGx5IHsKICAgIHRyeSB7CiAgICAgIGlmIChfYyAmJiAhX2MuZG9uZSAmJiAoX2EgPSBfYlsicmV0dXJuIl0pKSBfYS5jYWxsKF9iKTsKICAgIH0gZmluYWxseSB7CiAgICAgIGlmIChlXzEpIHRocm93IGVfMS5lcnJvcjsKICAgIH0KICB9CgogIHJlYWRvbmx5U2V0LnNldChyZWFkb25seU9iaiwgdHJ1ZSk7CiAgcmV0dXJuIHJlYWRvbmx5T2JqOwp9Ci8qKg0KICogU2V0IGEgcHJvcGVydHkgb24gYW4gb2JqZWN0LiBBZGRzIHRoZSBuZXcgcHJvcGVydHksIHRyaWdnZXJzIGNoYW5nZQ0KICogbm90aWZpY2F0aW9uIGFuZCBpbnRlcmNlcHQgaXQncyBzdWJzZXF1ZW50IGFjY2VzcyBpZiB0aGUgcHJvcGVydHkgZG9lc24ndA0KICogYWxyZWFkeSBleGlzdC4NCiAqLwoKCmZ1bmN0aW9uIHNldCQxKHRhcmdldCwga2V5LCB2YWwpIHsKICB2YXIgVnVlID0gZ2V0VnVlQ29uc3RydWN0b3IoKTsKICB2YXIgX2EgPSBWdWUudXRpbCwKICAgICAgd2FybiA9IF9hLndhcm4sCiAgICAgIGRlZmluZVJlYWN0aXZlID0gX2EuZGVmaW5lUmVhY3RpdmU7CgogIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIChpc1VuZGVmKHRhcmdldCkgfHwgaXNQcmltaXRpdmUodGFyZ2V0KSkpIHsKICAgIHdhcm4oIkNhbm5vdCBzZXQgcmVhY3RpdmUgcHJvcGVydHkgb24gdW5kZWZpbmVkLCBudWxsLCBvciBwcmltaXRpdmUgdmFsdWU6ICIgKyB0YXJnZXQpOwogIH0KCiAgaWYgKGlzQXJyYXkodGFyZ2V0KSAmJiBpc1ZhbGlkQXJyYXlJbmRleChrZXkpKSB7CiAgICB0YXJnZXQubGVuZ3RoID0gTWF0aC5tYXgodGFyZ2V0Lmxlbmd0aCwga2V5KTsKICAgIHRhcmdldC5zcGxpY2Uoa2V5LCAxLCB2YWwpOwogICAgcmV0dXJuIHZhbDsKICB9CgogIGlmIChrZXkgaW4gdGFyZ2V0ICYmICEoa2V5IGluIE9iamVjdC5wcm90b3R5cGUpKSB7CiAgICB0YXJnZXRba2V5XSA9IHZhbDsKICAgIHJldHVybiB2YWw7CiAgfQoKICB2YXIgb2IgPSB0YXJnZXQuX19vYl9fOwoKICBpZiAodGFyZ2V0Ll9pc1Z1ZSB8fCBvYiAmJiBvYi52bUNvdW50KSB7CiAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ0F2b2lkIGFkZGluZyByZWFjdGl2ZSBwcm9wZXJ0aWVzIHRvIGEgVnVlIGluc3RhbmNlIG9yIGl0cyByb290ICRkYXRhICcgKyAnYXQgcnVudGltZSAtIGRlY2xhcmUgaXQgdXBmcm9udCBpbiB0aGUgZGF0YSBvcHRpb24uJyk7CiAgICByZXR1cm4gdmFsOwogIH0KCiAgaWYgKCFvYikgewogICAgdGFyZ2V0W2tleV0gPSB2YWw7CiAgICByZXR1cm4gdmFsOwogIH0KCiAgZGVmaW5lUmVhY3RpdmUob2IudmFsdWUsIGtleSwgdmFsKTsgLy8gSU1QT1JUQU5UOiBkZWZpbmUgYWNjZXNzIGNvbnRyb2wgYmVmb3JlIHRyaWdnZXIgd2F0Y2hlcgoKICBkZWZpbmVBY2Nlc3NDb250cm9sKHRhcmdldCwga2V5LCB2YWwpOwogIG9iLmRlcC5ub3RpZnkoKTsKICByZXR1cm4gdmFsOwp9Ci8qKg0KICogRGVsZXRlIGEgcHJvcGVydHkgYW5kIHRyaWdnZXIgY2hhbmdlIGlmIG5lY2Vzc2FyeS4NCiAqLwoKCmZ1bmN0aW9uIGRlbCh0YXJnZXQsIGtleSkgewogIHZhciBWdWUgPSBnZXRWdWVDb25zdHJ1Y3RvcigpOwogIHZhciB3YXJuID0gVnVlLnV0aWwud2FybjsKCiAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgKGlzVW5kZWYodGFyZ2V0KSB8fCBpc1ByaW1pdGl2ZSh0YXJnZXQpKSkgewogICAgd2FybigiQ2Fubm90IGRlbGV0ZSByZWFjdGl2ZSBwcm9wZXJ0eSBvbiB1bmRlZmluZWQsIG51bGwsIG9yIHByaW1pdGl2ZSB2YWx1ZTogIiArIHRhcmdldCk7CiAgfQoKICBpZiAoQXJyYXkuaXNBcnJheSh0YXJnZXQpICYmIGlzVmFsaWRBcnJheUluZGV4KGtleSkpIHsKICAgIHRhcmdldC5zcGxpY2Uoa2V5LCAxKTsKICAgIHJldHVybjsKICB9CgogIHZhciBvYiA9IHRhcmdldC5fX29iX187CgogIGlmICh0YXJnZXQuX2lzVnVlIHx8IG9iICYmIG9iLnZtQ291bnQpIHsKICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2FybignQXZvaWQgZGVsZXRpbmcgcHJvcGVydGllcyBvbiBhIFZ1ZSBpbnN0YW5jZSBvciBpdHMgcm9vdCAkZGF0YSAnICsgJy0ganVzdCBzZXQgaXQgdG8gbnVsbC4nKTsKICAgIHJldHVybjsKICB9CgogIGlmICghaGFzT3duKHRhcmdldCwga2V5KSkgewogICAgcmV0dXJuOwogIH0KCiAgZGVsZXRlIHRhcmdldFtrZXldOwoKICBpZiAoIW9iKSB7CiAgICByZXR1cm47CiAgfQoKICBvYi5kZXAubm90aWZ5KCk7Cn0KCnZhciBnZW5OYW1lID0gZnVuY3Rpb24gZ2VuTmFtZShuYW1lKSB7CiAgcmV0dXJuICJvbiIgKyAobmFtZVswXS50b1VwcGVyQ2FzZSgpICsgbmFtZS5zbGljZSgxKSk7Cn07CgpmdW5jdGlvbiBjcmVhdGVMaWZlQ3ljbGUobGlmZUN5Y2xlaG9vaykgewogIHJldHVybiBmdW5jdGlvbiAoY2FsbGJhY2spIHsKICAgIHZhciB2bSA9IGN1cnJlbnRWTUluRm4oZ2VuTmFtZShsaWZlQ3ljbGVob29rKSk7CgogICAgaWYgKHZtKSB7CiAgICAgIGluamVjdEhvb2tPcHRpb24oZ2V0VnVlQ29uc3RydWN0b3IoKSwgdm0sIGxpZmVDeWNsZWhvb2ssIGNhbGxiYWNrKTsKICAgIH0KICB9Owp9CgpmdW5jdGlvbiBpbmplY3RIb29rT3B0aW9uKFZ1ZSwgdm0sIGhvb2ssIHZhbCkgewogIHZhciBvcHRpb25zID0gdm0uJG9wdGlvbnM7CiAgdmFyIG1lcmdlRm4gPSBWdWUuY29uZmlnLm9wdGlvbk1lcmdlU3RyYXRlZ2llc1tob29rXTsKICBvcHRpb25zW2hvb2tdID0gbWVyZ2VGbihvcHRpb25zW2hvb2tdLCB3cmFwSG9va0NhbGwodm0sIHZhbCkpOwp9CgpmdW5jdGlvbiB3cmFwSG9va0NhbGwodm0sIGZuKSB7CiAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgIHZhciBfYTsKCiAgICB2YXIgYXJncyA9IFtdOwoKICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7CiAgICAgIGFyZ3NbX2ldID0gYXJndW1lbnRzW19pXTsKICAgIH0KCiAgICB2YXIgcHJlVm0gPSAoX2EgPSBnZXRDdXJyZW50SW5zdGFuY2UoKSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnByb3h5OwogICAgc2V0Q3VycmVudEluc3RhbmNlKHZtKTsKCiAgICB0cnkgewogICAgICByZXR1cm4gZm4uYXBwbHkodm9pZCAwLCBfX3NwcmVhZEFycmF5KFtdLCBfX3JlYWQoYXJncykpKTsKICAgIH0gZmluYWxseSB7CiAgICAgIHNldEN1cnJlbnRJbnN0YW5jZShwcmVWbSk7CiAgICB9CiAgfTsKfSAvLyBleHBvcnQgY29uc3Qgb25DcmVhdGVkID0gY3JlYXRlTGlmZUN5Y2xlKCdjcmVhdGVkJyk7CgoKdmFyIG9uQmVmb3JlTW91bnQgPSBjcmVhdGVMaWZlQ3ljbGUoJ2JlZm9yZU1vdW50Jyk7CnZhciBvbk1vdW50ZWQgPSBjcmVhdGVMaWZlQ3ljbGUoJ21vdW50ZWQnKTsKdmFyIG9uQmVmb3JlVXBkYXRlID0gY3JlYXRlTGlmZUN5Y2xlKCdiZWZvcmVVcGRhdGUnKTsKdmFyIG9uVXBkYXRlZCA9IGNyZWF0ZUxpZmVDeWNsZSgndXBkYXRlZCcpOwp2YXIgb25CZWZvcmVVbm1vdW50ID0gY3JlYXRlTGlmZUN5Y2xlKCdiZWZvcmVEZXN0cm95Jyk7CnZhciBvblVubW91bnRlZCA9IGNyZWF0ZUxpZmVDeWNsZSgnZGVzdHJveWVkJyk7CnZhciBvbkVycm9yQ2FwdHVyZWQgPSBjcmVhdGVMaWZlQ3ljbGUoJ2Vycm9yQ2FwdHVyZWQnKTsKdmFyIG9uQWN0aXZhdGVkID0gY3JlYXRlTGlmZUN5Y2xlKCdhY3RpdmF0ZWQnKTsKdmFyIG9uRGVhY3RpdmF0ZWQgPSBjcmVhdGVMaWZlQ3ljbGUoJ2RlYWN0aXZhdGVkJyk7CnZhciBvblNlcnZlclByZWZldGNoID0gY3JlYXRlTGlmZUN5Y2xlKCdzZXJ2ZXJQcmVmZXRjaCcpOwp2YXIgZmFsbGJhY2tWTTsKCmZ1bmN0aW9uIGZsdXNoUHJlUXVldWUoKSB7CiAgZmx1c2hRdWV1ZSh0aGlzLCBXYXRjaGVyUHJlRmx1c2hRdWV1ZUtleSk7Cn0KCmZ1bmN0aW9uIGZsdXNoUG9zdFF1ZXVlKCkgewogIGZsdXNoUXVldWUodGhpcywgV2F0Y2hlclBvc3RGbHVzaFF1ZXVlS2V5KTsKfQoKZnVuY3Rpb24gaGFzV2F0Y2hFbnYodm0pIHsKICByZXR1cm4gdm1bV2F0Y2hlclByZUZsdXNoUXVldWVLZXldICE9PSB1bmRlZmluZWQ7Cn0KCmZ1bmN0aW9uIGluc3RhbGxXYXRjaEVudih2bSkgewogIHZtW1dhdGNoZXJQcmVGbHVzaFF1ZXVlS2V5XSA9IFtdOwogIHZtW1dhdGNoZXJQb3N0Rmx1c2hRdWV1ZUtleV0gPSBbXTsKICB2bS4kb24oJ2hvb2s6YmVmb3JlVXBkYXRlJywgZmx1c2hQcmVRdWV1ZSk7CiAgdm0uJG9uKCdob29rOnVwZGF0ZWQnLCBmbHVzaFBvc3RRdWV1ZSk7Cn0KCmZ1bmN0aW9uIGdldFdhdGNoZXJPcHRpb24ob3B0aW9ucykgewogIHJldHVybiBfYXNzaWduKHsKICAgIGltbWVkaWF0ZTogZmFsc2UsCiAgICBkZWVwOiBmYWxzZSwKICAgIGZsdXNoOiAncHJlJwogIH0sIG9wdGlvbnMpOwp9CgpmdW5jdGlvbiBnZXRXYXRjaEVmZmVjdE9wdGlvbihvcHRpb25zKSB7CiAgcmV0dXJuIF9hc3NpZ24oewogICAgaW1tZWRpYXRlOiB0cnVlLAogICAgZGVlcDogZmFsc2UsCiAgICBmbHVzaDogJ3ByZScKICB9LCBvcHRpb25zKTsKfQoKZnVuY3Rpb24gZ2V0V2F0Y2hlclZNKCkgewogIHZhciBfYTsKCiAgdmFyIHZtID0gKF9hID0gZ2V0Q3VycmVudEluc3RhbmNlKCkpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5wcm94eTsKCiAgaWYgKCF2bSkgewogICAgaWYgKCFmYWxsYmFja1ZNKSB7CiAgICAgIGZhbGxiYWNrVk0gPSBkZWZpbmVDb21wb25lbnRJbnN0YW5jZShnZXRWdWVDb25zdHJ1Y3RvcigpKTsKICAgIH0KCiAgICB2bSA9IGZhbGxiYWNrVk07CiAgfSBlbHNlIGlmICghaGFzV2F0Y2hFbnYodm0pKSB7CiAgICBpbnN0YWxsV2F0Y2hFbnYodm0pOwogIH0KCiAgcmV0dXJuIHZtOwp9CgpmdW5jdGlvbiBmbHVzaFF1ZXVlKHZtLCBrZXkpIHsKICB2YXIgcXVldWUgPSB2bVtrZXldOwoKICBmb3IgKHZhciBpbmRleCA9IDA7IGluZGV4IDwgcXVldWUubGVuZ3RoOyBpbmRleCsrKSB7CiAgICBxdWV1ZVtpbmRleF0oKTsKICB9CgogIHF1ZXVlLmxlbmd0aCA9IDA7Cn0KCmZ1bmN0aW9uIHF1ZXVlRmx1c2hKb2Iodm0sIGZuLCBtb2RlKSB7CiAgLy8gZmx1c2ggYWxsIHdoZW4gYmVmb3JlVXBkYXRlIGFuZCB1cGRhdGVkIGFyZSBub3QgZmlyZWQKICB2YXIgZmFsbGJhY2tGbHVzaCA9IGZ1bmN0aW9uIGZhbGxiYWNrRmx1c2goKSB7CiAgICB2bS4kbmV4dFRpY2soZnVuY3Rpb24gKCkgewogICAgICBpZiAodm1bV2F0Y2hlclByZUZsdXNoUXVldWVLZXldLmxlbmd0aCkgewogICAgICAgIGZsdXNoUXVldWUodm0sIFdhdGNoZXJQcmVGbHVzaFF1ZXVlS2V5KTsKICAgICAgfQoKICAgICAgaWYgKHZtW1dhdGNoZXJQb3N0Rmx1c2hRdWV1ZUtleV0ubGVuZ3RoKSB7CiAgICAgICAgZmx1c2hRdWV1ZSh2bSwgV2F0Y2hlclBvc3RGbHVzaFF1ZXVlS2V5KTsKICAgICAgfQogICAgfSk7CiAgfTsKCiAgc3dpdGNoIChtb2RlKSB7CiAgICBjYXNlICdwcmUnOgogICAgICBmYWxsYmFja0ZsdXNoKCk7CiAgICAgIHZtW1dhdGNoZXJQcmVGbHVzaFF1ZXVlS2V5XS5wdXNoKGZuKTsKICAgICAgYnJlYWs7CgogICAgY2FzZSAncG9zdCc6CiAgICAgIGZhbGxiYWNrRmx1c2goKTsKICAgICAgdm1bV2F0Y2hlclBvc3RGbHVzaFF1ZXVlS2V5XS5wdXNoKGZuKTsKICAgICAgYnJlYWs7CgogICAgZGVmYXVsdDoKICAgICAgYXNzZXJ0KGZhbHNlLCAiZmx1c2ggbXVzdCBiZSBvbmUgb2YgW1wicG9zdFwiLCBcInByZVwiLCBcInN5bmNcIl0sIGJ1dCBnb3QgIiArIG1vZGUpOwogICAgICBicmVhazsKICB9Cn0KCmZ1bmN0aW9uIGNyZWF0ZVZ1ZVdhdGNoZXIodm0sIGdldHRlciwgY2FsbGJhY2ssIG9wdGlvbnMpIHsKICB2YXIgaW5kZXggPSB2bS5fd2F0Y2hlcnMubGVuZ3RoOyAvLyBAdHMtaWdub3JlOiB1c2UgdW5kb2N1bWVudGVkIG9wdGlvbnMKCiAgdm0uJHdhdGNoKGdldHRlciwgY2FsbGJhY2ssIHsKICAgIGltbWVkaWF0ZTogb3B0aW9ucy5pbW1lZGlhdGVJbnZva2VDYWxsYmFjaywKICAgIGRlZXA6IG9wdGlvbnMuZGVlcCwKICAgIGxhenk6IG9wdGlvbnMubm9SdW4sCiAgICBzeW5jOiBvcHRpb25zLnN5bmMsCiAgICBiZWZvcmU6IG9wdGlvbnMuYmVmb3JlCiAgfSk7CiAgcmV0dXJuIHZtLl93YXRjaGVyc1tpbmRleF07Cn0gLy8gV2UgaGF2ZSB0byBtb25rZXlwYXRjaCB0aGUgdGVhcmRvd24gZnVuY3Rpb24gc28gVnVlIHdpbGwgcnVuCi8vIHJ1bkNsZWFudXAoKSB3aGVuIGl0IHRlYXJzIGRvd24gdGhlIHdhdGNoZXIgb24gdW5tb3VudGVkLgoKCmZ1bmN0aW9uIHBhdGNoV2F0Y2hlclRlYXJkb3duKHdhdGNoZXIsIHJ1bkNsZWFudXApIHsKICB2YXIgX3RlYXJkb3duID0gd2F0Y2hlci50ZWFyZG93bjsKCiAgd2F0Y2hlci50ZWFyZG93biA9IGZ1bmN0aW9uICgpIHsKICAgIHZhciBhcmdzID0gW107CgogICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHsKICAgICAgYXJnc1tfaV0gPSBhcmd1bWVudHNbX2ldOwogICAgfQoKICAgIF90ZWFyZG93bi5hcHBseSh3YXRjaGVyLCBhcmdzKTsKCiAgICBydW5DbGVhbnVwKCk7CiAgfTsKfQoKZnVuY3Rpb24gY3JlYXRlV2F0Y2hlcih2bSwgc291cmNlLCBjYiwgb3B0aW9ucykgewogIHZhciBfYTsKCiAgdmFyIGZsdXNoTW9kZSA9IG9wdGlvbnMuZmx1c2g7CiAgdmFyIGlzU3luYyA9IGZsdXNoTW9kZSA9PT0gJ3N5bmMnOwogIHZhciBjbGVhbnVwOwoKICB2YXIgcmVnaXN0ZXJDbGVhbnVwID0gZnVuY3Rpb24gcmVnaXN0ZXJDbGVhbnVwKGZuKSB7CiAgICBjbGVhbnVwID0gZnVuY3Rpb24gY2xlYW51cCgpIHsKICAgICAgdHJ5IHsKICAgICAgICBmbigpOwogICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgIGxvZ0Vycm9yKGVycm9yLCB2bSwgJ29uQ2xlYW51cCgpJyk7CiAgICAgIH0KICAgIH07CiAgfTsgLy8gY2xlYW51cCBiZWZvcmUgcnVubmluZyBnZXR0ZXIgYWdhaW4KCgogIHZhciBydW5DbGVhbnVwID0gZnVuY3Rpb24gcnVuQ2xlYW51cCgpIHsKICAgIGlmIChjbGVhbnVwKSB7CiAgICAgIGNsZWFudXAoKTsKICAgICAgY2xlYW51cCA9IG51bGw7CiAgICB9CiAgfTsKCiAgdmFyIGNyZWF0ZVNjaGVkdWxlciA9IGZ1bmN0aW9uIGNyZWF0ZVNjaGVkdWxlcihmbikgewogICAgaWYgKGlzU3luYyB8fAogICAgLyogd2l0aG91dCBhIGN1cnJlbnQgYWN0aXZlIGluc3RhbmNlLCBpZ25vcmUgcHJlfHBvc3QgbW9kZSAqLwogICAgdm0gPT09IGZhbGxiYWNrVk0pIHsKICAgICAgcmV0dXJuIGZuOwogICAgfQoKICAgIHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBhcmdzID0gW107CgogICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykgewogICAgICAgIGFyZ3NbX2ldID0gYXJndW1lbnRzW19pXTsKICAgICAgfQoKICAgICAgcmV0dXJuIHF1ZXVlRmx1c2hKb2Iodm0sIGZ1bmN0aW9uICgpIHsKICAgICAgICBmbi5hcHBseSh2b2lkIDAsIF9fc3ByZWFkQXJyYXkoW10sIF9fcmVhZChhcmdzKSkpOwogICAgICB9LCBmbHVzaE1vZGUpOwogICAgfTsKICB9OyAvLyBlZmZlY3Qgd2F0Y2gKCgogIGlmIChjYiA9PT0gbnVsbCkgewogICAgdmFyIHJ1bm5pbmdfMSA9IGZhbHNlOwoKICAgIHZhciBnZXR0ZXJfMSA9IGZ1bmN0aW9uIGdldHRlcl8xKCkgewogICAgICAvLyBwcmV2ZW50aW5nIHRoZSB3YXRjaCBjYWxsYmFjayBiZWluZyBjYWxsIGluIHRoZSBzYW1lIGV4ZWN1dGlvbgogICAgICBpZiAocnVubmluZ18xKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB0cnkgewogICAgICAgIHJ1bm5pbmdfMSA9IHRydWU7CiAgICAgICAgc291cmNlKHJlZ2lzdGVyQ2xlYW51cCk7CiAgICAgIH0gZmluYWxseSB7CiAgICAgICAgcnVubmluZ18xID0gZmFsc2U7CiAgICAgIH0KICAgIH07CgogICAgdmFyIHdhdGNoZXJfMSA9IGNyZWF0ZVZ1ZVdhdGNoZXIodm0sIGdldHRlcl8xLCBub29wRm4sIHsKICAgICAgZGVlcDogb3B0aW9ucy5kZWVwIHx8IGZhbHNlLAogICAgICBzeW5jOiBpc1N5bmMsCiAgICAgIGJlZm9yZTogcnVuQ2xlYW51cAogICAgfSk7CiAgICBwYXRjaFdhdGNoZXJUZWFyZG93bih3YXRjaGVyXzEsIHJ1bkNsZWFudXApOyAvLyBlbmFibGUgdGhlIHdhdGNoZXIgdXBkYXRlCgogICAgd2F0Y2hlcl8xLmxhenkgPSBmYWxzZTsKICAgIHZhciBvcmlnaW5HZXQgPSB3YXRjaGVyXzEuZ2V0LmJpbmQod2F0Y2hlcl8xKTsgLy8gYWx3YXlzIHJ1biB3YXRjaEVmZmVjdAoKICAgIHdhdGNoZXJfMS5nZXQgPSBjcmVhdGVTY2hlZHVsZXIob3JpZ2luR2V0KTsKICAgIHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICAgIHdhdGNoZXJfMS50ZWFyZG93bigpOwogICAgfTsKICB9CgogIHZhciBkZWVwID0gb3B0aW9ucy5kZWVwOwogIHZhciBnZXR0ZXI7CgogIGlmIChBcnJheS5pc0FycmF5KHNvdXJjZSkpIHsKICAgIGdldHRlciA9IGZ1bmN0aW9uIGdldHRlcigpIHsKICAgICAgcmV0dXJuIHNvdXJjZS5tYXAoZnVuY3Rpb24gKHMpIHsKICAgICAgICByZXR1cm4gaXNSZWYocykgPyBzLnZhbHVlIDogcygpOwogICAgICB9KTsKICAgIH07CiAgfSBlbHNlIGlmIChpc1JlZihzb3VyY2UpKSB7CiAgICBnZXR0ZXIgPSBmdW5jdGlvbiBnZXR0ZXIoKSB7CiAgICAgIHJldHVybiBzb3VyY2UudmFsdWU7CiAgICB9OwogIH0gZWxzZSBpZiAoaXNSZWFjdGl2ZShzb3VyY2UpKSB7CiAgICBnZXR0ZXIgPSBmdW5jdGlvbiBnZXR0ZXIoKSB7CiAgICAgIHJldHVybiBzb3VyY2U7CiAgICB9OwoKICAgIGRlZXAgPSB0cnVlOwogIH0gZWxzZSBpZiAoaXNGdW5jdGlvbihzb3VyY2UpKSB7CiAgICBnZXR0ZXIgPSBzb3VyY2U7CiAgfSBlbHNlIHsKICAgIGdldHRlciA9IG5vb3BGbjsKICAgIHdhcm4kMSgiSW52YWxpZCB3YXRjaCBzb3VyY2U6ICIgKyBKU09OLnN0cmluZ2lmeShzb3VyY2UpICsgIi5cbiAgICAgIEEgd2F0Y2ggc291cmNlIGNhbiBvbmx5IGJlIGEgZ2V0dGVyL2VmZmVjdCBmdW5jdGlvbiwgYSByZWYsIGEgcmVhY3RpdmUgb2JqZWN0LCBvciBhbiBhcnJheSBvZiB0aGVzZSB0eXBlcy4iLCB2bSk7CiAgfQoKICB2YXIgYXBwbHlDYiA9IGZ1bmN0aW9uIGFwcGx5Q2IobiwgbykgewogICAgLy8gY2xlYW51cCBiZWZvcmUgcnVubmluZyBjYiBhZ2FpbgogICAgcnVuQ2xlYW51cCgpOwogICAgY2IobiwgbywgcmVnaXN0ZXJDbGVhbnVwKTsKICB9OwoKICB2YXIgY2FsbGJhY2sgPSBjcmVhdGVTY2hlZHVsZXIoYXBwbHlDYik7CgogIGlmIChvcHRpb25zLmltbWVkaWF0ZSkgewogICAgdmFyIG9yaWdpbmFsQ2FsbGJhY2tfMSA9IGNhbGxiYWNrOyAvLyBgc2hpZnRDYWxsYmFja2AgaXMgdXNlZCB0byBoYW5kbGUgdGhlIGZpcnN0IHN5bmMgZWZmZWN0IHJ1bi4KICAgIC8vIFRoZSBzdWJzZXF1ZW50IGNhbGxiYWNrcyB3aWxsIHJlZGlyZWN0IHRvIGBjYWxsYmFja2AuCgogICAgdmFyIF9zaGlmdENhbGxiYWNrXyA9IGZ1bmN0aW9uIHNoaWZ0Q2FsbGJhY2tfMShuLCBvKSB7CiAgICAgIF9zaGlmdENhbGxiYWNrXyA9IG9yaWdpbmFsQ2FsbGJhY2tfMTsKICAgICAgYXBwbHlDYihuLCBvKTsKICAgIH07CgogICAgY2FsbGJhY2sgPSBmdW5jdGlvbiBjYWxsYmFjayhuLCBvKSB7CiAgICAgIF9zaGlmdENhbGxiYWNrXyhuLCBvKTsKICAgIH07CiAgfSAvLyBAdHMtaWdub3JlOiB1c2UgdW5kb2N1bWVudGVkIG9wdGlvbiAic3luYyIKCgogIHZhciBzdG9wID0gdm0uJHdhdGNoKGdldHRlciwgY2FsbGJhY2ssIHsKICAgIGltbWVkaWF0ZTogb3B0aW9ucy5pbW1lZGlhdGUsCiAgICBkZWVwOiBkZWVwLAogICAgc3luYzogaXNTeW5jCiAgfSk7IC8vIE9uY2UgYWdhaW4sIHdlIGhhdmUgdG8gaGFjayB0aGUgd2F0Y2hlciBmb3IgcHJvcGVyIHRlYXJkb3duCgogIHZhciB3YXRjaGVyID0gdm0uX3dhdGNoZXJzW3ZtLl93YXRjaGVycy5sZW5ndGggLSAxXTsgLy8gaWYgdGhlIHJldHVybiB2YWx1ZSBpcyByZWFjdGl2ZSBhbmQgZGVlcDp0cnVlCiAgLy8gd2F0Y2ggZm9yIGNoYW5nZXMsIHRoaXMgbWlnaHQgaGFwcGVuIHdoZW4gbmV3IGtleSBpcyBhZGRlZAoKICBpZiAoaXNSZWFjdGl2ZSh3YXRjaGVyLnZhbHVlKSAmJiAoKF9hID0gd2F0Y2hlci52YWx1ZS5fX29iX18pID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5kZXApICYmIGRlZXApIHsKICAgIHdhdGNoZXIudmFsdWUuX19vYl9fLmRlcC5hZGRTdWIoewogICAgICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZSgpIHsKICAgICAgICAvLyB0aGlzIHdpbGwgZm9yY2UgdGhlIHNvdXJjZSB0byBiZSByZXZhbHVhdGVkIGFuZCB0aGUgY2FsbGJhY2sKICAgICAgICAvLyBleGVjdXRlZCBpZiBuZWVkZWQKICAgICAgICB3YXRjaGVyLnJ1bigpOwogICAgICB9CiAgICB9KTsKICB9CgogIHBhdGNoV2F0Y2hlclRlYXJkb3duKHdhdGNoZXIsIHJ1bkNsZWFudXApOwogIHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICBzdG9wKCk7CiAgfTsKfQoKZnVuY3Rpb24gd2F0Y2hFZmZlY3QoZWZmZWN0LCBvcHRpb25zKSB7CiAgdmFyIG9wdHMgPSBnZXRXYXRjaEVmZmVjdE9wdGlvbihvcHRpb25zKTsKICB2YXIgdm0gPSBnZXRXYXRjaGVyVk0oKTsKICByZXR1cm4gY3JlYXRlV2F0Y2hlcih2bSwgZWZmZWN0LCBudWxsLCBvcHRzKTsKfSAvLyBpbXBsZW1lbnRhdGlvbgoKCmZ1bmN0aW9uIHdhdGNoKHNvdXJjZSwgY2IsIG9wdGlvbnMpIHsKICB2YXIgY2FsbGJhY2sgPSBudWxsOwoKICBpZiAodHlwZW9mIGNiID09PSAnZnVuY3Rpb24nKSB7CiAgICAvLyBzb3VyY2Ugd2F0Y2gKICAgIGNhbGxiYWNrID0gY2I7CiAgfSBlbHNlIHsKICAgIC8vIGVmZmVjdCB3YXRjaAogICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHsKICAgICAgd2FybiQxKCJgd2F0Y2goZm4sIG9wdGlvbnM/KWAgc2lnbmF0dXJlIGhhcyBiZWVuIG1vdmVkIHRvIGEgc2VwYXJhdGUgQVBJLiAiICsgIlVzZSBgd2F0Y2hFZmZlY3QoZm4sIG9wdGlvbnM/KWAgaW5zdGVhZC4gYHdhdGNoYCBub3cgb25seSAiICsgInN1cHBvcnRzIGB3YXRjaChzb3VyY2UsIGNiLCBvcHRpb25zPykgc2lnbmF0dXJlLiIpOwogICAgfQoKICAgIG9wdGlvbnMgPSBjYjsKICAgIGNhbGxiYWNrID0gbnVsbDsKICB9CgogIHZhciBvcHRzID0gZ2V0V2F0Y2hlck9wdGlvbihvcHRpb25zKTsKICB2YXIgdm0gPSBnZXRXYXRjaGVyVk0oKTsKICByZXR1cm4gY3JlYXRlV2F0Y2hlcih2bSwgc291cmNlLCBjYWxsYmFjaywgb3B0cyk7Cn0gLy8gaW1wbGVtZW50CgoKZnVuY3Rpb24gY29tcHV0ZWQoZ2V0dGVyT3JPcHRpb25zKSB7CiAgdmFyIF9hOwoKICB2YXIgdm0gPSAoX2EgPSBnZXRDdXJyZW50SW5zdGFuY2UoKSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnByb3h5OwogIHZhciBnZXR0ZXI7CiAgdmFyIHNldHRlcjsKCiAgaWYgKHR5cGVvZiBnZXR0ZXJPck9wdGlvbnMgPT09ICdmdW5jdGlvbicpIHsKICAgIGdldHRlciA9IGdldHRlck9yT3B0aW9uczsKICB9IGVsc2UgewogICAgZ2V0dGVyID0gZ2V0dGVyT3JPcHRpb25zLmdldDsKICAgIHNldHRlciA9IGdldHRlck9yT3B0aW9ucy5zZXQ7CiAgfQoKICB2YXIgY29tcHV0ZWRTZXR0ZXI7CiAgdmFyIGNvbXB1dGVkR2V0dGVyOwoKICBpZiAodm0gJiYgIXZtLiRpc1NlcnZlcikgewogICAgdmFyIF9iID0gZ2V0VnVlSW50ZXJuYWxDbGFzc2VzKCksCiAgICAgICAgV2F0Y2hlcl8xID0gX2IuV2F0Y2hlciwKICAgICAgICBEZXBfMSA9IF9iLkRlcDsKCiAgICB2YXIgd2F0Y2hlcl8xOwoKICAgIGNvbXB1dGVkR2V0dGVyID0gZnVuY3Rpb24gY29tcHV0ZWRHZXR0ZXIoKSB7CiAgICAgIGlmICghd2F0Y2hlcl8xKSB7CiAgICAgICAgd2F0Y2hlcl8xID0gbmV3IFdhdGNoZXJfMSh2bSwgZ2V0dGVyLCBub29wRm4sIHsKICAgICAgICAgIGxhenk6IHRydWUKICAgICAgICB9KTsKICAgICAgfQoKICAgICAgaWYgKHdhdGNoZXJfMS5kaXJ0eSkgewogICAgICAgIHdhdGNoZXJfMS5ldmFsdWF0ZSgpOwogICAgICB9CgogICAgICBpZiAoRGVwXzEudGFyZ2V0KSB7CiAgICAgICAgd2F0Y2hlcl8xLmRlcGVuZCgpOwogICAgICB9CgogICAgICByZXR1cm4gd2F0Y2hlcl8xLnZhbHVlOwogICAgfTsKCiAgICBjb21wdXRlZFNldHRlciA9IGZ1bmN0aW9uIGNvbXB1dGVkU2V0dGVyKHYpIHsKICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgIXNldHRlcikgewogICAgICAgIHdhcm4kMSgnV3JpdGUgb3BlcmF0aW9uIGZhaWxlZDogY29tcHV0ZWQgdmFsdWUgaXMgcmVhZG9ubHkuJywgdm0pOwogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgaWYgKHNldHRlcikgewogICAgICAgIHNldHRlcih2KTsKICAgICAgfQogICAgfTsKICB9IGVsc2UgewogICAgLy8gZmFsbGJhY2sKICAgIHZhciBjb21wdXRlZEhvc3RfMSA9IGRlZmluZUNvbXBvbmVudEluc3RhbmNlKGdldFZ1ZUNvbnN0cnVjdG9yKCksIHsKICAgICAgY29tcHV0ZWQ6IHsKICAgICAgICAkJHN0YXRlOiB7CiAgICAgICAgICBnZXQ6IGdldHRlciwKICAgICAgICAgIHNldDogc2V0dGVyCiAgICAgICAgfQogICAgICB9CiAgICB9KTsKICAgIHZtICYmIHZtLiRvbignaG9vazpkZXN0cm95ZWQnLCBmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiBjb21wdXRlZEhvc3RfMS4kZGVzdHJveSgpOwogICAgfSk7CgogICAgY29tcHV0ZWRHZXR0ZXIgPSBmdW5jdGlvbiBjb21wdXRlZEdldHRlcigpIHsKICAgICAgcmV0dXJuIGNvbXB1dGVkSG9zdF8xLiQkc3RhdGU7CiAgICB9OwoKICAgIGNvbXB1dGVkU2V0dGVyID0gZnVuY3Rpb24gY29tcHV0ZWRTZXR0ZXIodikgewogICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiAhc2V0dGVyKSB7CiAgICAgICAgd2FybiQxKCdXcml0ZSBvcGVyYXRpb24gZmFpbGVkOiBjb21wdXRlZCB2YWx1ZSBpcyByZWFkb25seS4nLCB2bSk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBjb21wdXRlZEhvc3RfMS4kJHN0YXRlID0gdjsKICAgIH07CiAgfQoKICByZXR1cm4gY3JlYXRlUmVmKHsKICAgIGdldDogY29tcHV0ZWRHZXR0ZXIsCiAgICBzZXQ6IGNvbXB1dGVkU2V0dGVyCiAgfSk7Cn0KCnZhciBOT1RfRk9VTkQgPSB7fTsKCmZ1bmN0aW9uIHJlc29sdmVJbmplY3QocHJvdmlkZUtleSwgdm0pIHsKICB2YXIgc291cmNlID0gdm07CgogIHdoaWxlIChzb3VyY2UpIHsKICAgIC8vIEB0cy1pZ25vcmUKICAgIGlmIChzb3VyY2UuX3Byb3ZpZGVkICYmIGhhc093bihzb3VyY2UuX3Byb3ZpZGVkLCBwcm92aWRlS2V5KSkgewogICAgICAvL0B0cy1pZ25vcmUKICAgICAgcmV0dXJuIHNvdXJjZS5fcHJvdmlkZWRbcHJvdmlkZUtleV07CiAgICB9CgogICAgc291cmNlID0gc291cmNlLiRwYXJlbnQ7CiAgfQoKICByZXR1cm4gTk9UX0ZPVU5EOwp9CgpmdW5jdGlvbiBwcm92aWRlKGtleSwgdmFsdWUpIHsKICB2YXIgdm0gPSBjdXJyZW50Vk1JbkZuKCdwcm92aWRlJyk7CiAgaWYgKCF2bSkgcmV0dXJuOwoKICBpZiAoIXZtLl9wcm92aWRlZCkgewogICAgdmFyIHByb3ZpZGVDYWNoZV8xID0ge307CiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodm0sICdfcHJvdmlkZWQnLCB7CiAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICAgIHJldHVybiBwcm92aWRlQ2FjaGVfMTsKICAgICAgfSwKICAgICAgc2V0OiBmdW5jdGlvbiBzZXQodikgewogICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKHByb3ZpZGVDYWNoZV8xLCB2KTsKICAgICAgfQogICAgfSk7CiAgfQoKICB2bS5fcHJvdmlkZWRba2V5XSA9IHZhbHVlOwp9CgpmdW5jdGlvbiBpbmplY3Qoa2V5LCBkZWZhdWx0VmFsdWUsIHRyZWF0RGVmYXVsdEFzRmFjdG9yeSkgewogIHZhciBfYTsKCiAgaWYgKHRyZWF0RGVmYXVsdEFzRmFjdG9yeSA9PT0gdm9pZCAwKSB7CiAgICB0cmVhdERlZmF1bHRBc0ZhY3RvcnkgPSBmYWxzZTsKICB9CgogIGlmICgha2V5KSB7CiAgICByZXR1cm4gZGVmYXVsdFZhbHVlOwogIH0KCiAgdmFyIHZtID0gKF9hID0gZ2V0Q3VycmVudEluc3RhbmNlKCkpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5wcm94eTsKCiAgaWYgKCF2bSkgewogICAgd2FybiQxKCJpbmplY3QoKSBjYW4gb25seSBiZSB1c2VkIGluc2lkZSBzZXR1cCgpIG9yIGZ1bmN0aW9uYWwgY29tcG9uZW50cy4iKTsKICAgIHJldHVybjsKICB9CgogIHZhciB2YWwgPSByZXNvbHZlSW5qZWN0KGtleSwgdm0pOwoKICBpZiAodmFsICE9PSBOT1RfRk9VTkQpIHsKICAgIHJldHVybiB2YWw7CiAgfQoKICBpZiAoZGVmYXVsdFZhbHVlID09PSB1bmRlZmluZWQgJiYgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgewogICAgd2FybiQxKCJJbmplY3Rpb24gXCIiICsgU3RyaW5nKGtleSkgKyAiXCIgbm90IGZvdW5kIiwgdm0pOwogIH0KCiAgcmV0dXJuIHRyZWF0RGVmYXVsdEFzRmFjdG9yeSAmJiBpc0Z1bmN0aW9uKGRlZmF1bHRWYWx1ZSkgPyBkZWZhdWx0VmFsdWUoKSA6IGRlZmF1bHRWYWx1ZTsKfQoKdmFyIEVNUFRZX09CSiA9IHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyBPYmplY3QuZnJlZXplKHt9KSA6IHt9OwoKdmFyIHVzZUNzc01vZHVsZSA9IGZ1bmN0aW9uIHVzZUNzc01vZHVsZShuYW1lKSB7CiAgdmFyIF9hOwoKICBpZiAobmFtZSA9PT0gdm9pZCAwKSB7CiAgICBuYW1lID0gJyRzdHlsZSc7CiAgfQoKICB2YXIgaW5zdGFuY2UgPSBnZXRDdXJyZW50SW5zdGFuY2UoKTsKCiAgaWYgKCFpbnN0YW5jZSkgewogICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuJDEoInVzZUNzc01vZHVsZSBtdXN0IGJlIGNhbGxlZCBpbnNpZGUgc2V0dXAoKSIpOwogICAgcmV0dXJuIEVNUFRZX09CSjsKICB9CgogIHZhciBtb2QgPSAoX2EgPSBpbnN0YW5jZS5wcm94eSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hW25hbWVdOwoKICBpZiAoIW1vZCkgewogICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuJDEoIkN1cnJlbnQgaW5zdGFuY2UgZG9lcyBub3QgaGF2ZSBDU1MgbW9kdWxlIG5hbWVkIFwiIiArIG5hbWUgKyAiXCIuIik7CiAgICByZXR1cm4gRU1QVFlfT0JKOwogIH0KCiAgcmV0dXJuIG1vZDsKfTsKLyoqDQogKiBAZGVwcmVjYXRlZCB1c2UgYHVzZUNzc01vZHVsZWAgaW5zdGVhZC4NCiAqLwoKCnZhciB1c2VDU1NNb2R1bGUgPSB1c2VDc3NNb2R1bGU7CgpmdW5jdGlvbiBjcmVhdGVBcHAocm9vdENvbXBvbmVudCwgcm9vdFByb3BzKSB7CiAgaWYgKHJvb3RQcm9wcyA9PT0gdm9pZCAwKSB7CiAgICByb290UHJvcHMgPSB1bmRlZmluZWQ7CiAgfQoKICB2YXIgViA9IGdldFZ1ZUNvbnN0cnVjdG9yKCk7CiAgdmFyIG1vdW50ZWRWTSA9IHVuZGVmaW5lZDsKICByZXR1cm4gewogICAgY29uZmlnOiBWLmNvbmZpZywKICAgIHVzZTogVi51c2UuYmluZChWKSwKICAgIG1peGluOiBWLm1peGluLmJpbmQoViksCiAgICBjb21wb25lbnQ6IFYuY29tcG9uZW50LmJpbmQoViksCiAgICBkaXJlY3RpdmU6IFYuZGlyZWN0aXZlLmJpbmQoViksCiAgICBtb3VudDogZnVuY3Rpb24gbW91bnQoZWwsIGh5ZHJhdGluZykgewogICAgICBpZiAoIW1vdW50ZWRWTSkgewogICAgICAgIG1vdW50ZWRWTSA9IG5ldyBWKF9hc3NpZ24oewogICAgICAgICAgcHJvcHNEYXRhOiByb290UHJvcHMKICAgICAgICB9LCByb290Q29tcG9uZW50KSk7CiAgICAgICAgbW91bnRlZFZNLiRtb3VudChlbCwgaHlkcmF0aW5nKTsKICAgICAgICByZXR1cm4gbW91bnRlZFZNOwogICAgICB9IGVsc2UgewogICAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7CiAgICAgICAgICB3YXJuJDEoIkFwcCBoYXMgYWxyZWFkeSBiZWVuIG1vdW50ZWQuXG4iICsgIklmIHlvdSB3YW50IHRvIHJlbW91bnQgdGhlIHNhbWUgYXBwLCBtb3ZlIHlvdXIgYXBwIGNyZWF0aW9uIGxvZ2ljICIgKyAiaW50byBhIGZhY3RvcnkgZnVuY3Rpb24gYW5kIGNyZWF0ZSBmcmVzaCBhcHAgaW5zdGFuY2VzIGZvciBlYWNoICIgKyAibW91bnQgLSBlLmcuIGBjb25zdCBjcmVhdGVNeUFwcCA9ICgpID0+IGNyZWF0ZUFwcChBcHApYCIpOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIG1vdW50ZWRWTTsKICAgICAgfQogICAgfSwKICAgIHVubW91bnQ6IGZ1bmN0aW9uIHVubW91bnQoKSB7CiAgICAgIGlmIChtb3VudGVkVk0pIHsKICAgICAgICBtb3VudGVkVk0uJGRlc3Ryb3koKTsKICAgICAgICBtb3VudGVkVk0gPSB1bmRlZmluZWQ7CiAgICAgIH0gZWxzZSBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgewogICAgICAgIHdhcm4kMSgiQ2Fubm90IHVubW91bnQgYW4gYXBwIHRoYXQgaXMgbm90IG1vdW50ZWQuIik7CiAgICAgIH0KICAgIH0KICB9Owp9Cgp2YXIgbmV4dFRpY2sgPSBmdW5jdGlvbiBuZXh0VGljaygpIHsKICB2YXIgX2E7CgogIHZhciBhcmdzID0gW107CgogIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7CiAgICBhcmdzW19pXSA9IGFyZ3VtZW50c1tfaV07CiAgfQoKICByZXR1cm4gKF9hID0gZ2V0VnVlQ29uc3RydWN0b3IoKSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLm5leHRUaWNrLmFwcGx5KHRoaXMsIGFyZ3MpOwp9OwoKdmFyIGZhbGxiYWNrQ3JlYXRlRWxlbWVudDsKCnZhciBjcmVhdGVFbGVtZW50ID0gZnVuY3Rpb24gY3JlYXRlRWxlbWVudCgpIHsKICB2YXIgX2E7CgogIHZhciBhcmdzID0gW107CgogIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7CiAgICBhcmdzW19pXSA9IGFyZ3VtZW50c1tfaV07CiAgfQoKICB2YXIgaW5zdGFuY2UgPSAoX2EgPSBnZXRDdXJyZW50SW5zdGFuY2UoKSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnByb3h5OwoKICBpZiAoIWluc3RhbmNlKSB7CiAgICB3YXJuJDEoJ2BjcmVhdGVFbGVtZW50KClgIGhhcyBiZWVuIGNhbGxlZCBvdXRzaWRlIG9mIHJlbmRlciBmdW5jdGlvbi4nKTsKCiAgICBpZiAoIWZhbGxiYWNrQ3JlYXRlRWxlbWVudCkgewogICAgICBmYWxsYmFja0NyZWF0ZUVsZW1lbnQgPSBkZWZpbmVDb21wb25lbnRJbnN0YW5jZShnZXRWdWVDb25zdHJ1Y3RvcigpKS4kY3JlYXRlRWxlbWVudDsKICAgIH0KCiAgICByZXR1cm4gZmFsbGJhY2tDcmVhdGVFbGVtZW50LmFwcGx5KGZhbGxiYWNrQ3JlYXRlRWxlbWVudCwgYXJncyk7CiAgfQoKICByZXR1cm4gaW5zdGFuY2UuJGNyZWF0ZUVsZW1lbnQuYXBwbHkoaW5zdGFuY2UsIGFyZ3MpOwp9OwovKioNCiAqIERpc3BsYXlzIGEgd2FybmluZyBtZXNzYWdlICh1c2luZyBjb25zb2xlLmVycm9yKSB3aXRoIGEgc3RhY2sgdHJhY2UgaWYgdGhlDQogKiBmdW5jdGlvbiBpcyBjYWxsZWQgaW5zaWRlIG9mIGFjdGl2ZSBjb21wb25lbnQuDQogKg0KICogQHBhcmFtIG1lc3NhZ2Ugd2FybmluZyBtZXNzYWdlIHRvIGJlIGRpc3BsYXllZA0KICovCgoKZnVuY3Rpb24gd2FybihtZXNzYWdlKSB7CiAgdmFyIF9hOwoKICB3YXJuJDEobWVzc2FnZSwgKF9hID0gZ2V0Q3VycmVudEluc3RhbmNlKCkpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5wcm94eSk7Cn0KCmZ1bmN0aW9uIHNldCh2bSwga2V5LCB2YWx1ZSkgewogIHZhciBzdGF0ZSA9IHZtLl9fY29tcG9zaXRpb25fYXBpX3N0YXRlX18gPSB2bS5fX2NvbXBvc2l0aW9uX2FwaV9zdGF0ZV9fIHx8IHt9OwogIHN0YXRlW2tleV0gPSB2YWx1ZTsKfQoKZnVuY3Rpb24gZ2V0KHZtLCBrZXkpIHsKICByZXR1cm4gKHZtLl9fY29tcG9zaXRpb25fYXBpX3N0YXRlX18gfHwge30pW2tleV07Cn0KCnZhciB2bVN0YXRlTWFuYWdlciA9IHsKICBzZXQ6IHNldCwKICBnZXQ6IGdldAp9OwoKZnVuY3Rpb24gYXNWbVByb3BlcnR5KHZtLCBwcm9wTmFtZSwgcHJvcFZhbHVlKSB7CiAgdmFyIHByb3BzID0gdm0uJG9wdGlvbnMucHJvcHM7CgogIGlmICghKHByb3BOYW1lIGluIHZtKSAmJiAhKHByb3BzICYmIGhhc093bihwcm9wcywgcHJvcE5hbWUpKSkgewogICAgaWYgKGlzUmVmKHByb3BWYWx1ZSkpIHsKICAgICAgcHJveHkodm0sIHByb3BOYW1lLCB7CiAgICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgICAgICByZXR1cm4gcHJvcFZhbHVlLnZhbHVlOwogICAgICAgIH0sCiAgICAgICAgc2V0OiBmdW5jdGlvbiBzZXQodmFsKSB7CiAgICAgICAgICBwcm9wVmFsdWUudmFsdWUgPSB2YWw7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0gZWxzZSB7CiAgICAgIC8vIEB0cy1pZ25vcmUKICAgICAgdm1bcHJvcE5hbWVdID0gcHJvcFZhbHVlOwogICAgfQoKICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7CiAgICAgIC8vIGV4cG9zZSBiaW5kaW5nIHRvIFZ1ZSBEZXZ0b29sIGFzIGEgZGF0YSBwcm9wZXJ0eQogICAgICAvLyBkZWxheSB0aGlzIHVudGlsIHN0YXRlIGhhcyBiZWVuIHJlc29sdmVkIHRvIHByZXZlbnQgcmVwZWF0ZWQgd29ya3MKICAgICAgdm0uJG5leHRUaWNrKGZ1bmN0aW9uICgpIHsKICAgICAgICBpZiAoaXNSZWYocHJvcFZhbHVlKSkgewogICAgICAgICAgcHJveHkodm0uX2RhdGEsIHByb3BOYW1lLCB7CiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICAgICAgICAgIHJldHVybiBwcm9wVmFsdWUudmFsdWU7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHNldDogZnVuY3Rpb24gc2V0KHZhbCkgewogICAgICAgICAgICAgIHByb3BWYWx1ZS52YWx1ZSA9IHZhbDsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHZtLl9kYXRhW3Byb3BOYW1lXSA9IHByb3BWYWx1ZTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfQogIH0gZWxzZSBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgewogICAgaWYgKHByb3BzICYmIGhhc093bihwcm9wcywgcHJvcE5hbWUpKSB7CiAgICAgIHdhcm4kMSgiVGhlIHNldHVwIGJpbmRpbmcgcHJvcGVydHkgXCIiICsgcHJvcE5hbWUgKyAiXCIgaXMgYWxyZWFkeSBkZWNsYXJlZCBhcyBhIHByb3AuIiwgdm0pOwogICAgfSBlbHNlIHsKICAgICAgd2FybiQxKCJUaGUgc2V0dXAgYmluZGluZyBwcm9wZXJ0eSBcIiIgKyBwcm9wTmFtZSArICJcIiBpcyBhbHJlYWR5IGRlY2xhcmVkLiIsIHZtKTsKICAgIH0KICB9Cn0KCmZ1bmN0aW9uIHVwZGF0ZVRlbXBsYXRlUmVmKHZtKSB7CiAgdmFyIHJhd0JpbmRpbmdzID0gdm1TdGF0ZU1hbmFnZXIuZ2V0KHZtLCAncmF3QmluZGluZ3MnKSB8fCB7fTsKICBpZiAoIXJhd0JpbmRpbmdzIHx8ICFPYmplY3Qua2V5cyhyYXdCaW5kaW5ncykubGVuZ3RoKSByZXR1cm47CiAgdmFyIHJlZnMgPSB2bS4kcmVmczsKICB2YXIgb2xkUmVmS2V5cyA9IHZtU3RhdGVNYW5hZ2VyLmdldCh2bSwgJ3JlZnMnKSB8fCBbXTsKCiAgZm9yICh2YXIgaW5kZXggPSAwOyBpbmRleCA8IG9sZFJlZktleXMubGVuZ3RoOyBpbmRleCsrKSB7CiAgICB2YXIga2V5ID0gb2xkUmVmS2V5c1tpbmRleF07CiAgICB2YXIgc2V0dXBWYWx1ZSA9IHJhd0JpbmRpbmdzW2tleV07CgogICAgaWYgKCFyZWZzW2tleV0gJiYgc2V0dXBWYWx1ZSAmJiBpc1JlZihzZXR1cFZhbHVlKSkgewogICAgICBzZXR1cFZhbHVlLnZhbHVlID0gbnVsbDsKICAgIH0KICB9CgogIHZhciBuZXdLZXlzID0gT2JqZWN0LmtleXMocmVmcyk7CiAgdmFyIHZhbGlkTmV3S2V5cyA9IFtdOwoKICBmb3IgKHZhciBpbmRleCA9IDA7IGluZGV4IDwgbmV3S2V5cy5sZW5ndGg7IGluZGV4KyspIHsKICAgIHZhciBrZXkgPSBuZXdLZXlzW2luZGV4XTsKICAgIHZhciBzZXR1cFZhbHVlID0gcmF3QmluZGluZ3Nba2V5XTsKCiAgICBpZiAocmVmc1trZXldICYmIHNldHVwVmFsdWUgJiYgaXNSZWYoc2V0dXBWYWx1ZSkpIHsKICAgICAgc2V0dXBWYWx1ZS52YWx1ZSA9IHJlZnNba2V5XTsKICAgICAgdmFsaWROZXdLZXlzLnB1c2goa2V5KTsKICAgIH0KICB9CgogIHZtU3RhdGVNYW5hZ2VyLnNldCh2bSwgJ3JlZnMnLCB2YWxpZE5ld0tleXMpOwp9CgpmdW5jdGlvbiByZXNvbHZlU2NvcGVkU2xvdHModm0sIHNsb3RzUHJveHkpIHsKICB2YXIgcGFyZW50Vk5vZGUgPSB2bS4kb3B0aW9ucy5fcGFyZW50Vm5vZGU7CiAgaWYgKCFwYXJlbnRWTm9kZSkgcmV0dXJuOwogIHZhciBwcmV2U2xvdHMgPSB2bVN0YXRlTWFuYWdlci5nZXQodm0sICdzbG90cycpIHx8IFtdOwogIHZhciBjdXJTbG90cyA9IHJlc29sdmVTbG90cyhwYXJlbnRWTm9kZS5kYXRhLnNjb3BlZFNsb3RzLCB2bS4kc2xvdHMpOyAvLyByZW1vdmUgc3RhbGVkIHNsb3RzCgogIGZvciAodmFyIGluZGV4ID0gMDsgaW5kZXggPCBwcmV2U2xvdHMubGVuZ3RoOyBpbmRleCsrKSB7CiAgICB2YXIga2V5ID0gcHJldlNsb3RzW2luZGV4XTsKCiAgICBpZiAoIWN1clNsb3RzW2tleV0pIHsKICAgICAgZGVsZXRlIHNsb3RzUHJveHlba2V5XTsKICAgIH0KICB9IC8vIHByb3h5IGZyZXNoIHNsb3RzCgoKICB2YXIgc2xvdE5hbWVzID0gT2JqZWN0LmtleXMoY3VyU2xvdHMpOwoKICBmb3IgKHZhciBpbmRleCA9IDA7IGluZGV4IDwgc2xvdE5hbWVzLmxlbmd0aDsgaW5kZXgrKykgewogICAgdmFyIGtleSA9IHNsb3ROYW1lc1tpbmRleF07CgogICAgaWYgKCFzbG90c1Byb3h5W2tleV0pIHsKICAgICAgc2xvdHNQcm94eVtrZXldID0gY3JlYXRlU2xvdFByb3h5KHZtLCBrZXkpOwogICAgfQogIH0KCiAgdm1TdGF0ZU1hbmFnZXIuc2V0KHZtLCAnc2xvdHMnLCBzbG90TmFtZXMpOwp9CgpmdW5jdGlvbiBhY3RpdmF0ZUN1cnJlbnRJbnN0YW5jZSh2bSwgZm4sIG9uRXJyb3IpIHsKICB2YXIgcHJlVm0gPSBnZXRDdXJyZW50VnVlMkluc3RhbmNlKCk7CiAgc2V0Q3VycmVudEluc3RhbmNlKHZtKTsKCiAgdHJ5IHsKICAgIHJldHVybiBmbih2bSk7CiAgfSBjYXRjaCAoZXJyKSB7CiAgICBpZiAob25FcnJvcikgewogICAgICBvbkVycm9yKGVycik7CiAgICB9IGVsc2UgewogICAgICB0aHJvdyBlcnI7CiAgICB9CiAgfSBmaW5hbGx5IHsKICAgIHNldEN1cnJlbnRJbnN0YW5jZShwcmVWbSk7CiAgfQp9CgpmdW5jdGlvbiBtaXhpbihWdWUpIHsKICBWdWUubWl4aW4oewogICAgYmVmb3JlQ3JlYXRlOiBmdW5jdGlvbkFwaUluaXQsCiAgICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgICB1cGRhdGVUZW1wbGF0ZVJlZih0aGlzKTsKICAgIH0sCiAgICB1cGRhdGVkOiBmdW5jdGlvbiB1cGRhdGVkKCkgewogICAgICB1cGRhdGVUZW1wbGF0ZVJlZih0aGlzKTsKICAgIH0KICB9KTsKICAvKioNCiAgICogVnVleCBpbml0IGhvb2ssIGluamVjdGVkIGludG8gZWFjaCBpbnN0YW5jZXMgaW5pdCBob29rcyBsaXN0Lg0KICAgKi8KCiAgZnVuY3Rpb24gZnVuY3Rpb25BcGlJbml0KCkgewogICAgdmFyIHZtID0gdGhpczsKICAgIHZhciAkb3B0aW9ucyA9IHZtLiRvcHRpb25zOwogICAgdmFyIHNldHVwID0gJG9wdGlvbnMuc2V0dXAsCiAgICAgICAgcmVuZGVyID0gJG9wdGlvbnMucmVuZGVyOwoKICAgIGlmIChyZW5kZXIpIHsKICAgICAgLy8ga2VlcCBjdXJyZW50SW5zdGFuY2UgYWNjZXNzaWJsZSBmb3IgY3JlYXRlRWxlbWVudAogICAgICAkb3B0aW9ucy5yZW5kZXIgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgICAgdmFyIGFyZ3MgPSBbXTsKCiAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHsKICAgICAgICAgIGFyZ3NbX2ldID0gYXJndW1lbnRzW19pXTsKICAgICAgICB9CgogICAgICAgIHJldHVybiBhY3RpdmF0ZUN1cnJlbnRJbnN0YW5jZSh2bSwgZnVuY3Rpb24gKCkgewogICAgICAgICAgcmV0dXJuIHJlbmRlci5hcHBseShfdGhpcywgYXJncyk7CiAgICAgICAgfSk7CiAgICAgIH07CiAgICB9CgogICAgaWYgKCFzZXR1cCkgewogICAgICByZXR1cm47CiAgICB9CgogICAgaWYgKHR5cGVvZiBzZXR1cCAhPT0gJ2Z1bmN0aW9uJykgewogICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgewogICAgICAgIHdhcm4kMSgnVGhlICJzZXR1cCIgb3B0aW9uIHNob3VsZCBiZSBhIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyBhIG9iamVjdCBpbiBjb21wb25lbnQgZGVmaW5pdGlvbnMuJywgdm0pOwogICAgICB9CgogICAgICByZXR1cm47CiAgICB9CgogICAgdmFyIGRhdGEgPSAkb3B0aW9ucy5kYXRhOyAvLyB3cmFwcGVyIHRoZSBkYXRhIG9wdGlvbiwgc28gd2UgY2FuIGludm9rZSBzZXR1cCBiZWZvcmUgZGF0YSBnZXQgcmVzb2x2ZWQKCiAgICAkb3B0aW9ucy5kYXRhID0gZnVuY3Rpb24gd3JhcHBlZERhdGEoKSB7CiAgICAgIGluaXRTZXR1cCh2bSwgdm0uJHByb3BzKTsKICAgICAgcmV0dXJuIHR5cGVvZiBkYXRhID09PSAnZnVuY3Rpb24nID8gZGF0YS5jYWxsKHZtLCB2bSkgOiBkYXRhIHx8IHt9OwogICAgfTsKICB9CgogIGZ1bmN0aW9uIGluaXRTZXR1cCh2bSwgcHJvcHMpIHsKICAgIGlmIChwcm9wcyA9PT0gdm9pZCAwKSB7CiAgICAgIHByb3BzID0ge307CiAgICB9CgogICAgdmFyIHNldHVwID0gdm0uJG9wdGlvbnMuc2V0dXA7CiAgICB2YXIgY3R4ID0gY3JlYXRlU2V0dXBDb250ZXh0KHZtKTsgLy8gZmFrZSByZWFjdGl2ZSBmb3IgYHRvUmVmcyhwcm9wcylgCgogICAgZGVmKHByb3BzLCAnX19vYl9fJywgY3JlYXRlT2JzZXJ2ZXIoKSk7IC8vIHJlc29sdmUgc2NvcGVkU2xvdHMgYW5kIHNsb3RzIHRvIGZ1bmN0aW9ucwogICAgLy8gQHRzLWV4cGVjdC1lcnJvcgoKICAgIHJlc29sdmVTY29wZWRTbG90cyh2bSwgY3R4LnNsb3RzKTsKICAgIHZhciBiaW5kaW5nOwogICAgYWN0aXZhdGVDdXJyZW50SW5zdGFuY2Uodm0sIGZ1bmN0aW9uICgpIHsKICAgICAgLy8gbWFrZSBwcm9wcyB0byBiZSBmYWtlIHJlYWN0aXZlLCB0aGlzIGlzIGZvciBgdG9SZWZzKHByb3BzKWAKICAgICAgYmluZGluZyA9IHNldHVwKHByb3BzLCBjdHgpOwogICAgfSk7CiAgICBpZiAoIWJpbmRpbmcpIHJldHVybjsKCiAgICBpZiAoaXNGdW5jdGlvbihiaW5kaW5nKSkgewogICAgICAvLyBrZWVwIHR5cGVzY3JpcHQgaGFwcHkgd2l0aCB0aGUgYmluZGluZyB0eXBlLgogICAgICB2YXIgYmluZGluZ0Z1bmNfMSA9IGJpbmRpbmc7IC8vIGtlZXAgY3VycmVudEluc3RhbmNlIGFjY2Vzc2libGUgZm9yIGNyZWF0ZUVsZW1lbnQKCiAgICAgIHZtLiRvcHRpb25zLnJlbmRlciA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yCiAgICAgICAgcmVzb2x2ZVNjb3BlZFNsb3RzKHZtLCBjdHguc2xvdHMpOwogICAgICAgIHJldHVybiBhY3RpdmF0ZUN1cnJlbnRJbnN0YW5jZSh2bSwgZnVuY3Rpb24gKCkgewogICAgICAgICAgcmV0dXJuIGJpbmRpbmdGdW5jXzEoKTsKICAgICAgICB9KTsKICAgICAgfTsKCiAgICAgIHJldHVybjsKICAgIH0gZWxzZSBpZiAoaXNQbGFpbk9iamVjdChiaW5kaW5nKSkgewogICAgICBpZiAoaXNSZWFjdGl2ZShiaW5kaW5nKSkgewogICAgICAgIGJpbmRpbmcgPSB0b1JlZnMoYmluZGluZyk7CiAgICAgIH0KCiAgICAgIHZtU3RhdGVNYW5hZ2VyLnNldCh2bSwgJ3Jhd0JpbmRpbmdzJywgYmluZGluZyk7CiAgICAgIHZhciBiaW5kaW5nT2JqXzEgPSBiaW5kaW5nOwogICAgICBPYmplY3Qua2V5cyhiaW5kaW5nT2JqXzEpLmZvckVhY2goZnVuY3Rpb24gKG5hbWUpIHsKICAgICAgICB2YXIgYmluZGluZ1ZhbHVlID0gYmluZGluZ09ial8xW25hbWVdOwoKICAgICAgICBpZiAoIWlzUmVmKGJpbmRpbmdWYWx1ZSkpIHsKICAgICAgICAgIGlmICghaXNSZWFjdGl2ZShiaW5kaW5nVmFsdWUpKSB7CiAgICAgICAgICAgIGlmIChpc0Z1bmN0aW9uKGJpbmRpbmdWYWx1ZSkpIHsKICAgICAgICAgICAgICBiaW5kaW5nVmFsdWUgPSBiaW5kaW5nVmFsdWUuYmluZCh2bSk7CiAgICAgICAgICAgIH0gZWxzZSBpZiAoIWlzT2JqZWN0KGJpbmRpbmdWYWx1ZSkpIHsKICAgICAgICAgICAgICBiaW5kaW5nVmFsdWUgPSByZWYoYmluZGluZ1ZhbHVlKTsKICAgICAgICAgICAgfSBlbHNlIGlmIChoYXNSZWFjdGl2ZUFycmF5Q2hpbGQoYmluZGluZ1ZhbHVlKSkgewogICAgICAgICAgICAgIC8vIGNyZWF0ZXMgYSBjdXN0b20gcmVhY3RpdmUgcHJvcGVydGllcyB3aXRob3V0IG1ha2UgdGhlIG9iamVjdCBleHBsaWNpdGx5IHJlYWN0aXZlCiAgICAgICAgICAgICAgLy8gTk9URSB3ZSBzaG91bGQgdHJ5IHRvIGF2b2lkIHRoaXMsIGJldHRlciBpbXBsZW1lbnRhdGlvbiBuZWVkZWQKICAgICAgICAgICAgICBjdXN0b21SZWFjdGl2ZShiaW5kaW5nVmFsdWUpOwogICAgICAgICAgICB9CiAgICAgICAgICB9IGVsc2UgaWYgKGlzQXJyYXkoYmluZGluZ1ZhbHVlKSkgewogICAgICAgICAgICBiaW5kaW5nVmFsdWUgPSByZWYoYmluZGluZ1ZhbHVlKTsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGFzVm1Qcm9wZXJ0eSh2bSwgbmFtZSwgYmluZGluZ1ZhbHVlKTsKICAgICAgfSk7CiAgICAgIHJldHVybjsKICAgIH0KCiAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgewogICAgICBhc3NlcnQoZmFsc2UsICJcInNldHVwXCIgbXVzdCByZXR1cm4gYSBcIk9iamVjdFwiIG9yIGEgXCJGdW5jdGlvblwiLCBnb3QgXCIiICsgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGJpbmRpbmcpLnNsaWNlKDgsIC0xKSArICJcIiIpOwogICAgfQogIH0KCiAgZnVuY3Rpb24gY3VzdG9tUmVhY3RpdmUodGFyZ2V0KSB7CiAgICBpZiAoIWlzUGxhaW5PYmplY3QodGFyZ2V0KSB8fCBpc1JlZih0YXJnZXQpIHx8IGlzUmVhY3RpdmUodGFyZ2V0KSB8fCBpc1Jhdyh0YXJnZXQpKSByZXR1cm47CiAgICB2YXIgVnVlID0gZ2V0VnVlQ29uc3RydWN0b3IoKTsKICAgIHZhciBkZWZpbmVSZWFjdGl2ZSA9IFZ1ZS51dGlsLmRlZmluZVJlYWN0aXZlOwogICAgT2JqZWN0LmtleXModGFyZ2V0KS5mb3JFYWNoKGZ1bmN0aW9uIChrKSB7CiAgICAgIHZhciB2YWwgPSB0YXJnZXRba107CiAgICAgIGRlZmluZVJlYWN0aXZlKHRhcmdldCwgaywgdmFsKTsKCiAgICAgIGlmICh2YWwpIHsKICAgICAgICBjdXN0b21SZWFjdGl2ZSh2YWwpOwogICAgICB9CgogICAgICByZXR1cm47CiAgICB9KTsKICB9CgogIGZ1bmN0aW9uIGhhc1JlYWN0aXZlQXJyYXlDaGlsZCh0YXJnZXQsIHZpc2l0ZWQpIHsKICAgIGlmICh2aXNpdGVkID09PSB2b2lkIDApIHsKICAgICAgdmlzaXRlZCA9IG5ldyBNYXAoKTsKICAgIH0KCiAgICBpZiAodmlzaXRlZC5oYXModGFyZ2V0KSkgewogICAgICByZXR1cm4gdmlzaXRlZC5nZXQodGFyZ2V0KTsKICAgIH0KCiAgICB2aXNpdGVkLnNldCh0YXJnZXQsIGZhbHNlKTsKCiAgICBpZiAoQXJyYXkuaXNBcnJheSh0YXJnZXQpICYmIGlzUmVhY3RpdmUodGFyZ2V0KSkgewogICAgICB2aXNpdGVkLnNldCh0YXJnZXQsIHRydWUpOwogICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICBpZiAoIWlzUGxhaW5PYmplY3QodGFyZ2V0KSB8fCBpc1Jhdyh0YXJnZXQpKSB7CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KCiAgICByZXR1cm4gT2JqZWN0LmtleXModGFyZ2V0KS5zb21lKGZ1bmN0aW9uICh4KSB7CiAgICAgIHJldHVybiBoYXNSZWFjdGl2ZUFycmF5Q2hpbGQodGFyZ2V0W3hdLCB2aXNpdGVkKTsKICAgIH0pOwogIH0KCiAgZnVuY3Rpb24gY3JlYXRlU2V0dXBDb250ZXh0KHZtKSB7CiAgICB2YXIgY3R4ID0gewogICAgICBzbG90czoge30KICAgIH07CiAgICB2YXIgcHJvcHNQbGFpbiA9IFsncm9vdCcsICdwYXJlbnQnLCAncmVmcycsICdsaXN0ZW5lcnMnLCAnaXNTZXJ2ZXInLCAnc3NyQ29udGV4dCddOwogICAgdmFyIHByb3BzUmVhY3RpdmVQcm94eSA9IFsnYXR0cnMnXTsKICAgIHZhciBtZXRob2RSZXR1cm5Wb2lkID0gWydlbWl0J107CiAgICBwcm9wc1BsYWluLmZvckVhY2goZnVuY3Rpb24gKGtleSkgewogICAgICB2YXIgc3JjS2V5ID0gIiQiICsga2V5OwogICAgICBwcm94eShjdHgsIGtleSwgewogICAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICAgICAgcmV0dXJuIHZtW3NyY0tleV07CiAgICAgICAgfSwKICAgICAgICBzZXQ6IGZ1bmN0aW9uIHNldCgpIHsKICAgICAgICAgIHdhcm4kMSgiQ2Fubm90IGFzc2lnbiB0byAnIiArIGtleSArICInIGJlY2F1c2UgaXQgaXMgYSByZWFkLW9ubHkgcHJvcGVydHkiLCB2bSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0pOwogICAgcHJvcHNSZWFjdGl2ZVByb3h5LmZvckVhY2goZnVuY3Rpb24gKGtleSkgewogICAgICB2YXIgc3JjS2V5ID0gIiQiICsga2V5OwogICAgICBwcm94eShjdHgsIGtleSwgewogICAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICAgICAgdmFyIGVfMSwgX2E7CgogICAgICAgICAgdmFyIGRhdGEgPSByZWFjdGl2ZSh7fSk7CiAgICAgICAgICB2YXIgc291cmNlID0gdm1bc3JjS2V5XTsKCiAgICAgICAgICB2YXIgX2xvb3BfMSA9IGZ1bmN0aW9uIF9sb29wXzEoYXR0cikgewogICAgICAgICAgICBwcm94eShkYXRhLCBhdHRyLCB7CiAgICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgICAgICAgICAgICAvLyB0byBlbnN1cmUgaXQgYWx3YXlzIHJldHVybiB0aGUgbGF0ZXN0IHZhbHVlCiAgICAgICAgICAgICAgICByZXR1cm4gdm1bc3JjS2V5XVthdHRyXTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfTsKCiAgICAgICAgICB0cnkgewogICAgICAgICAgICBmb3IgKHZhciBfYiA9IF9fdmFsdWVzKE9iamVjdC5rZXlzKHNvdXJjZSkpLCBfYyA9IF9iLm5leHQoKTsgIV9jLmRvbmU7IF9jID0gX2IubmV4dCgpKSB7CiAgICAgICAgICAgICAgdmFyIGF0dHIgPSBfYy52YWx1ZTsKCiAgICAgICAgICAgICAgX2xvb3BfMShhdHRyKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSBjYXRjaCAoZV8xXzEpIHsKICAgICAgICAgICAgZV8xID0gewogICAgICAgICAgICAgIGVycm9yOiBlXzFfMQogICAgICAgICAgICB9OwogICAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICBpZiAoX2MgJiYgIV9jLmRvbmUgJiYgKF9hID0gX2JbInJldHVybiJdKSkgX2EuY2FsbChfYik7CiAgICAgICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICAgICAgaWYgKGVfMSkgdGhyb3cgZV8xLmVycm9yOwogICAgICAgICAgICB9CiAgICAgICAgICB9CgogICAgICAgICAgcmV0dXJuIGRhdGE7CiAgICAgICAgfSwKICAgICAgICBzZXQ6IGZ1bmN0aW9uIHNldCgpIHsKICAgICAgICAgIHdhcm4kMSgiQ2Fubm90IGFzc2lnbiB0byAnIiArIGtleSArICInIGJlY2F1c2UgaXQgaXMgYSByZWFkLW9ubHkgcHJvcGVydHkiLCB2bSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0pOwogICAgbWV0aG9kUmV0dXJuVm9pZC5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsKICAgICAgdmFyIHNyY0tleSA9ICIkIiArIGtleTsKICAgICAgcHJveHkoY3R4LCBrZXksIHsKICAgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHZhciBhcmdzID0gW107CgogICAgICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykgewogICAgICAgICAgICAgIGFyZ3NbX2ldID0gYXJndW1lbnRzW19pXTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgdmFyIGZuID0gdm1bc3JjS2V5XTsKICAgICAgICAgICAgZm4uYXBwbHkodm0sIGFyZ3MpOwogICAgICAgICAgfTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSk7CgogICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAndGVzdCcpIHsKICAgICAgY3R4Ll92bSA9IHZtOwogICAgfQoKICAgIHJldHVybiBjdHg7CiAgfQp9Ci8qKg0KICogSGVscGVyIHRoYXQgcmVjdXJzaXZlbHkgbWVyZ2VzIHR3byBkYXRhIG9iamVjdHMgdG9nZXRoZXIuDQogKi8KCgpmdW5jdGlvbiBtZXJnZURhdGEoZnJvbSwgdG8pIHsKICBpZiAoIWZyb20pIHJldHVybiB0bzsKICBpZiAoIXRvKSByZXR1cm4gZnJvbTsKICB2YXIga2V5OwogIHZhciB0b1ZhbDsKICB2YXIgZnJvbVZhbDsKICB2YXIga2V5cyA9IGhhc1N5bWJvbCA/IFJlZmxlY3Qub3duS2V5cyhmcm9tKSA6IE9iamVjdC5rZXlzKGZyb20pOwoKICBmb3IgKHZhciBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyBpKyspIHsKICAgIGtleSA9IGtleXNbaV07IC8vIGluIGNhc2UgdGhlIG9iamVjdCBpcyBhbHJlYWR5IG9ic2VydmVkLi4uCgogICAgaWYgKGtleSA9PT0gJ19fb2JfXycpIGNvbnRpbnVlOwogICAgdG9WYWwgPSB0b1trZXldOwogICAgZnJvbVZhbCA9IGZyb21ba2V5XTsKCiAgICBpZiAoIWhhc093bih0bywga2V5KSkgewogICAgICB0b1trZXldID0gZnJvbVZhbDsKICAgIH0gZWxzZSBpZiAodG9WYWwgIT09IGZyb21WYWwgJiYgaXNQbGFpbk9iamVjdCh0b1ZhbCkgJiYgIWlzUmVmKHRvVmFsKSAmJiBpc1BsYWluT2JqZWN0KGZyb21WYWwpICYmICFpc1JlZihmcm9tVmFsKSkgewogICAgICBtZXJnZURhdGEoZnJvbVZhbCwgdG9WYWwpOwogICAgfQogIH0KCiAgcmV0dXJuIHRvOwp9CgpmdW5jdGlvbiBfaW5zdGFsbChWdWUpIHsKICBpZiAoaXNWdWVSZWdpc3RlcmVkKFZ1ZSkpIHsKICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7CiAgICAgIHdhcm4kMSgnW3Z1ZS1jb21wb3NpdGlvbi1hcGldIGFscmVhZHkgaW5zdGFsbGVkLiBWdWUudXNlKFZ1ZUNvbXBvc2l0aW9uQVBJKSBzaG91bGQgYmUgY2FsbGVkIG9ubHkgb25jZS4nKTsKICAgIH0KCiAgICByZXR1cm47CiAgfQoKICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgewogICAgaWYgKFZ1ZS52ZXJzaW9uKSB7CiAgICAgIGlmIChWdWUudmVyc2lvblswXSAhPT0gJzInIHx8IFZ1ZS52ZXJzaW9uWzFdICE9PSAnLicpIHsKICAgICAgICB3YXJuJDEoIlt2dWUtY29tcG9zaXRpb24tYXBpXSBvbmx5IHdvcmtzIHdpdGggVnVlIDIsIHYiICsgVnVlLnZlcnNpb24gKyAiIGZvdW5kLiIpOwogICAgICB9CiAgICB9IGVsc2UgewogICAgICB3YXJuJDEoJ1t2dWUtY29tcG9zaXRpb24tYXBpXSBubyBWdWUgdmVyc2lvbiBmb3VuZCcpOwogICAgfQogIH0KCiAgVnVlLmNvbmZpZy5vcHRpb25NZXJnZVN0cmF0ZWdpZXMuc2V0dXAgPSBmdW5jdGlvbiAocGFyZW50LCBjaGlsZCkgewogICAgcmV0dXJuIGZ1bmN0aW9uIG1lcmdlZFNldHVwRm4ocHJvcHMsIGNvbnRleHQpIHsKICAgICAgcmV0dXJuIG1lcmdlRGF0YSh0eXBlb2YgcGFyZW50ID09PSAnZnVuY3Rpb24nID8gcGFyZW50KHByb3BzLCBjb250ZXh0KSB8fCB7fSA6IHVuZGVmaW5lZCwgdHlwZW9mIGNoaWxkID09PSAnZnVuY3Rpb24nID8gY2hpbGQocHJvcHMsIGNvbnRleHQpIHx8IHt9IDogdW5kZWZpbmVkKTsKICAgIH07CiAgfTsKCiAgc2V0VnVlQ29uc3RydWN0b3IoVnVlKTsKICBtaXhpbihWdWUpOwp9Cgp2YXIgUGx1Z2luID0gewogIGluc3RhbGw6IGZ1bmN0aW9uIGluc3RhbGwoVnVlKSB7CiAgICByZXR1cm4gX2luc3RhbGwoVnVlKTsKICB9Cn07IC8vIGltcGxlbWVudGF0aW9uLCBjbG9zZSB0byBuby1vcAoKZnVuY3Rpb24gZGVmaW5lQ29tcG9uZW50KG9wdGlvbnMpIHsKICByZXR1cm4gb3B0aW9uczsKfQoKZnVuY3Rpb24gZGVmaW5lQXN5bmNDb21wb25lbnQoc291cmNlKSB7CiAgaWYgKGlzRnVuY3Rpb24oc291cmNlKSkgewogICAgc291cmNlID0gewogICAgICBsb2FkZXI6IHNvdXJjZQogICAgfTsKICB9CgogIHZhciBsb2FkZXIgPSBzb3VyY2UubG9hZGVyLAogICAgICBsb2FkaW5nQ29tcG9uZW50ID0gc291cmNlLmxvYWRpbmdDb21wb25lbnQsCiAgICAgIGVycm9yQ29tcG9uZW50ID0gc291cmNlLmVycm9yQ29tcG9uZW50LAogICAgICBfYSA9IHNvdXJjZS5kZWxheSwKICAgICAgZGVsYXkgPSBfYSA9PT0gdm9pZCAwID8gMjAwIDogX2EsCiAgICAgIHRpbWVvdXQgPSBzb3VyY2UudGltZW91dCwKICAgICAgLy8gdW5kZWZpbmVkID0gbmV2ZXIgdGltZXMgb3V0CiAgX2IgPSBzb3VyY2Uuc3VzcGVuc2libGUsCiAgICAgIC8vIHVuZGVmaW5lZCA9IG5ldmVyIHRpbWVzIG91dAogIHN1c3BlbnNpYmxlID0gX2IgPT09IHZvaWQgMCA/IGZhbHNlIDogX2IsCiAgICAgIC8vIGluIFZ1ZSAzIGRlZmF1bHQgaXMgdHJ1ZQogIHVzZXJPbkVycm9yID0gc291cmNlLm9uRXJyb3I7CgogIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHN1c3BlbnNpYmxlKSB7CiAgICB3YXJuJDEoIlRoZSBzdXNwZW5zaWJsYmUgb3B0aW9uIGZvciBhc3luYyBjb21wb25lbnRzIGlzIG5vdCBzdXBwb3J0ZWQgaW4gVnVlMi4gSXQgaXMgaWdub3JlZC4iKTsKICB9CgogIHZhciBwZW5kaW5nUmVxdWVzdCA9IG51bGw7CiAgdmFyIHJldHJpZXMgPSAwOwoKICB2YXIgcmV0cnkgPSBmdW5jdGlvbiByZXRyeSgpIHsKICAgIHJldHJpZXMrKzsKICAgIHBlbmRpbmdSZXF1ZXN0ID0gbnVsbDsKICAgIHJldHVybiBsb2FkKCk7CiAgfTsKCiAgdmFyIGxvYWQgPSBmdW5jdGlvbiBsb2FkKCkgewogICAgdmFyIHRoaXNSZXF1ZXN0OwogICAgcmV0dXJuIHBlbmRpbmdSZXF1ZXN0IHx8ICh0aGlzUmVxdWVzdCA9IHBlbmRpbmdSZXF1ZXN0ID0gbG9hZGVyKClbImNhdGNoIl0oZnVuY3Rpb24gKGVycikgewogICAgICBlcnIgPSBlcnIgaW5zdGFuY2VvZiBFcnJvciA/IGVyciA6IG5ldyBFcnJvcihTdHJpbmcoZXJyKSk7CgogICAgICBpZiAodXNlck9uRXJyb3IpIHsKICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICAgICAgdmFyIHVzZXJSZXRyeSA9IGZ1bmN0aW9uIHVzZXJSZXRyeSgpIHsKICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUocmV0cnkoKSk7CiAgICAgICAgICB9OwoKICAgICAgICAgIHZhciB1c2VyRmFpbCA9IGZ1bmN0aW9uIHVzZXJGYWlsKCkgewogICAgICAgICAgICByZXR1cm4gcmVqZWN0KGVycik7CiAgICAgICAgICB9OwoKICAgICAgICAgIHVzZXJPbkVycm9yKGVyciwgdXNlclJldHJ5LCB1c2VyRmFpbCwgcmV0cmllcyArIDEpOwogICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIHRocm93IGVycjsKICAgICAgfQogICAgfSkudGhlbihmdW5jdGlvbiAoY29tcCkgewogICAgICBpZiAodGhpc1JlcXVlc3QgIT09IHBlbmRpbmdSZXF1ZXN0ICYmIHBlbmRpbmdSZXF1ZXN0KSB7CiAgICAgICAgcmV0dXJuIHBlbmRpbmdSZXF1ZXN0OwogICAgICB9CgogICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiAhY29tcCkgewogICAgICAgIHdhcm4kMSgiQXN5bmMgY29tcG9uZW50IGxvYWRlciByZXNvbHZlZCB0byB1bmRlZmluZWQuICIgKyAiSWYgeW91IGFyZSB1c2luZyByZXRyeSgpLCBtYWtlIHN1cmUgdG8gcmV0dXJuIGl0cyByZXR1cm4gdmFsdWUuIik7CiAgICAgIH0gLy8gaW50ZXJvcCBtb2R1bGUgZGVmYXVsdAoKCiAgICAgIGlmIChjb21wICYmIChjb21wLl9fZXNNb2R1bGUgfHwgY29tcFtTeW1ib2wudG9TdHJpbmdUYWddID09PSAnTW9kdWxlJykpIHsKICAgICAgICBjb21wID0gY29tcFsiZGVmYXVsdCJdOwogICAgICB9CgogICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiBjb21wICYmICFpc09iamVjdChjb21wKSAmJiAhaXNGdW5jdGlvbihjb21wKSkgewogICAgICAgIHRocm93IG5ldyBFcnJvcigiSW52YWxpZCBhc3luYyBjb21wb25lbnQgbG9hZCByZXN1bHQ6ICIgKyBjb21wKTsKICAgICAgfQoKICAgICAgcmV0dXJuIGNvbXA7CiAgICB9KSk7CiAgfTsKCiAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgIHZhciBjb21wb25lbnQgPSBsb2FkKCk7CiAgICByZXR1cm4gewogICAgICBjb21wb25lbnQ6IGNvbXBvbmVudCwKICAgICAgZGVsYXk6IGRlbGF5LAogICAgICB0aW1lb3V0OiB0aW1lb3V0LAogICAgICBlcnJvcjogZXJyb3JDb21wb25lbnQsCiAgICAgIGxvYWRpbmc6IGxvYWRpbmdDb21wb25lbnQKICAgIH07CiAgfTsKfQoKdmFyIHZlcnNpb24gPSAiMS4wLjAtcmMuOCI7IC8vIGF1dG8gaW5zdGFsbCB3aGVuIHVzaW5nIENETgoKaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIHdpbmRvdy5WdWUpIHsKICB3aW5kb3cuVnVlLnVzZShQbHVnaW4pOwp9CgpleHBvcnQgZGVmYXVsdCBQbHVnaW47CmV4cG9ydCB7IGNvbXB1dGVkLCBjcmVhdGVBcHAsIGNyZWF0ZVJlZiwgY3VzdG9tUmVmLCBkZWZpbmVBc3luY0NvbXBvbmVudCwgZGVmaW5lQ29tcG9uZW50LCBkZWwsIGdldEN1cnJlbnRJbnN0YW5jZSwgY3JlYXRlRWxlbWVudCBhcyBoLCBpbmplY3QsIGlzUmF3LCBpc1JlYWN0aXZlLCBpc1JlYWRvbmx5LCBpc1JlZiwgbWFya1JhdywgbmV4dFRpY2ssIG9uQWN0aXZhdGVkLCBvbkJlZm9yZU1vdW50LCBvbkJlZm9yZVVubW91bnQsIG9uQmVmb3JlVXBkYXRlLCBvbkRlYWN0aXZhdGVkLCBvbkVycm9yQ2FwdHVyZWQsIG9uTW91bnRlZCwgb25TZXJ2ZXJQcmVmZXRjaCwgb25Vbm1vdW50ZWQsIG9uVXBkYXRlZCwgcHJvdmlkZSwgcHJveHlSZWZzLCByZWFjdGl2ZSwgcmVhZG9ubHksIHJlZiwgc2V0JDEgYXMgc2V0LCBzaGFsbG93UmVhY3RpdmUsIHNoYWxsb3dSZWFkb25seSwgc2hhbGxvd1JlZiwgdG9SYXcsIHRvUmVmLCB0b1JlZnMsIHRyaWdnZXJSZWYsIHVucmVmLCB1c2VDU1NNb2R1bGUsIHVzZUNzc01vZHVsZSwgdmVyc2lvbiwgd2Fybiwgd2F0Y2gsIHdhdGNoRWZmZWN0IH07"},{"version":3,"sources":["D:/vscodeprojects/vuepress-theme-reco/myblogs/node_modules/@vue/composition-api/dist/vue-composition-api.esm.js"],"names":["Vue","toString","x","Object","prototype","call","isNative","Ctor","test","hasSymbol","Symbol","Reflect","ownKeys","noopFn","_","proxy","target","key","_a","get","set","defineProperty","enumerable","configurable","def","obj","val","value","writable","hasOwn","hasOwnProperty","assert","condition","msg","Error","isPrimitive","isArray","Array","isValidArrayIndex","n","parseFloat","String","Math","floor","isFinite","isObject","isPlainObject","isFunction","isUndef","v","undefined","warn$1","vm","util","warn","logError","err","info","process","env","NODE_ENV","window","console","error","vueDependency","requiredVue","require","isVue","vueConstructor","currentInstance","PluginInstalledFlag","name","isVueRegistered","getVueConstructor","getRegisteredVueOrDefault","constructor","setVueConstructor","__proto__","setCurrentInstance","getCurrentVue2Instance","getCurrentInstance","toVue3ComponentInstance","instanceMapCache","WeakMap","vue2Instance","has","instance","update","$forceUpdate","uid","_uid","emit","$emit","bind","parent","root","instanceProps","forEach","prop","_isMounted","_isDestroyed","_inactive","_events","$parent","$root","currentVMInFn","hook","defineComponentInstance","options","silent","config","isComponentInstance","createSlotProxy","slotName","args","_i","arguments","length","$scopedSlots","apply","resolveSlots","slots","normalSlots","res","_normalized","vueInternalClasses","getVueInternalClasses","computed","Watcher","_computedWatchers","Dep","_data","__ob__","dep","$destroy","__assign","assign","t","s","i","p","__values","o","iterator","m","next","done","TypeError","__read","r","ar","e","push","__spreadArray","to","from","il","j","createSymbol","WatcherPreFlushQueueKey","WatcherPostFlushQueueKey","RefKey","accessModifiedSet","rawSet","readonlySet","RefImpl","createRef","readonly","sealed","seal","ref","raw","isRef","reactive","unref","toRefs","isReactive","ret","toRef","customRef","factory","version","object","shallowRef","shallowReactive","triggerRef","proxyRefs","objectWithRefs","e_1","_b","_loop_1","_c","keys","_d","e_1_1","isRaw","Boolean","__raw__","setupAccessControl","defineAccessControl","getter","setter","property","getOwnPropertyDescriptor","getterHandler","setterHandler","newVal","observe","observed","observable","data","$$state","mockObserver","createObserver","notify","depend","addSub","removeSub","isExtensible","ob","markRaw","toRaw","isReadonly","shallowReadonly","readonlyObj","source","set$1","defineReactive","max","splice","_isVue","vmCount","del","genName","toUpperCase","slice","createLifeCycle","lifeCyclehook","callback","injectHookOption","$options","mergeFn","optionMergeStrategies","wrapHookCall","fn","preVm","onBeforeMount","onMounted","onBeforeUpdate","onUpdated","onBeforeUnmount","onUnmounted","onErrorCaptured","onActivated","onDeactivated","onServerPrefetch","fallbackVM","flushPreQueue","flushQueue","flushPostQueue","hasWatchEnv","installWatchEnv","$on","getWatcherOption","immediate","deep","flush","getWatchEffectOption","getWatcherVM","queue","index","queueFlushJob","mode","fallbackFlush","$nextTick","createVueWatcher","_watchers","$watch","immediateInvokeCallback","lazy","noRun","sync","before","patchWatcherTeardown","watcher","runCleanup","_teardown","teardown","createWatcher","cb","flushMode","isSync","cleanup","registerCleanup","createScheduler","running_1","getter_1","watcher_1","originGet","map","JSON","stringify","applyCb","originalCallback_1","shiftCallback_1","stop","run","watchEffect","effect","opts","watch","getterOrOptions","computedSetter","computedGetter","$isServer","Watcher_1","Dep_1","dirty","evaluate","computedHost_1","NOT_FOUND","resolveInject","provideKey","_provided","provide","provideCache_1","inject","defaultValue","treatDefaultAsFactory","EMPTY_OBJ","freeze","useCssModule","mod","useCSSModule","createApp","rootComponent","rootProps","V","mountedVM","use","mixin","component","directive","mount","el","hydrating","propsData","$mount","unmount","nextTick","fallbackCreateElement","createElement","$createElement","message","state","__composition_api_state__","vmStateManager","asVmProperty","propName","propValue","props","updateTemplateRef","rawBindings","refs","$refs","oldRefKeys","setupValue","newKeys","validNewKeys","resolveScopedSlots","slotsProxy","parentVNode","_parentVnode","prevSlots","curSlots","scopedSlots","$slots","slotNames","activateCurrentInstance","onError","beforeCreate","functionApiInit","mounted","updated","setup","render","_this","wrappedData","initSetup","$props","ctx","createSetupContext","binding","bindingFunc_1","bindingObj_1","bindingValue","hasReactiveArrayChild","customReactive","k","visited","Map","some","propsPlain","propsReactiveProxy","methodReturnVoid","srcKey","attr","_vm","mergeData","toVal","fromVal","install","child","mergedSetupFn","context","Plugin","defineComponent","defineAsyncComponent","loader","loadingComponent","errorComponent","delay","timeout","suspensible","userOnError","pendingRequest","retries","retry","load","thisRequest","Promise","resolve","reject","userRetry","userFail","then","comp","__esModule","toStringTag","loading","h"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,OAAOA,GAAP,MAAgB,KAAhB;;AAEA,IAAIC,QAAQ,GAAG,SAAXA,QAAW,CAAUC,CAAV,EAAa;AAAE,SAAOC,MAAM,CAACC,SAAP,CAAiBH,QAAjB,CAA0BI,IAA1B,CAA+BH,CAA/B,CAAP;AAA2C,CAAzE;;AACA,SAASI,QAAT,CAAkBC,IAAlB,EAAwB;AACpB,SAAO,OAAOA,IAAP,KAAgB,UAAhB,IAA8B,cAAcC,IAAd,CAAmBD,IAAI,CAACN,QAAL,EAAnB,CAArC;AACH;;AACD,IAAIQ,SAAS,GAAG,OAAOC,MAAP,KAAkB,WAAlB,IACZJ,QAAQ,CAACI,MAAD,CADI,IAEZ,OAAOC,OAAP,KAAmB,WAFP,IAGZL,QAAQ,CAACK,OAAO,CAACC,OAAT,CAHZ;;AAIA,IAAIC,MAAM,GAAG,SAATA,MAAS,CAAUC,CAAV,EAAa;AAAE,SAAOA,CAAP;AAAW,CAAvC;;AACA,SAASC,KAAT,CAAeC,MAAf,EAAuBC,GAAvB,EAA4BC,EAA5B,EAAgC;AAC5B,MAAIC,GAAG,GAAGD,EAAE,CAACC,GAAb;AAAA,MAAkBC,GAAG,GAAGF,EAAE,CAACE,GAA3B;AACAjB,EAAAA,MAAM,CAACkB,cAAP,CAAsBL,MAAtB,EAA8BC,GAA9B,EAAmC;AAC/BK,IAAAA,UAAU,EAAE,IADmB;AAE/BC,IAAAA,YAAY,EAAE,IAFiB;AAG/BJ,IAAAA,GAAG,EAAEA,GAAG,IAAIN,MAHmB;AAI/BO,IAAAA,GAAG,EAAEA,GAAG,IAAIP;AAJmB,GAAnC;AAMH;;AACD,SAASW,GAAT,CAAaC,GAAb,EAAkBR,GAAlB,EAAuBS,GAAvB,EAA4BJ,UAA5B,EAAwC;AACpCnB,EAAAA,MAAM,CAACkB,cAAP,CAAsBI,GAAtB,EAA2BR,GAA3B,EAAgC;AAC5BU,IAAAA,KAAK,EAAED,GADqB;AAE5BJ,IAAAA,UAAU,EAAE,CAAC,CAACA,UAFc;AAG5BM,IAAAA,QAAQ,EAAE,IAHkB;AAI5BL,IAAAA,YAAY,EAAE;AAJc,GAAhC;AAMH;;AACD,SAASM,MAAT,CAAgBJ,GAAhB,EAAqBR,GAArB,EAA0B;AACtB,SAAOd,MAAM,CAAC2B,cAAP,CAAsBzB,IAAtB,CAA2BoB,GAA3B,EAAgCR,GAAhC,CAAP;AACH;;AACD,SAASc,MAAT,CAAgBC,SAAhB,EAA2BC,GAA3B,EAAgC;AAC5B,MAAI,CAACD,SAAL,EAAgB;AACZ,UAAM,IAAIE,KAAJ,CAAU,2BAA2BD,GAArC,CAAN;AACH;AACJ;;AACD,SAASE,WAAT,CAAqBR,KAArB,EAA4B;AACxB,SAAQ,OAAOA,KAAP,KAAiB,QAAjB,IACJ,OAAOA,KAAP,KAAiB,QADb,IAEJ;AACA,UAAOA,KAAP,MAAiB,QAHb,IAIJ,OAAOA,KAAP,KAAiB,SAJrB;AAKH;;AACD,SAASS,OAAT,CAAiBlC,CAAjB,EAAoB;AAChB,SAAOmC,KAAK,CAACD,OAAN,CAAclC,CAAd,CAAP;AACH;;AACD,SAASoC,iBAAT,CAA2BZ,GAA3B,EAAgC;AAC5B,MAAIa,CAAC,GAAGC,UAAU,CAACC,MAAM,CAACf,GAAD,CAAP,CAAlB;AACA,SAAOa,CAAC,IAAI,CAAL,IAAUG,IAAI,CAACC,KAAL,CAAWJ,CAAX,MAAkBA,CAA5B,IAAiCK,QAAQ,CAAClB,GAAD,CAAhD;AACH;;AACD,SAASmB,QAAT,CAAkBnB,GAAlB,EAAuB;AACnB,SAAOA,GAAG,KAAK,IAAR,IAAgB,QAAOA,GAAP,MAAe,QAAtC;AACH;;AACD,SAASoB,aAAT,CAAuB5C,CAAvB,EAA0B;AACtB,SAAOD,QAAQ,CAACC,CAAD,CAAR,KAAgB,iBAAvB;AACH;;AACD,SAAS6C,UAAT,CAAoB7C,CAApB,EAAuB;AACnB,SAAO,OAAOA,CAAP,KAAa,UAApB;AACH;;AACD,SAAS8C,OAAT,CAAiBC,CAAjB,EAAoB;AAChB,SAAOA,CAAC,KAAKC,SAAN,IAAmBD,CAAC,KAAK,IAAhC;AACH;;AACD,SAASE,MAAT,CAAgBlB,GAAhB,EAAqBmB,EAArB,EAAyB;AACrBpD,EAAAA,GAAG,CAACqD,IAAJ,CAASC,IAAT,CAAcrB,GAAd,EAAmBmB,EAAnB;AACH;;AACD,SAASG,QAAT,CAAkBC,GAAlB,EAAuBJ,EAAvB,EAA2BK,IAA3B,EAAiC;AAC7B,MAAKC,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAA9B,EAA6C;AACzCT,IAAAA,MAAM,CAAC,cAAcM,IAAd,GAAqB,MAArB,GAA8BD,GAAG,CAACvD,QAAJ,EAA9B,GAA+C,IAAhD,EAAsDmD,EAAtD,CAAN;AACH;;AACD,MAAI,OAAOS,MAAP,KAAkB,WAAlB,IAAiC,OAAOC,OAAP,KAAmB,WAAxD,EAAqE;AACjEA,IAAAA,OAAO,CAACC,KAAR,CAAcP,GAAd;AACH,GAFD,MAGK;AACD,UAAMA,GAAN;AACH;AACJ;;AAED,IAAIQ,aAAa,GAAGd,SAApB;;AACA,IAAI;AACA,MAAIe,WAAW,GAAGC,OAAO,CAAC,KAAD,CAAzB;;AACA,MAAID,WAAW,IAAIE,KAAK,CAACF,WAAD,CAAxB,EAAuC;AACnCD,IAAAA,aAAa,GAAGC,WAAhB;AACH,GAFD,MAGK,IAAIA,WAAW,IAChB,aAAaA,WADR,IAELE,KAAK,CAACF,WAAW,WAAZ,CAFJ,EAE2B;AAC5BD,IAAAA,aAAa,GAAGC,WAAW,WAA3B;AACH;AACJ,CAVD,CAWA,OAAO/C,EAAP,EAAW,CACP;AACH;;AACD,IAAIkD,cAAc,GAAG,IAArB;AACA,IAAIC,eAAe,GAAG,IAAtB;AACA,IAAIC,mBAAmB,GAAG,+BAA1B;;AACA,SAASH,KAAT,CAAe1C,GAAf,EAAoB;AAChB,SAAOA,GAAG,IAAI,OAAOA,GAAP,KAAe,UAAtB,IAAoCA,GAAG,CAAC8C,IAAJ,KAAa,KAAxD;AACH;;AACD,SAASC,eAAT,CAAyBxE,GAAzB,EAA8B;AAC1B,SAAO6B,MAAM,CAAC7B,GAAD,EAAMsE,mBAAN,CAAb;AACH;;AACD,SAASG,iBAAT,GAA6B;AACzB,MAAKf,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAA9B,EAA6C;AACzC7B,IAAAA,MAAM,CAACqC,cAAD,EAAiB,iEAAjB,CAAN;AACH;;AACD,SAAOA,cAAP;AACH,C,CACD;;;AACA,SAASM,yBAAT,GAAqC;AACjC,MAAIC,WAAW,GAAGP,cAAc,IAAIJ,aAApC;;AACA,MAAKN,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAA9B,EAA6C;AACzC7B,IAAAA,MAAM,CAAC4C,WAAD,EAAc,0BAAd,CAAN;AACH;;AACD,SAAOA,WAAP;AACH;;AACD,SAASC,iBAAT,CAA2B5E,GAA3B,EAAgC;AAC5B;AACA,MAAK0D,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAA1B,IAA2CQ,cAA3C,IAA6DpE,GAAG,CAAC6E,SAAJ,KAAkBT,cAAc,CAACS,SAAlG,EAA6G;AACzG1B,IAAAA,MAAM,CAAC,yDAAD,CAAN;AACH;;AACDiB,EAAAA,cAAc,GAAGpE,GAAjB;AACAG,EAAAA,MAAM,CAACkB,cAAP,CAAsBrB,GAAtB,EAA2BsE,mBAA3B,EAAgD;AAC5C/C,IAAAA,YAAY,EAAE,IAD8B;AAE5CK,IAAAA,QAAQ,EAAE,IAFkC;AAG5CD,IAAAA,KAAK,EAAE;AAHqC,GAAhD;AAKH;;AACD,SAASmD,kBAAT,CAA4B1B,EAA5B,EAAgC;AAC5B;AACAiB,EAAAA,eAAe,GAAGjB,EAAlB;AACH;;AACD,SAAS2B,sBAAT,GAAkC;AAC9B,SAAOV,eAAP;AACH;;AACD,SAASW,kBAAT,GAA8B;AAC1B,MAAIX,eAAJ,EAAqB;AACjB,WAAOY,uBAAuB,CAACZ,eAAD,CAA9B;AACH;;AACD,SAAO,IAAP;AACH;;AACD,IAAIa,gBAAgB,GAAG,IAAIC,OAAJ,EAAvB;;AACA,SAASF,uBAAT,CAAiCG,YAAjC,EAA+C;AAC3C,MAAIF,gBAAgB,CAACG,GAAjB,CAAqBD,YAArB,CAAJ,EAAwC;AACpC,WAAOF,gBAAgB,CAAC/D,GAAjB,CAAqBiE,YAArB,CAAP;AACH;;AACD,MAAIE,QAAQ,GAAG;AACXvE,IAAAA,KAAK,EAAEqE,YADI;AAEXG,IAAAA,MAAM,EAAEH,YAAY,CAACI,YAFV;AAGXC,IAAAA,GAAG,EAAEL,YAAY,CAACM,IAHP;AAIX;AACAC,IAAAA,IAAI,EAAEP,YAAY,CAACQ,KAAb,CAAmBC,IAAnB,CAAwBT,YAAxB,CALK;AAMXU,IAAAA,MAAM,EAAE,IANG;AAOXC,IAAAA,IAAI,EAAE;AAPK,GAAf,CAJ2C,CAa3C;;AACA,MAAIC,aAAa,GAAG,CAChB,MADgB,EAEhB,OAFgB,EAGhB,OAHgB,EAIhB,MAJgB,EAKhB,OALgB,EAMhB,OANgB,CAApB;AAQAA,EAAAA,aAAa,CAACC,OAAd,CAAsB,UAAUC,IAAV,EAAgB;AAClCnF,IAAAA,KAAK,CAACuE,QAAD,EAAWY,IAAX,EAAiB;AAClB/E,MAAAA,GAAG,EAAE,eAAY;AACb,eAAOiE,YAAY,CAAC,MAAMc,IAAP,CAAnB;AACH;AAHiB,KAAjB,CAAL;AAKH,GAND;AAOAnF,EAAAA,KAAK,CAACuE,QAAD,EAAW,WAAX,EAAwB;AACzBnE,IAAAA,GAAG,EAAE,eAAY;AACb;AACA,aAAOiE,YAAY,CAACe,UAApB;AACH;AAJwB,GAAxB,CAAL;AAMApF,EAAAA,KAAK,CAACuE,QAAD,EAAW,aAAX,EAA0B;AAC3BnE,IAAAA,GAAG,EAAE,eAAY;AACb;AACA,aAAOiE,YAAY,CAACgB,YAApB;AACH;AAJ0B,GAA1B,CAAL;AAMArF,EAAAA,KAAK,CAACuE,QAAD,EAAW,eAAX,EAA4B;AAC7BnE,IAAAA,GAAG,EAAE,eAAY;AACb;AACA,aAAOiE,YAAY,CAACiB,SAApB;AACH;AAJ4B,GAA5B,CAAL;AAMAtF,EAAAA,KAAK,CAACuE,QAAD,EAAW,SAAX,EAAsB;AACvBnE,IAAAA,GAAG,EAAE,eAAY;AACb;AACA,aAAOiE,YAAY,CAACkB,OAApB;AACH;AAJsB,GAAtB,CAAL;AAMApB,EAAAA,gBAAgB,CAAC9D,GAAjB,CAAqBgE,YAArB,EAAmCE,QAAnC;;AACA,MAAIF,YAAY,CAACmB,OAAjB,EAA0B;AACtBjB,IAAAA,QAAQ,CAACQ,MAAT,GAAkBb,uBAAuB,CAACG,YAAY,CAACmB,OAAd,CAAzC;AACH;;AACD,MAAInB,YAAY,CAACoB,KAAjB,EAAwB;AACpBlB,IAAAA,QAAQ,CAACS,IAAT,GAAgBd,uBAAuB,CAACG,YAAY,CAACoB,KAAd,CAAvC;AACH;;AACD,SAAOlB,QAAP;AACH;;AAED,SAASmB,aAAT,CAAuBC,IAAvB,EAA6B;AACzB,MAAItD,EAAE,GAAG4B,kBAAkB,EAA3B;;AACA,MAAKtB,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAA1B,IAA2C,CAACR,EAAhD,EAAoD;AAChDD,IAAAA,MAAM,CAACuD,IAAI,GAAG,8DAAP,GACH,mBADG,GAEH,wEAFE,CAAN;AAGH;;AACD,SAAOtD,EAAE,KAAK,IAAP,IAAeA,EAAE,KAAK,KAAK,CAA3B,GAA+B,KAAK,CAApC,GAAwCA,EAAE,CAACrC,KAAlD;AACH;;AACD,SAAS4F,uBAAT,CAAiCpG,IAAjC,EAAuCqG,OAAvC,EAAgD;AAC5C,MAAIA,OAAO,KAAK,KAAK,CAArB,EAAwB;AAAEA,IAAAA,OAAO,GAAG,EAAV;AAAe;;AACzC,MAAIC,MAAM,GAAGtG,IAAI,CAACuG,MAAL,CAAYD,MAAzB;AACAtG,EAAAA,IAAI,CAACuG,MAAL,CAAYD,MAAZ,GAAqB,IAArB;AACA,MAAIzD,EAAE,GAAG,IAAI7C,IAAJ,CAASqG,OAAT,CAAT;AACArG,EAAAA,IAAI,CAACuG,MAAL,CAAYD,MAAZ,GAAqBA,MAArB;AACA,SAAOzD,EAAP;AACH;;AACD,SAAS2D,mBAAT,CAA6BtF,GAA7B,EAAkC;AAC9B,MAAIzB,GAAG,GAAGyE,iBAAiB,EAA3B;AACA,SAAOzE,GAAG,IAAIyB,GAAG,YAAYzB,GAA7B;AACH;;AACD,SAASgH,eAAT,CAAyB5D,EAAzB,EAA6B6D,QAA7B,EAAuC;AACnC,SAAO,YAAY;AACf,QAAIC,IAAI,GAAG,EAAX;;AACA,SAAK,IAAIC,EAAE,GAAG,CAAd,EAAiBA,EAAE,GAAGC,SAAS,CAACC,MAAhC,EAAwCF,EAAE,EAA1C,EAA8C;AAC1CD,MAAAA,IAAI,CAACC,EAAD,CAAJ,GAAWC,SAAS,CAACD,EAAD,CAApB;AACH;;AACD,QAAI,CAAC/D,EAAE,CAACkE,YAAH,CAAgBL,QAAhB,CAAL,EAAgC;AAC5B,aAAO9D,MAAM,CAAC,WAAW8D,QAAX,GAAsB,iDAAvB,EAA0E7D,EAA1E,CAAb;AACH;;AACD,WAAOA,EAAE,CAACkE,YAAH,CAAgBL,QAAhB,EAA0BM,KAA1B,CAAgCnE,EAAhC,EAAoC8D,IAApC,CAAP;AACH,GATD;AAUH;;AACD,SAASM,YAAT,CAAsBC,KAAtB,EAA6BC,WAA7B,EAA0C;AACtC,MAAIC,GAAJ;;AACA,MAAI,CAACF,KAAL,EAAY;AACRE,IAAAA,GAAG,GAAG,EAAN;AACH,GAFD,MAGK,IAAIF,KAAK,CAACG,WAAV,EAAuB;AACxB;AACA,WAAOH,KAAK,CAACG,WAAb;AACH,GAHI,MAIA;AACDD,IAAAA,GAAG,GAAG,EAAN;;AACA,SAAK,IAAI1G,GAAT,IAAgBwG,KAAhB,EAAuB;AACnB,UAAIA,KAAK,CAACxG,GAAD,CAAL,IAAcA,GAAG,CAAC,CAAD,CAAH,KAAW,GAA7B,EAAkC;AAC9B0G,QAAAA,GAAG,CAAC1G,GAAD,CAAH,GAAW,IAAX;AACH;AACJ;AACJ,GAhBqC,CAiBtC;;;AACA,OAAK,IAAIA,GAAT,IAAgByG,WAAhB,EAA6B;AACzB,QAAI,EAAEzG,GAAG,IAAI0G,GAAT,CAAJ,EAAmB;AACfA,MAAAA,GAAG,CAAC1G,GAAD,CAAH,GAAW,IAAX;AACH;AACJ;;AACD,SAAO0G,GAAP;AACH;;AACD,IAAIE,kBAAJ;;AACA,IAAIC,qBAAqB,GAAG,SAAxBA,qBAAwB,GAAY;AACpC,MAAI,CAACD,kBAAL,EAAyB;AACrB,QAAIzE,EAAE,GAAGuD,uBAAuB,CAAClC,iBAAiB,EAAlB,EAAsB;AAClDsD,MAAAA,QAAQ,EAAE;AACNpG,QAAAA,KAAK,EAAE,iBAAY;AACf,iBAAO,CAAP;AACH;AAHK;AADwC,KAAtB,CAAhC,CADqB,CAQrB;;AACA,QAAIqG,OAAO,GAAG5E,EAAE,CAAC6E,iBAAH,CAAqBtG,KAArB,CAA2BgD,WAAzC,CATqB,CAUrB;;AACA,QAAIuD,GAAG,GAAG9E,EAAE,CAAC+E,KAAH,CAASC,MAAT,CAAgBC,GAAhB,CAAoB1D,WAA9B;AACAkD,IAAAA,kBAAkB,GAAG;AACjBG,MAAAA,OAAO,EAAEA,OADQ;AAEjBE,MAAAA,GAAG,EAAEA;AAFY,KAArB;AAIA9E,IAAAA,EAAE,CAACkF,QAAH;AACH;;AACD,SAAOT,kBAAP;AACH,CApBD;AAsBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAEA,IAAIU,OAAQ,GAAG,oBAAW;AACtBA,EAAAA,OAAQ,GAAGpI,MAAM,CAACqI,MAAP,IAAiB,SAASD,QAAT,CAAkBE,CAAlB,EAAqB;AAC7C,SAAK,IAAIC,CAAJ,EAAOC,CAAC,GAAG,CAAX,EAAcpG,CAAC,GAAG6E,SAAS,CAACC,MAAjC,EAAyCsB,CAAC,GAAGpG,CAA7C,EAAgDoG,CAAC,EAAjD,EAAqD;AACjDD,MAAAA,CAAC,GAAGtB,SAAS,CAACuB,CAAD,CAAb;;AACA,WAAK,IAAIC,CAAT,IAAcF,CAAd;AAAiB,YAAIvI,MAAM,CAACC,SAAP,CAAiB0B,cAAjB,CAAgCzB,IAAhC,CAAqCqI,CAArC,EAAwCE,CAAxC,CAAJ,EAAgDH,CAAC,CAACG,CAAD,CAAD,GAAOF,CAAC,CAACE,CAAD,CAAR;AAAjE;AACH;;AACD,WAAOH,CAAP;AACH,GAND;;AAOA,SAAOF,OAAQ,CAAChB,KAAT,CAAe,IAAf,EAAqBH,SAArB,CAAP;AACH,CATD;;AAWA,SAASyB,QAAT,CAAkBC,CAAlB,EAAqB;AACjB,MAAIJ,CAAC,GAAG,OAAOhI,MAAP,KAAkB,UAAlB,IAAgCA,MAAM,CAACqI,QAA/C;AAAA,MAAyDC,CAAC,GAAGN,CAAC,IAAII,CAAC,CAACJ,CAAD,CAAnE;AAAA,MAAwEC,CAAC,GAAG,CAA5E;AACA,MAAIK,CAAJ,EAAO,OAAOA,CAAC,CAAC3I,IAAF,CAAOyI,CAAP,CAAP;AACP,MAAIA,CAAC,IAAI,OAAOA,CAAC,CAACzB,MAAT,KAAoB,QAA7B,EAAuC,OAAO;AAC1C4B,IAAAA,IAAI,EAAE,gBAAY;AACd,UAAIH,CAAC,IAAIH,CAAC,IAAIG,CAAC,CAACzB,MAAhB,EAAwByB,CAAC,GAAG,KAAK,CAAT;AACxB,aAAO;AAAEnH,QAAAA,KAAK,EAAEmH,CAAC,IAAIA,CAAC,CAACH,CAAC,EAAF,CAAf;AAAsBO,QAAAA,IAAI,EAAE,CAACJ;AAA7B,OAAP;AACH;AAJyC,GAAP;AAMvC,QAAM,IAAIK,SAAJ,CAAcT,CAAC,GAAG,yBAAH,GAA+B,iCAA9C,CAAN;AACH;;AAED,SAASU,MAAT,CAAgBN,CAAhB,EAAmBvG,CAAnB,EAAsB;AAClB,MAAIyG,CAAC,GAAG,OAAOtI,MAAP,KAAkB,UAAlB,IAAgCoI,CAAC,CAACpI,MAAM,CAACqI,QAAR,CAAzC;AACA,MAAI,CAACC,CAAL,EAAQ,OAAOF,CAAP;AACR,MAAIH,CAAC,GAAGK,CAAC,CAAC3I,IAAF,CAAOyI,CAAP,CAAR;AAAA,MAAmBO,CAAnB;AAAA,MAAsBC,EAAE,GAAG,EAA3B;AAAA,MAA+BC,CAA/B;;AACA,MAAI;AACA,WAAO,CAAChH,CAAC,KAAK,KAAK,CAAX,IAAgBA,CAAC,KAAK,CAAvB,KAA6B,CAAC,CAAC8G,CAAC,GAAGV,CAAC,CAACM,IAAF,EAAL,EAAeC,IAApD;AAA0DI,MAAAA,EAAE,CAACE,IAAH,CAAQH,CAAC,CAAC1H,KAAV;AAA1D;AACH,GAFD,CAGA,OAAOoC,KAAP,EAAc;AAAEwF,IAAAA,CAAC,GAAG;AAAExF,MAAAA,KAAK,EAAEA;AAAT,KAAJ;AAAuB,GAHvC,SAIQ;AACJ,QAAI;AACA,UAAIsF,CAAC,IAAI,CAACA,CAAC,CAACH,IAAR,KAAiBF,CAAC,GAAGL,CAAC,CAAC,QAAD,CAAtB,CAAJ,EAAuCK,CAAC,CAAC3I,IAAF,CAAOsI,CAAP;AAC1C,KAFD,SAGQ;AAAE,UAAIY,CAAJ,EAAO,MAAMA,CAAC,CAACxF,KAAR;AAAgB;AACpC;;AACD,SAAOuF,EAAP;AACH;;AAED,SAASG,aAAT,CAAuBC,EAAvB,EAA2BC,IAA3B,EAAiC;AAC7B,OAAK,IAAIhB,CAAC,GAAG,CAAR,EAAWiB,EAAE,GAAGD,IAAI,CAACtC,MAArB,EAA6BwC,CAAC,GAAGH,EAAE,CAACrC,MAAzC,EAAiDsB,CAAC,GAAGiB,EAArD,EAAyDjB,CAAC,IAAIkB,CAAC,EAA/D;AACIH,IAAAA,EAAE,CAACG,CAAD,CAAF,GAAQF,IAAI,CAAChB,CAAD,CAAZ;AADJ;;AAEA,SAAOe,EAAP;AACH;;AAED,SAASI,YAAT,CAAsBvF,IAAtB,EAA4B;AACxB,SAAO9D,SAAS,GAAGC,MAAM,OAAN,CAAW6D,IAAX,CAAH,GAAsBA,IAAtC;AACH;;AACD,IAAIwF,uBAAuB,GAAGD,YAAY,CAAC,+BAAD,CAA1C;AACA,IAAIE,wBAAwB,GAAGF,YAAY,CAAC,gCAAD,CAA3C,C,CACA;;AACA,IAAIG,MAAM,GAAG,wBAAb;AAEA,IAAIC,iBAAiB,GAAG,IAAI/E,OAAJ,EAAxB;AACA,IAAIgF,MAAM,GAAG,IAAIhF,OAAJ,EAAb;AACA,IAAIiF,WAAW,GAAG,IAAIjF,OAAJ,EAAlB;;AAEA,IAAIkF,OAAO;AAAG;AAAe,YAAY;AACrC,WAASA,OAAT,CAAiBnJ,EAAjB,EAAqB;AACjB,QAAIC,GAAG,GAAGD,EAAE,CAACC,GAAb;AAAA,QAAkBC,GAAG,GAAGF,EAAE,CAACE,GAA3B;AACAL,IAAAA,KAAK,CAAC,IAAD,EAAO,OAAP,EAAgB;AACjBI,MAAAA,GAAG,EAAEA,GADY;AAEjBC,MAAAA,GAAG,EAAEA;AAFY,KAAhB,CAAL;AAIH;;AACD,SAAOiJ,OAAP;AACH,CAT4B,EAA7B;;AAUA,SAASC,SAAT,CAAmB1D,OAAnB,EAA4B2D,QAA5B,EAAsC;AAClC,MAAIlB,CAAC,GAAG,IAAIgB,OAAJ,CAAYzD,OAAZ,CAAR,CADkC,CAElC;AACA;AACA;;AACA,MAAI4D,MAAM,GAAGrK,MAAM,CAACsK,IAAP,CAAYpB,CAAZ,CAAb;AACAe,EAAAA,WAAW,CAAChJ,GAAZ,CAAgBoJ,MAAhB,EAAwB,IAAxB;AACA,SAAOA,MAAP;AACH;;AACD,SAASE,GAAT,CAAaC,GAAb,EAAkB;AACd,MAAIzJ,EAAJ;;AACA,MAAI0J,KAAK,CAACD,GAAD,CAAT,EAAgB;AACZ,WAAOA,GAAP;AACH;;AACD,MAAIhJ,KAAK,GAAGkJ,QAAQ,EAAE3J,EAAE,GAAG,EAAL,EAASA,EAAE,CAAC+I,MAAD,CAAF,GAAaU,GAAtB,EAA2BzJ,EAA7B,EAApB;AACA,SAAOoJ,SAAS,CAAC;AACbnJ,IAAAA,GAAG,EAAE,eAAY;AAAE,aAAOQ,KAAK,CAACsI,MAAD,CAAZ;AAAuB,KAD7B;AAEb7I,IAAAA,GAAG,EAAE,aAAU6B,CAAV,EAAa;AAAE,aAAQtB,KAAK,CAACsI,MAAD,CAAL,GAAgBhH,CAAxB;AAA6B;AAFpC,GAAD,CAAhB;AAIH;;AACD,SAAS2H,KAAT,CAAejJ,KAAf,EAAsB;AAClB,SAAOA,KAAK,YAAY0I,OAAxB;AACH;;AACD,SAASS,KAAT,CAAeJ,GAAf,EAAoB;AAChB,SAAOE,KAAK,CAACF,GAAD,CAAL,GAAaA,GAAG,CAAC/I,KAAjB,GAAyB+I,GAAhC;AACH;;AACD,SAASK,MAAT,CAAgBtJ,GAAhB,EAAqB;AACjB,MAAKiC,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAA1B,IAA2C,CAACoH,UAAU,CAACvJ,GAAD,CAA1D,EAAiE;AAC7D0B,IAAAA,MAAM,CAAC,8DAAD,CAAN;AACH;;AACD,MAAI,CAACL,aAAa,CAACrB,GAAD,CAAlB,EACI,OAAOA,GAAP;AACJ,MAAIwJ,GAAG,GAAG,EAAV;;AACA,OAAK,IAAIhK,GAAT,IAAgBQ,GAAhB,EAAqB;AACjBwJ,IAAAA,GAAG,CAAChK,GAAD,CAAH,GAAWiK,KAAK,CAACzJ,GAAD,EAAMR,GAAN,CAAhB;AACH;;AACD,SAAOgK,GAAP;AACH;;AACD,SAASE,SAAT,CAAmBC,OAAnB,EAA4B;AACxB,MAAIC,OAAO,GAAGX,GAAG,CAAC,CAAD,CAAjB;AACA,SAAOJ,SAAS,CAACc,OAAO,CAAC,YAAY;AAAE,WAAO,KAAKC,OAAO,CAAC1J,KAApB;AAA4B,GAA3C,EAA6C,YAAY;AAC7E,MAAE0J,OAAO,CAAC1J,KAAV;AACH,GAFuB,CAAR,CAAhB;AAGH;;AACD,SAASuJ,KAAT,CAAeI,MAAf,EAAuBrK,GAAvB,EAA4B;AACxB,MAAIgC,CAAC,GAAGqI,MAAM,CAACrK,GAAD,CAAd;AACA,MAAI2J,KAAK,CAAC3H,CAAD,CAAT,EACI,OAAOA,CAAP;AACJ,SAAOqH,SAAS,CAAC;AACbnJ,IAAAA,GAAG,EAAE,eAAY;AAAE,aAAOmK,MAAM,CAACrK,GAAD,CAAb;AAAqB,KAD3B;AAEbG,IAAAA,GAAG,EAAE,aAAU6B,CAAV,EAAa;AAAE,aAAQqI,MAAM,CAACrK,GAAD,CAAN,GAAcgC,CAAtB;AAA2B;AAFlC,GAAD,CAAhB;AAIH;;AACD,SAASsI,UAAT,CAAoBZ,GAApB,EAAyB;AACrB,MAAIzJ,EAAJ;;AACA,MAAI0J,KAAK,CAACD,GAAD,CAAT,EAAgB;AACZ,WAAOA,GAAP;AACH;;AACD,MAAIhJ,KAAK,GAAG6J,eAAe,EAAEtK,EAAE,GAAG,EAAL,EAASA,EAAE,CAAC+I,MAAD,CAAF,GAAaU,GAAtB,EAA2BzJ,EAA7B,EAA3B;AACA,SAAOoJ,SAAS,CAAC;AACbnJ,IAAAA,GAAG,EAAE,eAAY;AAAE,aAAOQ,KAAK,CAACsI,MAAD,CAAZ;AAAuB,KAD7B;AAEb7I,IAAAA,GAAG,EAAE,aAAU6B,CAAV,EAAa;AAAE,aAAQtB,KAAK,CAACsI,MAAD,CAAL,GAAgBhH,CAAxB;AAA6B;AAFpC,GAAD,CAAhB;AAIH;;AACD,SAASwI,UAAT,CAAoB9J,KAApB,EAA2B;AACvB,MAAI,CAACiJ,KAAK,CAACjJ,KAAD,CAAV,EACI;AACJA,EAAAA,KAAK,CAACA,KAAN,GAAcA,KAAK,CAACA,KAApB;AACH;;AACD,SAAS+J,SAAT,CAAmBC,cAAnB,EAAmC;AAC/B,MAAIzK,EAAJ,EAAQ0K,GAAR,EAAaC,EAAb;;AACA,MAAIb,UAAU,CAACW,cAAD,CAAd,EAAgC;AAC5B,WAAOA,cAAP;AACH;;AACD,MAAIhK,KAAK,GAAGkJ,QAAQ,EAAE3J,EAAE,GAAG,EAAL,EAASA,EAAE,CAAC+I,MAAD,CAAF,GAAa0B,cAAtB,EAAsCzK,EAAxC,EAApB;;AACA,MAAI4K,OAAO,GAAG,SAAVA,OAAU,CAAU7K,GAAV,EAAe;AACzBF,IAAAA,KAAK,CAACY,KAAD,EAAQV,GAAR,EAAa;AACdE,MAAAA,GAAG,EAAE,eAAY;AACb,YAAIyJ,KAAK,CAACjJ,KAAK,CAACV,GAAD,CAAN,CAAT,EAAuB;AACnB,iBAAOU,KAAK,CAACV,GAAD,CAAL,CAAWU,KAAlB;AACH;;AACD,eAAOA,KAAK,CAACV,GAAD,CAAZ;AACH,OANa;AAOdG,MAAAA,GAAG,EAAE,aAAU6B,CAAV,EAAa;AACd,YAAI2H,KAAK,CAACjJ,KAAK,CAACV,GAAD,CAAN,CAAT,EAAuB;AACnB,iBAAQU,KAAK,CAACV,GAAD,CAAL,CAAWU,KAAX,GAAmBmJ,KAAK,CAAC7H,CAAD,CAAhC;AACH;;AACDtB,QAAAA,KAAK,CAACV,GAAD,CAAL,GAAa6J,KAAK,CAAC7H,CAAD,CAAlB;AACH;AAZa,KAAb,CAAL;AAcH,GAfD;;AAgBA,MAAI;AACA,SAAK,IAAI8I,EAAE,GAAGlD,QAAQ,CAAC1I,MAAM,CAAC6L,IAAP,CAAYL,cAAZ,CAAD,CAAjB,EAAgDM,EAAE,GAAGF,EAAE,CAAC9C,IAAH,EAA1D,EAAqE,CAACgD,EAAE,CAAC/C,IAAzE,EAA+E+C,EAAE,GAAGF,EAAE,CAAC9C,IAAH,EAApF,EAA+F;AAC3F,UAAIhI,GAAG,GAAGgL,EAAE,CAACtK,KAAb;;AACAmK,MAAAA,OAAO,CAAC7K,GAAD,CAAP;AACH;AACJ,GALD,CAMA,OAAOiL,KAAP,EAAc;AAAEN,IAAAA,GAAG,GAAG;AAAE7H,MAAAA,KAAK,EAAEmI;AAAT,KAAN;AAAyB,GANzC,SAOQ;AACJ,QAAI;AACA,UAAID,EAAE,IAAI,CAACA,EAAE,CAAC/C,IAAV,KAAmB2C,EAAE,GAAGE,EAAE,UAA1B,CAAJ,EAAwCF,EAAE,CAACxL,IAAH,CAAQ0L,EAAR;AAC3C,KAFD,SAGQ;AAAE,UAAIH,GAAJ,EAAS,MAAMA,GAAG,CAAC7H,KAAV;AAAkB;AACxC;;AACD,SAAOpC,KAAP;AACH;;AAED,SAASwK,KAAT,CAAe1K,GAAf,EAAoB;AAChB,MAAIP,EAAJ;;AACA,SAAOkL,OAAO,CAAC,CAAC3K,GAAG,KAAK,IAAR,IAAgBA,GAAG,KAAK,KAAK,CAA7B,GAAiC,KAAK,CAAtC,GAA0CA,GAAG,CAAC2G,MAA/C,MAA2D,CAAClH,EAAE,GAAGO,GAAG,CAAC2G,MAAV,MAAsB,IAAtB,IAA8BlH,EAAE,KAAK,KAAK,CAA1C,GAA8C,KAAK,CAAnD,GAAuDA,EAAE,CAACmL,OAArH,CAAD,CAAd;AACH;;AACD,SAASrB,UAAT,CAAoBvJ,GAApB,EAAyB;AACrB,MAAIP,EAAJ;;AACA,SAAOkL,OAAO,CAAC,CAAC3K,GAAG,KAAK,IAAR,IAAgBA,GAAG,KAAK,KAAK,CAA7B,GAAiC,KAAK,CAAtC,GAA0CA,GAAG,CAAC2G,MAA/C,KAA0D,EAAE,CAAClH,EAAE,GAAGO,GAAG,CAAC2G,MAAV,MAAsB,IAAtB,IAA8BlH,EAAE,KAAK,KAAK,CAA1C,GAA8C,KAAK,CAAnD,GAAuDA,EAAE,CAACmL,OAA5D,CAA3D,CAAd;AACH;AACD;AACA;AACA;AACA;;;AACA,SAASC,kBAAT,CAA4BtL,MAA5B,EAAoC;AAChC,MAAI,CAAC8B,aAAa,CAAC9B,MAAD,CAAd,IACAmL,KAAK,CAACnL,MAAD,CADL,IAEAqB,KAAK,CAACD,OAAN,CAAcpB,MAAd,CAFA,IAGA4J,KAAK,CAAC5J,MAAD,CAHL,IAIA+F,mBAAmB,CAAC/F,MAAD,CAJnB,IAKAkJ,iBAAiB,CAAC7E,GAAlB,CAAsBrE,MAAtB,CALJ,EAMI;AACJkJ,EAAAA,iBAAiB,CAAC9I,GAAlB,CAAsBJ,MAAtB,EAA8B,IAA9B;AACA,MAAIgL,IAAI,GAAG7L,MAAM,CAAC6L,IAAP,CAAYhL,MAAZ,CAAX;;AACA,OAAK,IAAI2H,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGqD,IAAI,CAAC3E,MAAzB,EAAiCsB,CAAC,EAAlC,EAAsC;AAClC4D,IAAAA,mBAAmB,CAACvL,MAAD,EAASgL,IAAI,CAACrD,CAAD,CAAb,CAAnB;AACH;AACJ;AACD;AACA;AACA;;;AACA,SAAS4D,mBAAT,CAA6BvL,MAA7B,EAAqCC,GAArC,EAA0CS,GAA1C,EAA+C;AAC3C,MAAIT,GAAG,KAAK,QAAZ,EACI;AACJ,MAAIkL,KAAK,CAACnL,MAAM,CAACC,GAAD,CAAP,CAAT,EACI;AACJ,MAAIuL,MAAJ;AACA,MAAIC,MAAJ;AACA,MAAIC,QAAQ,GAAGvM,MAAM,CAACwM,wBAAP,CAAgC3L,MAAhC,EAAwCC,GAAxC,CAAf;;AACA,MAAIyL,QAAJ,EAAc;AACV,QAAIA,QAAQ,CAACnL,YAAT,KAA0B,KAA9B,EAAqC;AACjC;AACH;;AACDiL,IAAAA,MAAM,GAAGE,QAAQ,CAACvL,GAAlB;AACAsL,IAAAA,MAAM,GAAGC,QAAQ,CAACtL,GAAlB;;AACA,QAAI,CAAC,CAACoL,MAAD,IAAWC,MAAZ;AAAoB;AACpBrF,IAAAA,SAAS,CAACC,MAAV,KAAqB,CADzB,EAC4B;AACxB3F,MAAAA,GAAG,GAAGV,MAAM,CAACC,GAAD,CAAZ;AACH;AACJ;;AACDqL,EAAAA,kBAAkB,CAAC5K,GAAD,CAAlB;AACAvB,EAAAA,MAAM,CAACkB,cAAP,CAAsBL,MAAtB,EAA8BC,GAA9B,EAAmC;AAC/BK,IAAAA,UAAU,EAAE,IADmB;AAE/BC,IAAAA,YAAY,EAAE,IAFiB;AAG/BJ,IAAAA,GAAG,EAAE,SAASyL,aAAT,GAAyB;AAC1B,UAAIjL,KAAK,GAAG6K,MAAM,GAAGA,MAAM,CAACnM,IAAP,CAAYW,MAAZ,CAAH,GAAyBU,GAA3C,CAD0B,CAE1B;;AACA,UAAIT,GAAG,KAAKgJ,MAAR,IAAkBW,KAAK,CAACjJ,KAAD,CAA3B,EAAoC;AAChC,eAAOA,KAAK,CAACA,KAAb;AACH,OAFD,MAGK;AACD,eAAOA,KAAP;AACH;AACJ,KAZ8B;AAa/BP,IAAAA,GAAG,EAAE,SAASyL,aAAT,CAAuBC,MAAvB,EAA+B;AAChC,UAAIN,MAAM,IAAI,CAACC,MAAf,EACI;AACJ,UAAI9K,KAAK,GAAG6K,MAAM,GAAGA,MAAM,CAACnM,IAAP,CAAYW,MAAZ,CAAH,GAAyBU,GAA3C,CAHgC,CAIhC;AACA;AACA;;AACA,UAAIT,GAAG,KAAKgJ,MAAR,IAAkBW,KAAK,CAACjJ,KAAD,CAAvB,IAAkC,CAACiJ,KAAK,CAACkC,MAAD,CAA5C,EAAsD;AAClDnL,QAAAA,KAAK,CAACA,KAAN,GAAcmL,MAAd;AACH,OAFD,MAGK,IAAIL,MAAJ,EAAY;AACbA,QAAAA,MAAM,CAACpM,IAAP,CAAYW,MAAZ,EAAoB8L,MAApB;AACH,OAFI,MAGA;AACDpL,QAAAA,GAAG,GAAGoL,MAAN;AACH;;AACDR,MAAAA,kBAAkB,CAACQ,MAAD,CAAlB;AACH;AA9B8B,GAAnC;AAgCH;;AACD,SAASC,OAAT,CAAiBtL,GAAjB,EAAsB;AAClB,MAAIzB,GAAG,GAAG0E,yBAAyB,EAAnC;AACA,MAAIsI,QAAJ;;AACA,MAAIhN,GAAG,CAACiN,UAAR,EAAoB;AAChBD,IAAAA,QAAQ,GAAGhN,GAAG,CAACiN,UAAJ,CAAexL,GAAf,CAAX;AACH,GAFD,MAGK;AACD,QAAI2B,EAAE,GAAGuD,uBAAuB,CAAC3G,GAAD,EAAM;AAClCkN,MAAAA,IAAI,EAAE;AACFC,QAAAA,OAAO,EAAE1L;AADP;AAD4B,KAAN,CAAhC;AAKAuL,IAAAA,QAAQ,GAAG5J,EAAE,CAAC+E,KAAH,CAASgF,OAApB;AACH,GAbiB,CAclB;;;AACA,MAAI,CAACtL,MAAM,CAACmL,QAAD,EAAW,QAAX,CAAX,EAAiC;AAC7BxL,IAAAA,GAAG,CAACwL,QAAD,EAAW,QAAX,EAAqBI,YAAY,CAACJ,QAAD,CAAjC,CAAH;AACH;;AACD,SAAOA,QAAP;AACH;;AACD,SAASK,cAAT,GAA0B;AACtB,SAAON,OAAO,CAAC,EAAD,CAAP,CAAY3E,MAAnB;AACH;;AACD,SAASgF,YAAT,CAAsBzL,KAAtB,EAA6B;AACzB,MAAIA,KAAK,KAAK,KAAK,CAAnB,EAAsB;AAAEA,IAAAA,KAAK,GAAG,EAAR;AAAa;;AACrC,SAAO;AACHA,IAAAA,KAAK,EAAEA,KADJ;AAEH0G,IAAAA,GAAG,EAAE;AACDiF,MAAAA,MAAM,EAAEzM,MADP;AAED0M,MAAAA,MAAM,EAAE1M,MAFP;AAGD2M,MAAAA,MAAM,EAAE3M,MAHP;AAID4M,MAAAA,SAAS,EAAE5M;AAJV;AAFF,GAAP;AASH;;AACD,SAAS2K,eAAT,CAAyB/J,GAAzB,EAA8B;AAC1B,MAAImK,GAAJ,EAAS1K,EAAT;;AACA,MAAKwC,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAA1B,IAA2C,CAACnC,GAAhD,EAAqD;AACjD0B,IAAAA,MAAM,CAAC,4DAAD,CAAN;AACA;AACH;;AACD,MAAI,EAAEL,aAAa,CAACrB,GAAD,CAAb,IAAsBW,OAAO,CAACX,GAAD,CAA/B,KACA0K,KAAK,CAAC1K,GAAD,CADL,IAEA,CAACtB,MAAM,CAACuN,YAAP,CAAoBjM,GAApB,CAFL,EAE+B;AAC3B,WAAOA,GAAP;AACH;;AACD,MAAIuL,QAAQ,GAAGD,OAAO,CAAC,EAAD,CAAtB;AACAT,EAAAA,kBAAkB,CAACU,QAAD,CAAlB;AACA,MAAIW,EAAE,GAAGX,QAAQ,CAAC5E,MAAlB;;AACA,MAAI0D,OAAO,GAAG,SAAVA,OAAU,CAAU7K,GAAV,EAAe;AACzB,QAAIS,GAAG,GAAGD,GAAG,CAACR,GAAD,CAAb;AACA,QAAIuL,MAAJ;AACA,QAAIC,MAAJ;AACA,QAAIC,QAAQ,GAAGvM,MAAM,CAACwM,wBAAP,CAAgClL,GAAhC,EAAqCR,GAArC,CAAf;;AACA,QAAIyL,QAAJ,EAAc;AACV,UAAIA,QAAQ,CAACnL,YAAT,KAA0B,KAA9B,EAAqC;AACjC,eAAO,UAAP;AACH;;AACDiL,MAAAA,MAAM,GAAGE,QAAQ,CAACvL,GAAlB;AACAsL,MAAAA,MAAM,GAAGC,QAAQ,CAACtL,GAAlB;AACH;;AACDjB,IAAAA,MAAM,CAACkB,cAAP,CAAsB2L,QAAtB,EAAgC/L,GAAhC,EAAqC;AACjCK,MAAAA,UAAU,EAAE,IADqB;AAEjCC,MAAAA,YAAY,EAAE,IAFmB;AAGjCJ,MAAAA,GAAG,EAAE,SAASyL,aAAT,GAAyB;AAC1B,YAAI1L,EAAJ;;AACA,YAAIS,KAAK,GAAG6K,MAAM,GAAGA,MAAM,CAACnM,IAAP,CAAYoB,GAAZ,CAAH,GAAsBC,GAAxC;AACA,SAACR,EAAE,GAAGyM,EAAE,CAACtF,GAAT,MAAkB,IAAlB,IAA0BnH,EAAE,KAAK,KAAK,CAAtC,GAA0C,KAAK,CAA/C,GAAmDA,EAAE,CAACqM,MAAH,EAAnD;AACA,eAAO5L,KAAP;AACH,OARgC;AASjCP,MAAAA,GAAG,EAAE,SAASyL,aAAT,CAAuBC,MAAvB,EAA+B;AAChC,YAAI5L,EAAJ;;AACA,YAAIsL,MAAM,IAAI,CAACC,MAAf,EACI;;AACJ,YAAIA,MAAJ,EAAY;AACRA,UAAAA,MAAM,CAACpM,IAAP,CAAYoB,GAAZ,EAAiBqL,MAAjB;AACH,SAFD,MAGK;AACDpL,UAAAA,GAAG,GAAGoL,MAAN;AACH;;AACD,SAAC5L,EAAE,GAAGyM,EAAE,CAACtF,GAAT,MAAkB,IAAlB,IAA0BnH,EAAE,KAAK,KAAK,CAAtC,GAA0C,KAAK,CAA/C,GAAmDA,EAAE,CAACoM,MAAH,EAAnD;AACH;AApBgC,KAArC;AAsBH,GAlCD;;AAmCA,MAAI;AACA,SAAK,IAAIzB,EAAE,GAAGhD,QAAQ,CAAC1I,MAAM,CAAC6L,IAAP,CAAYvK,GAAZ,CAAD,CAAjB,EAAqCsK,EAAE,GAAGF,EAAE,CAAC5C,IAAH,EAA/C,EAA0D,CAAC8C,EAAE,CAAC7C,IAA9D,EAAoE6C,EAAE,GAAGF,EAAE,CAAC5C,IAAH,EAAzE,EAAoF;AAChF,UAAIhI,GAAG,GAAG8K,EAAE,CAACpK,KAAb;;AACAmK,MAAAA,OAAO,CAAC7K,GAAD,CAAP;AACH;AACJ,GALD,CAMA,OAAOiL,KAAP,EAAc;AAAEN,IAAAA,GAAG,GAAG;AAAE7H,MAAAA,KAAK,EAAEmI;AAAT,KAAN;AAAyB,GANzC,SAOQ;AACJ,QAAI;AACA,UAAIH,EAAE,IAAI,CAACA,EAAE,CAAC7C,IAAV,KAAmBhI,EAAE,GAAG2K,EAAE,UAA1B,CAAJ,EAAwC3K,EAAE,CAACb,IAAH,CAAQwL,EAAR;AAC3C,KAFD,SAGQ;AAAE,UAAID,GAAJ,EAAS,MAAMA,GAAG,CAAC7H,KAAV;AAAkB;AACxC;;AACD,SAAOiJ,QAAP;AACH;AACD;AACA;AACA;;;AACA,SAASnC,QAAT,CAAkBpJ,GAAlB,EAAuB;AACnB,MAAI,CAACoB,QAAQ,CAACpB,GAAD,CAAb,EAAoB;AAChB,QAAKiC,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAA9B,EAA6C;AACzCT,MAAAA,MAAM,CAAC,qDAAD,CAAN;AACH;;AACD,WAAO1B,GAAP;AACH;;AACD,MAAI,EAAEqB,aAAa,CAACrB,GAAD,CAAb,IAAsBW,OAAO,CAACX,GAAD,CAA/B,KACA0K,KAAK,CAAC1K,GAAD,CADL,IAEA,CAACtB,MAAM,CAACuN,YAAP,CAAoBjM,GAApB,CAFL,EAE+B;AAC3B,WAAOA,GAAP;AACH;;AACD,MAAIuL,QAAQ,GAAGD,OAAO,CAACtL,GAAD,CAAtB;AACA6K,EAAAA,kBAAkB,CAACU,QAAD,CAAlB;AACA,SAAOA,QAAP;AACH;AACD;AACA;AACA;;;AACA,SAASY,OAAT,CAAiBnM,GAAjB,EAAsB;AAClB,MAAI,EAAEqB,aAAa,CAACrB,GAAD,CAAb,IAAsBW,OAAO,CAACX,GAAD,CAA/B,KAAyC,CAACtB,MAAM,CAACuN,YAAP,CAAoBjM,GAApB,CAA9C,EAAwE;AACpE,WAAOA,GAAP;AACH,GAHiB,CAIlB;;;AACA,MAAIkM,EAAE,GAAGN,cAAc,EAAvB;AACAM,EAAAA,EAAE,CAACtB,OAAH,GAAa,IAAb;AACA7K,EAAAA,GAAG,CAACC,GAAD,EAAM,QAAN,EAAgBkM,EAAhB,CAAH,CAPkB,CAQlB;;AACAxD,EAAAA,MAAM,CAAC/I,GAAP,CAAWK,GAAX,EAAgB,IAAhB;AACA,SAAOA,GAAP;AACH;;AACD,SAASoM,KAAT,CAAeb,QAAf,EAAyB;AACrB,MAAI9L,EAAJ,EAAQ2K,EAAR;;AACA,MAAIM,KAAK,CAACa,QAAD,CAAL,IAAmB,CAAC7M,MAAM,CAACuN,YAAP,CAAoBV,QAApB,CAAxB,EAAuD;AACnD,WAAOA,QAAP;AACH;;AACD,SAAO,CAAC,CAACnB,EAAE,GAAG,CAAC3K,EAAE,GAAG8L,QAAN,MAAoB,IAApB,IAA4B9L,EAAE,KAAK,KAAK,CAAxC,GAA4C,KAAK,CAAjD,GAAqDA,EAAE,CAACkH,MAA9D,MAA0E,IAA1E,IAAkFyD,EAAE,KAAK,KAAK,CAA9F,GAAkG,KAAK,CAAvG,GAA2GA,EAAE,CAAClK,KAA/G,KAAyHqL,QAAhI;AACH;;AAED,SAASc,UAAT,CAAoBrM,GAApB,EAAyB;AACrB,SAAO2I,WAAW,CAAC/E,GAAZ,CAAgB5D,GAAhB,CAAP;AACH;AACD;AACA;AACA;AACA;AACA;AACA;;;AACA,SAAS8I,QAAT,CAAkBvJ,MAAlB,EAA0B;AACtB,SAAOA,MAAP;AACH;;AACD,SAAS+M,eAAT,CAAyBtM,GAAzB,EAA8B;AAC1B,MAAImK,GAAJ,EAAS1K,EAAT;;AACA,MAAI,EAAE4B,aAAa,CAACrB,GAAD,CAAb,IAAsBW,OAAO,CAACX,GAAD,CAA/B,KAAyC,CAACtB,MAAM,CAACuN,YAAP,CAAoBjM,GAApB,CAA9C,EAAwE;AACpE,WAAOA,GAAP;AACH;;AACD,MAAIuM,WAAW,GAAG,EAAlB;AACA,MAAIC,MAAM,GAAGpD,QAAQ,CAAC,EAAD,CAArB;AACA,MAAI8C,EAAE,GAAGM,MAAM,CAAC7F,MAAhB;;AACA,MAAI0D,OAAO,GAAG,SAAVA,OAAU,CAAU7K,GAAV,EAAe;AACzB,QAAIS,GAAG,GAAGD,GAAG,CAACR,GAAD,CAAb;AACA,QAAIuL,MAAJ;AACA,QAAIE,QAAQ,GAAGvM,MAAM,CAACwM,wBAAP,CAAgClL,GAAhC,EAAqCR,GAArC,CAAf;;AACA,QAAIyL,QAAJ,EAAc;AACV,UAAIA,QAAQ,CAACnL,YAAT,KAA0B,KAA9B,EAAqC;AACjC,eAAO,UAAP;AACH;;AACDiL,MAAAA,MAAM,GAAGE,QAAQ,CAACvL,GAAlB;AACH;;AACDhB,IAAAA,MAAM,CAACkB,cAAP,CAAsB2M,WAAtB,EAAmC/M,GAAnC,EAAwC;AACpCK,MAAAA,UAAU,EAAE,IADwB;AAEpCC,MAAAA,YAAY,EAAE,IAFsB;AAGpCJ,MAAAA,GAAG,EAAE,SAASyL,aAAT,GAAyB;AAC1B,YAAIjL,KAAK,GAAG6K,MAAM,GAAGA,MAAM,CAACnM,IAAP,CAAYoB,GAAZ,CAAH,GAAsBC,GAAxC;AACAiM,QAAAA,EAAE,CAACtF,GAAH,CAAOkF,MAAP;AACA,eAAO5L,KAAP;AACH,OAPmC;AAQpCP,MAAAA,GAAG,EAAE,aAAU6B,CAAV,EAAa;AACd,YAAKS,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAA9B,EAA6C;AACzCT,UAAAA,MAAM,CAAC,4BAA4BlC,GAA5B,GAAkC,gCAAnC,CAAN;AACH;AACJ;AAZmC,KAAxC;AAcH,GAxBD;;AAyBA,MAAI;AACA,SAAK,IAAI4K,EAAE,GAAGhD,QAAQ,CAAC1I,MAAM,CAAC6L,IAAP,CAAYvK,GAAZ,CAAD,CAAjB,EAAqCsK,EAAE,GAAGF,EAAE,CAAC5C,IAAH,EAA/C,EAA0D,CAAC8C,EAAE,CAAC7C,IAA9D,EAAoE6C,EAAE,GAAGF,EAAE,CAAC5C,IAAH,EAAzE,EAAoF;AAChF,UAAIhI,GAAG,GAAG8K,EAAE,CAACpK,KAAb;;AACAmK,MAAAA,OAAO,CAAC7K,GAAD,CAAP;AACH;AACJ,GALD,CAMA,OAAOiL,KAAP,EAAc;AAAEN,IAAAA,GAAG,GAAG;AAAE7H,MAAAA,KAAK,EAAEmI;AAAT,KAAN;AAAyB,GANzC,SAOQ;AACJ,QAAI;AACA,UAAIH,EAAE,IAAI,CAACA,EAAE,CAAC7C,IAAV,KAAmBhI,EAAE,GAAG2K,EAAE,UAA1B,CAAJ,EAAwC3K,EAAE,CAACb,IAAH,CAAQwL,EAAR;AAC3C,KAFD,SAGQ;AAAE,UAAID,GAAJ,EAAS,MAAMA,GAAG,CAAC7H,KAAV;AAAkB;AACxC;;AACDqG,EAAAA,WAAW,CAAChJ,GAAZ,CAAgB4M,WAAhB,EAA6B,IAA7B;AACA,SAAOA,WAAP;AACH;AAED;AACA;AACA;AACA;AACA;;;AACA,SAASE,KAAT,CAAelN,MAAf,EAAuBC,GAAvB,EAA4BS,GAA5B,EAAiC;AAC7B,MAAI1B,GAAG,GAAGyE,iBAAiB,EAA3B;AACA,MAAIvD,EAAE,GAAGlB,GAAG,CAACqD,IAAb;AAAA,MAAmBC,IAAI,GAAGpC,EAAE,CAACoC,IAA7B;AAAA,MAAmC6K,cAAc,GAAGjN,EAAE,CAACiN,cAAvD;;AACA,MAAKzK,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAA1B,KAA4CZ,OAAO,CAAChC,MAAD,CAAP,IAAmBmB,WAAW,CAACnB,MAAD,CAA1E,CAAJ,EAAyF;AACrFsC,IAAAA,IAAI,CAAC,0EAA0EtC,MAA3E,CAAJ;AACH;;AACD,MAAIoB,OAAO,CAACpB,MAAD,CAAP,IAAmBsB,iBAAiB,CAACrB,GAAD,CAAxC,EAA+C;AAC3CD,IAAAA,MAAM,CAACqG,MAAP,GAAgB3E,IAAI,CAAC0L,GAAL,CAASpN,MAAM,CAACqG,MAAhB,EAAwBpG,GAAxB,CAAhB;AACAD,IAAAA,MAAM,CAACqN,MAAP,CAAcpN,GAAd,EAAmB,CAAnB,EAAsBS,GAAtB;AACA,WAAOA,GAAP;AACH;;AACD,MAAIT,GAAG,IAAID,MAAP,IAAiB,EAAEC,GAAG,IAAId,MAAM,CAACC,SAAhB,CAArB,EAAiD;AAC7CY,IAAAA,MAAM,CAACC,GAAD,CAAN,GAAcS,GAAd;AACA,WAAOA,GAAP;AACH;;AACD,MAAIiM,EAAE,GAAG3M,MAAM,CAACoH,MAAhB;;AACA,MAAIpH,MAAM,CAACsN,MAAP,IAAkBX,EAAE,IAAIA,EAAE,CAACY,OAA/B,EAAyC;AACpC7K,IAAAA,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAA1B,IACIN,IAAI,CAAC,0EACD,qDADA,CADR;AAGA,WAAO5B,GAAP;AACH;;AACD,MAAI,CAACiM,EAAL,EAAS;AACL3M,IAAAA,MAAM,CAACC,GAAD,CAAN,GAAcS,GAAd;AACA,WAAOA,GAAP;AACH;;AACDyM,EAAAA,cAAc,CAACR,EAAE,CAAChM,KAAJ,EAAWV,GAAX,EAAgBS,GAAhB,CAAd,CA1B6B,CA2B7B;;AACA6K,EAAAA,mBAAmB,CAACvL,MAAD,EAASC,GAAT,EAAcS,GAAd,CAAnB;AACAiM,EAAAA,EAAE,CAACtF,GAAH,CAAOiF,MAAP;AACA,SAAO5L,GAAP;AACH;AAED;AACA;AACA;;;AACA,SAAS8M,GAAT,CAAaxN,MAAb,EAAqBC,GAArB,EAA0B;AACtB,MAAIjB,GAAG,GAAGyE,iBAAiB,EAA3B;AACA,MAAInB,IAAI,GAAGtD,GAAG,CAACqD,IAAJ,CAASC,IAApB;;AACA,MAAKI,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAA1B,KAA4CZ,OAAO,CAAChC,MAAD,CAAP,IAAmBmB,WAAW,CAACnB,MAAD,CAA1E,CAAJ,EAAyF;AACrFsC,IAAAA,IAAI,CAAC,6EAA6EtC,MAA9E,CAAJ;AACH;;AACD,MAAIqB,KAAK,CAACD,OAAN,CAAcpB,MAAd,KAAyBsB,iBAAiB,CAACrB,GAAD,CAA9C,EAAqD;AACjDD,IAAAA,MAAM,CAACqN,MAAP,CAAcpN,GAAd,EAAmB,CAAnB;AACA;AACH;;AACD,MAAI0M,EAAE,GAAG3M,MAAM,CAACoH,MAAhB;;AACA,MAAIpH,MAAM,CAACsN,MAAP,IAAkBX,EAAE,IAAIA,EAAE,CAACY,OAA/B,EAAyC;AACpC7K,IAAAA,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAA1B,IACIN,IAAI,CAAC,mEACD,wBADA,CADR;AAGA;AACH;;AACD,MAAI,CAACzB,MAAM,CAACb,MAAD,EAASC,GAAT,CAAX,EAA0B;AACtB;AACH;;AACD,SAAOD,MAAM,CAACC,GAAD,CAAb;;AACA,MAAI,CAAC0M,EAAL,EAAS;AACL;AACH;;AACDA,EAAAA,EAAE,CAACtF,GAAH,CAAOiF,MAAP;AACH;;AAED,IAAImB,OAAO,GAAG,SAAVA,OAAU,CAAUlK,IAAV,EAAgB;AAAE,SAAO,QAAQA,IAAI,CAAC,CAAD,CAAJ,CAAQmK,WAAR,KAAwBnK,IAAI,CAACoK,KAAL,CAAW,CAAX,CAAhC,CAAP;AAAwD,CAAxF;;AACA,SAASC,eAAT,CAAyBC,aAAzB,EAAwC;AACpC,SAAO,UAAUC,QAAV,EAAoB;AACvB,QAAI1L,EAAE,GAAGqD,aAAa,CAACgI,OAAO,CAACI,aAAD,CAAR,CAAtB;;AACA,QAAIzL,EAAJ,EAAQ;AACJ2L,MAAAA,gBAAgB,CAACtK,iBAAiB,EAAlB,EAAsBrB,EAAtB,EAA0ByL,aAA1B,EAAyCC,QAAzC,CAAhB;AACH;AACJ,GALD;AAMH;;AACD,SAASC,gBAAT,CAA0B/O,GAA1B,EAA+BoD,EAA/B,EAAmCsD,IAAnC,EAAyChF,GAAzC,EAA8C;AAC1C,MAAIkF,OAAO,GAAGxD,EAAE,CAAC4L,QAAjB;AACA,MAAIC,OAAO,GAAGjP,GAAG,CAAC8G,MAAJ,CAAWoI,qBAAX,CAAiCxI,IAAjC,CAAd;AACAE,EAAAA,OAAO,CAACF,IAAD,CAAP,GAAgBuI,OAAO,CAACrI,OAAO,CAACF,IAAD,CAAR,EAAgByI,YAAY,CAAC/L,EAAD,EAAK1B,GAAL,CAA5B,CAAvB;AACH;;AACD,SAASyN,YAAT,CAAsB/L,EAAtB,EAA0BgM,EAA1B,EAA8B;AAC1B,SAAO,YAAY;AACf,QAAIlO,EAAJ;;AACA,QAAIgG,IAAI,GAAG,EAAX;;AACA,SAAK,IAAIC,EAAE,GAAG,CAAd,EAAiBA,EAAE,GAAGC,SAAS,CAACC,MAAhC,EAAwCF,EAAE,EAA1C,EAA8C;AAC1CD,MAAAA,IAAI,CAACC,EAAD,CAAJ,GAAWC,SAAS,CAACD,EAAD,CAApB;AACH;;AACD,QAAIkI,KAAK,GAAG,CAACnO,EAAE,GAAG8D,kBAAkB,EAAxB,MAAgC,IAAhC,IAAwC9D,EAAE,KAAK,KAAK,CAApD,GAAwD,KAAK,CAA7D,GAAiEA,EAAE,CAACH,KAAhF;AACA+D,IAAAA,kBAAkB,CAAC1B,EAAD,CAAlB;;AACA,QAAI;AACA,aAAOgM,EAAE,CAAC7H,KAAH,CAAS,KAAK,CAAd,EAAiBkC,aAAa,CAAC,EAAD,EAAKL,MAAM,CAAClC,IAAD,CAAX,CAA9B,CAAP;AACH,KAFD,SAGQ;AACJpC,MAAAA,kBAAkB,CAACuK,KAAD,CAAlB;AACH;AACJ,GAdD;AAeH,C,CACD;;;AACA,IAAIC,aAAa,GAAGV,eAAe,CAAC,aAAD,CAAnC;AACA,IAAIW,SAAS,GAAGX,eAAe,CAAC,SAAD,CAA/B;AACA,IAAIY,cAAc,GAAGZ,eAAe,CAAC,cAAD,CAApC;AACA,IAAIa,SAAS,GAAGb,eAAe,CAAC,SAAD,CAA/B;AACA,IAAIc,eAAe,GAAGd,eAAe,CAAC,eAAD,CAArC;AACA,IAAIe,WAAW,GAAGf,eAAe,CAAC,WAAD,CAAjC;AACA,IAAIgB,eAAe,GAAGhB,eAAe,CAAC,eAAD,CAArC;AACA,IAAIiB,WAAW,GAAGjB,eAAe,CAAC,WAAD,CAAjC;AACA,IAAIkB,aAAa,GAAGlB,eAAe,CAAC,aAAD,CAAnC;AACA,IAAImB,gBAAgB,GAAGnB,eAAe,CAAC,gBAAD,CAAtC;AAEA,IAAIoB,UAAJ;;AACA,SAASC,aAAT,GAAyB;AACrBC,EAAAA,UAAU,CAAC,IAAD,EAAOnG,uBAAP,CAAV;AACH;;AACD,SAASoG,cAAT,GAA0B;AACtBD,EAAAA,UAAU,CAAC,IAAD,EAAOlG,wBAAP,CAAV;AACH;;AACD,SAASoG,WAAT,CAAqBhN,EAArB,EAAyB;AACrB,SAAOA,EAAE,CAAC2G,uBAAD,CAAF,KAAgC7G,SAAvC;AACH;;AACD,SAASmN,eAAT,CAAyBjN,EAAzB,EAA6B;AACzBA,EAAAA,EAAE,CAAC2G,uBAAD,CAAF,GAA8B,EAA9B;AACA3G,EAAAA,EAAE,CAAC4G,wBAAD,CAAF,GAA+B,EAA/B;AACA5G,EAAAA,EAAE,CAACkN,GAAH,CAAO,mBAAP,EAA4BL,aAA5B;AACA7M,EAAAA,EAAE,CAACkN,GAAH,CAAO,cAAP,EAAuBH,cAAvB;AACH;;AACD,SAASI,gBAAT,CAA0B3J,OAA1B,EAAmC;AAC/B,SAAO2B,OAAQ,CAAC;AACZiI,IAAAA,SAAS,EAAE,KADC;AAEZC,IAAAA,IAAI,EAAE,KAFM;AAGZC,IAAAA,KAAK,EAAE;AAHK,GAAD,EAIZ9J,OAJY,CAAf;AAKH;;AACD,SAAS+J,oBAAT,CAA8B/J,OAA9B,EAAuC;AACnC,SAAO2B,OAAQ,CAAC;AACZiI,IAAAA,SAAS,EAAE,IADC;AAEZC,IAAAA,IAAI,EAAE,KAFM;AAGZC,IAAAA,KAAK,EAAE;AAHK,GAAD,EAIZ9J,OAJY,CAAf;AAKH;;AACD,SAASgK,YAAT,GAAwB;AACpB,MAAI1P,EAAJ;;AACA,MAAIkC,EAAE,GAAG,CAAClC,EAAE,GAAG8D,kBAAkB,EAAxB,MAAgC,IAAhC,IAAwC9D,EAAE,KAAK,KAAK,CAApD,GAAwD,KAAK,CAA7D,GAAiEA,EAAE,CAACH,KAA7E;;AACA,MAAI,CAACqC,EAAL,EAAS;AACL,QAAI,CAAC4M,UAAL,EAAiB;AACbA,MAAAA,UAAU,GAAGrJ,uBAAuB,CAAClC,iBAAiB,EAAlB,CAApC;AACH;;AACDrB,IAAAA,EAAE,GAAG4M,UAAL;AACH,GALD,MAMK,IAAI,CAACI,WAAW,CAAChN,EAAD,CAAhB,EAAsB;AACvBiN,IAAAA,eAAe,CAACjN,EAAD,CAAf;AACH;;AACD,SAAOA,EAAP;AACH;;AACD,SAAS8M,UAAT,CAAoB9M,EAApB,EAAwBnC,GAAxB,EAA6B;AACzB,MAAI4P,KAAK,GAAGzN,EAAE,CAACnC,GAAD,CAAd;;AACA,OAAK,IAAI6P,KAAK,GAAG,CAAjB,EAAoBA,KAAK,GAAGD,KAAK,CAACxJ,MAAlC,EAA0CyJ,KAAK,EAA/C,EAAmD;AAC/CD,IAAAA,KAAK,CAACC,KAAD,CAAL;AACH;;AACDD,EAAAA,KAAK,CAACxJ,MAAN,GAAe,CAAf;AACH;;AACD,SAAS0J,aAAT,CAAuB3N,EAAvB,EAA2BgM,EAA3B,EAA+B4B,IAA/B,EAAqC;AACjC;AACA,MAAIC,aAAa,GAAG,SAAhBA,aAAgB,GAAY;AAC5B7N,IAAAA,EAAE,CAAC8N,SAAH,CAAa,YAAY;AACrB,UAAI9N,EAAE,CAAC2G,uBAAD,CAAF,CAA4B1C,MAAhC,EAAwC;AACpC6I,QAAAA,UAAU,CAAC9M,EAAD,EAAK2G,uBAAL,CAAV;AACH;;AACD,UAAI3G,EAAE,CAAC4G,wBAAD,CAAF,CAA6B3C,MAAjC,EAAyC;AACrC6I,QAAAA,UAAU,CAAC9M,EAAD,EAAK4G,wBAAL,CAAV;AACH;AACJ,KAPD;AAQH,GATD;;AAUA,UAAQgH,IAAR;AACI,SAAK,KAAL;AACIC,MAAAA,aAAa;AACb7N,MAAAA,EAAE,CAAC2G,uBAAD,CAAF,CAA4BP,IAA5B,CAAiC4F,EAAjC;AACA;;AACJ,SAAK,MAAL;AACI6B,MAAAA,aAAa;AACb7N,MAAAA,EAAE,CAAC4G,wBAAD,CAAF,CAA6BR,IAA7B,CAAkC4F,EAAlC;AACA;;AACJ;AACIrN,MAAAA,MAAM,CAAC,KAAD,EAAQ,iEAAiEiP,IAAzE,CAAN;AACA;AAXR;AAaH;;AACD,SAASG,gBAAT,CAA0B/N,EAA1B,EAA8BoJ,MAA9B,EAAsCsC,QAAtC,EAAgDlI,OAAhD,EAAyD;AACrD,MAAIkK,KAAK,GAAG1N,EAAE,CAACgO,SAAH,CAAa/J,MAAzB,CADqD,CAErD;;AACAjE,EAAAA,EAAE,CAACiO,MAAH,CAAU7E,MAAV,EAAkBsC,QAAlB,EAA4B;AACxB0B,IAAAA,SAAS,EAAE5J,OAAO,CAAC0K,uBADK;AAExBb,IAAAA,IAAI,EAAE7J,OAAO,CAAC6J,IAFU;AAGxBc,IAAAA,IAAI,EAAE3K,OAAO,CAAC4K,KAHU;AAIxBC,IAAAA,IAAI,EAAE7K,OAAO,CAAC6K,IAJU;AAKxBC,IAAAA,MAAM,EAAE9K,OAAO,CAAC8K;AALQ,GAA5B;AAOA,SAAOtO,EAAE,CAACgO,SAAH,CAAaN,KAAb,CAAP;AACH,C,CACD;AACA;;;AACA,SAASa,oBAAT,CAA8BC,OAA9B,EAAuCC,UAAvC,EAAmD;AAC/C,MAAIC,SAAS,GAAGF,OAAO,CAACG,QAAxB;;AACAH,EAAAA,OAAO,CAACG,QAAR,GAAmB,YAAY;AAC3B,QAAI7K,IAAI,GAAG,EAAX;;AACA,SAAK,IAAIC,EAAE,GAAG,CAAd,EAAiBA,EAAE,GAAGC,SAAS,CAACC,MAAhC,EAAwCF,EAAE,EAA1C,EAA8C;AAC1CD,MAAAA,IAAI,CAACC,EAAD,CAAJ,GAAWC,SAAS,CAACD,EAAD,CAApB;AACH;;AACD2K,IAAAA,SAAS,CAACvK,KAAV,CAAgBqK,OAAhB,EAAyB1K,IAAzB;;AACA2K,IAAAA,UAAU;AACb,GAPD;AAQH;;AACD,SAASG,aAAT,CAAuB5O,EAAvB,EAA2B6K,MAA3B,EAAmCgE,EAAnC,EAAuCrL,OAAvC,EAAgD;AAC5C,MAAI1F,EAAJ;;AACA,MAAIgR,SAAS,GAAGtL,OAAO,CAAC8J,KAAxB;AACA,MAAIyB,MAAM,GAAGD,SAAS,KAAK,MAA3B;AACA,MAAIE,OAAJ;;AACA,MAAIC,eAAe,GAAG,SAAlBA,eAAkB,CAAUjD,EAAV,EAAc;AAChCgD,IAAAA,OAAO,GAAG,mBAAY;AAClB,UAAI;AACAhD,QAAAA,EAAE;AACL,OAFD,CAGA,OAAOrL,KAAP,EAAc;AACVR,QAAAA,QAAQ,CAACQ,KAAD,EAAQX,EAAR,EAAY,aAAZ,CAAR;AACH;AACJ,KAPD;AAQH,GATD,CAL4C,CAe5C;;;AACA,MAAIyO,UAAU,GAAG,SAAbA,UAAa,GAAY;AACzB,QAAIO,OAAJ,EAAa;AACTA,MAAAA,OAAO;AACPA,MAAAA,OAAO,GAAG,IAAV;AACH;AACJ,GALD;;AAMA,MAAIE,eAAe,GAAG,SAAlBA,eAAkB,CAAUlD,EAAV,EAAc;AAChC,QAAI+C,MAAM;AACN;AAA8D/O,IAAAA,EAAE,KAC5D4M,UAFR,EAEoB;AAChB,aAAOZ,EAAP;AACH;;AACD,WAAQ,YAAY;AAChB,UAAIlI,IAAI,GAAG,EAAX;;AACA,WAAK,IAAIC,EAAE,GAAG,CAAd,EAAiBA,EAAE,GAAGC,SAAS,CAACC,MAAhC,EAAwCF,EAAE,EAA1C,EAA8C;AAC1CD,QAAAA,IAAI,CAACC,EAAD,CAAJ,GAAWC,SAAS,CAACD,EAAD,CAApB;AACH;;AACD,aAAO4J,aAAa,CAAC3N,EAAD,EAAK,YAAY;AACjCgM,QAAAA,EAAE,CAAC7H,KAAH,CAAS,KAAK,CAAd,EAAiBkC,aAAa,CAAC,EAAD,EAAKL,MAAM,CAAClC,IAAD,CAAX,CAA9B;AACH,OAFmB,EAEjBgL,SAFiB,CAApB;AAGH,KARD;AASH,GAfD,CAtB4C,CAsC5C;;;AACA,MAAID,EAAE,KAAK,IAAX,EAAiB;AACb,QAAIM,SAAS,GAAG,KAAhB;;AACA,QAAIC,QAAQ,GAAG,SAAXA,QAAW,GAAY;AACvB;AACA,UAAID,SAAJ,EAAe;AACX;AACH;;AACD,UAAI;AACAA,QAAAA,SAAS,GAAG,IAAZ;AACAtE,QAAAA,MAAM,CAACoE,eAAD,CAAN;AACH,OAHD,SAIQ;AACJE,QAAAA,SAAS,GAAG,KAAZ;AACH;AACJ,KAZD;;AAaA,QAAIE,SAAS,GAAGtB,gBAAgB,CAAC/N,EAAD,EAAKoP,QAAL,EAAe3R,MAAf,EAAuB;AACnD4P,MAAAA,IAAI,EAAE7J,OAAO,CAAC6J,IAAR,IAAgB,KAD6B;AAEnDgB,MAAAA,IAAI,EAAEU,MAF6C;AAGnDT,MAAAA,MAAM,EAAEG;AAH2C,KAAvB,CAAhC;AAKAF,IAAAA,oBAAoB,CAACc,SAAD,EAAYZ,UAAZ,CAApB,CApBa,CAqBb;;AACAY,IAAAA,SAAS,CAAClB,IAAV,GAAiB,KAAjB;AACA,QAAImB,SAAS,GAAGD,SAAS,CAACtR,GAAV,CAAc0E,IAAd,CAAmB4M,SAAnB,CAAhB,CAvBa,CAwBb;;AACAA,IAAAA,SAAS,CAACtR,GAAV,GAAgBmR,eAAe,CAACI,SAAD,CAA/B;AACA,WAAO,YAAY;AACfD,MAAAA,SAAS,CAACV,QAAV;AACH,KAFD;AAGH;;AACD,MAAItB,IAAI,GAAG7J,OAAO,CAAC6J,IAAnB;AACA,MAAIjE,MAAJ;;AACA,MAAInK,KAAK,CAACD,OAAN,CAAc6L,MAAd,CAAJ,EAA2B;AACvBzB,IAAAA,MAAM,GAAG,kBAAY;AAAE,aAAOyB,MAAM,CAAC0E,GAAP,CAAW,UAAUjK,CAAV,EAAa;AAAE,eAAQkC,KAAK,CAAClC,CAAD,CAAL,GAAWA,CAAC,CAAC/G,KAAb,GAAqB+G,CAAC,EAA9B;AAAoC,OAA9D,CAAP;AAAyE,KAAhG;AACH,GAFD,MAGK,IAAIkC,KAAK,CAACqD,MAAD,CAAT,EAAmB;AACpBzB,IAAAA,MAAM,GAAG,kBAAY;AAAE,aAAOyB,MAAM,CAACtM,KAAd;AAAsB,KAA7C;AACH,GAFI,MAGA,IAAIqJ,UAAU,CAACiD,MAAD,CAAd,EAAwB;AACzBzB,IAAAA,MAAM,GAAG,kBAAY;AAAE,aAAOyB,MAAP;AAAgB,KAAvC;;AACAwC,IAAAA,IAAI,GAAG,IAAP;AACH,GAHI,MAIA,IAAI1N,UAAU,CAACkL,MAAD,CAAd,EAAwB;AACzBzB,IAAAA,MAAM,GAAGyB,MAAT;AACH,GAFI,MAGA;AACDzB,IAAAA,MAAM,GAAG3L,MAAT;AACAsC,IAAAA,MAAM,CAAC,2BAA2ByP,IAAI,CAACC,SAAL,CAAe5E,MAAf,CAA3B,GAAoD,qHAArD,EAA4K7K,EAA5K,CAAN;AACH;;AACD,MAAI0P,OAAO,GAAG,SAAVA,OAAU,CAAUvQ,CAAV,EAAauG,CAAb,EAAgB;AAC1B;AACA+I,IAAAA,UAAU;AACVI,IAAAA,EAAE,CAAC1P,CAAD,EAAIuG,CAAJ,EAAOuJ,eAAP,CAAF;AACH,GAJD;;AAKA,MAAIvD,QAAQ,GAAGwD,eAAe,CAACQ,OAAD,CAA9B;;AACA,MAAIlM,OAAO,CAAC4J,SAAZ,EAAuB;AACnB,QAAIuC,kBAAkB,GAAGjE,QAAzB,CADmB,CAEnB;AACA;;AACA,QAAIkE,eAAe,GAAG,yBAAUzQ,CAAV,EAAauG,CAAb,EAAgB;AAClCkK,MAAAA,eAAe,GAAGD,kBAAlB;AACAD,MAAAA,OAAO,CAACvQ,CAAD,EAAIuG,CAAJ,CAAP;AACH,KAHD;;AAIAgG,IAAAA,QAAQ,GAAG,kBAAUvM,CAAV,EAAauG,CAAb,EAAgB;AACvBkK,MAAAA,eAAe,CAACzQ,CAAD,EAAIuG,CAAJ,CAAf;AACH,KAFD;AAGH,GAzG2C,CA0G5C;;;AACA,MAAImK,IAAI,GAAG7P,EAAE,CAACiO,MAAH,CAAU7E,MAAV,EAAkBsC,QAAlB,EAA4B;AACnC0B,IAAAA,SAAS,EAAE5J,OAAO,CAAC4J,SADgB;AAEnCC,IAAAA,IAAI,EAAEA,IAF6B;AAGnCgB,IAAAA,IAAI,EAAEU;AAH6B,GAA5B,CAAX,CA3G4C,CAgH5C;;AACA,MAAIP,OAAO,GAAGxO,EAAE,CAACgO,SAAH,CAAahO,EAAE,CAACgO,SAAH,CAAa/J,MAAb,GAAsB,CAAnC,CAAd,CAjH4C,CAkH5C;AACA;;AACA,MAAI2D,UAAU,CAAC4G,OAAO,CAACjQ,KAAT,CAAV,KAA8B,CAACT,EAAE,GAAG0Q,OAAO,CAACjQ,KAAR,CAAcyG,MAApB,MAAgC,IAAhC,IAAwClH,EAAE,KAAK,KAAK,CAApD,GAAwD,KAAK,CAA7D,GAAiEA,EAAE,CAACmH,GAAlG,KAA0GoI,IAA9G,EAAoH;AAChHmB,IAAAA,OAAO,CAACjQ,KAAR,CAAcyG,MAAd,CAAqBC,GAArB,CAAyBmF,MAAzB,CAAgC;AAC5BjI,MAAAA,MAAM,EAAE,kBAAY;AAChB;AACA;AACAqM,QAAAA,OAAO,CAACsB,GAAR;AACH;AAL2B,KAAhC;AAOH;;AACDvB,EAAAA,oBAAoB,CAACC,OAAD,EAAUC,UAAV,CAApB;AACA,SAAO,YAAY;AACfoB,IAAAA,IAAI;AACP,GAFD;AAGH;;AACD,SAASE,WAAT,CAAqBC,MAArB,EAA6BxM,OAA7B,EAAsC;AAClC,MAAIyM,IAAI,GAAG1C,oBAAoB,CAAC/J,OAAD,CAA/B;AACA,MAAIxD,EAAE,GAAGwN,YAAY,EAArB;AACA,SAAOoB,aAAa,CAAC5O,EAAD,EAAKgQ,MAAL,EAAa,IAAb,EAAmBC,IAAnB,CAApB;AACH,C,CACD;;;AACA,SAASC,KAAT,CAAerF,MAAf,EAAuBgE,EAAvB,EAA2BrL,OAA3B,EAAoC;AAChC,MAAIkI,QAAQ,GAAG,IAAf;;AACA,MAAI,OAAOmD,EAAP,KAAc,UAAlB,EAA8B;AAC1B;AACAnD,IAAAA,QAAQ,GAAGmD,EAAX;AACH,GAHD,MAIK;AACD;AACA,QAAKvO,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAA9B,EAA6C;AACzCT,MAAAA,MAAM,CAAC,uEACH,4DADG,GAEH,kDAFE,CAAN;AAGH;;AACDyD,IAAAA,OAAO,GAAGqL,EAAV;AACAnD,IAAAA,QAAQ,GAAG,IAAX;AACH;;AACD,MAAIuE,IAAI,GAAG9C,gBAAgB,CAAC3J,OAAD,CAA3B;AACA,MAAIxD,EAAE,GAAGwN,YAAY,EAArB;AACA,SAAOoB,aAAa,CAAC5O,EAAD,EAAK6K,MAAL,EAAaa,QAAb,EAAuBuE,IAAvB,CAApB;AACH,C,CAED;;;AACA,SAAStL,QAAT,CAAkBwL,eAAlB,EAAmC;AAC/B,MAAIrS,EAAJ;;AACA,MAAIkC,EAAE,GAAG,CAAClC,EAAE,GAAG8D,kBAAkB,EAAxB,MAAgC,IAAhC,IAAwC9D,EAAE,KAAK,KAAK,CAApD,GAAwD,KAAK,CAA7D,GAAiEA,EAAE,CAACH,KAA7E;AACA,MAAIyL,MAAJ;AACA,MAAIC,MAAJ;;AACA,MAAI,OAAO8G,eAAP,KAA2B,UAA/B,EAA2C;AACvC/G,IAAAA,MAAM,GAAG+G,eAAT;AACH,GAFD,MAGK;AACD/G,IAAAA,MAAM,GAAG+G,eAAe,CAACpS,GAAzB;AACAsL,IAAAA,MAAM,GAAG8G,eAAe,CAACnS,GAAzB;AACH;;AACD,MAAIoS,cAAJ;AACA,MAAIC,cAAJ;;AACA,MAAIrQ,EAAE,IAAI,CAACA,EAAE,CAACsQ,SAAd,EAAyB;AACrB,QAAI7H,EAAE,GAAG/D,qBAAqB,EAA9B;AAAA,QAAkC6L,SAAS,GAAG9H,EAAE,CAAC7D,OAAjD;AAAA,QAA0D4L,KAAK,GAAG/H,EAAE,CAAC3D,GAArE;;AACA,QAAIuK,SAAJ;;AACAgB,IAAAA,cAAc,GAAG,0BAAY;AACzB,UAAI,CAAChB,SAAL,EAAgB;AACZA,QAAAA,SAAS,GAAG,IAAIkB,SAAJ,CAAcvQ,EAAd,EAAkBoJ,MAAlB,EAA0B3L,MAA1B,EAAkC;AAAE0Q,UAAAA,IAAI,EAAE;AAAR,SAAlC,CAAZ;AACH;;AACD,UAAIkB,SAAS,CAACoB,KAAd,EAAqB;AACjBpB,QAAAA,SAAS,CAACqB,QAAV;AACH;;AACD,UAAIF,KAAK,CAAC5S,MAAV,EAAkB;AACdyR,QAAAA,SAAS,CAAClF,MAAV;AACH;;AACD,aAAOkF,SAAS,CAAC9Q,KAAjB;AACH,KAXD;;AAYA6R,IAAAA,cAAc,GAAG,wBAAUvQ,CAAV,EAAa;AAC1B,UAAKS,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAA1B,IAA2C,CAAC6I,MAAhD,EAAwD;AACpDtJ,QAAAA,MAAM,CAAC,qDAAD,EAAwDC,EAAxD,CAAN;AACA;AACH;;AACD,UAAIqJ,MAAJ,EAAY;AACRA,QAAAA,MAAM,CAACxJ,CAAD,CAAN;AACH;AACJ,KARD;AASH,GAxBD,MAyBK;AACD;AACA,QAAI8Q,cAAc,GAAGpN,uBAAuB,CAAClC,iBAAiB,EAAlB,EAAsB;AAC9DsD,MAAAA,QAAQ,EAAE;AACNoF,QAAAA,OAAO,EAAE;AACLhM,UAAAA,GAAG,EAAEqL,MADA;AAELpL,UAAAA,GAAG,EAAEqL;AAFA;AADH;AADoD,KAAtB,CAA5C;AAQArJ,IAAAA,EAAE,IAAIA,EAAE,CAACkN,GAAH,CAAO,gBAAP,EAAyB,YAAY;AAAE,aAAOyD,cAAc,CAACzL,QAAf,EAAP;AAAmC,KAA1E,CAAN;;AACAmL,IAAAA,cAAc,GAAG,0BAAY;AAAE,aAAOM,cAAc,CAAC5G,OAAtB;AAAgC,KAA/D;;AACAqG,IAAAA,cAAc,GAAG,wBAAUvQ,CAAV,EAAa;AAC1B,UAAKS,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAA1B,IAA2C,CAAC6I,MAAhD,EAAwD;AACpDtJ,QAAAA,MAAM,CAAC,qDAAD,EAAwDC,EAAxD,CAAN;AACA;AACH;;AACD2Q,MAAAA,cAAc,CAAC5G,OAAf,GAAyBlK,CAAzB;AACH,KAND;AAOH;;AACD,SAAOqH,SAAS,CAAC;AACbnJ,IAAAA,GAAG,EAAEsS,cADQ;AAEbrS,IAAAA,GAAG,EAAEoS;AAFQ,GAAD,CAAhB;AAIH;;AAED,IAAIQ,SAAS,GAAG,EAAhB;;AACA,SAASC,aAAT,CAAuBC,UAAvB,EAAmC9Q,EAAnC,EAAuC;AACnC,MAAI6K,MAAM,GAAG7K,EAAb;;AACA,SAAO6K,MAAP,EAAe;AACX;AACA,QAAIA,MAAM,CAACkG,SAAP,IAAoBtS,MAAM,CAACoM,MAAM,CAACkG,SAAR,EAAmBD,UAAnB,CAA9B,EAA8D;AAC1D;AACA,aAAOjG,MAAM,CAACkG,SAAP,CAAiBD,UAAjB,CAAP;AACH;;AACDjG,IAAAA,MAAM,GAAGA,MAAM,CAAC1H,OAAhB;AACH;;AACD,SAAOyN,SAAP;AACH;;AACD,SAASI,OAAT,CAAiBnT,GAAjB,EAAsBU,KAAtB,EAA6B;AACzB,MAAIyB,EAAE,GAAGqD,aAAa,CAAC,SAAD,CAAtB;AACA,MAAI,CAACrD,EAAL,EACI;;AACJ,MAAI,CAACA,EAAE,CAAC+Q,SAAR,EAAmB;AACf,QAAIE,cAAc,GAAG,EAArB;AACAlU,IAAAA,MAAM,CAACkB,cAAP,CAAsB+B,EAAtB,EAA0B,WAA1B,EAAuC;AACnCjC,MAAAA,GAAG,EAAE,eAAY;AAAE,eAAOkT,cAAP;AAAwB,OADR;AAEnCjT,MAAAA,GAAG,EAAE,aAAU6B,CAAV,EAAa;AAAE,eAAO9C,MAAM,CAACqI,MAAP,CAAc6L,cAAd,EAA8BpR,CAA9B,CAAP;AAA0C;AAF3B,KAAvC;AAIH;;AACDG,EAAAA,EAAE,CAAC+Q,SAAH,CAAalT,GAAb,IAAoBU,KAApB;AACH;;AACD,SAAS2S,MAAT,CAAgBrT,GAAhB,EAAqBsT,YAArB,EAAmCC,qBAAnC,EAA0D;AACtD,MAAItT,EAAJ;;AACA,MAAIsT,qBAAqB,KAAK,KAAK,CAAnC,EAAsC;AAAEA,IAAAA,qBAAqB,GAAG,KAAxB;AAAgC;;AACxE,MAAI,CAACvT,GAAL,EAAU;AACN,WAAOsT,YAAP;AACH;;AACD,MAAInR,EAAE,GAAG,CAAClC,EAAE,GAAG8D,kBAAkB,EAAxB,MAAgC,IAAhC,IAAwC9D,EAAE,KAAK,KAAK,CAApD,GAAwD,KAAK,CAA7D,GAAiEA,EAAE,CAACH,KAA7E;;AACA,MAAI,CAACqC,EAAL,EAAS;AACLD,IAAAA,MAAM,CAAC,oEAAD,CAAN;AACA;AACH;;AACD,MAAIzB,GAAG,GAAGuS,aAAa,CAAChT,GAAD,EAAMmC,EAAN,CAAvB;;AACA,MAAI1B,GAAG,KAAKsS,SAAZ,EAAuB;AACnB,WAAOtS,GAAP;AACH;;AACD,MAAI6S,YAAY,KAAKrR,SAAjB,IAA+BQ,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAA5D,EAA2E;AACvET,IAAAA,MAAM,CAAC,iBAAiBV,MAAM,CAACxB,GAAD,CAAvB,GAA+B,cAAhC,EAAgDmC,EAAhD,CAAN;AACH;;AACD,SAAOoR,qBAAqB,IAAIzR,UAAU,CAACwR,YAAD,CAAnC,GACDA,YAAY,EADX,GAEDA,YAFN;AAGH;;AAED,IAAIE,SAAS,GAAI/Q,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAA1B,GACVzD,MAAM,CAACuU,MAAP,CAAc,EAAd,CADU,GAEV,EAFN;;AAGA,IAAIC,YAAY,GAAG,SAAfA,YAAe,CAAUpQ,IAAV,EAAgB;AAC/B,MAAIrD,EAAJ;;AACA,MAAIqD,IAAI,KAAK,KAAK,CAAlB,EAAqB;AAAEA,IAAAA,IAAI,GAAG,QAAP;AAAkB;;AACzC,MAAIe,QAAQ,GAAGN,kBAAkB,EAAjC;;AACA,MAAI,CAACM,QAAL,EAAe;AACV5B,IAAAA,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAA1B,IAA2CT,MAAM,CAAC,4CAAD,CAAjD;AACA,WAAOsR,SAAP;AACH;;AACD,MAAIG,GAAG,GAAG,CAAC1T,EAAE,GAAGoE,QAAQ,CAACvE,KAAf,MAA0B,IAA1B,IAAkCG,EAAE,KAAK,KAAK,CAA9C,GAAkD,KAAK,CAAvD,GAA2DA,EAAE,CAACqD,IAAD,CAAvE;;AACA,MAAI,CAACqQ,GAAL,EAAU;AACLlR,IAAAA,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAA1B,IACIT,MAAM,CAAC,uDAAuDoB,IAAvD,GAA8D,KAA/D,CADV;AAEA,WAAOkQ,SAAP;AACH;;AACD,SAAOG,GAAP;AACH,CAfD;AAgBA;AACA;AACA;;;AACA,IAAIC,YAAY,GAAGF,YAAnB;;AAEA,SAASG,SAAT,CAAmBC,aAAnB,EAAkCC,SAAlC,EAA6C;AACzC,MAAIA,SAAS,KAAK,KAAK,CAAvB,EAA0B;AAAEA,IAAAA,SAAS,GAAG9R,SAAZ;AAAwB;;AACpD,MAAI+R,CAAC,GAAGxQ,iBAAiB,EAAzB;AACA,MAAIyQ,SAAS,GAAGhS,SAAhB;AACA,SAAO;AACH4D,IAAAA,MAAM,EAAEmO,CAAC,CAACnO,MADP;AAEHqO,IAAAA,GAAG,EAAEF,CAAC,CAACE,GAAF,CAAMtP,IAAN,CAAWoP,CAAX,CAFF;AAGHG,IAAAA,KAAK,EAAEH,CAAC,CAACG,KAAF,CAAQvP,IAAR,CAAaoP,CAAb,CAHJ;AAIHI,IAAAA,SAAS,EAAEJ,CAAC,CAACI,SAAF,CAAYxP,IAAZ,CAAiBoP,CAAjB,CAJR;AAKHK,IAAAA,SAAS,EAAEL,CAAC,CAACK,SAAF,CAAYzP,IAAZ,CAAiBoP,CAAjB,CALR;AAMHM,IAAAA,KAAK,EAAE,eAAUC,EAAV,EAAcC,SAAd,EAAyB;AAC5B,UAAI,CAACP,SAAL,EAAgB;AACZA,QAAAA,SAAS,GAAG,IAAID,CAAJ,CAAM1M,OAAQ,CAAC;AAAEmN,UAAAA,SAAS,EAAEV;AAAb,SAAD,EAA2BD,aAA3B,CAAd,CAAZ;AACAG,QAAAA,SAAS,CAACS,MAAV,CAAiBH,EAAjB,EAAqBC,SAArB;AACA,eAAOP,SAAP;AACH,OAJD,MAKK;AACD,YAAKxR,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAA9B,EAA6C;AACzCT,UAAAA,MAAM,CAAC,oCACH,oEADG,GAEH,kEAFG,GAGH,yDAHE,CAAN;AAIH;;AACD,eAAO+R,SAAP;AACH;AACJ,KArBE;AAsBHU,IAAAA,OAAO,EAAE,mBAAY;AACjB,UAAIV,SAAJ,EAAe;AACXA,QAAAA,SAAS,CAAC5M,QAAV;AACA4M,QAAAA,SAAS,GAAGhS,SAAZ;AACH,OAHD,MAIK,IAAKQ,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAA9B,EAA6C;AAC9CT,QAAAA,MAAM,CAAC,4CAAD,CAAN;AACH;AACJ;AA9BE,GAAP;AAgCH;;AAED,IAAI0S,QAAQ,GAAG,SAASA,QAAT,GAAoB;AAC/B,MAAI3U,EAAJ;;AACA,MAAIgG,IAAI,GAAG,EAAX;;AACA,OAAK,IAAIC,EAAE,GAAG,CAAd,EAAiBA,EAAE,GAAGC,SAAS,CAACC,MAAhC,EAAwCF,EAAE,EAA1C,EAA8C;AAC1CD,IAAAA,IAAI,CAACC,EAAD,CAAJ,GAAWC,SAAS,CAACD,EAAD,CAApB;AACH;;AACD,SAAO,CAACjG,EAAE,GAAGuD,iBAAiB,EAAvB,MAA+B,IAA/B,IAAuCvD,EAAE,KAAK,KAAK,CAAnD,GAAuD,KAAK,CAA5D,GAAgEA,EAAE,CAAC2U,QAAH,CAAYtO,KAAZ,CAAkB,IAAlB,EAAwBL,IAAxB,CAAvE;AACH,CAPD;;AASA,IAAI4O,qBAAJ;;AACA,IAAIC,aAAa,GAAG,SAASA,aAAT,GAAyB;AACzC,MAAI7U,EAAJ;;AACA,MAAIgG,IAAI,GAAG,EAAX;;AACA,OAAK,IAAIC,EAAE,GAAG,CAAd,EAAiBA,EAAE,GAAGC,SAAS,CAACC,MAAhC,EAAwCF,EAAE,EAA1C,EAA8C;AAC1CD,IAAAA,IAAI,CAACC,EAAD,CAAJ,GAAWC,SAAS,CAACD,EAAD,CAApB;AACH;;AACD,MAAI7B,QAAQ,GAAG,CAACpE,EAAE,GAAG8D,kBAAkB,EAAxB,MAAgC,IAAhC,IAAwC9D,EAAE,KAAK,KAAK,CAApD,GAAwD,KAAK,CAA7D,GAAiEA,EAAE,CAACH,KAAnF;;AACA,MAAI,CAACuE,QAAL,EAAe;AACXnC,IAAAA,MAAM,CAAC,+DAAD,CAAN;;AACA,QAAI,CAAC2S,qBAAL,EAA4B;AACxBA,MAAAA,qBAAqB,GAAGnP,uBAAuB,CAAClC,iBAAiB,EAAlB,CAAvB,CACnBuR,cADL;AAEH;;AACD,WAAOF,qBAAqB,CAACvO,KAAtB,CAA4BuO,qBAA5B,EAAmD5O,IAAnD,CAAP;AACH;;AACD,SAAO5B,QAAQ,CAAC0Q,cAAT,CAAwBzO,KAAxB,CAA8BjC,QAA9B,EAAwC4B,IAAxC,CAAP;AACH,CAhBD;AAkBA;AACA;AACA;AACA;AACA;AACA;;;AACA,SAAS5D,IAAT,CAAc2S,OAAd,EAAuB;AACnB,MAAI/U,EAAJ;;AACAiC,EAAAA,MAAM,CAAC8S,OAAD,EAAU,CAAC/U,EAAE,GAAG8D,kBAAkB,EAAxB,MAAgC,IAAhC,IAAwC9D,EAAE,KAAK,KAAK,CAApD,GAAwD,KAAK,CAA7D,GAAiEA,EAAE,CAACH,KAA9E,CAAN;AACH;;AAED,SAASK,GAAT,CAAagC,EAAb,EAAiBnC,GAAjB,EAAsBU,KAAtB,EAA6B;AACzB,MAAIuU,KAAK,GAAI9S,EAAE,CAAC+S,yBAAH,GACT/S,EAAE,CAAC+S,yBAAH,IAAgC,EADpC;AAEAD,EAAAA,KAAK,CAACjV,GAAD,CAAL,GAAaU,KAAb;AACH;;AACD,SAASR,GAAT,CAAaiC,EAAb,EAAiBnC,GAAjB,EAAsB;AAClB,SAAO,CAACmC,EAAE,CAAC+S,yBAAH,IAAgC,EAAjC,EAAqClV,GAArC,CAAP;AACH;;AACD,IAAImV,cAAc,GAAG;AACjBhV,EAAAA,GAAG,EAAEA,GADY;AAEjBD,EAAAA,GAAG,EAAEA;AAFY,CAArB;;AAKA,SAASkV,YAAT,CAAsBjT,EAAtB,EAA0BkT,QAA1B,EAAoCC,SAApC,EAA+C;AAC3C,MAAIC,KAAK,GAAGpT,EAAE,CAAC4L,QAAH,CAAYwH,KAAxB;;AACA,MAAI,EAAEF,QAAQ,IAAIlT,EAAd,KAAqB,EAAEoT,KAAK,IAAI3U,MAAM,CAAC2U,KAAD,EAAQF,QAAR,CAAjB,CAAzB,EAA8D;AAC1D,QAAI1L,KAAK,CAAC2L,SAAD,CAAT,EAAsB;AAClBxV,MAAAA,KAAK,CAACqC,EAAD,EAAKkT,QAAL,EAAe;AAChBnV,QAAAA,GAAG,EAAE,eAAY;AAAE,iBAAOoV,SAAS,CAAC5U,KAAjB;AAAyB,SAD5B;AAEhBP,QAAAA,GAAG,EAAE,aAAUM,GAAV,EAAe;AAChB6U,UAAAA,SAAS,CAAC5U,KAAV,GAAkBD,GAAlB;AACH;AAJe,OAAf,CAAL;AAMH,KAPD,MAQK;AACD;AACA0B,MAAAA,EAAE,CAACkT,QAAD,CAAF,GAAeC,SAAf;AACH;;AACD,QAAK7S,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAA9B,EAA6C;AACzC;AACA;AACAR,MAAAA,EAAE,CAAC8N,SAAH,CAAa,YAAY;AACrB,YAAItG,KAAK,CAAC2L,SAAD,CAAT,EAAsB;AAClBxV,UAAAA,KAAK,CAACqC,EAAE,CAAC+E,KAAJ,EAAWmO,QAAX,EAAqB;AACtBnV,YAAAA,GAAG,EAAE,eAAY;AAAE,qBAAOoV,SAAS,CAAC5U,KAAjB;AAAyB,aADtB;AAEtBP,YAAAA,GAAG,EAAE,aAAUM,GAAV,EAAe;AAChB6U,cAAAA,SAAS,CAAC5U,KAAV,GAAkBD,GAAlB;AACH;AAJqB,WAArB,CAAL;AAMH,SAPD,MAQK;AACD0B,UAAAA,EAAE,CAAC+E,KAAH,CAASmO,QAAT,IAAqBC,SAArB;AACH;AACJ,OAZD;AAaH;AACJ,GA9BD,MA+BK,IAAK7S,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAA9B,EAA6C;AAC9C,QAAI4S,KAAK,IAAI3U,MAAM,CAAC2U,KAAD,EAAQF,QAAR,CAAnB,EAAsC;AAClCnT,MAAAA,MAAM,CAAC,kCAAkCmT,QAAlC,GAA6C,mCAA9C,EAAmFlT,EAAnF,CAAN;AACH,KAFD,MAGK;AACDD,MAAAA,MAAM,CAAC,kCAAkCmT,QAAlC,GAA6C,yBAA9C,EAAyElT,EAAzE,CAAN;AACH;AACJ;AACJ;;AACD,SAASqT,iBAAT,CAA2BrT,EAA3B,EAA+B;AAC3B,MAAIsT,WAAW,GAAGN,cAAc,CAACjV,GAAf,CAAmBiC,EAAnB,EAAuB,aAAvB,KAAyC,EAA3D;AACA,MAAI,CAACsT,WAAD,IAAgB,CAACvW,MAAM,CAAC6L,IAAP,CAAY0K,WAAZ,EAAyBrP,MAA9C,EACI;AACJ,MAAIsP,IAAI,GAAGvT,EAAE,CAACwT,KAAd;AACA,MAAIC,UAAU,GAAGT,cAAc,CAACjV,GAAf,CAAmBiC,EAAnB,EAAuB,MAAvB,KAAkC,EAAnD;;AACA,OAAK,IAAI0N,KAAK,GAAG,CAAjB,EAAoBA,KAAK,GAAG+F,UAAU,CAACxP,MAAvC,EAA+CyJ,KAAK,EAApD,EAAwD;AACpD,QAAI7P,GAAG,GAAG4V,UAAU,CAAC/F,KAAD,CAApB;AACA,QAAIgG,UAAU,GAAGJ,WAAW,CAACzV,GAAD,CAA5B;;AACA,QAAI,CAAC0V,IAAI,CAAC1V,GAAD,CAAL,IAAc6V,UAAd,IAA4BlM,KAAK,CAACkM,UAAD,CAArC,EAAmD;AAC/CA,MAAAA,UAAU,CAACnV,KAAX,GAAmB,IAAnB;AACH;AACJ;;AACD,MAAIoV,OAAO,GAAG5W,MAAM,CAAC6L,IAAP,CAAY2K,IAAZ,CAAd;AACA,MAAIK,YAAY,GAAG,EAAnB;;AACA,OAAK,IAAIlG,KAAK,GAAG,CAAjB,EAAoBA,KAAK,GAAGiG,OAAO,CAAC1P,MAApC,EAA4CyJ,KAAK,EAAjD,EAAqD;AACjD,QAAI7P,GAAG,GAAG8V,OAAO,CAACjG,KAAD,CAAjB;AACA,QAAIgG,UAAU,GAAGJ,WAAW,CAACzV,GAAD,CAA5B;;AACA,QAAI0V,IAAI,CAAC1V,GAAD,CAAJ,IAAa6V,UAAb,IAA2BlM,KAAK,CAACkM,UAAD,CAApC,EAAkD;AAC9CA,MAAAA,UAAU,CAACnV,KAAX,GAAmBgV,IAAI,CAAC1V,GAAD,CAAvB;AACA+V,MAAAA,YAAY,CAACxN,IAAb,CAAkBvI,GAAlB;AACH;AACJ;;AACDmV,EAAAA,cAAc,CAAChV,GAAf,CAAmBgC,EAAnB,EAAuB,MAAvB,EAA+B4T,YAA/B;AACH;;AACD,SAASC,kBAAT,CAA4B7T,EAA5B,EAAgC8T,UAAhC,EAA4C;AACxC,MAAIC,WAAW,GAAG/T,EAAE,CAAC4L,QAAH,CAAYoI,YAA9B;AACA,MAAI,CAACD,WAAL,EACI;AACJ,MAAIE,SAAS,GAAGjB,cAAc,CAACjV,GAAf,CAAmBiC,EAAnB,EAAuB,OAAvB,KAAmC,EAAnD;AACA,MAAIkU,QAAQ,GAAG9P,YAAY,CAAC2P,WAAW,CAACjK,IAAZ,CAAiBqK,WAAlB,EAA+BnU,EAAE,CAACoU,MAAlC,CAA3B,CALwC,CAMxC;;AACA,OAAK,IAAI1G,KAAK,GAAG,CAAjB,EAAoBA,KAAK,GAAGuG,SAAS,CAAChQ,MAAtC,EAA8CyJ,KAAK,EAAnD,EAAuD;AACnD,QAAI7P,GAAG,GAAGoW,SAAS,CAACvG,KAAD,CAAnB;;AACA,QAAI,CAACwG,QAAQ,CAACrW,GAAD,CAAb,EAAoB;AAChB,aAAOiW,UAAU,CAACjW,GAAD,CAAjB;AACH;AACJ,GAZuC,CAaxC;;;AACA,MAAIwW,SAAS,GAAGtX,MAAM,CAAC6L,IAAP,CAAYsL,QAAZ,CAAhB;;AACA,OAAK,IAAIxG,KAAK,GAAG,CAAjB,EAAoBA,KAAK,GAAG2G,SAAS,CAACpQ,MAAtC,EAA8CyJ,KAAK,EAAnD,EAAuD;AACnD,QAAI7P,GAAG,GAAGwW,SAAS,CAAC3G,KAAD,CAAnB;;AACA,QAAI,CAACoG,UAAU,CAACjW,GAAD,CAAf,EAAsB;AAClBiW,MAAAA,UAAU,CAACjW,GAAD,CAAV,GAAkB+F,eAAe,CAAC5D,EAAD,EAAKnC,GAAL,CAAjC;AACH;AACJ;;AACDmV,EAAAA,cAAc,CAAChV,GAAf,CAAmBgC,EAAnB,EAAuB,OAAvB,EAAgCqU,SAAhC;AACH;;AACD,SAASC,uBAAT,CAAiCtU,EAAjC,EAAqCgM,EAArC,EAAyCuI,OAAzC,EAAkD;AAC9C,MAAItI,KAAK,GAAGtK,sBAAsB,EAAlC;AACAD,EAAAA,kBAAkB,CAAC1B,EAAD,CAAlB;;AACA,MAAI;AACA,WAAOgM,EAAE,CAAChM,EAAD,CAAT;AACH,GAFD,CAGA,OAAOI,GAAP,EAAY;AACR,QAAImU,OAAJ,EAAa;AACTA,MAAAA,OAAO,CAACnU,GAAD,CAAP;AACH,KAFD,MAGK;AACD,YAAMA,GAAN;AACH;AACJ,GAVD,SAWQ;AACJsB,IAAAA,kBAAkB,CAACuK,KAAD,CAAlB;AACH;AACJ;;AAED,SAAS+F,KAAT,CAAepV,GAAf,EAAoB;AAChBA,EAAAA,GAAG,CAACoV,KAAJ,CAAU;AACNwC,IAAAA,YAAY,EAAEC,eADR;AAENC,IAAAA,OAAO,EAAE,mBAAY;AACjBrB,MAAAA,iBAAiB,CAAC,IAAD,CAAjB;AACH,KAJK;AAKNsB,IAAAA,OAAO,EAAE,mBAAY;AACjBtB,MAAAA,iBAAiB,CAAC,IAAD,CAAjB;AACH;AAPK,GAAV;AASA;AACJ;AACA;;AACI,WAASoB,eAAT,GAA2B;AACvB,QAAIzU,EAAE,GAAG,IAAT;AACA,QAAI4L,QAAQ,GAAG5L,EAAE,CAAC4L,QAAlB;AACA,QAAIgJ,KAAK,GAAGhJ,QAAQ,CAACgJ,KAArB;AAAA,QAA4BC,MAAM,GAAGjJ,QAAQ,CAACiJ,MAA9C;;AACA,QAAIA,MAAJ,EAAY;AACR;AACAjJ,MAAAA,QAAQ,CAACiJ,MAAT,GAAkB,YAAY;AAC1B,YAAIC,KAAK,GAAG,IAAZ;;AACA,YAAIhR,IAAI,GAAG,EAAX;;AACA,aAAK,IAAIC,EAAE,GAAG,CAAd,EAAiBA,EAAE,GAAGC,SAAS,CAACC,MAAhC,EAAwCF,EAAE,EAA1C,EAA8C;AAC1CD,UAAAA,IAAI,CAACC,EAAD,CAAJ,GAAWC,SAAS,CAACD,EAAD,CAApB;AACH;;AACD,eAAOuQ,uBAAuB,CAACtU,EAAD,EAAK,YAAY;AAAE,iBAAO6U,MAAM,CAAC1Q,KAAP,CAAa2Q,KAAb,EAAoBhR,IAApB,CAAP;AAAmC,SAAtD,CAA9B;AACH,OAPD;AAQH;;AACD,QAAI,CAAC8Q,KAAL,EAAY;AACR;AACH;;AACD,QAAI,OAAOA,KAAP,KAAiB,UAArB,EAAiC;AAC7B,UAAKtU,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAA9B,EAA6C;AACzCT,QAAAA,MAAM,CAAC,yFAAD,EAA4FC,EAA5F,CAAN;AACH;;AACD;AACH;;AACD,QAAI8J,IAAI,GAAG8B,QAAQ,CAAC9B,IAApB,CAxBuB,CAyBvB;;AACA8B,IAAAA,QAAQ,CAAC9B,IAAT,GAAgB,SAASiL,WAAT,GAAuB;AACnCC,MAAAA,SAAS,CAAChV,EAAD,EAAKA,EAAE,CAACiV,MAAR,CAAT;AACA,aAAO,OAAOnL,IAAP,KAAgB,UAAhB,GACDA,IAAI,CAAC7M,IAAL,CAAU+C,EAAV,EAAcA,EAAd,CADC,GAED8J,IAAI,IAAI,EAFd;AAGH,KALD;AAMH;;AACD,WAASkL,SAAT,CAAmBhV,EAAnB,EAAuBoT,KAAvB,EAA8B;AAC1B,QAAIA,KAAK,KAAK,KAAK,CAAnB,EAAsB;AAAEA,MAAAA,KAAK,GAAG,EAAR;AAAa;;AACrC,QAAIwB,KAAK,GAAG5U,EAAE,CAAC4L,QAAH,CAAYgJ,KAAxB;AACA,QAAIM,GAAG,GAAGC,kBAAkB,CAACnV,EAAD,CAA5B,CAH0B,CAI1B;;AACA5B,IAAAA,GAAG,CAACgV,KAAD,EAAQ,QAAR,EAAkBnJ,cAAc,EAAhC,CAAH,CAL0B,CAM1B;AACA;;AACA4J,IAAAA,kBAAkB,CAAC7T,EAAD,EAAKkV,GAAG,CAAC7Q,KAAT,CAAlB;AACA,QAAI+Q,OAAJ;AACAd,IAAAA,uBAAuB,CAACtU,EAAD,EAAK,YAAY;AACpC;AACAoV,MAAAA,OAAO,GAAGR,KAAK,CAACxB,KAAD,EAAQ8B,GAAR,CAAf;AACH,KAHsB,CAAvB;AAIA,QAAI,CAACE,OAAL,EACI;;AACJ,QAAIzV,UAAU,CAACyV,OAAD,CAAd,EAAyB;AACrB;AACA,UAAIC,aAAa,GAAGD,OAApB,CAFqB,CAGrB;;AACApV,MAAAA,EAAE,CAAC4L,QAAH,CAAYiJ,MAAZ,GAAqB,YAAY;AAC7B;AACAhB,QAAAA,kBAAkB,CAAC7T,EAAD,EAAKkV,GAAG,CAAC7Q,KAAT,CAAlB;AACA,eAAOiQ,uBAAuB,CAACtU,EAAD,EAAK,YAAY;AAAE,iBAAOqV,aAAa,EAApB;AAAyB,SAA5C,CAA9B;AACH,OAJD;;AAKA;AACH,KAVD,MAWK,IAAI3V,aAAa,CAAC0V,OAAD,CAAjB,EAA4B;AAC7B,UAAIxN,UAAU,CAACwN,OAAD,CAAd,EAAyB;AACrBA,QAAAA,OAAO,GAAGzN,MAAM,CAACyN,OAAD,CAAhB;AACH;;AACDpC,MAAAA,cAAc,CAAChV,GAAf,CAAmBgC,EAAnB,EAAuB,aAAvB,EAAsCoV,OAAtC;AACA,UAAIE,YAAY,GAAGF,OAAnB;AACArY,MAAAA,MAAM,CAAC6L,IAAP,CAAY0M,YAAZ,EAA0BzS,OAA1B,CAAkC,UAAU1B,IAAV,EAAgB;AAC9C,YAAIoU,YAAY,GAAGD,YAAY,CAACnU,IAAD,CAA/B;;AACA,YAAI,CAACqG,KAAK,CAAC+N,YAAD,CAAV,EAA0B;AACtB,cAAI,CAAC3N,UAAU,CAAC2N,YAAD,CAAf,EAA+B;AAC3B,gBAAI5V,UAAU,CAAC4V,YAAD,CAAd,EAA8B;AAC1BA,cAAAA,YAAY,GAAGA,YAAY,CAAC9S,IAAb,CAAkBzC,EAAlB,CAAf;AACH,aAFD,MAGK,IAAI,CAACP,QAAQ,CAAC8V,YAAD,CAAb,EAA6B;AAC9BA,cAAAA,YAAY,GAAGjO,GAAG,CAACiO,YAAD,CAAlB;AACH,aAFI,MAGA,IAAIC,qBAAqB,CAACD,YAAD,CAAzB,EAAyC;AAC1C;AACA;AACAE,cAAAA,cAAc,CAACF,YAAD,CAAd;AACH;AACJ,WAZD,MAaK,IAAIvW,OAAO,CAACuW,YAAD,CAAX,EAA2B;AAC5BA,YAAAA,YAAY,GAAGjO,GAAG,CAACiO,YAAD,CAAlB;AACH;AACJ;;AACDtC,QAAAA,YAAY,CAACjT,EAAD,EAAKmB,IAAL,EAAWoU,YAAX,CAAZ;AACH,OArBD;AAsBA;AACH;;AACD,QAAKjV,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAA9B,EAA6C;AACzC7B,MAAAA,MAAM,CAAC,KAAD,EAAQ,iEAAiE5B,MAAM,CAACC,SAAP,CAAiBH,QAAjB,CAC1EI,IAD0E,CACrEmY,OADqE,EAE1E7J,KAF0E,CAEpE,CAFoE,EAEjE,CAAC,CAFgE,CAAjE,GAEM,IAFd,CAAN;AAGH;AACJ;;AACD,WAASkK,cAAT,CAAwB7X,MAAxB,EAAgC;AAC5B,QAAI,CAAC8B,aAAa,CAAC9B,MAAD,CAAd,IACA4J,KAAK,CAAC5J,MAAD,CADL,IAEAgK,UAAU,CAAChK,MAAD,CAFV,IAGAmL,KAAK,CAACnL,MAAD,CAHT,EAII;AACJ,QAAIhB,GAAG,GAAGyE,iBAAiB,EAA3B;AACA,QAAI0J,cAAc,GAAGnO,GAAG,CAACqD,IAAJ,CAAS8K,cAA9B;AACAhO,IAAAA,MAAM,CAAC6L,IAAP,CAAYhL,MAAZ,EAAoBiF,OAApB,CAA4B,UAAU6S,CAAV,EAAa;AACrC,UAAIpX,GAAG,GAAGV,MAAM,CAAC8X,CAAD,CAAhB;AACA3K,MAAAA,cAAc,CAACnN,MAAD,EAAS8X,CAAT,EAAYpX,GAAZ,CAAd;;AACA,UAAIA,GAAJ,EAAS;AACLmX,QAAAA,cAAc,CAACnX,GAAD,CAAd;AACH;;AACD;AACH,KAPD;AAQH;;AACD,WAASkX,qBAAT,CAA+B5X,MAA/B,EAAuC+X,OAAvC,EAAgD;AAC5C,QAAIA,OAAO,KAAK,KAAK,CAArB,EAAwB;AAAEA,MAAAA,OAAO,GAAG,IAAIC,GAAJ,EAAV;AAAsB;;AAChD,QAAID,OAAO,CAAC1T,GAAR,CAAYrE,MAAZ,CAAJ,EAAyB;AACrB,aAAO+X,OAAO,CAAC5X,GAAR,CAAYH,MAAZ,CAAP;AACH;;AACD+X,IAAAA,OAAO,CAAC3X,GAAR,CAAYJ,MAAZ,EAAoB,KAApB;;AACA,QAAIqB,KAAK,CAACD,OAAN,CAAcpB,MAAd,KAAyBgK,UAAU,CAAChK,MAAD,CAAvC,EAAiD;AAC7C+X,MAAAA,OAAO,CAAC3X,GAAR,CAAYJ,MAAZ,EAAoB,IAApB;AACA,aAAO,IAAP;AACH;;AACD,QAAI,CAAC8B,aAAa,CAAC9B,MAAD,CAAd,IAA0BmL,KAAK,CAACnL,MAAD,CAAnC,EAA6C;AACzC,aAAO,KAAP;AACH;;AACD,WAAOb,MAAM,CAAC6L,IAAP,CAAYhL,MAAZ,EAAoBiY,IAApB,CAAyB,UAAU/Y,CAAV,EAAa;AACzC,aAAO0Y,qBAAqB,CAAC5X,MAAM,CAACd,CAAD,CAAP,EAAY6Y,OAAZ,CAA5B;AACH,KAFM,CAAP;AAGH;;AACD,WAASR,kBAAT,CAA4BnV,EAA5B,EAAgC;AAC5B,QAAIkV,GAAG,GAAG;AAAE7Q,MAAAA,KAAK,EAAE;AAAT,KAAV;AACA,QAAIyR,UAAU,GAAG,CACb,MADa,EAEb,QAFa,EAGb,MAHa,EAIb,WAJa,EAKb,UALa,EAMb,YANa,CAAjB;AAQA,QAAIC,kBAAkB,GAAG,CAAC,OAAD,CAAzB;AACA,QAAIC,gBAAgB,GAAG,CAAC,MAAD,CAAvB;AACAF,IAAAA,UAAU,CAACjT,OAAX,CAAmB,UAAUhF,GAAV,EAAe;AAC9B,UAAIoY,MAAM,GAAG,MAAMpY,GAAnB;AACAF,MAAAA,KAAK,CAACuX,GAAD,EAAMrX,GAAN,EAAW;AACZE,QAAAA,GAAG,EAAE,eAAY;AAAE,iBAAOiC,EAAE,CAACiW,MAAD,CAAT;AAAoB,SAD3B;AAEZjY,QAAAA,GAAG,EAAE,eAAY;AACb+B,UAAAA,MAAM,CAAC,uBAAuBlC,GAAvB,GAA6B,sCAA9B,EAAsEmC,EAAtE,CAAN;AACH;AAJW,OAAX,CAAL;AAMH,KARD;AASA+V,IAAAA,kBAAkB,CAAClT,OAAnB,CAA2B,UAAUhF,GAAV,EAAe;AACtC,UAAIoY,MAAM,GAAG,MAAMpY,GAAnB;AACAF,MAAAA,KAAK,CAACuX,GAAD,EAAMrX,GAAN,EAAW;AACZE,QAAAA,GAAG,EAAE,eAAY;AACb,cAAIyK,GAAJ,EAAS1K,EAAT;;AACA,cAAIgM,IAAI,GAAGrC,QAAQ,CAAC,EAAD,CAAnB;AACA,cAAIoD,MAAM,GAAG7K,EAAE,CAACiW,MAAD,CAAf;;AACA,cAAIvN,OAAO,GAAG,SAAVA,OAAU,CAAUwN,IAAV,EAAgB;AAC1BvY,YAAAA,KAAK,CAACmM,IAAD,EAAOoM,IAAP,EAAa;AACdnY,cAAAA,GAAG,EAAE,eAAY;AACb;AACA,uBAAOiC,EAAE,CAACiW,MAAD,CAAF,CAAWC,IAAX,CAAP;AACH;AAJa,aAAb,CAAL;AAMH,WAPD;;AAQA,cAAI;AACA,iBAAK,IAAIzN,EAAE,GAAGhD,QAAQ,CAAC1I,MAAM,CAAC6L,IAAP,CAAYiC,MAAZ,CAAD,CAAjB,EAAwClC,EAAE,GAAGF,EAAE,CAAC5C,IAAH,EAAlD,EAA6D,CAAC8C,EAAE,CAAC7C,IAAjE,EAAuE6C,EAAE,GAAGF,EAAE,CAAC5C,IAAH,EAA5E,EAAuF;AACnF,kBAAIqQ,IAAI,GAAGvN,EAAE,CAACpK,KAAd;;AACAmK,cAAAA,OAAO,CAACwN,IAAD,CAAP;AACH;AACJ,WALD,CAMA,OAAOpN,KAAP,EAAc;AAAEN,YAAAA,GAAG,GAAG;AAAE7H,cAAAA,KAAK,EAAEmI;AAAT,aAAN;AAAyB,WANzC,SAOQ;AACJ,gBAAI;AACA,kBAAIH,EAAE,IAAI,CAACA,EAAE,CAAC7C,IAAV,KAAmBhI,EAAE,GAAG2K,EAAE,UAA1B,CAAJ,EAAwC3K,EAAE,CAACb,IAAH,CAAQwL,EAAR;AAC3C,aAFD,SAGQ;AAAE,kBAAID,GAAJ,EAAS,MAAMA,GAAG,CAAC7H,KAAV;AAAkB;AACxC;;AACD,iBAAOmJ,IAAP;AACH,SA3BW;AA4BZ9L,QAAAA,GAAG,EAAE,eAAY;AACb+B,UAAAA,MAAM,CAAC,uBAAuBlC,GAAvB,GAA6B,sCAA9B,EAAsEmC,EAAtE,CAAN;AACH;AA9BW,OAAX,CAAL;AAgCH,KAlCD;AAmCAgW,IAAAA,gBAAgB,CAACnT,OAAjB,CAAyB,UAAUhF,GAAV,EAAe;AACpC,UAAIoY,MAAM,GAAG,MAAMpY,GAAnB;AACAF,MAAAA,KAAK,CAACuX,GAAD,EAAMrX,GAAN,EAAW;AACZE,QAAAA,GAAG,EAAE,eAAY;AACb,iBAAO,YAAY;AACf,gBAAI+F,IAAI,GAAG,EAAX;;AACA,iBAAK,IAAIC,EAAE,GAAG,CAAd,EAAiBA,EAAE,GAAGC,SAAS,CAACC,MAAhC,EAAwCF,EAAE,EAA1C,EAA8C;AAC1CD,cAAAA,IAAI,CAACC,EAAD,CAAJ,GAAWC,SAAS,CAACD,EAAD,CAApB;AACH;;AACD,gBAAIiI,EAAE,GAAGhM,EAAE,CAACiW,MAAD,CAAX;AACAjK,YAAAA,EAAE,CAAC7H,KAAH,CAASnE,EAAT,EAAa8D,IAAb;AACH,WAPD;AAQH;AAVW,OAAX,CAAL;AAYH,KAdD;;AAeA,QAAIxD,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,MAA7B,EAAqC;AACjC0U,MAAAA,GAAG,CAACiB,GAAJ,GAAUnW,EAAV;AACH;;AACD,WAAOkV,GAAP;AACH;AACJ;AAED;AACA;AACA;;;AACA,SAASkB,SAAT,CAAmB7P,IAAnB,EAAyBD,EAAzB,EAA6B;AACzB,MAAI,CAACC,IAAL,EACI,OAAOD,EAAP;AACJ,MAAI,CAACA,EAAL,EACI,OAAOC,IAAP;AACJ,MAAI1I,GAAJ;AACA,MAAIwY,KAAJ;AACA,MAAIC,OAAJ;AACA,MAAI1N,IAAI,GAAGvL,SAAS,GAAGE,OAAO,CAACC,OAAR,CAAgB+I,IAAhB,CAAH,GAA2BxJ,MAAM,CAAC6L,IAAP,CAAYrC,IAAZ,CAA/C;;AACA,OAAK,IAAIhB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGqD,IAAI,CAAC3E,MAAzB,EAAiCsB,CAAC,EAAlC,EAAsC;AAClC1H,IAAAA,GAAG,GAAG+K,IAAI,CAACrD,CAAD,CAAV,CADkC,CAElC;;AACA,QAAI1H,GAAG,KAAK,QAAZ,EACI;AACJwY,IAAAA,KAAK,GAAG/P,EAAE,CAACzI,GAAD,CAAV;AACAyY,IAAAA,OAAO,GAAG/P,IAAI,CAAC1I,GAAD,CAAd;;AACA,QAAI,CAACY,MAAM,CAAC6H,EAAD,EAAKzI,GAAL,CAAX,EAAsB;AAClByI,MAAAA,EAAE,CAACzI,GAAD,CAAF,GAAUyY,OAAV;AACH,KAFD,MAGK,IAAID,KAAK,KAAKC,OAAV,IACL5W,aAAa,CAAC2W,KAAD,CADR,IAEL,CAAC7O,KAAK,CAAC6O,KAAD,CAFD,IAGL3W,aAAa,CAAC4W,OAAD,CAHR,IAIL,CAAC9O,KAAK,CAAC8O,OAAD,CAJL,EAIgB;AACjBF,MAAAA,SAAS,CAACE,OAAD,EAAUD,KAAV,CAAT;AACH;AACJ;;AACD,SAAO/P,EAAP;AACH;;AACD,SAASiQ,QAAT,CAAiB3Z,GAAjB,EAAsB;AAClB,MAAIwE,eAAe,CAACxE,GAAD,CAAnB,EAA0B;AACtB,QAAK0D,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAA9B,EAA6C;AACzCT,MAAAA,MAAM,CAAC,iGAAD,CAAN;AACH;;AACD;AACH;;AACD,MAAKO,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAA9B,EAA6C;AACzC,QAAI5D,GAAG,CAACqL,OAAR,EAAiB;AACb,UAAIrL,GAAG,CAACqL,OAAJ,CAAY,CAAZ,MAAmB,GAAnB,IAA0BrL,GAAG,CAACqL,OAAJ,CAAY,CAAZ,MAAmB,GAAjD,EAAsD;AAClDlI,QAAAA,MAAM,CAAC,mDAAmDnD,GAAG,CAACqL,OAAvD,GAAiE,SAAlE,CAAN;AACH;AACJ,KAJD,MAKK;AACDlI,MAAAA,MAAM,CAAC,4CAAD,CAAN;AACH;AACJ;;AACDnD,EAAAA,GAAG,CAAC8G,MAAJ,CAAWoI,qBAAX,CAAiC8I,KAAjC,GAAyC,UAAUlS,MAAV,EAAkB8T,KAAlB,EAAyB;AAC9D,WAAO,SAASC,aAAT,CAAuBrD,KAAvB,EAA8BsD,OAA9B,EAAuC;AAC1C,aAAON,SAAS,CAAC,OAAO1T,MAAP,KAAkB,UAAlB,GAA+BA,MAAM,CAAC0Q,KAAD,EAAQsD,OAAR,CAAN,IAA0B,EAAzD,GAA8D5W,SAA/D,EAA0E,OAAO0W,KAAP,KAAiB,UAAjB,GAA8BA,KAAK,CAACpD,KAAD,EAAQsD,OAAR,CAAL,IAAyB,EAAvD,GAA4D5W,SAAtI,CAAhB;AACH,KAFD;AAGH,GAJD;;AAKA0B,EAAAA,iBAAiB,CAAC5E,GAAD,CAAjB;AACAoV,EAAAA,KAAK,CAACpV,GAAD,CAAL;AACH;;AACD,IAAI+Z,MAAM,GAAG;AACTJ,EAAAA,OAAO,EAAE,iBAAU3Z,GAAV,EAAe;AAAE,WAAO2Z,QAAO,CAAC3Z,GAAD,CAAd;AAAsB;AADvC,CAAb,C,CAIA;;AACA,SAASga,eAAT,CAAyBpT,OAAzB,EAAkC;AAC9B,SAAOA,OAAP;AACH;;AAED,SAASqT,oBAAT,CAA8BhM,MAA9B,EAAsC;AAClC,MAAIlL,UAAU,CAACkL,MAAD,CAAd,EAAwB;AACpBA,IAAAA,MAAM,GAAG;AAAEiM,MAAAA,MAAM,EAAEjM;AAAV,KAAT;AACH;;AACD,MAAIiM,MAAM,GAAGjM,MAAM,CAACiM,MAApB;AAAA,MAA4BC,gBAAgB,GAAGlM,MAAM,CAACkM,gBAAtD;AAAA,MAAwEC,cAAc,GAAGnM,MAAM,CAACmM,cAAhG;AAAA,MAAgHlZ,EAAE,GAAG+M,MAAM,CAACoM,KAA5H;AAAA,MAAmIA,KAAK,GAAGnZ,EAAE,KAAK,KAAK,CAAZ,GAAgB,GAAhB,GAAsBA,EAAjK;AAAA,MAAqKoZ,OAAO,GAAGrM,MAAM,CAACqM,OAAtL;AAAA,MAA+L;AAC/LzO,EAAAA,EAAE,GAAGoC,MAAM,CAACsM,WADZ;AAAA,MACyB;AACzBA,EAAAA,WAAW,GAAG1O,EAAE,KAAK,KAAK,CAAZ,GAAgB,KAAhB,GAAwBA,EAFtC;AAAA,MAE0C;AAC1C2O,EAAAA,WAAW,GAAGvM,MAAM,CAAC0J,OAHrB;;AAIA,MAAKjU,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAA1B,IAA2C2W,WAA/C,EAA4D;AACxDpX,IAAAA,MAAM,CAAC,uFAAD,CAAN;AACH;;AACD,MAAIsX,cAAc,GAAG,IAArB;AACA,MAAIC,OAAO,GAAG,CAAd;;AACA,MAAIC,KAAK,GAAG,SAARA,KAAQ,GAAY;AACpBD,IAAAA,OAAO;AACPD,IAAAA,cAAc,GAAG,IAAjB;AACA,WAAOG,IAAI,EAAX;AACH,GAJD;;AAKA,MAAIA,IAAI,GAAG,SAAPA,IAAO,GAAY;AACnB,QAAIC,WAAJ;AACA,WAAQJ,cAAc,KACjBI,WAAW,GAAGJ,cAAc,GAAGP,MAAM,WAAN,CACrB,UAAU1W,GAAV,EAAe;AACtBA,MAAAA,GAAG,GAAGA,GAAG,YAAYtB,KAAf,GAAuBsB,GAAvB,GAA6B,IAAItB,KAAJ,CAAUO,MAAM,CAACe,GAAD,CAAhB,CAAnC;;AACA,UAAIgX,WAAJ,EAAiB;AACb,eAAO,IAAIM,OAAJ,CAAY,UAAUC,OAAV,EAAmBC,MAAnB,EAA2B;AAC1C,cAAIC,SAAS,GAAG,SAAZA,SAAY,GAAY;AAAE,mBAAOF,OAAO,CAACJ,KAAK,EAAN,CAAd;AAA0B,WAAxD;;AACA,cAAIO,QAAQ,GAAG,SAAXA,QAAW,GAAY;AAAE,mBAAOF,MAAM,CAACxX,GAAD,CAAb;AAAqB,WAAlD;;AACAgX,UAAAA,WAAW,CAAChX,GAAD,EAAMyX,SAAN,EAAiBC,QAAjB,EAA2BR,OAAO,GAAG,CAArC,CAAX;AACH,SAJM,CAAP;AAKH,OAND,MAOK;AACD,cAAMlX,GAAN;AACH;AACJ,KAb+B,EAc3B2X,IAd2B,CActB,UAAUC,IAAV,EAAgB;AACtB,UAAIP,WAAW,KAAKJ,cAAhB,IAAkCA,cAAtC,EAAsD;AAClD,eAAOA,cAAP;AACH;;AACD,UAAK/W,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAA1B,IAA2C,CAACwX,IAAhD,EAAsD;AAClDjY,QAAAA,MAAM,CAAC,mDACH,iEADE,CAAN;AAEH,OAPqB,CAQtB;;;AACA,UAAIiY,IAAI,KACHA,IAAI,CAACC,UAAL,IAAmBD,IAAI,CAAC1a,MAAM,CAAC4a,WAAR,CAAJ,KAA6B,QAD7C,CAAR,EACgE;AAC5DF,QAAAA,IAAI,GAAGA,IAAI,WAAX;AACH;;AACD,UAAK1X,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAA1B,IAA2CwX,IAA3C,IAAmD,CAACvY,QAAQ,CAACuY,IAAD,CAA5D,IAAsE,CAACrY,UAAU,CAACqY,IAAD,CAArF,EAA6F;AACzF,cAAM,IAAIlZ,KAAJ,CAAU,0CAA0CkZ,IAApD,CAAN;AACH;;AACD,aAAOA,IAAP;AACH,KA/B+B,CADd,CAAtB;AAiCH,GAnCD;;AAoCA,SAAO,YAAY;AACf,QAAI/F,SAAS,GAAGuF,IAAI,EAApB;AACA,WAAO;AACHvF,MAAAA,SAAS,EAAEA,SADR;AAEHgF,MAAAA,KAAK,EAAEA,KAFJ;AAGHC,MAAAA,OAAO,EAAEA,OAHN;AAIHvW,MAAAA,KAAK,EAAEqW,cAJJ;AAKHmB,MAAAA,OAAO,EAAEpB;AALN,KAAP;AAOH,GATD;AAUH;;AAED,IAAI9O,OAAO,GAAG,YAAd,C,CACA;;AACA,IAAI,OAAOxH,MAAP,KAAkB,WAAlB,IAAiCA,MAAM,CAAC7D,GAA5C,EAAiD;AAC7C6D,EAAAA,MAAM,CAAC7D,GAAP,CAAWmV,GAAX,CAAe4E,MAAf;AACH;;AAED,eAAeA,MAAf;AACA,SAAShS,QAAT,EAAmB+M,SAAnB,EAA8BxK,SAA9B,EAAyCa,SAAzC,EAAoD8O,oBAApD,EAA0ED,eAA1E,EAA2FxL,GAA3F,EAAgGxJ,kBAAhG,EAAoH+Q,aAAa,IAAIyF,CAArI,EAAwIlH,MAAxI,EAAgJnI,KAAhJ,EAAuJnB,UAAvJ,EAAmK8C,UAAnK,EAA+KlD,KAA/K,EAAsLgD,OAAtL,EAA+LiI,QAA/L,EAAyMhG,WAAzM,EAAsNP,aAAtN,EAAqOI,eAArO,EAAsPF,cAAtP,EAAsQM,aAAtQ,EAAqRF,eAArR,EAAsSL,SAAtS,EAAiTQ,gBAAjT,EAAmUJ,WAAnU,EAAgVF,SAAhV,EAA2V2E,OAA3V,EAAoW1I,SAApW,EAA+Wb,QAA/W,EAAyXN,QAAzX,EAAmYG,GAAnY,EAAwYwD,KAAK,IAAI9M,GAAjZ,EAAsZoK,eAAtZ,EAAuauC,eAAva,EAAwbxC,UAAxb,EAAocsC,KAApc,EAA2c3C,KAA3c,EAAkdH,MAAld,EAA0dU,UAA1d,EAAseX,KAAte,EAA6e+J,YAA7e,EAA2fF,YAA3f,EAAygBtJ,OAAzgB,EAAkhB/H,IAAlhB,EAAwhBgQ,KAAxhB,EAA+hBH,WAA/hB","sourcesContent":["import Vue from 'vue';\n\nvar toString = function (x) { return Object.prototype.toString.call(x); };\r\nfunction isNative(Ctor) {\r\n    return typeof Ctor === 'function' && /native code/.test(Ctor.toString());\r\n}\r\nvar hasSymbol = typeof Symbol !== 'undefined' &&\r\n    isNative(Symbol) &&\r\n    typeof Reflect !== 'undefined' &&\r\n    isNative(Reflect.ownKeys);\r\nvar noopFn = function (_) { return _; };\r\nfunction proxy(target, key, _a) {\r\n    var get = _a.get, set = _a.set;\r\n    Object.defineProperty(target, key, {\r\n        enumerable: true,\r\n        configurable: true,\r\n        get: get || noopFn,\r\n        set: set || noopFn,\r\n    });\r\n}\r\nfunction def(obj, key, val, enumerable) {\r\n    Object.defineProperty(obj, key, {\r\n        value: val,\r\n        enumerable: !!enumerable,\r\n        writable: true,\r\n        configurable: true,\r\n    });\r\n}\r\nfunction hasOwn(obj, key) {\r\n    return Object.hasOwnProperty.call(obj, key);\r\n}\r\nfunction assert(condition, msg) {\r\n    if (!condition) {\r\n        throw new Error(\"[vue-composition-api] \" + msg);\r\n    }\r\n}\r\nfunction isPrimitive(value) {\r\n    return (typeof value === 'string' ||\r\n        typeof value === 'number' ||\r\n        // $flow-disable-line\r\n        typeof value === 'symbol' ||\r\n        typeof value === 'boolean');\r\n}\r\nfunction isArray(x) {\r\n    return Array.isArray(x);\r\n}\r\nfunction isValidArrayIndex(val) {\r\n    var n = parseFloat(String(val));\r\n    return n >= 0 && Math.floor(n) === n && isFinite(val);\r\n}\r\nfunction isObject(val) {\r\n    return val !== null && typeof val === 'object';\r\n}\r\nfunction isPlainObject(x) {\r\n    return toString(x) === '[object Object]';\r\n}\r\nfunction isFunction(x) {\r\n    return typeof x === 'function';\r\n}\r\nfunction isUndef(v) {\r\n    return v === undefined || v === null;\r\n}\r\nfunction warn$1(msg, vm) {\r\n    Vue.util.warn(msg, vm);\r\n}\r\nfunction logError(err, vm, info) {\r\n    if ((process.env.NODE_ENV !== 'production')) {\r\n        warn$1(\"Error in \" + info + \": \\\"\" + err.toString() + \"\\\"\", vm);\r\n    }\r\n    if (typeof window !== 'undefined' && typeof console !== 'undefined') {\r\n        console.error(err);\r\n    }\r\n    else {\r\n        throw err;\r\n    }\r\n}\n\nvar vueDependency = undefined;\r\ntry {\r\n    var requiredVue = require('vue');\r\n    if (requiredVue && isVue(requiredVue)) {\r\n        vueDependency = requiredVue;\r\n    }\r\n    else if (requiredVue &&\r\n        'default' in requiredVue &&\r\n        isVue(requiredVue.default)) {\r\n        vueDependency = requiredVue.default;\r\n    }\r\n}\r\ncatch (_a) {\r\n    // not available\r\n}\r\nvar vueConstructor = null;\r\nvar currentInstance = null;\r\nvar PluginInstalledFlag = '__composition_api_installed__';\r\nfunction isVue(obj) {\r\n    return obj && typeof obj === 'function' && obj.name === 'Vue';\r\n}\r\nfunction isVueRegistered(Vue) {\r\n    return hasOwn(Vue, PluginInstalledFlag);\r\n}\r\nfunction getVueConstructor() {\r\n    if ((process.env.NODE_ENV !== 'production')) {\r\n        assert(vueConstructor, \"must call Vue.use(VueCompositionAPI) before using any function.\");\r\n    }\r\n    return vueConstructor;\r\n}\r\n// returns registered vue or `vue` dependency\r\nfunction getRegisteredVueOrDefault() {\r\n    var constructor = vueConstructor || vueDependency;\r\n    if ((process.env.NODE_ENV !== 'production')) {\r\n        assert(constructor, \"No vue dependency found.\");\r\n    }\r\n    return constructor;\r\n}\r\nfunction setVueConstructor(Vue) {\r\n    // @ts-ignore\r\n    if ((process.env.NODE_ENV !== 'production') && vueConstructor && Vue.__proto__ !== vueConstructor.__proto__) {\r\n        warn$1('[vue-composition-api] another instance of Vue installed');\r\n    }\r\n    vueConstructor = Vue;\r\n    Object.defineProperty(Vue, PluginInstalledFlag, {\r\n        configurable: true,\r\n        writable: true,\r\n        value: true,\r\n    });\r\n}\r\nfunction setCurrentInstance(vm) {\r\n    // currentInstance?.$scopedSlots\r\n    currentInstance = vm;\r\n}\r\nfunction getCurrentVue2Instance() {\r\n    return currentInstance;\r\n}\r\nfunction getCurrentInstance() {\r\n    if (currentInstance) {\r\n        return toVue3ComponentInstance(currentInstance);\r\n    }\r\n    return null;\r\n}\r\nvar instanceMapCache = new WeakMap();\r\nfunction toVue3ComponentInstance(vue2Instance) {\r\n    if (instanceMapCache.has(vue2Instance)) {\r\n        return instanceMapCache.get(vue2Instance);\r\n    }\r\n    var instance = {\r\n        proxy: vue2Instance,\r\n        update: vue2Instance.$forceUpdate,\r\n        uid: vue2Instance._uid,\r\n        // $emit is defined on prototype and it expected to be bound\r\n        emit: vue2Instance.$emit.bind(vue2Instance),\r\n        parent: null,\r\n        root: null,\r\n    };\r\n    // map vm.$props =\r\n    var instanceProps = [\r\n        'data',\r\n        'props',\r\n        'attrs',\r\n        'refs',\r\n        'vnode',\r\n        'slots',\r\n    ];\r\n    instanceProps.forEach(function (prop) {\r\n        proxy(instance, prop, {\r\n            get: function () {\r\n                return vue2Instance[\"$\" + prop];\r\n            },\r\n        });\r\n    });\r\n    proxy(instance, 'isMounted', {\r\n        get: function () {\r\n            // @ts-expect-error private api\r\n            return vue2Instance._isMounted;\r\n        },\r\n    });\r\n    proxy(instance, 'isUnmounted', {\r\n        get: function () {\r\n            // @ts-expect-error private api\r\n            return vue2Instance._isDestroyed;\r\n        },\r\n    });\r\n    proxy(instance, 'isDeactivated', {\r\n        get: function () {\r\n            // @ts-expect-error private api\r\n            return vue2Instance._inactive;\r\n        },\r\n    });\r\n    proxy(instance, 'emitted', {\r\n        get: function () {\r\n            // @ts-expect-error private api\r\n            return vue2Instance._events;\r\n        },\r\n    });\r\n    instanceMapCache.set(vue2Instance, instance);\r\n    if (vue2Instance.$parent) {\r\n        instance.parent = toVue3ComponentInstance(vue2Instance.$parent);\r\n    }\r\n    if (vue2Instance.$root) {\r\n        instance.root = toVue3ComponentInstance(vue2Instance.$root);\r\n    }\r\n    return instance;\r\n}\n\nfunction currentVMInFn(hook) {\r\n    var vm = getCurrentInstance();\r\n    if ((process.env.NODE_ENV !== 'production') && !vm) {\r\n        warn$1(hook + \" is called when there is no active component instance to be \" +\r\n            \"associated with. \" +\r\n            \"Lifecycle injection APIs can only be used during execution of setup().\");\r\n    }\r\n    return vm === null || vm === void 0 ? void 0 : vm.proxy;\r\n}\r\nfunction defineComponentInstance(Ctor, options) {\r\n    if (options === void 0) { options = {}; }\r\n    var silent = Ctor.config.silent;\r\n    Ctor.config.silent = true;\r\n    var vm = new Ctor(options);\r\n    Ctor.config.silent = silent;\r\n    return vm;\r\n}\r\nfunction isComponentInstance(obj) {\r\n    var Vue = getVueConstructor();\r\n    return Vue && obj instanceof Vue;\r\n}\r\nfunction createSlotProxy(vm, slotName) {\r\n    return function () {\r\n        var args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            args[_i] = arguments[_i];\r\n        }\r\n        if (!vm.$scopedSlots[slotName]) {\r\n            return warn$1(\"slots.\" + slotName + \"() got called outside of the \\\"render()\\\" scope\", vm);\r\n        }\r\n        return vm.$scopedSlots[slotName].apply(vm, args);\r\n    };\r\n}\r\nfunction resolveSlots(slots, normalSlots) {\r\n    var res;\r\n    if (!slots) {\r\n        res = {};\r\n    }\r\n    else if (slots._normalized) {\r\n        // fast path 1: child component re-render only, parent did not change\r\n        return slots._normalized;\r\n    }\r\n    else {\r\n        res = {};\r\n        for (var key in slots) {\r\n            if (slots[key] && key[0] !== '$') {\r\n                res[key] = true;\r\n            }\r\n        }\r\n    }\r\n    // expose normal slots on scopedSlots\r\n    for (var key in normalSlots) {\r\n        if (!(key in res)) {\r\n            res[key] = true;\r\n        }\r\n    }\r\n    return res;\r\n}\r\nvar vueInternalClasses;\r\nvar getVueInternalClasses = function () {\r\n    if (!vueInternalClasses) {\r\n        var vm = defineComponentInstance(getVueConstructor(), {\r\n            computed: {\r\n                value: function () {\r\n                    return 0;\r\n                },\r\n            },\r\n        });\r\n        // to get Watcher class\r\n        var Watcher = vm._computedWatchers.value.constructor;\r\n        // to get Dep class\r\n        var Dep = vm._data.__ob__.dep.constructor;\r\n        vueInternalClasses = {\r\n            Watcher: Watcher,\r\n            Dep: Dep,\r\n        };\r\n        vm.$destroy();\r\n    }\r\n    return vueInternalClasses;\r\n};\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n\r\nvar __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\n\r\nfunction __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nfunction __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nfunction __spreadArray(to, from) {\r\n    for (var i = 0, il = from.length, j = to.length; i < il; i++, j++)\r\n        to[j] = from[i];\r\n    return to;\r\n}\n\nfunction createSymbol(name) {\r\n    return hasSymbol ? Symbol.for(name) : name;\r\n}\r\nvar WatcherPreFlushQueueKey = createSymbol('composition-api.preFlushQueue');\r\nvar WatcherPostFlushQueueKey = createSymbol('composition-api.postFlushQueue');\r\n// must be a string, symbol key is ignored in reactive\r\nvar RefKey = 'composition-api.refKey';\n\nvar accessModifiedSet = new WeakMap();\r\nvar rawSet = new WeakMap();\r\nvar readonlySet = new WeakMap();\n\nvar RefImpl = /** @class */ (function () {\r\n    function RefImpl(_a) {\r\n        var get = _a.get, set = _a.set;\r\n        proxy(this, 'value', {\r\n            get: get,\r\n            set: set,\r\n        });\r\n    }\r\n    return RefImpl;\r\n}());\r\nfunction createRef(options, readonly) {\r\n    var r = new RefImpl(options);\r\n    // seal the ref, this could prevent ref from being observed\r\n    // It's safe to seal the ref, since we really shouldn't extend it.\r\n    // related issues: #79\r\n    var sealed = Object.seal(r);\r\n    readonlySet.set(sealed, true);\r\n    return sealed;\r\n}\r\nfunction ref(raw) {\r\n    var _a;\r\n    if (isRef(raw)) {\r\n        return raw;\r\n    }\r\n    var value = reactive((_a = {}, _a[RefKey] = raw, _a));\r\n    return createRef({\r\n        get: function () { return value[RefKey]; },\r\n        set: function (v) { return (value[RefKey] = v); },\r\n    });\r\n}\r\nfunction isRef(value) {\r\n    return value instanceof RefImpl;\r\n}\r\nfunction unref(ref) {\r\n    return isRef(ref) ? ref.value : ref;\r\n}\r\nfunction toRefs(obj) {\r\n    if ((process.env.NODE_ENV !== 'production') && !isReactive(obj)) {\r\n        warn$1(\"toRefs() expects a reactive object but received a plain one.\");\r\n    }\r\n    if (!isPlainObject(obj))\r\n        return obj;\r\n    var ret = {};\r\n    for (var key in obj) {\r\n        ret[key] = toRef(obj, key);\r\n    }\r\n    return ret;\r\n}\r\nfunction customRef(factory) {\r\n    var version = ref(0);\r\n    return createRef(factory(function () { return void version.value; }, function () {\r\n        ++version.value;\r\n    }));\r\n}\r\nfunction toRef(object, key) {\r\n    var v = object[key];\r\n    if (isRef(v))\r\n        return v;\r\n    return createRef({\r\n        get: function () { return object[key]; },\r\n        set: function (v) { return (object[key] = v); },\r\n    });\r\n}\r\nfunction shallowRef(raw) {\r\n    var _a;\r\n    if (isRef(raw)) {\r\n        return raw;\r\n    }\r\n    var value = shallowReactive((_a = {}, _a[RefKey] = raw, _a));\r\n    return createRef({\r\n        get: function () { return value[RefKey]; },\r\n        set: function (v) { return (value[RefKey] = v); },\r\n    });\r\n}\r\nfunction triggerRef(value) {\r\n    if (!isRef(value))\r\n        return;\r\n    value.value = value.value;\r\n}\r\nfunction proxyRefs(objectWithRefs) {\r\n    var _a, e_1, _b;\r\n    if (isReactive(objectWithRefs)) {\r\n        return objectWithRefs;\r\n    }\r\n    var value = reactive((_a = {}, _a[RefKey] = objectWithRefs, _a));\r\n    var _loop_1 = function (key) {\r\n        proxy(value, key, {\r\n            get: function () {\r\n                if (isRef(value[key])) {\r\n                    return value[key].value;\r\n                }\r\n                return value[key];\r\n            },\r\n            set: function (v) {\r\n                if (isRef(value[key])) {\r\n                    return (value[key].value = unref(v));\r\n                }\r\n                value[key] = unref(v);\r\n            },\r\n        });\r\n    };\r\n    try {\r\n        for (var _c = __values(Object.keys(objectWithRefs)), _d = _c.next(); !_d.done; _d = _c.next()) {\r\n            var key = _d.value;\r\n            _loop_1(key);\r\n        }\r\n    }\r\n    catch (e_1_1) { e_1 = { error: e_1_1 }; }\r\n    finally {\r\n        try {\r\n            if (_d && !_d.done && (_b = _c.return)) _b.call(_c);\r\n        }\r\n        finally { if (e_1) throw e_1.error; }\r\n    }\r\n    return value;\r\n}\n\nfunction isRaw(obj) {\r\n    var _a;\r\n    return Boolean((obj === null || obj === void 0 ? void 0 : obj.__ob__) && ((_a = obj.__ob__) === null || _a === void 0 ? void 0 : _a.__raw__));\r\n}\r\nfunction isReactive(obj) {\r\n    var _a;\r\n    return Boolean((obj === null || obj === void 0 ? void 0 : obj.__ob__) && !((_a = obj.__ob__) === null || _a === void 0 ? void 0 : _a.__raw__));\r\n}\r\n/**\r\n * Proxing property access of target.\r\n * We can do unwrapping and other things here.\r\n */\r\nfunction setupAccessControl(target) {\r\n    if (!isPlainObject(target) ||\r\n        isRaw(target) ||\r\n        Array.isArray(target) ||\r\n        isRef(target) ||\r\n        isComponentInstance(target) ||\r\n        accessModifiedSet.has(target))\r\n        return;\r\n    accessModifiedSet.set(target, true);\r\n    var keys = Object.keys(target);\r\n    for (var i = 0; i < keys.length; i++) {\r\n        defineAccessControl(target, keys[i]);\r\n    }\r\n}\r\n/**\r\n * Auto unwrapping when access property\r\n */\r\nfunction defineAccessControl(target, key, val) {\r\n    if (key === '__ob__')\r\n        return;\r\n    if (isRaw(target[key]))\r\n        return;\r\n    var getter;\r\n    var setter;\r\n    var property = Object.getOwnPropertyDescriptor(target, key);\r\n    if (property) {\r\n        if (property.configurable === false) {\r\n            return;\r\n        }\r\n        getter = property.get;\r\n        setter = property.set;\r\n        if ((!getter || setter) /* not only have getter */ &&\r\n            arguments.length === 2) {\r\n            val = target[key];\r\n        }\r\n    }\r\n    setupAccessControl(val);\r\n    Object.defineProperty(target, key, {\r\n        enumerable: true,\r\n        configurable: true,\r\n        get: function getterHandler() {\r\n            var value = getter ? getter.call(target) : val;\r\n            // if the key is equal to RefKey, skip the unwrap logic\r\n            if (key !== RefKey && isRef(value)) {\r\n                return value.value;\r\n            }\r\n            else {\r\n                return value;\r\n            }\r\n        },\r\n        set: function setterHandler(newVal) {\r\n            if (getter && !setter)\r\n                return;\r\n            var value = getter ? getter.call(target) : val;\r\n            // If the key is equal to RefKey, skip the unwrap logic\r\n            // If and only if \"value\" is ref and \"newVal\" is not a ref,\r\n            // the assignment should be proxied to \"value\" ref.\r\n            if (key !== RefKey && isRef(value) && !isRef(newVal)) {\r\n                value.value = newVal;\r\n            }\r\n            else if (setter) {\r\n                setter.call(target, newVal);\r\n            }\r\n            else {\r\n                val = newVal;\r\n            }\r\n            setupAccessControl(newVal);\r\n        },\r\n    });\r\n}\r\nfunction observe(obj) {\r\n    var Vue = getRegisteredVueOrDefault();\r\n    var observed;\r\n    if (Vue.observable) {\r\n        observed = Vue.observable(obj);\r\n    }\r\n    else {\r\n        var vm = defineComponentInstance(Vue, {\r\n            data: {\r\n                $$state: obj,\r\n            },\r\n        });\r\n        observed = vm._data.$$state;\r\n    }\r\n    // in SSR, there is no __ob__. Mock for reactivity check\r\n    if (!hasOwn(observed, '__ob__')) {\r\n        def(observed, '__ob__', mockObserver(observed));\r\n    }\r\n    return observed;\r\n}\r\nfunction createObserver() {\r\n    return observe({}).__ob__;\r\n}\r\nfunction mockObserver(value) {\r\n    if (value === void 0) { value = {}; }\r\n    return {\r\n        value: value,\r\n        dep: {\r\n            notify: noopFn,\r\n            depend: noopFn,\r\n            addSub: noopFn,\r\n            removeSub: noopFn,\r\n        },\r\n    };\r\n}\r\nfunction shallowReactive(obj) {\r\n    var e_1, _a;\r\n    if ((process.env.NODE_ENV !== 'production') && !obj) {\r\n        warn$1('\"shallowReactive()\" is called without provide an \"object\".');\r\n        return;\r\n    }\r\n    if (!(isPlainObject(obj) || isArray(obj)) ||\r\n        isRaw(obj) ||\r\n        !Object.isExtensible(obj)) {\r\n        return obj;\r\n    }\r\n    var observed = observe({});\r\n    setupAccessControl(observed);\r\n    var ob = observed.__ob__;\r\n    var _loop_1 = function (key) {\r\n        var val = obj[key];\r\n        var getter;\r\n        var setter;\r\n        var property = Object.getOwnPropertyDescriptor(obj, key);\r\n        if (property) {\r\n            if (property.configurable === false) {\r\n                return \"continue\";\r\n            }\r\n            getter = property.get;\r\n            setter = property.set;\r\n        }\r\n        Object.defineProperty(observed, key, {\r\n            enumerable: true,\r\n            configurable: true,\r\n            get: function getterHandler() {\r\n                var _a;\r\n                var value = getter ? getter.call(obj) : val;\r\n                (_a = ob.dep) === null || _a === void 0 ? void 0 : _a.depend();\r\n                return value;\r\n            },\r\n            set: function setterHandler(newVal) {\r\n                var _a;\r\n                if (getter && !setter)\r\n                    return;\r\n                if (setter) {\r\n                    setter.call(obj, newVal);\r\n                }\r\n                else {\r\n                    val = newVal;\r\n                }\r\n                (_a = ob.dep) === null || _a === void 0 ? void 0 : _a.notify();\r\n            },\r\n        });\r\n    };\r\n    try {\r\n        for (var _b = __values(Object.keys(obj)), _c = _b.next(); !_c.done; _c = _b.next()) {\r\n            var key = _c.value;\r\n            _loop_1(key);\r\n        }\r\n    }\r\n    catch (e_1_1) { e_1 = { error: e_1_1 }; }\r\n    finally {\r\n        try {\r\n            if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\r\n        }\r\n        finally { if (e_1) throw e_1.error; }\r\n    }\r\n    return observed;\r\n}\r\n/**\r\n * Make obj reactivity\r\n */\r\nfunction reactive(obj) {\r\n    if (!isObject(obj)) {\r\n        if ((process.env.NODE_ENV !== 'production')) {\r\n            warn$1('\"reactive()\" is called without provide an \"object\".');\r\n        }\r\n        return obj;\r\n    }\r\n    if (!(isPlainObject(obj) || isArray(obj)) ||\r\n        isRaw(obj) ||\r\n        !Object.isExtensible(obj)) {\r\n        return obj;\r\n    }\r\n    var observed = observe(obj);\r\n    setupAccessControl(observed);\r\n    return observed;\r\n}\r\n/**\r\n * Make sure obj can't be a reactive\r\n */\r\nfunction markRaw(obj) {\r\n    if (!(isPlainObject(obj) || isArray(obj)) || !Object.isExtensible(obj)) {\r\n        return obj;\r\n    }\r\n    // set the vue observable flag at obj\r\n    var ob = createObserver();\r\n    ob.__raw__ = true;\r\n    def(obj, '__ob__', ob);\r\n    // mark as Raw\r\n    rawSet.set(obj, true);\r\n    return obj;\r\n}\r\nfunction toRaw(observed) {\r\n    var _a, _b;\r\n    if (isRaw(observed) || !Object.isExtensible(observed)) {\r\n        return observed;\r\n    }\r\n    return ((_b = (_a = observed) === null || _a === void 0 ? void 0 : _a.__ob__) === null || _b === void 0 ? void 0 : _b.value) || observed;\r\n}\n\nfunction isReadonly(obj) {\r\n    return readonlySet.has(obj);\r\n}\r\n/**\r\n * **In @vue/composition-api, `reactive` only provides type-level readonly check**\r\n *\r\n * Creates a readonly copy of the original object. Note the returned copy is not\r\n * made reactive, but `readonly` can be called on an already reactive object.\r\n */\r\nfunction readonly(target) {\r\n    return target;\r\n}\r\nfunction shallowReadonly(obj) {\r\n    var e_1, _a;\r\n    if (!(isPlainObject(obj) || isArray(obj)) || !Object.isExtensible(obj)) {\r\n        return obj;\r\n    }\r\n    var readonlyObj = {};\r\n    var source = reactive({});\r\n    var ob = source.__ob__;\r\n    var _loop_1 = function (key) {\r\n        var val = obj[key];\r\n        var getter;\r\n        var property = Object.getOwnPropertyDescriptor(obj, key);\r\n        if (property) {\r\n            if (property.configurable === false) {\r\n                return \"continue\";\r\n            }\r\n            getter = property.get;\r\n        }\r\n        Object.defineProperty(readonlyObj, key, {\r\n            enumerable: true,\r\n            configurable: true,\r\n            get: function getterHandler() {\r\n                var value = getter ? getter.call(obj) : val;\r\n                ob.dep.depend();\r\n                return value;\r\n            },\r\n            set: function (v) {\r\n                if ((process.env.NODE_ENV !== 'production')) {\r\n                    warn$1(\"Set operation on key \\\"\" + key + \"\\\" failed: target is readonly.\");\r\n                }\r\n            },\r\n        });\r\n    };\r\n    try {\r\n        for (var _b = __values(Object.keys(obj)), _c = _b.next(); !_c.done; _c = _b.next()) {\r\n            var key = _c.value;\r\n            _loop_1(key);\r\n        }\r\n    }\r\n    catch (e_1_1) { e_1 = { error: e_1_1 }; }\r\n    finally {\r\n        try {\r\n            if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\r\n        }\r\n        finally { if (e_1) throw e_1.error; }\r\n    }\r\n    readonlySet.set(readonlyObj, true);\r\n    return readonlyObj;\r\n}\n\n/**\r\n * Set a property on an object. Adds the new property, triggers change\r\n * notification and intercept it's subsequent access if the property doesn't\r\n * already exist.\r\n */\r\nfunction set$1(target, key, val) {\r\n    var Vue = getVueConstructor();\r\n    var _a = Vue.util, warn = _a.warn, defineReactive = _a.defineReactive;\r\n    if ((process.env.NODE_ENV !== 'production') && (isUndef(target) || isPrimitive(target))) {\r\n        warn(\"Cannot set reactive property on undefined, null, or primitive value: \" + target);\r\n    }\r\n    if (isArray(target) && isValidArrayIndex(key)) {\r\n        target.length = Math.max(target.length, key);\r\n        target.splice(key, 1, val);\r\n        return val;\r\n    }\r\n    if (key in target && !(key in Object.prototype)) {\r\n        target[key] = val;\r\n        return val;\r\n    }\r\n    var ob = target.__ob__;\r\n    if (target._isVue || (ob && ob.vmCount)) {\r\n        (process.env.NODE_ENV !== 'production') &&\r\n            warn('Avoid adding reactive properties to a Vue instance or its root $data ' +\r\n                'at runtime - declare it upfront in the data option.');\r\n        return val;\r\n    }\r\n    if (!ob) {\r\n        target[key] = val;\r\n        return val;\r\n    }\r\n    defineReactive(ob.value, key, val);\r\n    // IMPORTANT: define access control before trigger watcher\r\n    defineAccessControl(target, key, val);\r\n    ob.dep.notify();\r\n    return val;\r\n}\n\n/**\r\n * Delete a property and trigger change if necessary.\r\n */\r\nfunction del(target, key) {\r\n    var Vue = getVueConstructor();\r\n    var warn = Vue.util.warn;\r\n    if ((process.env.NODE_ENV !== 'production') && (isUndef(target) || isPrimitive(target))) {\r\n        warn(\"Cannot delete reactive property on undefined, null, or primitive value: \" + target);\r\n    }\r\n    if (Array.isArray(target) && isValidArrayIndex(key)) {\r\n        target.splice(key, 1);\r\n        return;\r\n    }\r\n    var ob = target.__ob__;\r\n    if (target._isVue || (ob && ob.vmCount)) {\r\n        (process.env.NODE_ENV !== 'production') &&\r\n            warn('Avoid deleting properties on a Vue instance or its root $data ' +\r\n                '- just set it to null.');\r\n        return;\r\n    }\r\n    if (!hasOwn(target, key)) {\r\n        return;\r\n    }\r\n    delete target[key];\r\n    if (!ob) {\r\n        return;\r\n    }\r\n    ob.dep.notify();\r\n}\n\nvar genName = function (name) { return \"on\" + (name[0].toUpperCase() + name.slice(1)); };\r\nfunction createLifeCycle(lifeCyclehook) {\r\n    return function (callback) {\r\n        var vm = currentVMInFn(genName(lifeCyclehook));\r\n        if (vm) {\r\n            injectHookOption(getVueConstructor(), vm, lifeCyclehook, callback);\r\n        }\r\n    };\r\n}\r\nfunction injectHookOption(Vue, vm, hook, val) {\r\n    var options = vm.$options;\r\n    var mergeFn = Vue.config.optionMergeStrategies[hook];\r\n    options[hook] = mergeFn(options[hook], wrapHookCall(vm, val));\r\n}\r\nfunction wrapHookCall(vm, fn) {\r\n    return function () {\r\n        var _a;\r\n        var args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            args[_i] = arguments[_i];\r\n        }\r\n        var preVm = (_a = getCurrentInstance()) === null || _a === void 0 ? void 0 : _a.proxy;\r\n        setCurrentInstance(vm);\r\n        try {\r\n            return fn.apply(void 0, __spreadArray([], __read(args)));\r\n        }\r\n        finally {\r\n            setCurrentInstance(preVm);\r\n        }\r\n    };\r\n}\r\n// export const onCreated = createLifeCycle('created');\r\nvar onBeforeMount = createLifeCycle('beforeMount');\r\nvar onMounted = createLifeCycle('mounted');\r\nvar onBeforeUpdate = createLifeCycle('beforeUpdate');\r\nvar onUpdated = createLifeCycle('updated');\r\nvar onBeforeUnmount = createLifeCycle('beforeDestroy');\r\nvar onUnmounted = createLifeCycle('destroyed');\r\nvar onErrorCaptured = createLifeCycle('errorCaptured');\r\nvar onActivated = createLifeCycle('activated');\r\nvar onDeactivated = createLifeCycle('deactivated');\r\nvar onServerPrefetch = createLifeCycle('serverPrefetch');\n\nvar fallbackVM;\r\nfunction flushPreQueue() {\r\n    flushQueue(this, WatcherPreFlushQueueKey);\r\n}\r\nfunction flushPostQueue() {\r\n    flushQueue(this, WatcherPostFlushQueueKey);\r\n}\r\nfunction hasWatchEnv(vm) {\r\n    return vm[WatcherPreFlushQueueKey] !== undefined;\r\n}\r\nfunction installWatchEnv(vm) {\r\n    vm[WatcherPreFlushQueueKey] = [];\r\n    vm[WatcherPostFlushQueueKey] = [];\r\n    vm.$on('hook:beforeUpdate', flushPreQueue);\r\n    vm.$on('hook:updated', flushPostQueue);\r\n}\r\nfunction getWatcherOption(options) {\r\n    return __assign({\r\n        immediate: false,\r\n        deep: false,\r\n        flush: 'pre',\r\n    }, options);\r\n}\r\nfunction getWatchEffectOption(options) {\r\n    return __assign({\r\n        immediate: true,\r\n        deep: false,\r\n        flush: 'pre',\r\n    }, options);\r\n}\r\nfunction getWatcherVM() {\r\n    var _a;\r\n    var vm = (_a = getCurrentInstance()) === null || _a === void 0 ? void 0 : _a.proxy;\r\n    if (!vm) {\r\n        if (!fallbackVM) {\r\n            fallbackVM = defineComponentInstance(getVueConstructor());\r\n        }\r\n        vm = fallbackVM;\r\n    }\r\n    else if (!hasWatchEnv(vm)) {\r\n        installWatchEnv(vm);\r\n    }\r\n    return vm;\r\n}\r\nfunction flushQueue(vm, key) {\r\n    var queue = vm[key];\r\n    for (var index = 0; index < queue.length; index++) {\r\n        queue[index]();\r\n    }\r\n    queue.length = 0;\r\n}\r\nfunction queueFlushJob(vm, fn, mode) {\r\n    // flush all when beforeUpdate and updated are not fired\r\n    var fallbackFlush = function () {\r\n        vm.$nextTick(function () {\r\n            if (vm[WatcherPreFlushQueueKey].length) {\r\n                flushQueue(vm, WatcherPreFlushQueueKey);\r\n            }\r\n            if (vm[WatcherPostFlushQueueKey].length) {\r\n                flushQueue(vm, WatcherPostFlushQueueKey);\r\n            }\r\n        });\r\n    };\r\n    switch (mode) {\r\n        case 'pre':\r\n            fallbackFlush();\r\n            vm[WatcherPreFlushQueueKey].push(fn);\r\n            break;\r\n        case 'post':\r\n            fallbackFlush();\r\n            vm[WatcherPostFlushQueueKey].push(fn);\r\n            break;\r\n        default:\r\n            assert(false, \"flush must be one of [\\\"post\\\", \\\"pre\\\", \\\"sync\\\"], but got \" + mode);\r\n            break;\r\n    }\r\n}\r\nfunction createVueWatcher(vm, getter, callback, options) {\r\n    var index = vm._watchers.length;\r\n    // @ts-ignore: use undocumented options\r\n    vm.$watch(getter, callback, {\r\n        immediate: options.immediateInvokeCallback,\r\n        deep: options.deep,\r\n        lazy: options.noRun,\r\n        sync: options.sync,\r\n        before: options.before,\r\n    });\r\n    return vm._watchers[index];\r\n}\r\n// We have to monkeypatch the teardown function so Vue will run\r\n// runCleanup() when it tears down the watcher on unmounted.\r\nfunction patchWatcherTeardown(watcher, runCleanup) {\r\n    var _teardown = watcher.teardown;\r\n    watcher.teardown = function () {\r\n        var args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            args[_i] = arguments[_i];\r\n        }\r\n        _teardown.apply(watcher, args);\r\n        runCleanup();\r\n    };\r\n}\r\nfunction createWatcher(vm, source, cb, options) {\r\n    var _a;\r\n    var flushMode = options.flush;\r\n    var isSync = flushMode === 'sync';\r\n    var cleanup;\r\n    var registerCleanup = function (fn) {\r\n        cleanup = function () {\r\n            try {\r\n                fn();\r\n            }\r\n            catch (error) {\r\n                logError(error, vm, 'onCleanup()');\r\n            }\r\n        };\r\n    };\r\n    // cleanup before running getter again\r\n    var runCleanup = function () {\r\n        if (cleanup) {\r\n            cleanup();\r\n            cleanup = null;\r\n        }\r\n    };\r\n    var createScheduler = function (fn) {\r\n        if (isSync ||\r\n            /* without a current active instance, ignore pre|post mode */ vm ===\r\n                fallbackVM) {\r\n            return fn;\r\n        }\r\n        return (function () {\r\n            var args = [];\r\n            for (var _i = 0; _i < arguments.length; _i++) {\r\n                args[_i] = arguments[_i];\r\n            }\r\n            return queueFlushJob(vm, function () {\r\n                fn.apply(void 0, __spreadArray([], __read(args)));\r\n            }, flushMode);\r\n        });\r\n    };\r\n    // effect watch\r\n    if (cb === null) {\r\n        var running_1 = false;\r\n        var getter_1 = function () {\r\n            // preventing the watch callback being call in the same execution\r\n            if (running_1) {\r\n                return;\r\n            }\r\n            try {\r\n                running_1 = true;\r\n                source(registerCleanup);\r\n            }\r\n            finally {\r\n                running_1 = false;\r\n            }\r\n        };\r\n        var watcher_1 = createVueWatcher(vm, getter_1, noopFn, {\r\n            deep: options.deep || false,\r\n            sync: isSync,\r\n            before: runCleanup,\r\n        });\r\n        patchWatcherTeardown(watcher_1, runCleanup);\r\n        // enable the watcher update\r\n        watcher_1.lazy = false;\r\n        var originGet = watcher_1.get.bind(watcher_1);\r\n        // always run watchEffect\r\n        watcher_1.get = createScheduler(originGet);\r\n        return function () {\r\n            watcher_1.teardown();\r\n        };\r\n    }\r\n    var deep = options.deep;\r\n    var getter;\r\n    if (Array.isArray(source)) {\r\n        getter = function () { return source.map(function (s) { return (isRef(s) ? s.value : s()); }); };\r\n    }\r\n    else if (isRef(source)) {\r\n        getter = function () { return source.value; };\r\n    }\r\n    else if (isReactive(source)) {\r\n        getter = function () { return source; };\r\n        deep = true;\r\n    }\r\n    else if (isFunction(source)) {\r\n        getter = source;\r\n    }\r\n    else {\r\n        getter = noopFn;\r\n        warn$1(\"Invalid watch source: \" + JSON.stringify(source) + \".\\n      A watch source can only be a getter/effect function, a ref, a reactive object, or an array of these types.\", vm);\r\n    }\r\n    var applyCb = function (n, o) {\r\n        // cleanup before running cb again\r\n        runCleanup();\r\n        cb(n, o, registerCleanup);\r\n    };\r\n    var callback = createScheduler(applyCb);\r\n    if (options.immediate) {\r\n        var originalCallback_1 = callback;\r\n        // `shiftCallback` is used to handle the first sync effect run.\r\n        // The subsequent callbacks will redirect to `callback`.\r\n        var shiftCallback_1 = function (n, o) {\r\n            shiftCallback_1 = originalCallback_1;\r\n            applyCb(n, o);\r\n        };\r\n        callback = function (n, o) {\r\n            shiftCallback_1(n, o);\r\n        };\r\n    }\r\n    // @ts-ignore: use undocumented option \"sync\"\r\n    var stop = vm.$watch(getter, callback, {\r\n        immediate: options.immediate,\r\n        deep: deep,\r\n        sync: isSync,\r\n    });\r\n    // Once again, we have to hack the watcher for proper teardown\r\n    var watcher = vm._watchers[vm._watchers.length - 1];\r\n    // if the return value is reactive and deep:true\r\n    // watch for changes, this might happen when new key is added\r\n    if (isReactive(watcher.value) && ((_a = watcher.value.__ob__) === null || _a === void 0 ? void 0 : _a.dep) && deep) {\r\n        watcher.value.__ob__.dep.addSub({\r\n            update: function () {\r\n                // this will force the source to be revaluated and the callback\r\n                // executed if needed\r\n                watcher.run();\r\n            },\r\n        });\r\n    }\r\n    patchWatcherTeardown(watcher, runCleanup);\r\n    return function () {\r\n        stop();\r\n    };\r\n}\r\nfunction watchEffect(effect, options) {\r\n    var opts = getWatchEffectOption(options);\r\n    var vm = getWatcherVM();\r\n    return createWatcher(vm, effect, null, opts);\r\n}\r\n// implementation\r\nfunction watch(source, cb, options) {\r\n    var callback = null;\r\n    if (typeof cb === 'function') {\r\n        // source watch\r\n        callback = cb;\r\n    }\r\n    else {\r\n        // effect watch\r\n        if ((process.env.NODE_ENV !== 'production')) {\r\n            warn$1(\"`watch(fn, options?)` signature has been moved to a separate API. \" +\r\n                \"Use `watchEffect(fn, options?)` instead. `watch` now only \" +\r\n                \"supports `watch(source, cb, options?) signature.\");\r\n        }\r\n        options = cb;\r\n        callback = null;\r\n    }\r\n    var opts = getWatcherOption(options);\r\n    var vm = getWatcherVM();\r\n    return createWatcher(vm, source, callback, opts);\r\n}\n\n// implement\r\nfunction computed(getterOrOptions) {\r\n    var _a;\r\n    var vm = (_a = getCurrentInstance()) === null || _a === void 0 ? void 0 : _a.proxy;\r\n    var getter;\r\n    var setter;\r\n    if (typeof getterOrOptions === 'function') {\r\n        getter = getterOrOptions;\r\n    }\r\n    else {\r\n        getter = getterOrOptions.get;\r\n        setter = getterOrOptions.set;\r\n    }\r\n    var computedSetter;\r\n    var computedGetter;\r\n    if (vm && !vm.$isServer) {\r\n        var _b = getVueInternalClasses(), Watcher_1 = _b.Watcher, Dep_1 = _b.Dep;\r\n        var watcher_1;\r\n        computedGetter = function () {\r\n            if (!watcher_1) {\r\n                watcher_1 = new Watcher_1(vm, getter, noopFn, { lazy: true });\r\n            }\r\n            if (watcher_1.dirty) {\r\n                watcher_1.evaluate();\r\n            }\r\n            if (Dep_1.target) {\r\n                watcher_1.depend();\r\n            }\r\n            return watcher_1.value;\r\n        };\r\n        computedSetter = function (v) {\r\n            if ((process.env.NODE_ENV !== 'production') && !setter) {\r\n                warn$1('Write operation failed: computed value is readonly.', vm);\r\n                return;\r\n            }\r\n            if (setter) {\r\n                setter(v);\r\n            }\r\n        };\r\n    }\r\n    else {\r\n        // fallback\r\n        var computedHost_1 = defineComponentInstance(getVueConstructor(), {\r\n            computed: {\r\n                $$state: {\r\n                    get: getter,\r\n                    set: setter,\r\n                },\r\n            },\r\n        });\r\n        vm && vm.$on('hook:destroyed', function () { return computedHost_1.$destroy(); });\r\n        computedGetter = function () { return computedHost_1.$$state; };\r\n        computedSetter = function (v) {\r\n            if ((process.env.NODE_ENV !== 'production') && !setter) {\r\n                warn$1('Write operation failed: computed value is readonly.', vm);\r\n                return;\r\n            }\r\n            computedHost_1.$$state = v;\r\n        };\r\n    }\r\n    return createRef({\r\n        get: computedGetter,\r\n        set: computedSetter,\r\n    });\r\n}\n\nvar NOT_FOUND = {};\r\nfunction resolveInject(provideKey, vm) {\r\n    var source = vm;\r\n    while (source) {\r\n        // @ts-ignore\r\n        if (source._provided && hasOwn(source._provided, provideKey)) {\r\n            //@ts-ignore\r\n            return source._provided[provideKey];\r\n        }\r\n        source = source.$parent;\r\n    }\r\n    return NOT_FOUND;\r\n}\r\nfunction provide(key, value) {\r\n    var vm = currentVMInFn('provide');\r\n    if (!vm)\r\n        return;\r\n    if (!vm._provided) {\r\n        var provideCache_1 = {};\r\n        Object.defineProperty(vm, '_provided', {\r\n            get: function () { return provideCache_1; },\r\n            set: function (v) { return Object.assign(provideCache_1, v); },\r\n        });\r\n    }\r\n    vm._provided[key] = value;\r\n}\r\nfunction inject(key, defaultValue, treatDefaultAsFactory) {\r\n    var _a;\r\n    if (treatDefaultAsFactory === void 0) { treatDefaultAsFactory = false; }\r\n    if (!key) {\r\n        return defaultValue;\r\n    }\r\n    var vm = (_a = getCurrentInstance()) === null || _a === void 0 ? void 0 : _a.proxy;\r\n    if (!vm) {\r\n        warn$1(\"inject() can only be used inside setup() or functional components.\");\r\n        return;\r\n    }\r\n    var val = resolveInject(key, vm);\r\n    if (val !== NOT_FOUND) {\r\n        return val;\r\n    }\r\n    if (defaultValue === undefined && (process.env.NODE_ENV !== 'production')) {\r\n        warn$1(\"Injection \\\"\" + String(key) + \"\\\" not found\", vm);\r\n    }\r\n    return treatDefaultAsFactory && isFunction(defaultValue)\r\n        ? defaultValue()\r\n        : defaultValue;\r\n}\n\nvar EMPTY_OBJ = (process.env.NODE_ENV !== 'production')\r\n    ? Object.freeze({})\r\n    : {};\r\nvar useCssModule = function (name) {\r\n    var _a;\r\n    if (name === void 0) { name = '$style'; }\r\n    var instance = getCurrentInstance();\r\n    if (!instance) {\r\n        (process.env.NODE_ENV !== 'production') && warn$1(\"useCssModule must be called inside setup()\");\r\n        return EMPTY_OBJ;\r\n    }\r\n    var mod = (_a = instance.proxy) === null || _a === void 0 ? void 0 : _a[name];\r\n    if (!mod) {\r\n        (process.env.NODE_ENV !== 'production') &&\r\n            warn$1(\"Current instance does not have CSS module named \\\"\" + name + \"\\\".\");\r\n        return EMPTY_OBJ;\r\n    }\r\n    return mod;\r\n};\r\n/**\r\n * @deprecated use `useCssModule` instead.\r\n */\r\nvar useCSSModule = useCssModule;\n\nfunction createApp(rootComponent, rootProps) {\r\n    if (rootProps === void 0) { rootProps = undefined; }\r\n    var V = getVueConstructor();\r\n    var mountedVM = undefined;\r\n    return {\r\n        config: V.config,\r\n        use: V.use.bind(V),\r\n        mixin: V.mixin.bind(V),\r\n        component: V.component.bind(V),\r\n        directive: V.directive.bind(V),\r\n        mount: function (el, hydrating) {\r\n            if (!mountedVM) {\r\n                mountedVM = new V(__assign({ propsData: rootProps }, rootComponent));\r\n                mountedVM.$mount(el, hydrating);\r\n                return mountedVM;\r\n            }\r\n            else {\r\n                if ((process.env.NODE_ENV !== 'production')) {\r\n                    warn$1(\"App has already been mounted.\\n\" +\r\n                        \"If you want to remount the same app, move your app creation logic \" +\r\n                        \"into a factory function and create fresh app instances for each \" +\r\n                        \"mount - e.g. `const createMyApp = () => createApp(App)`\");\r\n                }\r\n                return mountedVM;\r\n            }\r\n        },\r\n        unmount: function () {\r\n            if (mountedVM) {\r\n                mountedVM.$destroy();\r\n                mountedVM = undefined;\r\n            }\r\n            else if ((process.env.NODE_ENV !== 'production')) {\r\n                warn$1(\"Cannot unmount an app that is not mounted.\");\r\n            }\r\n        },\r\n    };\r\n}\n\nvar nextTick = function nextTick() {\r\n    var _a;\r\n    var args = [];\r\n    for (var _i = 0; _i < arguments.length; _i++) {\r\n        args[_i] = arguments[_i];\r\n    }\r\n    return (_a = getVueConstructor()) === null || _a === void 0 ? void 0 : _a.nextTick.apply(this, args);\r\n};\n\nvar fallbackCreateElement;\r\nvar createElement = function createElement() {\r\n    var _a;\r\n    var args = [];\r\n    for (var _i = 0; _i < arguments.length; _i++) {\r\n        args[_i] = arguments[_i];\r\n    }\r\n    var instance = (_a = getCurrentInstance()) === null || _a === void 0 ? void 0 : _a.proxy;\r\n    if (!instance) {\r\n        warn$1('`createElement()` has been called outside of render function.');\r\n        if (!fallbackCreateElement) {\r\n            fallbackCreateElement = defineComponentInstance(getVueConstructor())\r\n                .$createElement;\r\n        }\r\n        return fallbackCreateElement.apply(fallbackCreateElement, args);\r\n    }\r\n    return instance.$createElement.apply(instance, args);\r\n};\n\n/**\r\n * Displays a warning message (using console.error) with a stack trace if the\r\n * function is called inside of active component.\r\n *\r\n * @param message warning message to be displayed\r\n */\r\nfunction warn(message) {\r\n    var _a;\r\n    warn$1(message, (_a = getCurrentInstance()) === null || _a === void 0 ? void 0 : _a.proxy);\r\n}\n\nfunction set(vm, key, value) {\r\n    var state = (vm.__composition_api_state__ =\r\n        vm.__composition_api_state__ || {});\r\n    state[key] = value;\r\n}\r\nfunction get(vm, key) {\r\n    return (vm.__composition_api_state__ || {})[key];\r\n}\r\nvar vmStateManager = {\r\n    set: set,\r\n    get: get,\r\n};\n\nfunction asVmProperty(vm, propName, propValue) {\r\n    var props = vm.$options.props;\r\n    if (!(propName in vm) && !(props && hasOwn(props, propName))) {\r\n        if (isRef(propValue)) {\r\n            proxy(vm, propName, {\r\n                get: function () { return propValue.value; },\r\n                set: function (val) {\r\n                    propValue.value = val;\r\n                },\r\n            });\r\n        }\r\n        else {\r\n            // @ts-ignore\r\n            vm[propName] = propValue;\r\n        }\r\n        if ((process.env.NODE_ENV !== 'production')) {\r\n            // expose binding to Vue Devtool as a data property\r\n            // delay this until state has been resolved to prevent repeated works\r\n            vm.$nextTick(function () {\r\n                if (isRef(propValue)) {\r\n                    proxy(vm._data, propName, {\r\n                        get: function () { return propValue.value; },\r\n                        set: function (val) {\r\n                            propValue.value = val;\r\n                        },\r\n                    });\r\n                }\r\n                else {\r\n                    vm._data[propName] = propValue;\r\n                }\r\n            });\r\n        }\r\n    }\r\n    else if ((process.env.NODE_ENV !== 'production')) {\r\n        if (props && hasOwn(props, propName)) {\r\n            warn$1(\"The setup binding property \\\"\" + propName + \"\\\" is already declared as a prop.\", vm);\r\n        }\r\n        else {\r\n            warn$1(\"The setup binding property \\\"\" + propName + \"\\\" is already declared.\", vm);\r\n        }\r\n    }\r\n}\r\nfunction updateTemplateRef(vm) {\r\n    var rawBindings = vmStateManager.get(vm, 'rawBindings') || {};\r\n    if (!rawBindings || !Object.keys(rawBindings).length)\r\n        return;\r\n    var refs = vm.$refs;\r\n    var oldRefKeys = vmStateManager.get(vm, 'refs') || [];\r\n    for (var index = 0; index < oldRefKeys.length; index++) {\r\n        var key = oldRefKeys[index];\r\n        var setupValue = rawBindings[key];\r\n        if (!refs[key] && setupValue && isRef(setupValue)) {\r\n            setupValue.value = null;\r\n        }\r\n    }\r\n    var newKeys = Object.keys(refs);\r\n    var validNewKeys = [];\r\n    for (var index = 0; index < newKeys.length; index++) {\r\n        var key = newKeys[index];\r\n        var setupValue = rawBindings[key];\r\n        if (refs[key] && setupValue && isRef(setupValue)) {\r\n            setupValue.value = refs[key];\r\n            validNewKeys.push(key);\r\n        }\r\n    }\r\n    vmStateManager.set(vm, 'refs', validNewKeys);\r\n}\r\nfunction resolveScopedSlots(vm, slotsProxy) {\r\n    var parentVNode = vm.$options._parentVnode;\r\n    if (!parentVNode)\r\n        return;\r\n    var prevSlots = vmStateManager.get(vm, 'slots') || [];\r\n    var curSlots = resolveSlots(parentVNode.data.scopedSlots, vm.$slots);\r\n    // remove staled slots\r\n    for (var index = 0; index < prevSlots.length; index++) {\r\n        var key = prevSlots[index];\r\n        if (!curSlots[key]) {\r\n            delete slotsProxy[key];\r\n        }\r\n    }\r\n    // proxy fresh slots\r\n    var slotNames = Object.keys(curSlots);\r\n    for (var index = 0; index < slotNames.length; index++) {\r\n        var key = slotNames[index];\r\n        if (!slotsProxy[key]) {\r\n            slotsProxy[key] = createSlotProxy(vm, key);\r\n        }\r\n    }\r\n    vmStateManager.set(vm, 'slots', slotNames);\r\n}\r\nfunction activateCurrentInstance(vm, fn, onError) {\r\n    var preVm = getCurrentVue2Instance();\r\n    setCurrentInstance(vm);\r\n    try {\r\n        return fn(vm);\r\n    }\r\n    catch (err) {\r\n        if (onError) {\r\n            onError(err);\r\n        }\r\n        else {\r\n            throw err;\r\n        }\r\n    }\r\n    finally {\r\n        setCurrentInstance(preVm);\r\n    }\r\n}\n\nfunction mixin(Vue) {\r\n    Vue.mixin({\r\n        beforeCreate: functionApiInit,\r\n        mounted: function () {\r\n            updateTemplateRef(this);\r\n        },\r\n        updated: function () {\r\n            updateTemplateRef(this);\r\n        },\r\n    });\r\n    /**\r\n     * Vuex init hook, injected into each instances init hooks list.\r\n     */\r\n    function functionApiInit() {\r\n        var vm = this;\r\n        var $options = vm.$options;\r\n        var setup = $options.setup, render = $options.render;\r\n        if (render) {\r\n            // keep currentInstance accessible for createElement\r\n            $options.render = function () {\r\n                var _this = this;\r\n                var args = [];\r\n                for (var _i = 0; _i < arguments.length; _i++) {\r\n                    args[_i] = arguments[_i];\r\n                }\r\n                return activateCurrentInstance(vm, function () { return render.apply(_this, args); });\r\n            };\r\n        }\r\n        if (!setup) {\r\n            return;\r\n        }\r\n        if (typeof setup !== 'function') {\r\n            if ((process.env.NODE_ENV !== 'production')) {\r\n                warn$1('The \"setup\" option should be a function that returns a object in component definitions.', vm);\r\n            }\r\n            return;\r\n        }\r\n        var data = $options.data;\r\n        // wrapper the data option, so we can invoke setup before data get resolved\r\n        $options.data = function wrappedData() {\r\n            initSetup(vm, vm.$props);\r\n            return typeof data === 'function'\r\n                ? data.call(vm, vm)\r\n                : data || {};\r\n        };\r\n    }\r\n    function initSetup(vm, props) {\r\n        if (props === void 0) { props = {}; }\r\n        var setup = vm.$options.setup;\r\n        var ctx = createSetupContext(vm);\r\n        // fake reactive for `toRefs(props)`\r\n        def(props, '__ob__', createObserver());\r\n        // resolve scopedSlots and slots to functions\r\n        // @ts-expect-error\r\n        resolveScopedSlots(vm, ctx.slots);\r\n        var binding;\r\n        activateCurrentInstance(vm, function () {\r\n            // make props to be fake reactive, this is for `toRefs(props)`\r\n            binding = setup(props, ctx);\r\n        });\r\n        if (!binding)\r\n            return;\r\n        if (isFunction(binding)) {\r\n            // keep typescript happy with the binding type.\r\n            var bindingFunc_1 = binding;\r\n            // keep currentInstance accessible for createElement\r\n            vm.$options.render = function () {\r\n                // @ts-expect-error\r\n                resolveScopedSlots(vm, ctx.slots);\r\n                return activateCurrentInstance(vm, function () { return bindingFunc_1(); });\r\n            };\r\n            return;\r\n        }\r\n        else if (isPlainObject(binding)) {\r\n            if (isReactive(binding)) {\r\n                binding = toRefs(binding);\r\n            }\r\n            vmStateManager.set(vm, 'rawBindings', binding);\r\n            var bindingObj_1 = binding;\r\n            Object.keys(bindingObj_1).forEach(function (name) {\r\n                var bindingValue = bindingObj_1[name];\r\n                if (!isRef(bindingValue)) {\r\n                    if (!isReactive(bindingValue)) {\r\n                        if (isFunction(bindingValue)) {\r\n                            bindingValue = bindingValue.bind(vm);\r\n                        }\r\n                        else if (!isObject(bindingValue)) {\r\n                            bindingValue = ref(bindingValue);\r\n                        }\r\n                        else if (hasReactiveArrayChild(bindingValue)) {\r\n                            // creates a custom reactive properties without make the object explicitly reactive\r\n                            // NOTE we should try to avoid this, better implementation needed\r\n                            customReactive(bindingValue);\r\n                        }\r\n                    }\r\n                    else if (isArray(bindingValue)) {\r\n                        bindingValue = ref(bindingValue);\r\n                    }\r\n                }\r\n                asVmProperty(vm, name, bindingValue);\r\n            });\r\n            return;\r\n        }\r\n        if ((process.env.NODE_ENV !== 'production')) {\r\n            assert(false, \"\\\"setup\\\" must return a \\\"Object\\\" or a \\\"Function\\\", got \\\"\" + Object.prototype.toString\r\n                .call(binding)\r\n                .slice(8, -1) + \"\\\"\");\r\n        }\r\n    }\r\n    function customReactive(target) {\r\n        if (!isPlainObject(target) ||\r\n            isRef(target) ||\r\n            isReactive(target) ||\r\n            isRaw(target))\r\n            return;\r\n        var Vue = getVueConstructor();\r\n        var defineReactive = Vue.util.defineReactive;\r\n        Object.keys(target).forEach(function (k) {\r\n            var val = target[k];\r\n            defineReactive(target, k, val);\r\n            if (val) {\r\n                customReactive(val);\r\n            }\r\n            return;\r\n        });\r\n    }\r\n    function hasReactiveArrayChild(target, visited) {\r\n        if (visited === void 0) { visited = new Map(); }\r\n        if (visited.has(target)) {\r\n            return visited.get(target);\r\n        }\r\n        visited.set(target, false);\r\n        if (Array.isArray(target) && isReactive(target)) {\r\n            visited.set(target, true);\r\n            return true;\r\n        }\r\n        if (!isPlainObject(target) || isRaw(target)) {\r\n            return false;\r\n        }\r\n        return Object.keys(target).some(function (x) {\r\n            return hasReactiveArrayChild(target[x], visited);\r\n        });\r\n    }\r\n    function createSetupContext(vm) {\r\n        var ctx = { slots: {} };\r\n        var propsPlain = [\r\n            'root',\r\n            'parent',\r\n            'refs',\r\n            'listeners',\r\n            'isServer',\r\n            'ssrContext',\r\n        ];\r\n        var propsReactiveProxy = ['attrs'];\r\n        var methodReturnVoid = ['emit'];\r\n        propsPlain.forEach(function (key) {\r\n            var srcKey = \"$\" + key;\r\n            proxy(ctx, key, {\r\n                get: function () { return vm[srcKey]; },\r\n                set: function () {\r\n                    warn$1(\"Cannot assign to '\" + key + \"' because it is a read-only property\", vm);\r\n                },\r\n            });\r\n        });\r\n        propsReactiveProxy.forEach(function (key) {\r\n            var srcKey = \"$\" + key;\r\n            proxy(ctx, key, {\r\n                get: function () {\r\n                    var e_1, _a;\r\n                    var data = reactive({});\r\n                    var source = vm[srcKey];\r\n                    var _loop_1 = function (attr) {\r\n                        proxy(data, attr, {\r\n                            get: function () {\r\n                                // to ensure it always return the latest value\r\n                                return vm[srcKey][attr];\r\n                            },\r\n                        });\r\n                    };\r\n                    try {\r\n                        for (var _b = __values(Object.keys(source)), _c = _b.next(); !_c.done; _c = _b.next()) {\r\n                            var attr = _c.value;\r\n                            _loop_1(attr);\r\n                        }\r\n                    }\r\n                    catch (e_1_1) { e_1 = { error: e_1_1 }; }\r\n                    finally {\r\n                        try {\r\n                            if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\r\n                        }\r\n                        finally { if (e_1) throw e_1.error; }\r\n                    }\r\n                    return data;\r\n                },\r\n                set: function () {\r\n                    warn$1(\"Cannot assign to '\" + key + \"' because it is a read-only property\", vm);\r\n                },\r\n            });\r\n        });\r\n        methodReturnVoid.forEach(function (key) {\r\n            var srcKey = \"$\" + key;\r\n            proxy(ctx, key, {\r\n                get: function () {\r\n                    return function () {\r\n                        var args = [];\r\n                        for (var _i = 0; _i < arguments.length; _i++) {\r\n                            args[_i] = arguments[_i];\r\n                        }\r\n                        var fn = vm[srcKey];\r\n                        fn.apply(vm, args);\r\n                    };\r\n                },\r\n            });\r\n        });\r\n        if (process.env.NODE_ENV === 'test') {\r\n            ctx._vm = vm;\r\n        }\r\n        return ctx;\r\n    }\r\n}\n\n/**\r\n * Helper that recursively merges two data objects together.\r\n */\r\nfunction mergeData(from, to) {\r\n    if (!from)\r\n        return to;\r\n    if (!to)\r\n        return from;\r\n    var key;\r\n    var toVal;\r\n    var fromVal;\r\n    var keys = hasSymbol ? Reflect.ownKeys(from) : Object.keys(from);\r\n    for (var i = 0; i < keys.length; i++) {\r\n        key = keys[i];\r\n        // in case the object is already observed...\r\n        if (key === '__ob__')\r\n            continue;\r\n        toVal = to[key];\r\n        fromVal = from[key];\r\n        if (!hasOwn(to, key)) {\r\n            to[key] = fromVal;\r\n        }\r\n        else if (toVal !== fromVal &&\r\n            isPlainObject(toVal) &&\r\n            !isRef(toVal) &&\r\n            isPlainObject(fromVal) &&\r\n            !isRef(fromVal)) {\r\n            mergeData(fromVal, toVal);\r\n        }\r\n    }\r\n    return to;\r\n}\r\nfunction install(Vue) {\r\n    if (isVueRegistered(Vue)) {\r\n        if ((process.env.NODE_ENV !== 'production')) {\r\n            warn$1('[vue-composition-api] already installed. Vue.use(VueCompositionAPI) should be called only once.');\r\n        }\r\n        return;\r\n    }\r\n    if ((process.env.NODE_ENV !== 'production')) {\r\n        if (Vue.version) {\r\n            if (Vue.version[0] !== '2' || Vue.version[1] !== '.') {\r\n                warn$1(\"[vue-composition-api] only works with Vue 2, v\" + Vue.version + \" found.\");\r\n            }\r\n        }\r\n        else {\r\n            warn$1('[vue-composition-api] no Vue version found');\r\n        }\r\n    }\r\n    Vue.config.optionMergeStrategies.setup = function (parent, child) {\r\n        return function mergedSetupFn(props, context) {\r\n            return mergeData(typeof parent === 'function' ? parent(props, context) || {} : undefined, typeof child === 'function' ? child(props, context) || {} : undefined);\r\n        };\r\n    };\r\n    setVueConstructor(Vue);\r\n    mixin(Vue);\r\n}\r\nvar Plugin = {\r\n    install: function (Vue) { return install(Vue); },\r\n};\n\n// implementation, close to no-op\r\nfunction defineComponent(options) {\r\n    return options;\r\n}\n\nfunction defineAsyncComponent(source) {\r\n    if (isFunction(source)) {\r\n        source = { loader: source };\r\n    }\r\n    var loader = source.loader, loadingComponent = source.loadingComponent, errorComponent = source.errorComponent, _a = source.delay, delay = _a === void 0 ? 200 : _a, timeout = source.timeout, // undefined = never times out\r\n    _b = source.suspensible, // undefined = never times out\r\n    suspensible = _b === void 0 ? false : _b, // in Vue 3 default is true\r\n    userOnError = source.onError;\r\n    if ((process.env.NODE_ENV !== 'production') && suspensible) {\r\n        warn$1(\"The suspensiblbe option for async components is not supported in Vue2. It is ignored.\");\r\n    }\r\n    var pendingRequest = null;\r\n    var retries = 0;\r\n    var retry = function () {\r\n        retries++;\r\n        pendingRequest = null;\r\n        return load();\r\n    };\r\n    var load = function () {\r\n        var thisRequest;\r\n        return (pendingRequest ||\r\n            (thisRequest = pendingRequest = loader()\r\n                .catch(function (err) {\r\n                err = err instanceof Error ? err : new Error(String(err));\r\n                if (userOnError) {\r\n                    return new Promise(function (resolve, reject) {\r\n                        var userRetry = function () { return resolve(retry()); };\r\n                        var userFail = function () { return reject(err); };\r\n                        userOnError(err, userRetry, userFail, retries + 1);\r\n                    });\r\n                }\r\n                else {\r\n                    throw err;\r\n                }\r\n            })\r\n                .then(function (comp) {\r\n                if (thisRequest !== pendingRequest && pendingRequest) {\r\n                    return pendingRequest;\r\n                }\r\n                if ((process.env.NODE_ENV !== 'production') && !comp) {\r\n                    warn$1(\"Async component loader resolved to undefined. \" +\r\n                        \"If you are using retry(), make sure to return its return value.\");\r\n                }\r\n                // interop module default\r\n                if (comp &&\r\n                    (comp.__esModule || comp[Symbol.toStringTag] === 'Module')) {\r\n                    comp = comp.default;\r\n                }\r\n                if ((process.env.NODE_ENV !== 'production') && comp && !isObject(comp) && !isFunction(comp)) {\r\n                    throw new Error(\"Invalid async component load result: \" + comp);\r\n                }\r\n                return comp;\r\n            })));\r\n    };\r\n    return function () {\r\n        var component = load();\r\n        return {\r\n            component: component,\r\n            delay: delay,\r\n            timeout: timeout,\r\n            error: errorComponent,\r\n            loading: loadingComponent,\r\n        };\r\n    };\r\n}\n\nvar version = \"1.0.0-rc.8\";\r\n// auto install when using CDN\r\nif (typeof window !== 'undefined' && window.Vue) {\r\n    window.Vue.use(Plugin);\r\n}\n\nexport default Plugin;\nexport { computed, createApp, createRef, customRef, defineAsyncComponent, defineComponent, del, getCurrentInstance, createElement as h, inject, isRaw, isReactive, isReadonly, isRef, markRaw, nextTick, onActivated, onBeforeMount, onBeforeUnmount, onBeforeUpdate, onDeactivated, onErrorCaptured, onMounted, onServerPrefetch, onUnmounted, onUpdated, provide, proxyRefs, reactive, readonly, ref, set$1 as set, shallowReactive, shallowReadonly, shallowRef, toRaw, toRef, toRefs, triggerRef, unref, useCSSModule, useCssModule, version, warn, watch, watchEffect };\n"]}]}