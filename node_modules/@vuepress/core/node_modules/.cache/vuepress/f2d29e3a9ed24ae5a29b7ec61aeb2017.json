{"remainingRequest":"D:\\vscodeprojects\\vuepress-theme-reco\\myblogs\\node_modules\\babel-loader\\lib\\index.js??ref--3-1!D:\\vscodeprojects\\vuepress-theme-reco\\myblogs\\node_modules\\vue-i18n\\dist\\vue-i18n.esm.js","dependencies":[{"path":"D:\\vscodeprojects\\vuepress-theme-reco\\myblogs\\node_modules\\vue-i18n\\dist\\vue-i18n.esm.js","mtime":499162500000},{"path":"D:\\vscodeprojects\\vuepress-theme-reco\\myblogs\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\vscodeprojects\\vuepress-theme-reco\\myblogs\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF90eXBlb2YgZnJvbSAiRDovdnNjb2RlcHJvamVjdHMvdnVlcHJlc3MtdGhlbWUtcmVjby9teWJsb2dzL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS90eXBlb2YiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5pcy1hcnJheS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5pbmRleC1vZi5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmV2ZXJ5LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmtleXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuZXhlYy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5yZXBsYWNlLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmRlZmluZS1wcm9wZXJ0eS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmNvbmNhdC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbHRlci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy50cmltLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucmVkdWNlLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMubnVtYmVyLmNvbnN0cnVjdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnNwbGl0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5jcmVhdGUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5wYXJzZS1pbnQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zbGljZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnNldC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuaXRlcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QuZ2V0LXByb3RvdHlwZS1vZi5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmpvaW4uanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zb3J0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmNvbnN0cnVjdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5tYXRjaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnJldmVyc2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zcGxpY2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QuZGVmaW5lLXByb3BlcnRpZXMuanMiOwoKLyohCiAqIHZ1ZS1pMThuIHY4LjI0LjQgCiAqIChjKSAyMDIxIGthenV5YSBrYXdhZ3VjaGkKICogUmVsZWFzZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLgogKi8KCi8qICAqLwoKLyoqCiAqIGNvbnN0YW50cwogKi8KdmFyIG51bWJlckZvcm1hdEtleXMgPSBbJ2NvbXBhY3REaXNwbGF5JywgJ2N1cnJlbmN5JywgJ2N1cnJlbmN5RGlzcGxheScsICdjdXJyZW5jeVNpZ24nLCAnbG9jYWxlTWF0Y2hlcicsICdub3RhdGlvbicsICdudW1iZXJpbmdTeXN0ZW0nLCAnc2lnbkRpc3BsYXknLCAnc3R5bGUnLCAndW5pdCcsICd1bml0RGlzcGxheScsICd1c2VHcm91cGluZycsICdtaW5pbXVtSW50ZWdlckRpZ2l0cycsICdtaW5pbXVtRnJhY3Rpb25EaWdpdHMnLCAnbWF4aW11bUZyYWN0aW9uRGlnaXRzJywgJ21pbmltdW1TaWduaWZpY2FudERpZ2l0cycsICdtYXhpbXVtU2lnbmlmaWNhbnREaWdpdHMnXTsKLyoqCiAqIHV0aWxpdGllcwogKi8KCmZ1bmN0aW9uIHdhcm4obXNnLCBlcnIpIHsKICBpZiAodHlwZW9mIGNvbnNvbGUgIT09ICd1bmRlZmluZWQnKSB7CiAgICBjb25zb2xlLndhcm4oJ1t2dWUtaTE4bl0gJyArIG1zZyk7CiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi8KCiAgICBpZiAoZXJyKSB7CiAgICAgIGNvbnNvbGUud2FybihlcnIuc3RhY2spOwogICAgfQogIH0KfQoKZnVuY3Rpb24gZXJyb3IobXNnLCBlcnIpIHsKICBpZiAodHlwZW9mIGNvbnNvbGUgIT09ICd1bmRlZmluZWQnKSB7CiAgICBjb25zb2xlLmVycm9yKCdbdnVlLWkxOG5dICcgKyBtc2cpOwogICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovCgogICAgaWYgKGVycikgewogICAgICBjb25zb2xlLmVycm9yKGVyci5zdGFjayk7CiAgICB9CiAgfQp9Cgp2YXIgaXNBcnJheSA9IEFycmF5LmlzQXJyYXk7CgpmdW5jdGlvbiBpc09iamVjdChvYmopIHsKICByZXR1cm4gb2JqICE9PSBudWxsICYmIF90eXBlb2Yob2JqKSA9PT0gJ29iamVjdCc7Cn0KCmZ1bmN0aW9uIGlzQm9vbGVhbih2YWwpIHsKICByZXR1cm4gdHlwZW9mIHZhbCA9PT0gJ2Jvb2xlYW4nOwp9CgpmdW5jdGlvbiBpc1N0cmluZyh2YWwpIHsKICByZXR1cm4gdHlwZW9mIHZhbCA9PT0gJ3N0cmluZyc7Cn0KCnZhciB0b1N0cmluZyA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmc7CnZhciBPQkpFQ1RfU1RSSU5HID0gJ1tvYmplY3QgT2JqZWN0XSc7CgpmdW5jdGlvbiBpc1BsYWluT2JqZWN0KG9iaikgewogIHJldHVybiB0b1N0cmluZy5jYWxsKG9iaikgPT09IE9CSkVDVF9TVFJJTkc7Cn0KCmZ1bmN0aW9uIGlzTnVsbCh2YWwpIHsKICByZXR1cm4gdmFsID09PSBudWxsIHx8IHZhbCA9PT0gdW5kZWZpbmVkOwp9CgpmdW5jdGlvbiBpc0Z1bmN0aW9uKHZhbCkgewogIHJldHVybiB0eXBlb2YgdmFsID09PSAnZnVuY3Rpb24nOwp9CgpmdW5jdGlvbiBwYXJzZUFyZ3MoKSB7CiAgdmFyIGFyZ3MgPSBbXSwKICAgICAgbGVuID0gYXJndW1lbnRzLmxlbmd0aDsKCiAgd2hpbGUgKGxlbi0tKSB7CiAgICBhcmdzW2xlbl0gPSBhcmd1bWVudHNbbGVuXTsKICB9CgogIHZhciBsb2NhbGUgPSBudWxsOwogIHZhciBwYXJhbXMgPSBudWxsOwoKICBpZiAoYXJncy5sZW5ndGggPT09IDEpIHsKICAgIGlmIChpc09iamVjdChhcmdzWzBdKSB8fCBpc0FycmF5KGFyZ3NbMF0pKSB7CiAgICAgIHBhcmFtcyA9IGFyZ3NbMF07CiAgICB9IGVsc2UgaWYgKHR5cGVvZiBhcmdzWzBdID09PSAnc3RyaW5nJykgewogICAgICBsb2NhbGUgPSBhcmdzWzBdOwogICAgfQogIH0gZWxzZSBpZiAoYXJncy5sZW5ndGggPT09IDIpIHsKICAgIGlmICh0eXBlb2YgYXJnc1swXSA9PT0gJ3N0cmluZycpIHsKICAgICAgbG9jYWxlID0gYXJnc1swXTsKICAgIH0KICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqLwoKCiAgICBpZiAoaXNPYmplY3QoYXJnc1sxXSkgfHwgaXNBcnJheShhcmdzWzFdKSkgewogICAgICBwYXJhbXMgPSBhcmdzWzFdOwogICAgfQogIH0KCiAgcmV0dXJuIHsKICAgIGxvY2FsZTogbG9jYWxlLAogICAgcGFyYW1zOiBwYXJhbXMKICB9Owp9CgpmdW5jdGlvbiBsb29zZUNsb25lKG9iaikgewogIHJldHVybiBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KG9iaikpOwp9CgpmdW5jdGlvbiByZW1vdmUoYXJyLCBpdGVtKSB7CiAgaWYgKGFyclsiZGVsZXRlIl0oaXRlbSkpIHsKICAgIHJldHVybiBhcnI7CiAgfQp9CgpmdW5jdGlvbiBpbmNsdWRlcyhhcnIsIGl0ZW0pIHsKICByZXR1cm4gISF+YXJyLmluZGV4T2YoaXRlbSk7Cn0KCnZhciBoYXNPd25Qcm9wZXJ0eSA9IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7CgpmdW5jdGlvbiBoYXNPd24ob2JqLCBrZXkpIHsKICByZXR1cm4gaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSk7Cn0KCmZ1bmN0aW9uIG1lcmdlKHRhcmdldCkgewogIHZhciBhcmd1bWVudHMkMSA9IGFyZ3VtZW50czsKICB2YXIgb3V0cHV0ID0gT2JqZWN0KHRhcmdldCk7CgogIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7CiAgICB2YXIgc291cmNlID0gYXJndW1lbnRzJDFbaV07CgogICAgaWYgKHNvdXJjZSAhPT0gdW5kZWZpbmVkICYmIHNvdXJjZSAhPT0gbnVsbCkgewogICAgICB2YXIga2V5ID0gdm9pZCAwOwoKICAgICAgZm9yIChrZXkgaW4gc291cmNlKSB7CiAgICAgICAgaWYgKGhhc093bihzb3VyY2UsIGtleSkpIHsKICAgICAgICAgIGlmIChpc09iamVjdChzb3VyY2Vba2V5XSkpIHsKICAgICAgICAgICAgb3V0cHV0W2tleV0gPSBtZXJnZShvdXRwdXRba2V5XSwgc291cmNlW2tleV0pOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgb3V0cHV0W2tleV0gPSBzb3VyY2Vba2V5XTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0KICB9CgogIHJldHVybiBvdXRwdXQ7Cn0KCmZ1bmN0aW9uIGxvb3NlRXF1YWwoYSwgYikgewogIGlmIChhID09PSBiKSB7CiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIHZhciBpc09iamVjdEEgPSBpc09iamVjdChhKTsKICB2YXIgaXNPYmplY3RCID0gaXNPYmplY3QoYik7CgogIGlmIChpc09iamVjdEEgJiYgaXNPYmplY3RCKSB7CiAgICB0cnkgewogICAgICB2YXIgaXNBcnJheUEgPSBpc0FycmF5KGEpOwogICAgICB2YXIgaXNBcnJheUIgPSBpc0FycmF5KGIpOwoKICAgICAgaWYgKGlzQXJyYXlBICYmIGlzQXJyYXlCKSB7CiAgICAgICAgcmV0dXJuIGEubGVuZ3RoID09PSBiLmxlbmd0aCAmJiBhLmV2ZXJ5KGZ1bmN0aW9uIChlLCBpKSB7CiAgICAgICAgICByZXR1cm4gbG9vc2VFcXVhbChlLCBiW2ldKTsKICAgICAgICB9KTsKICAgICAgfSBlbHNlIGlmICghaXNBcnJheUEgJiYgIWlzQXJyYXlCKSB7CiAgICAgICAgdmFyIGtleXNBID0gT2JqZWN0LmtleXMoYSk7CiAgICAgICAgdmFyIGtleXNCID0gT2JqZWN0LmtleXMoYik7CiAgICAgICAgcmV0dXJuIGtleXNBLmxlbmd0aCA9PT0ga2V5c0IubGVuZ3RoICYmIGtleXNBLmV2ZXJ5KGZ1bmN0aW9uIChrZXkpIHsKICAgICAgICAgIHJldHVybiBsb29zZUVxdWFsKGFba2V5XSwgYltrZXldKTsKICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqLwogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQogICAgfSBjYXRjaCAoZSkgewogICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqLwogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CiAgfSBlbHNlIGlmICghaXNPYmplY3RBICYmICFpc09iamVjdEIpIHsKICAgIHJldHVybiBTdHJpbmcoYSkgPT09IFN0cmluZyhiKTsKICB9IGVsc2UgewogICAgcmV0dXJuIGZhbHNlOwogIH0KfQovKioKICogU2FuaXRpemVzIGh0bWwgc3BlY2lhbCBjaGFyYWN0ZXJzIGZyb20gaW5wdXQgc3RyaW5ncy4gRm9yIG1pdGlnYXRpbmcgcmlzayBvZiBYU1MgYXR0YWNrcy4KICogQHBhcmFtIHJhd1RleHQgVGhlIHJhdyBpbnB1dCBmcm9tIHRoZSB1c2VyIHRoYXQgc2hvdWxkIGJlIGVzY2FwZWQuCiAqLwoKCmZ1bmN0aW9uIGVzY2FwZUh0bWwocmF3VGV4dCkgewogIHJldHVybiByYXdUZXh0LnJlcGxhY2UoLzwvZywgJyZsdDsnKS5yZXBsYWNlKC8+L2csICcmZ3Q7JykucmVwbGFjZSgvIi9nLCAnJnF1b3Q7JykucmVwbGFjZSgvJy9nLCAnJmFwb3M7Jyk7Cn0KLyoqCiAqIEVzY2FwZXMgaHRtbCB0YWdzIGFuZCBzcGVjaWFsIHN5bWJvbHMgZnJvbSBhbGwgcHJvdmlkZWQgcGFyYW1zIHdoaWNoIHdlcmUgcmV0dXJuZWQgZnJvbSBwYXJzZUFyZ3MoKS5wYXJhbXMuCiAqIFRoaXMgbWV0aG9kIHBlcmZvcm1zIGFuIGluLXBsYWNlIG9wZXJhdGlvbiBvbiB0aGUgcGFyYW1zIG9iamVjdC4KICoKICogQHBhcmFtIHthbnl9IHBhcmFtcyBQYXJhbWV0ZXJzIGFzIHByb3ZpZGVkIGZyb20gYHBhcnNlQXJncygpLnBhcmFtc2AuCiAqICAgICAgICAgICAgICAgICAgICAgTWF5IGJlIGVpdGhlciBhbiBhcnJheSBvZiBzdHJpbmdzIG9yIGEgc3RyaW5nLT5hbnkgbWFwLgogKgogKiBAcmV0dXJucyBUaGUgbWFuaXB1bGF0ZWQgYHBhcmFtc2Agb2JqZWN0LgogKi8KCgpmdW5jdGlvbiBlc2NhcGVQYXJhbXMocGFyYW1zKSB7CiAgaWYgKHBhcmFtcyAhPSBudWxsKSB7CiAgICBPYmplY3Qua2V5cyhwYXJhbXMpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgewogICAgICBpZiAodHlwZW9mIHBhcmFtc1trZXldID09ICdzdHJpbmcnKSB7CiAgICAgICAgcGFyYW1zW2tleV0gPSBlc2NhcGVIdG1sKHBhcmFtc1trZXldKTsKICAgICAgfQogICAgfSk7CiAgfQoKICByZXR1cm4gcGFyYW1zOwp9Ci8qICAqLwoKCmZ1bmN0aW9uIGV4dGVuZChWdWUpIHsKICBpZiAoIVZ1ZS5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkoJyRpMThuJykpIHsKICAgIC8vICRGbG93Rml4TWUKICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShWdWUucHJvdG90eXBlLCAnJGkxOG4nLCB7CiAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICAgIHJldHVybiB0aGlzLl9pMThuOwogICAgICB9CiAgICB9KTsKICB9CgogIFZ1ZS5wcm90b3R5cGUuJHQgPSBmdW5jdGlvbiAoa2V5KSB7CiAgICB2YXIgdmFsdWVzID0gW10sCiAgICAgICAgbGVuID0gYXJndW1lbnRzLmxlbmd0aCAtIDE7CgogICAgd2hpbGUgKGxlbi0tID4gMCkgewogICAgICB2YWx1ZXNbbGVuXSA9IGFyZ3VtZW50c1tsZW4gKyAxXTsKICAgIH0KCiAgICB2YXIgaTE4biA9IHRoaXMuJGkxOG47CiAgICByZXR1cm4gaTE4bi5fdC5hcHBseShpMThuLCBba2V5LCBpMThuLmxvY2FsZSwgaTE4bi5fZ2V0TWVzc2FnZXMoKSwgdGhpc10uY29uY2F0KHZhbHVlcykpOwogIH07CgogIFZ1ZS5wcm90b3R5cGUuJHRjID0gZnVuY3Rpb24gKGtleSwgY2hvaWNlKSB7CiAgICB2YXIgdmFsdWVzID0gW10sCiAgICAgICAgbGVuID0gYXJndW1lbnRzLmxlbmd0aCAtIDI7CgogICAgd2hpbGUgKGxlbi0tID4gMCkgewogICAgICB2YWx1ZXNbbGVuXSA9IGFyZ3VtZW50c1tsZW4gKyAyXTsKICAgIH0KCiAgICB2YXIgaTE4biA9IHRoaXMuJGkxOG47CiAgICByZXR1cm4gaTE4bi5fdGMuYXBwbHkoaTE4biwgW2tleSwgaTE4bi5sb2NhbGUsIGkxOG4uX2dldE1lc3NhZ2VzKCksIHRoaXMsIGNob2ljZV0uY29uY2F0KHZhbHVlcykpOwogIH07CgogIFZ1ZS5wcm90b3R5cGUuJHRlID0gZnVuY3Rpb24gKGtleSwgbG9jYWxlKSB7CiAgICB2YXIgaTE4biA9IHRoaXMuJGkxOG47CiAgICByZXR1cm4gaTE4bi5fdGUoa2V5LCBpMThuLmxvY2FsZSwgaTE4bi5fZ2V0TWVzc2FnZXMoKSwgbG9jYWxlKTsKICB9OwoKICBWdWUucHJvdG90eXBlLiRkID0gZnVuY3Rpb24gKHZhbHVlKSB7CiAgICB2YXIgcmVmOwogICAgdmFyIGFyZ3MgPSBbXSwKICAgICAgICBsZW4gPSBhcmd1bWVudHMubGVuZ3RoIC0gMTsKCiAgICB3aGlsZSAobGVuLS0gPiAwKSB7CiAgICAgIGFyZ3NbbGVuXSA9IGFyZ3VtZW50c1tsZW4gKyAxXTsKICAgIH0KCiAgICByZXR1cm4gKHJlZiA9IHRoaXMuJGkxOG4pLmQuYXBwbHkocmVmLCBbdmFsdWVdLmNvbmNhdChhcmdzKSk7CiAgfTsKCiAgVnVlLnByb3RvdHlwZS4kbiA9IGZ1bmN0aW9uICh2YWx1ZSkgewogICAgdmFyIHJlZjsKICAgIHZhciBhcmdzID0gW10sCiAgICAgICAgbGVuID0gYXJndW1lbnRzLmxlbmd0aCAtIDE7CgogICAgd2hpbGUgKGxlbi0tID4gMCkgewogICAgICBhcmdzW2xlbl0gPSBhcmd1bWVudHNbbGVuICsgMV07CiAgICB9CgogICAgcmV0dXJuIChyZWYgPSB0aGlzLiRpMThuKS5uLmFwcGx5KHJlZiwgW3ZhbHVlXS5jb25jYXQoYXJncykpOwogIH07Cn0KLyogICovCgoKdmFyIG1peGluID0gewogIGJlZm9yZUNyZWF0ZTogZnVuY3Rpb24gYmVmb3JlQ3JlYXRlKCkgewogICAgdmFyIG9wdGlvbnMgPSB0aGlzLiRvcHRpb25zOwogICAgb3B0aW9ucy5pMThuID0gb3B0aW9ucy5pMThuIHx8IChvcHRpb25zLl9faTE4biA/IHt9IDogbnVsbCk7CgogICAgaWYgKG9wdGlvbnMuaTE4bikgewogICAgICBpZiAob3B0aW9ucy5pMThuIGluc3RhbmNlb2YgVnVlSTE4bikgewogICAgICAgIC8vIGluaXQgbG9jYWxlIG1lc3NhZ2VzIHZpYSBjdXN0b20gYmxvY2tzCiAgICAgICAgaWYgKG9wdGlvbnMuX19pMThuKSB7CiAgICAgICAgICB0cnkgewogICAgICAgICAgICB2YXIgbG9jYWxlTWVzc2FnZXMgPSBvcHRpb25zLmkxOG4gJiYgb3B0aW9ucy5pMThuLm1lc3NhZ2VzID8gb3B0aW9ucy5pMThuLm1lc3NhZ2VzIDoge307CgogICAgICAgICAgICBvcHRpb25zLl9faTE4bi5mb3JFYWNoKGZ1bmN0aW9uIChyZXNvdXJjZSkgewogICAgICAgICAgICAgIGxvY2FsZU1lc3NhZ2VzID0gbWVyZ2UobG9jYWxlTWVzc2FnZXMsIEpTT04ucGFyc2UocmVzb3VyY2UpKTsKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBPYmplY3Qua2V5cyhsb2NhbGVNZXNzYWdlcykuZm9yRWFjaChmdW5jdGlvbiAobG9jYWxlKSB7CiAgICAgICAgICAgICAgb3B0aW9ucy5pMThuLm1lcmdlTG9jYWxlTWVzc2FnZShsb2NhbGUsIGxvY2FsZU1lc3NhZ2VzW2xvY2FsZV0pOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHsKICAgICAgICAgICAgICBlcnJvcigiQ2Fubm90IHBhcnNlIGxvY2FsZSBtZXNzYWdlcyB2aWEgY3VzdG9tIGJsb2Nrcy4iLCBlKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgdGhpcy5faTE4biA9IG9wdGlvbnMuaTE4bjsKICAgICAgICB0aGlzLl9pMThuV2F0Y2hlciA9IHRoaXMuX2kxOG4ud2F0Y2hJMThuRGF0YSgpOwogICAgICB9IGVsc2UgaWYgKGlzUGxhaW5PYmplY3Qob3B0aW9ucy5pMThuKSkgewogICAgICAgIHZhciByb290STE4biA9IHRoaXMuJHJvb3QgJiYgdGhpcy4kcm9vdC4kaTE4biAmJiB0aGlzLiRyb290LiRpMThuIGluc3RhbmNlb2YgVnVlSTE4biA/IHRoaXMuJHJvb3QuJGkxOG4gOiBudWxsOyAvLyBjb21wb25lbnQgbG9jYWwgaTE4bgoKICAgICAgICBpZiAocm9vdEkxOG4pIHsKICAgICAgICAgIG9wdGlvbnMuaTE4bi5yb290ID0gdGhpcy4kcm9vdDsKICAgICAgICAgIG9wdGlvbnMuaTE4bi5mb3JtYXR0ZXIgPSByb290STE4bi5mb3JtYXR0ZXI7CiAgICAgICAgICBvcHRpb25zLmkxOG4uZmFsbGJhY2tMb2NhbGUgPSByb290STE4bi5mYWxsYmFja0xvY2FsZTsKICAgICAgICAgIG9wdGlvbnMuaTE4bi5mb3JtYXRGYWxsYmFja01lc3NhZ2VzID0gcm9vdEkxOG4uZm9ybWF0RmFsbGJhY2tNZXNzYWdlczsKICAgICAgICAgIG9wdGlvbnMuaTE4bi5zaWxlbnRUcmFuc2xhdGlvbldhcm4gPSByb290STE4bi5zaWxlbnRUcmFuc2xhdGlvbldhcm47CiAgICAgICAgICBvcHRpb25zLmkxOG4uc2lsZW50RmFsbGJhY2tXYXJuID0gcm9vdEkxOG4uc2lsZW50RmFsbGJhY2tXYXJuOwogICAgICAgICAgb3B0aW9ucy5pMThuLnBsdXJhbGl6YXRpb25SdWxlcyA9IHJvb3RJMThuLnBsdXJhbGl6YXRpb25SdWxlczsKICAgICAgICAgIG9wdGlvbnMuaTE4bi5wcmVzZXJ2ZURpcmVjdGl2ZUNvbnRlbnQgPSByb290STE4bi5wcmVzZXJ2ZURpcmVjdGl2ZUNvbnRlbnQ7CiAgICAgICAgfSAvLyBpbml0IGxvY2FsZSBtZXNzYWdlcyB2aWEgY3VzdG9tIGJsb2NrcwoKCiAgICAgICAgaWYgKG9wdGlvbnMuX19pMThuKSB7CiAgICAgICAgICB0cnkgewogICAgICAgICAgICB2YXIgbG9jYWxlTWVzc2FnZXMkMSA9IG9wdGlvbnMuaTE4biAmJiBvcHRpb25zLmkxOG4ubWVzc2FnZXMgPyBvcHRpb25zLmkxOG4ubWVzc2FnZXMgOiB7fTsKCiAgICAgICAgICAgIG9wdGlvbnMuX19pMThuLmZvckVhY2goZnVuY3Rpb24gKHJlc291cmNlKSB7CiAgICAgICAgICAgICAgbG9jYWxlTWVzc2FnZXMkMSA9IG1lcmdlKGxvY2FsZU1lc3NhZ2VzJDEsIEpTT04ucGFyc2UocmVzb3VyY2UpKTsKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBvcHRpb25zLmkxOG4ubWVzc2FnZXMgPSBsb2NhbGVNZXNzYWdlcyQxOwogICAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgewogICAgICAgICAgICAgIHdhcm4oIkNhbm5vdCBwYXJzZSBsb2NhbGUgbWVzc2FnZXMgdmlhIGN1c3RvbSBibG9ja3MuIiwgZSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIHZhciByZWYgPSBvcHRpb25zLmkxOG47CiAgICAgICAgdmFyIHNoYXJlZE1lc3NhZ2VzID0gcmVmLnNoYXJlZE1lc3NhZ2VzOwoKICAgICAgICBpZiAoc2hhcmVkTWVzc2FnZXMgJiYgaXNQbGFpbk9iamVjdChzaGFyZWRNZXNzYWdlcykpIHsKICAgICAgICAgIG9wdGlvbnMuaTE4bi5tZXNzYWdlcyA9IG1lcmdlKG9wdGlvbnMuaTE4bi5tZXNzYWdlcywgc2hhcmVkTWVzc2FnZXMpOwogICAgICAgIH0KCiAgICAgICAgdGhpcy5faTE4biA9IG5ldyBWdWVJMThuKG9wdGlvbnMuaTE4bik7CiAgICAgICAgdGhpcy5faTE4bldhdGNoZXIgPSB0aGlzLl9pMThuLndhdGNoSTE4bkRhdGEoKTsKCiAgICAgICAgaWYgKG9wdGlvbnMuaTE4bi5zeW5jID09PSB1bmRlZmluZWQgfHwgISFvcHRpb25zLmkxOG4uc3luYykgewogICAgICAgICAgdGhpcy5fbG9jYWxlV2F0Y2hlciA9IHRoaXMuJGkxOG4ud2F0Y2hMb2NhbGUoKTsKICAgICAgICB9CgogICAgICAgIGlmIChyb290STE4bikgewogICAgICAgICAgcm9vdEkxOG4ub25Db21wb25lbnRJbnN0YW5jZUNyZWF0ZWQodGhpcy5faTE4bik7CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7CiAgICAgICAgICB3YXJuKCJDYW5ub3QgYmUgaW50ZXJwcmV0ZWQgJ2kxOG4nIG9wdGlvbi4iKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0gZWxzZSBpZiAodGhpcy4kcm9vdCAmJiB0aGlzLiRyb290LiRpMThuICYmIHRoaXMuJHJvb3QuJGkxOG4gaW5zdGFuY2VvZiBWdWVJMThuKSB7CiAgICAgIC8vIHJvb3QgaTE4bgogICAgICB0aGlzLl9pMThuID0gdGhpcy4kcm9vdC4kaTE4bjsKICAgIH0gZWxzZSBpZiAob3B0aW9ucy5wYXJlbnQgJiYgb3B0aW9ucy5wYXJlbnQuJGkxOG4gJiYgb3B0aW9ucy5wYXJlbnQuJGkxOG4gaW5zdGFuY2VvZiBWdWVJMThuKSB7CiAgICAgIC8vIHBhcmVudCBpMThuCiAgICAgIHRoaXMuX2kxOG4gPSBvcHRpb25zLnBhcmVudC4kaTE4bjsKICAgIH0KICB9LAogIGJlZm9yZU1vdW50OiBmdW5jdGlvbiBiZWZvcmVNb3VudCgpIHsKICAgIHZhciBvcHRpb25zID0gdGhpcy4kb3B0aW9uczsKICAgIG9wdGlvbnMuaTE4biA9IG9wdGlvbnMuaTE4biB8fCAob3B0aW9ucy5fX2kxOG4gPyB7fSA6IG51bGwpOwoKICAgIGlmIChvcHRpb25zLmkxOG4pIHsKICAgICAgaWYgKG9wdGlvbnMuaTE4biBpbnN0YW5jZW9mIFZ1ZUkxOG4pIHsKICAgICAgICAvLyBpbml0IGxvY2FsZSBtZXNzYWdlcyB2aWEgY3VzdG9tIGJsb2NrcwogICAgICAgIHRoaXMuX2kxOG4uc3Vic2NyaWJlRGF0YUNoYW5naW5nKHRoaXMpOwoKICAgICAgICB0aGlzLl9zdWJzY3JpYmluZyA9IHRydWU7CiAgICAgIH0gZWxzZSBpZiAoaXNQbGFpbk9iamVjdChvcHRpb25zLmkxOG4pKSB7CiAgICAgICAgdGhpcy5faTE4bi5zdWJzY3JpYmVEYXRhQ2hhbmdpbmcodGhpcyk7CgogICAgICAgIHRoaXMuX3N1YnNjcmliaW5nID0gdHJ1ZTsKICAgICAgfSBlbHNlIHsKICAgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgewogICAgICAgICAgd2FybigiQ2Fubm90IGJlIGludGVycHJldGVkICdpMThuJyBvcHRpb24uIik7CiAgICAgICAgfQogICAgICB9CiAgICB9IGVsc2UgaWYgKHRoaXMuJHJvb3QgJiYgdGhpcy4kcm9vdC4kaTE4biAmJiB0aGlzLiRyb290LiRpMThuIGluc3RhbmNlb2YgVnVlSTE4bikgewogICAgICB0aGlzLl9pMThuLnN1YnNjcmliZURhdGFDaGFuZ2luZyh0aGlzKTsKCiAgICAgIHRoaXMuX3N1YnNjcmliaW5nID0gdHJ1ZTsKICAgIH0gZWxzZSBpZiAob3B0aW9ucy5wYXJlbnQgJiYgb3B0aW9ucy5wYXJlbnQuJGkxOG4gJiYgb3B0aW9ucy5wYXJlbnQuJGkxOG4gaW5zdGFuY2VvZiBWdWVJMThuKSB7CiAgICAgIHRoaXMuX2kxOG4uc3Vic2NyaWJlRGF0YUNoYW5naW5nKHRoaXMpOwoKICAgICAgdGhpcy5fc3Vic2NyaWJpbmcgPSB0cnVlOwogICAgfQogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIGlmICh0aGlzICE9PSB0aGlzLiRyb290ICYmIHRoaXMuJG9wdGlvbnMuX19JTlRMSUZZX01FVEFfXyAmJiB0aGlzLiRlbCkgewogICAgICB0aGlzLiRlbC5zZXRBdHRyaWJ1dGUoJ2RhdGEtaW50bGlmeScsIHRoaXMuJG9wdGlvbnMuX19JTlRMSUZZX01FVEFfXyk7CiAgICB9CiAgfSwKICBiZWZvcmVEZXN0cm95OiBmdW5jdGlvbiBiZWZvcmVEZXN0cm95KCkgewogICAgaWYgKCF0aGlzLl9pMThuKSB7CiAgICAgIHJldHVybjsKICAgIH0KCiAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICB0aGlzLiRuZXh0VGljayhmdW5jdGlvbiAoKSB7CiAgICAgIGlmIChzZWxmLl9zdWJzY3JpYmluZykgewogICAgICAgIHNlbGYuX2kxOG4udW5zdWJzY3JpYmVEYXRhQ2hhbmdpbmcoc2VsZik7CgogICAgICAgIGRlbGV0ZSBzZWxmLl9zdWJzY3JpYmluZzsKICAgICAgfQoKICAgICAgaWYgKHNlbGYuX2kxOG5XYXRjaGVyKSB7CiAgICAgICAgc2VsZi5faTE4bldhdGNoZXIoKTsKCiAgICAgICAgc2VsZi5faTE4bi5kZXN0cm95Vk0oKTsKCiAgICAgICAgZGVsZXRlIHNlbGYuX2kxOG5XYXRjaGVyOwogICAgICB9CgogICAgICBpZiAoc2VsZi5fbG9jYWxlV2F0Y2hlcikgewogICAgICAgIHNlbGYuX2xvY2FsZVdhdGNoZXIoKTsKCiAgICAgICAgZGVsZXRlIHNlbGYuX2xvY2FsZVdhdGNoZXI7CiAgICAgIH0KICAgIH0pOwogIH0KfTsKLyogICovCgp2YXIgaW50ZXJwb2xhdGlvbkNvbXBvbmVudCA9IHsKICBuYW1lOiAnaTE4bicsCiAgZnVuY3Rpb25hbDogdHJ1ZSwKICBwcm9wczogewogICAgdGFnOiB7CiAgICAgIHR5cGU6IFtTdHJpbmcsIEJvb2xlYW4sIE9iamVjdF0sCiAgICAgICJkZWZhdWx0IjogJ3NwYW4nCiAgICB9LAogICAgcGF0aDogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIHJlcXVpcmVkOiB0cnVlCiAgICB9LAogICAgbG9jYWxlOiB7CiAgICAgIHR5cGU6IFN0cmluZwogICAgfSwKICAgIHBsYWNlczogewogICAgICB0eXBlOiBbQXJyYXksIE9iamVjdF0KICAgIH0KICB9LAogIHJlbmRlcjogZnVuY3Rpb24gcmVuZGVyKGgsIHJlZikgewogICAgdmFyIGRhdGEgPSByZWYuZGF0YTsKICAgIHZhciBwYXJlbnQgPSByZWYucGFyZW50OwogICAgdmFyIHByb3BzID0gcmVmLnByb3BzOwogICAgdmFyIHNsb3RzID0gcmVmLnNsb3RzOwogICAgdmFyICRpMThuID0gcGFyZW50LiRpMThuOwoKICAgIGlmICghJGkxOG4pIHsKICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHsKICAgICAgICB3YXJuKCdDYW5ub3QgZmluZCBWdWVJMThuIGluc3RhbmNlIScpOwogICAgICB9CgogICAgICByZXR1cm47CiAgICB9CgogICAgdmFyIHBhdGggPSBwcm9wcy5wYXRoOwogICAgdmFyIGxvY2FsZSA9IHByb3BzLmxvY2FsZTsKICAgIHZhciBwbGFjZXMgPSBwcm9wcy5wbGFjZXM7CiAgICB2YXIgcGFyYW1zID0gc2xvdHMoKTsKICAgIHZhciBjaGlsZHJlbiA9ICRpMThuLmkocGF0aCwgbG9jYWxlLCBvbmx5SGFzRGVmYXVsdFBsYWNlKHBhcmFtcykgfHwgcGxhY2VzID8gdXNlTGVnYWN5UGxhY2VzKHBhcmFtc1siZGVmYXVsdCJdLCBwbGFjZXMpIDogcGFyYW1zKTsKICAgIHZhciB0YWcgPSAhIXByb3BzLnRhZyAmJiBwcm9wcy50YWcgIT09IHRydWUgfHwgcHJvcHMudGFnID09PSBmYWxzZSA/IHByb3BzLnRhZyA6ICdzcGFuJzsKICAgIHJldHVybiB0YWcgPyBoKHRhZywgZGF0YSwgY2hpbGRyZW4pIDogY2hpbGRyZW47CiAgfQp9OwoKZnVuY3Rpb24gb25seUhhc0RlZmF1bHRQbGFjZShwYXJhbXMpIHsKICB2YXIgcHJvcDsKCiAgZm9yIChwcm9wIGluIHBhcmFtcykgewogICAgaWYgKHByb3AgIT09ICdkZWZhdWx0JykgewogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CiAgfQoKICByZXR1cm4gQm9vbGVhbihwcm9wKTsKfQoKZnVuY3Rpb24gdXNlTGVnYWN5UGxhY2VzKGNoaWxkcmVuLCBwbGFjZXMpIHsKICB2YXIgcGFyYW1zID0gcGxhY2VzID8gY3JlYXRlUGFyYW1zRnJvbVBsYWNlcyhwbGFjZXMpIDoge307CgogIGlmICghY2hpbGRyZW4pIHsKICAgIHJldHVybiBwYXJhbXM7CiAgfSAvLyBGaWx0ZXIgZW1wdHkgdGV4dCBub2RlcwoKCiAgY2hpbGRyZW4gPSBjaGlsZHJlbi5maWx0ZXIoZnVuY3Rpb24gKGNoaWxkKSB7CiAgICByZXR1cm4gY2hpbGQudGFnIHx8IGNoaWxkLnRleHQudHJpbSgpICE9PSAnJzsKICB9KTsKICB2YXIgZXZlcnlQbGFjZSA9IGNoaWxkcmVuLmV2ZXJ5KHZub2RlSGFzUGxhY2VBdHRyaWJ1dGUpOwoKICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiBldmVyeVBsYWNlKSB7CiAgICB3YXJuKCdgcGxhY2VgIGF0dHJpYnV0ZSBpcyBkZXByZWNhdGVkIGluIG5leHQgbWFqb3IgdmVyc2lvbi4gUGxlYXNlIHN3aXRjaCB0byBWdWUgc2xvdHMuJyk7CiAgfQoKICByZXR1cm4gY2hpbGRyZW4ucmVkdWNlKGV2ZXJ5UGxhY2UgPyBhc3NpZ25DaGlsZFBsYWNlIDogYXNzaWduQ2hpbGRJbmRleCwgcGFyYW1zKTsKfQoKZnVuY3Rpb24gY3JlYXRlUGFyYW1zRnJvbVBsYWNlcyhwbGFjZXMpIHsKICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgewogICAgd2FybignYHBsYWNlc2AgcHJvcCBpcyBkZXByZWNhdGVkIGluIG5leHQgbWFqb3IgdmVyc2lvbi4gUGxlYXNlIHN3aXRjaCB0byBWdWUgc2xvdHMuJyk7CiAgfQoKICByZXR1cm4gQXJyYXkuaXNBcnJheShwbGFjZXMpID8gcGxhY2VzLnJlZHVjZShhc3NpZ25DaGlsZEluZGV4LCB7fSkgOiBPYmplY3QuYXNzaWduKHt9LCBwbGFjZXMpOwp9CgpmdW5jdGlvbiBhc3NpZ25DaGlsZFBsYWNlKHBhcmFtcywgY2hpbGQpIHsKICBpZiAoY2hpbGQuZGF0YSAmJiBjaGlsZC5kYXRhLmF0dHJzICYmIGNoaWxkLmRhdGEuYXR0cnMucGxhY2UpIHsKICAgIHBhcmFtc1tjaGlsZC5kYXRhLmF0dHJzLnBsYWNlXSA9IGNoaWxkOwogIH0KCiAgcmV0dXJuIHBhcmFtczsKfQoKZnVuY3Rpb24gYXNzaWduQ2hpbGRJbmRleChwYXJhbXMsIGNoaWxkLCBpbmRleCkgewogIHBhcmFtc1tpbmRleF0gPSBjaGlsZDsKICByZXR1cm4gcGFyYW1zOwp9CgpmdW5jdGlvbiB2bm9kZUhhc1BsYWNlQXR0cmlidXRlKHZub2RlKSB7CiAgcmV0dXJuIEJvb2xlYW4odm5vZGUuZGF0YSAmJiB2bm9kZS5kYXRhLmF0dHJzICYmIHZub2RlLmRhdGEuYXR0cnMucGxhY2UpOwp9Ci8qICAqLwoKCnZhciBudW1iZXJDb21wb25lbnQgPSB7CiAgbmFtZTogJ2kxOG4tbicsCiAgZnVuY3Rpb25hbDogdHJ1ZSwKICBwcm9wczogewogICAgdGFnOiB7CiAgICAgIHR5cGU6IFtTdHJpbmcsIEJvb2xlYW4sIE9iamVjdF0sCiAgICAgICJkZWZhdWx0IjogJ3NwYW4nCiAgICB9LAogICAgdmFsdWU6IHsKICAgICAgdHlwZTogTnVtYmVyLAogICAgICByZXF1aXJlZDogdHJ1ZQogICAgfSwKICAgIGZvcm1hdDogewogICAgICB0eXBlOiBbU3RyaW5nLCBPYmplY3RdCiAgICB9LAogICAgbG9jYWxlOiB7CiAgICAgIHR5cGU6IFN0cmluZwogICAgfQogIH0sCiAgcmVuZGVyOiBmdW5jdGlvbiByZW5kZXIoaCwgcmVmKSB7CiAgICB2YXIgcHJvcHMgPSByZWYucHJvcHM7CiAgICB2YXIgcGFyZW50ID0gcmVmLnBhcmVudDsKICAgIHZhciBkYXRhID0gcmVmLmRhdGE7CiAgICB2YXIgaTE4biA9IHBhcmVudC4kaTE4bjsKCiAgICBpZiAoIWkxOG4pIHsKICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHsKICAgICAgICB3YXJuKCdDYW5ub3QgZmluZCBWdWVJMThuIGluc3RhbmNlIScpOwogICAgICB9CgogICAgICByZXR1cm4gbnVsbDsKICAgIH0KCiAgICB2YXIga2V5ID0gbnVsbDsKICAgIHZhciBvcHRpb25zID0gbnVsbDsKCiAgICBpZiAoaXNTdHJpbmcocHJvcHMuZm9ybWF0KSkgewogICAgICBrZXkgPSBwcm9wcy5mb3JtYXQ7CiAgICB9IGVsc2UgaWYgKGlzT2JqZWN0KHByb3BzLmZvcm1hdCkpIHsKICAgICAgaWYgKHByb3BzLmZvcm1hdC5rZXkpIHsKICAgICAgICBrZXkgPSBwcm9wcy5mb3JtYXQua2V5OwogICAgICB9IC8vIEZpbHRlciBvdXQgbnVtYmVyIGZvcm1hdCBvcHRpb25zIG9ubHkKCgogICAgICBvcHRpb25zID0gT2JqZWN0LmtleXMocHJvcHMuZm9ybWF0KS5yZWR1Y2UoZnVuY3Rpb24gKGFjYywgcHJvcCkgewogICAgICAgIHZhciBvYmo7CgogICAgICAgIGlmIChpbmNsdWRlcyhudW1iZXJGb3JtYXRLZXlzLCBwcm9wKSkgewogICAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oe30sIGFjYywgKG9iaiA9IHt9LCBvYmpbcHJvcF0gPSBwcm9wcy5mb3JtYXRbcHJvcF0sIG9iaikpOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIGFjYzsKICAgICAgfSwgbnVsbCk7CiAgICB9CgogICAgdmFyIGxvY2FsZSA9IHByb3BzLmxvY2FsZSB8fCBpMThuLmxvY2FsZTsKCiAgICB2YXIgcGFydHMgPSBpMThuLl9udHAocHJvcHMudmFsdWUsIGxvY2FsZSwga2V5LCBvcHRpb25zKTsKCiAgICB2YXIgdmFsdWVzID0gcGFydHMubWFwKGZ1bmN0aW9uIChwYXJ0LCBpbmRleCkgewogICAgICB2YXIgb2JqOwogICAgICB2YXIgc2xvdCA9IGRhdGEuc2NvcGVkU2xvdHMgJiYgZGF0YS5zY29wZWRTbG90c1twYXJ0LnR5cGVdOwogICAgICByZXR1cm4gc2xvdCA/IHNsb3QoKG9iaiA9IHt9LCBvYmpbcGFydC50eXBlXSA9IHBhcnQudmFsdWUsIG9iai5pbmRleCA9IGluZGV4LCBvYmoucGFydHMgPSBwYXJ0cywgb2JqKSkgOiBwYXJ0LnZhbHVlOwogICAgfSk7CiAgICB2YXIgdGFnID0gISFwcm9wcy50YWcgJiYgcHJvcHMudGFnICE9PSB0cnVlIHx8IHByb3BzLnRhZyA9PT0gZmFsc2UgPyBwcm9wcy50YWcgOiAnc3Bhbic7CiAgICByZXR1cm4gdGFnID8gaCh0YWcsIHsKICAgICAgYXR0cnM6IGRhdGEuYXR0cnMsCiAgICAgICdjbGFzcyc6IGRhdGFbJ2NsYXNzJ10sCiAgICAgIHN0YXRpY0NsYXNzOiBkYXRhLnN0YXRpY0NsYXNzCiAgICB9LCB2YWx1ZXMpIDogdmFsdWVzOwogIH0KfTsKLyogICovCgpmdW5jdGlvbiBiaW5kKGVsLCBiaW5kaW5nLCB2bm9kZSkgewogIGlmICghYXNzZXJ0KGVsLCB2bm9kZSkpIHsKICAgIHJldHVybjsKICB9CgogIHQoZWwsIGJpbmRpbmcsIHZub2RlKTsKfQoKZnVuY3Rpb24gdXBkYXRlKGVsLCBiaW5kaW5nLCB2bm9kZSwgb2xkVk5vZGUpIHsKICBpZiAoIWFzc2VydChlbCwgdm5vZGUpKSB7CiAgICByZXR1cm47CiAgfQoKICB2YXIgaTE4biA9IHZub2RlLmNvbnRleHQuJGkxOG47CgogIGlmIChsb2NhbGVFcXVhbChlbCwgdm5vZGUpICYmIGxvb3NlRXF1YWwoYmluZGluZy52YWx1ZSwgYmluZGluZy5vbGRWYWx1ZSkgJiYgbG9vc2VFcXVhbChlbC5fbG9jYWxlTWVzc2FnZSwgaTE4bi5nZXRMb2NhbGVNZXNzYWdlKGkxOG4ubG9jYWxlKSkpIHsKICAgIHJldHVybjsKICB9CgogIHQoZWwsIGJpbmRpbmcsIHZub2RlKTsKfQoKZnVuY3Rpb24gdW5iaW5kKGVsLCBiaW5kaW5nLCB2bm9kZSwgb2xkVk5vZGUpIHsKICB2YXIgdm0gPSB2bm9kZS5jb250ZXh0OwoKICBpZiAoIXZtKSB7CiAgICB3YXJuKCdWdWUgaW5zdGFuY2UgZG9lcyBub3QgZXhpc3RzIGluIFZOb2RlIGNvbnRleHQnKTsKICAgIHJldHVybjsKICB9CgogIHZhciBpMThuID0gdm5vZGUuY29udGV4dC4kaTE4biB8fCB7fTsKCiAgaWYgKCFiaW5kaW5nLm1vZGlmaWVycy5wcmVzZXJ2ZSAmJiAhaTE4bi5wcmVzZXJ2ZURpcmVjdGl2ZUNvbnRlbnQpIHsKICAgIGVsLnRleHRDb250ZW50ID0gJyc7CiAgfQoKICBlbC5fdnQgPSB1bmRlZmluZWQ7CiAgZGVsZXRlIGVsWydfdnQnXTsKICBlbC5fbG9jYWxlID0gdW5kZWZpbmVkOwogIGRlbGV0ZSBlbFsnX2xvY2FsZSddOwogIGVsLl9sb2NhbGVNZXNzYWdlID0gdW5kZWZpbmVkOwogIGRlbGV0ZSBlbFsnX2xvY2FsZU1lc3NhZ2UnXTsKfQoKZnVuY3Rpb24gYXNzZXJ0KGVsLCB2bm9kZSkgewogIHZhciB2bSA9IHZub2RlLmNvbnRleHQ7CgogIGlmICghdm0pIHsKICAgIHdhcm4oJ1Z1ZSBpbnN0YW5jZSBkb2VzIG5vdCBleGlzdHMgaW4gVk5vZGUgY29udGV4dCcpOwogICAgcmV0dXJuIGZhbHNlOwogIH0KCiAgaWYgKCF2bS4kaTE4bikgewogICAgd2FybignVnVlSTE4biBpbnN0YW5jZSBkb2VzIG5vdCBleGlzdHMgaW4gVnVlIGluc3RhbmNlJyk7CiAgICByZXR1cm4gZmFsc2U7CiAgfQoKICByZXR1cm4gdHJ1ZTsKfQoKZnVuY3Rpb24gbG9jYWxlRXF1YWwoZWwsIHZub2RlKSB7CiAgdmFyIHZtID0gdm5vZGUuY29udGV4dDsKICByZXR1cm4gZWwuX2xvY2FsZSA9PT0gdm0uJGkxOG4ubG9jYWxlOwp9CgpmdW5jdGlvbiB0KGVsLCBiaW5kaW5nLCB2bm9kZSkgewogIHZhciByZWYkMSwgcmVmJDI7CiAgdmFyIHZhbHVlID0gYmluZGluZy52YWx1ZTsKICB2YXIgcmVmID0gcGFyc2VWYWx1ZSh2YWx1ZSk7CiAgdmFyIHBhdGggPSByZWYucGF0aDsKICB2YXIgbG9jYWxlID0gcmVmLmxvY2FsZTsKICB2YXIgYXJncyA9IHJlZi5hcmdzOwogIHZhciBjaG9pY2UgPSByZWYuY2hvaWNlOwoKICBpZiAoIXBhdGggJiYgIWxvY2FsZSAmJiAhYXJncykgewogICAgd2FybigndmFsdWUgdHlwZSBub3Qgc3VwcG9ydGVkJyk7CiAgICByZXR1cm47CiAgfQoKICBpZiAoIXBhdGgpIHsKICAgIHdhcm4oJ2BwYXRoYCBpcyByZXF1aXJlZCBpbiB2LXQgZGlyZWN0aXZlJyk7CiAgICByZXR1cm47CiAgfQoKICB2YXIgdm0gPSB2bm9kZS5jb250ZXh0OwoKICBpZiAoY2hvaWNlICE9IG51bGwpIHsKICAgIGVsLl92dCA9IGVsLnRleHRDb250ZW50ID0gKHJlZiQxID0gdm0uJGkxOG4pLnRjLmFwcGx5KHJlZiQxLCBbcGF0aCwgY2hvaWNlXS5jb25jYXQobWFrZVBhcmFtcyhsb2NhbGUsIGFyZ3MpKSk7CiAgfSBlbHNlIHsKICAgIGVsLl92dCA9IGVsLnRleHRDb250ZW50ID0gKHJlZiQyID0gdm0uJGkxOG4pLnQuYXBwbHkocmVmJDIsIFtwYXRoXS5jb25jYXQobWFrZVBhcmFtcyhsb2NhbGUsIGFyZ3MpKSk7CiAgfQoKICBlbC5fbG9jYWxlID0gdm0uJGkxOG4ubG9jYWxlOwogIGVsLl9sb2NhbGVNZXNzYWdlID0gdm0uJGkxOG4uZ2V0TG9jYWxlTWVzc2FnZSh2bS4kaTE4bi5sb2NhbGUpOwp9CgpmdW5jdGlvbiBwYXJzZVZhbHVlKHZhbHVlKSB7CiAgdmFyIHBhdGg7CiAgdmFyIGxvY2FsZTsKICB2YXIgYXJnczsKICB2YXIgY2hvaWNlOwoKICBpZiAoaXNTdHJpbmcodmFsdWUpKSB7CiAgICBwYXRoID0gdmFsdWU7CiAgfSBlbHNlIGlmIChpc1BsYWluT2JqZWN0KHZhbHVlKSkgewogICAgcGF0aCA9IHZhbHVlLnBhdGg7CiAgICBsb2NhbGUgPSB2YWx1ZS5sb2NhbGU7CiAgICBhcmdzID0gdmFsdWUuYXJnczsKICAgIGNob2ljZSA9IHZhbHVlLmNob2ljZTsKICB9CgogIHJldHVybiB7CiAgICBwYXRoOiBwYXRoLAogICAgbG9jYWxlOiBsb2NhbGUsCiAgICBhcmdzOiBhcmdzLAogICAgY2hvaWNlOiBjaG9pY2UKICB9Owp9CgpmdW5jdGlvbiBtYWtlUGFyYW1zKGxvY2FsZSwgYXJncykgewogIHZhciBwYXJhbXMgPSBbXTsKICBsb2NhbGUgJiYgcGFyYW1zLnB1c2gobG9jYWxlKTsKCiAgaWYgKGFyZ3MgJiYgKEFycmF5LmlzQXJyYXkoYXJncykgfHwgaXNQbGFpbk9iamVjdChhcmdzKSkpIHsKICAgIHBhcmFtcy5wdXNoKGFyZ3MpOwogIH0KCiAgcmV0dXJuIHBhcmFtczsKfQoKdmFyIFZ1ZTsKCmZ1bmN0aW9uIGluc3RhbGwoX1Z1ZSkgewogIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqLwogIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIGluc3RhbGwuaW5zdGFsbGVkICYmIF9WdWUgPT09IFZ1ZSkgewogICAgd2FybignYWxyZWFkeSBpbnN0YWxsZWQuJyk7CiAgICByZXR1cm47CiAgfQoKICBpbnN0YWxsLmluc3RhbGxlZCA9IHRydWU7CiAgVnVlID0gX1Z1ZTsKICB2YXIgdmVyc2lvbiA9IFZ1ZS52ZXJzaW9uICYmIE51bWJlcihWdWUudmVyc2lvbi5zcGxpdCgnLicpWzBdKSB8fCAtMTsKICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi8KCiAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgdmVyc2lvbiA8IDIpIHsKICAgIHdhcm4oInZ1ZS1pMThuICgiICsgaW5zdGFsbC52ZXJzaW9uICsgIikgbmVlZCB0byB1c2UgVnVlIDIuMCBvciBsYXRlciAoVnVlOiAiICsgVnVlLnZlcnNpb24gKyAiKS4iKTsKICAgIHJldHVybjsKICB9CgogIGV4dGVuZChWdWUpOwogIFZ1ZS5taXhpbihtaXhpbik7CiAgVnVlLmRpcmVjdGl2ZSgndCcsIHsKICAgIGJpbmQ6IGJpbmQsCiAgICB1cGRhdGU6IHVwZGF0ZSwKICAgIHVuYmluZDogdW5iaW5kCiAgfSk7CiAgVnVlLmNvbXBvbmVudChpbnRlcnBvbGF0aW9uQ29tcG9uZW50Lm5hbWUsIGludGVycG9sYXRpb25Db21wb25lbnQpOwogIFZ1ZS5jb21wb25lbnQobnVtYmVyQ29tcG9uZW50Lm5hbWUsIG51bWJlckNvbXBvbmVudCk7IC8vIHVzZSBzaW1wbGUgbWVyZ2VTdHJhdGVnaWVzIHRvIHByZXZlbnQgaTE4biBpbnN0YW5jZSBsb3NlICdfX3Byb3RvX18nCgogIHZhciBzdHJhdHMgPSBWdWUuY29uZmlnLm9wdGlvbk1lcmdlU3RyYXRlZ2llczsKCiAgc3RyYXRzLmkxOG4gPSBmdW5jdGlvbiAocGFyZW50VmFsLCBjaGlsZFZhbCkgewogICAgcmV0dXJuIGNoaWxkVmFsID09PSB1bmRlZmluZWQgPyBwYXJlbnRWYWwgOiBjaGlsZFZhbDsKICB9Owp9Ci8qICAqLwoKCnZhciBCYXNlRm9ybWF0dGVyID0gZnVuY3Rpb24gQmFzZUZvcm1hdHRlcigpIHsKICB0aGlzLl9jYWNoZXMgPSBPYmplY3QuY3JlYXRlKG51bGwpOwp9OwoKQmFzZUZvcm1hdHRlci5wcm90b3R5cGUuaW50ZXJwb2xhdGUgPSBmdW5jdGlvbiBpbnRlcnBvbGF0ZShtZXNzYWdlLCB2YWx1ZXMpIHsKICBpZiAoIXZhbHVlcykgewogICAgcmV0dXJuIFttZXNzYWdlXTsKICB9CgogIHZhciB0b2tlbnMgPSB0aGlzLl9jYWNoZXNbbWVzc2FnZV07CgogIGlmICghdG9rZW5zKSB7CiAgICB0b2tlbnMgPSBwYXJzZShtZXNzYWdlKTsKICAgIHRoaXMuX2NhY2hlc1ttZXNzYWdlXSA9IHRva2VuczsKICB9CgogIHJldHVybiBjb21waWxlKHRva2VucywgdmFsdWVzKTsKfTsKCnZhciBSRV9UT0tFTl9MSVNUX1ZBTFVFID0gL14oPzpcZCkrLzsKdmFyIFJFX1RPS0VOX05BTUVEX1ZBTFVFID0gL14oPzpcdykrLzsKCmZ1bmN0aW9uIHBhcnNlKGZvcm1hdCkgewogIHZhciB0b2tlbnMgPSBbXTsKICB2YXIgcG9zaXRpb24gPSAwOwogIHZhciB0ZXh0ID0gJyc7CgogIHdoaWxlIChwb3NpdGlvbiA8IGZvcm1hdC5sZW5ndGgpIHsKICAgIHZhciBfY2hhciA9IGZvcm1hdFtwb3NpdGlvbisrXTsKCiAgICBpZiAoX2NoYXIgPT09ICd7JykgewogICAgICBpZiAodGV4dCkgewogICAgICAgIHRva2Vucy5wdXNoKHsKICAgICAgICAgIHR5cGU6ICd0ZXh0JywKICAgICAgICAgIHZhbHVlOiB0ZXh0CiAgICAgICAgfSk7CiAgICAgIH0KCiAgICAgIHRleHQgPSAnJzsKICAgICAgdmFyIHN1YiA9ICcnOwogICAgICBfY2hhciA9IGZvcm1hdFtwb3NpdGlvbisrXTsKCiAgICAgIHdoaWxlIChfY2hhciAhPT0gdW5kZWZpbmVkICYmIF9jaGFyICE9PSAnfScpIHsKICAgICAgICBzdWIgKz0gX2NoYXI7CiAgICAgICAgX2NoYXIgPSBmb3JtYXRbcG9zaXRpb24rK107CiAgICAgIH0KCiAgICAgIHZhciBpc0Nsb3NlZCA9IF9jaGFyID09PSAnfSc7CiAgICAgIHZhciB0eXBlID0gUkVfVE9LRU5fTElTVF9WQUxVRS50ZXN0KHN1YikgPyAnbGlzdCcgOiBpc0Nsb3NlZCAmJiBSRV9UT0tFTl9OQU1FRF9WQUxVRS50ZXN0KHN1YikgPyAnbmFtZWQnIDogJ3Vua25vd24nOwogICAgICB0b2tlbnMucHVzaCh7CiAgICAgICAgdmFsdWU6IHN1YiwKICAgICAgICB0eXBlOiB0eXBlCiAgICAgIH0pOwogICAgfSBlbHNlIGlmIChfY2hhciA9PT0gJyUnKSB7CiAgICAgIC8vIHdoZW4gZm91bmQgcmFpbHMgaTE4biBzeW50YXgsIHNraXAgdGV4dCBjYXB0dXJlCiAgICAgIGlmIChmb3JtYXRbcG9zaXRpb25dICE9PSAneycpIHsKICAgICAgICB0ZXh0ICs9IF9jaGFyOwogICAgICB9CiAgICB9IGVsc2UgewogICAgICB0ZXh0ICs9IF9jaGFyOwogICAgfQogIH0KCiAgdGV4dCAmJiB0b2tlbnMucHVzaCh7CiAgICB0eXBlOiAndGV4dCcsCiAgICB2YWx1ZTogdGV4dAogIH0pOwogIHJldHVybiB0b2tlbnM7Cn0KCmZ1bmN0aW9uIGNvbXBpbGUodG9rZW5zLCB2YWx1ZXMpIHsKICB2YXIgY29tcGlsZWQgPSBbXTsKICB2YXIgaW5kZXggPSAwOwogIHZhciBtb2RlID0gQXJyYXkuaXNBcnJheSh2YWx1ZXMpID8gJ2xpc3QnIDogaXNPYmplY3QodmFsdWVzKSA/ICduYW1lZCcgOiAndW5rbm93bic7CgogIGlmIChtb2RlID09PSAndW5rbm93bicpIHsKICAgIHJldHVybiBjb21waWxlZDsKICB9CgogIHdoaWxlIChpbmRleCA8IHRva2Vucy5sZW5ndGgpIHsKICAgIHZhciB0b2tlbiA9IHRva2Vuc1tpbmRleF07CgogICAgc3dpdGNoICh0b2tlbi50eXBlKSB7CiAgICAgIGNhc2UgJ3RleHQnOgogICAgICAgIGNvbXBpbGVkLnB1c2godG9rZW4udmFsdWUpOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSAnbGlzdCc6CiAgICAgICAgY29tcGlsZWQucHVzaCh2YWx1ZXNbcGFyc2VJbnQodG9rZW4udmFsdWUsIDEwKV0pOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSAnbmFtZWQnOgogICAgICAgIGlmIChtb2RlID09PSAnbmFtZWQnKSB7CiAgICAgICAgICBjb21waWxlZC5wdXNoKHZhbHVlc1t0b2tlbi52YWx1ZV0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgewogICAgICAgICAgICB3YXJuKCJUeXBlIG9mIHRva2VuICciICsgdG9rZW4udHlwZSArICInIGFuZCBmb3JtYXQgb2YgdmFsdWUgJyIgKyBtb2RlICsgIicgZG9uJ3QgbWF0Y2ghIik7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgJ3Vua25vd24nOgogICAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7CiAgICAgICAgICB3YXJuKCJEZXRlY3QgJ3Vua25vd24nIHR5cGUgb2YgdG9rZW4hIik7CiAgICAgICAgfQoKICAgICAgICBicmVhazsKICAgIH0KCiAgICBpbmRleCsrOwogIH0KCiAgcmV0dXJuIGNvbXBpbGVkOwp9Ci8qICAqLwoKLyoqCiAqICBQYXRoIHBhcnNlcgogKiAgLSBJbnNwaXJlZDoKICogICAgVnVlLmpzIFBhdGggcGFyc2VyCiAqLwovLyBhY3Rpb25zCgoKdmFyIEFQUEVORCA9IDA7CnZhciBQVVNIID0gMTsKdmFyIElOQ19TVUJfUEFUSF9ERVBUSCA9IDI7CnZhciBQVVNIX1NVQl9QQVRIID0gMzsgLy8gc3RhdGVzCgp2YXIgQkVGT1JFX1BBVEggPSAwOwp2YXIgSU5fUEFUSCA9IDE7CnZhciBCRUZPUkVfSURFTlQgPSAyOwp2YXIgSU5fSURFTlQgPSAzOwp2YXIgSU5fU1VCX1BBVEggPSA0Owp2YXIgSU5fU0lOR0xFX1FVT1RFID0gNTsKdmFyIElOX0RPVUJMRV9RVU9URSA9IDY7CnZhciBBRlRFUl9QQVRIID0gNzsKdmFyIEVSUk9SID0gODsKdmFyIHBhdGhTdGF0ZU1hY2hpbmUgPSBbXTsKcGF0aFN0YXRlTWFjaGluZVtCRUZPUkVfUEFUSF0gPSB7CiAgJ3dzJzogW0JFRk9SRV9QQVRIXSwKICAnaWRlbnQnOiBbSU5fSURFTlQsIEFQUEVORF0sCiAgJ1snOiBbSU5fU1VCX1BBVEhdLAogICdlb2YnOiBbQUZURVJfUEFUSF0KfTsKcGF0aFN0YXRlTWFjaGluZVtJTl9QQVRIXSA9IHsKICAnd3MnOiBbSU5fUEFUSF0sCiAgJy4nOiBbQkVGT1JFX0lERU5UXSwKICAnWyc6IFtJTl9TVUJfUEFUSF0sCiAgJ2VvZic6IFtBRlRFUl9QQVRIXQp9OwpwYXRoU3RhdGVNYWNoaW5lW0JFRk9SRV9JREVOVF0gPSB7CiAgJ3dzJzogW0JFRk9SRV9JREVOVF0sCiAgJ2lkZW50JzogW0lOX0lERU5ULCBBUFBFTkRdLAogICcwJzogW0lOX0lERU5ULCBBUFBFTkRdLAogICdudW1iZXInOiBbSU5fSURFTlQsIEFQUEVORF0KfTsKcGF0aFN0YXRlTWFjaGluZVtJTl9JREVOVF0gPSB7CiAgJ2lkZW50JzogW0lOX0lERU5ULCBBUFBFTkRdLAogICcwJzogW0lOX0lERU5ULCBBUFBFTkRdLAogICdudW1iZXInOiBbSU5fSURFTlQsIEFQUEVORF0sCiAgJ3dzJzogW0lOX1BBVEgsIFBVU0hdLAogICcuJzogW0JFRk9SRV9JREVOVCwgUFVTSF0sCiAgJ1snOiBbSU5fU1VCX1BBVEgsIFBVU0hdLAogICdlb2YnOiBbQUZURVJfUEFUSCwgUFVTSF0KfTsKcGF0aFN0YXRlTWFjaGluZVtJTl9TVUJfUEFUSF0gPSB7CiAgIiciOiBbSU5fU0lOR0xFX1FVT1RFLCBBUFBFTkRdLAogICciJzogW0lOX0RPVUJMRV9RVU9URSwgQVBQRU5EXSwKICAnWyc6IFtJTl9TVUJfUEFUSCwgSU5DX1NVQl9QQVRIX0RFUFRIXSwKICAnXSc6IFtJTl9QQVRILCBQVVNIX1NVQl9QQVRIXSwKICAnZW9mJzogRVJST1IsCiAgJ2Vsc2UnOiBbSU5fU1VCX1BBVEgsIEFQUEVORF0KfTsKcGF0aFN0YXRlTWFjaGluZVtJTl9TSU5HTEVfUVVPVEVdID0gewogICInIjogW0lOX1NVQl9QQVRILCBBUFBFTkRdLAogICdlb2YnOiBFUlJPUiwKICAnZWxzZSc6IFtJTl9TSU5HTEVfUVVPVEUsIEFQUEVORF0KfTsKcGF0aFN0YXRlTWFjaGluZVtJTl9ET1VCTEVfUVVPVEVdID0gewogICciJzogW0lOX1NVQl9QQVRILCBBUFBFTkRdLAogICdlb2YnOiBFUlJPUiwKICAnZWxzZSc6IFtJTl9ET1VCTEVfUVVPVEUsIEFQUEVORF0KfTsKLyoqCiAqIENoZWNrIGlmIGFuIGV4cHJlc3Npb24gaXMgYSBsaXRlcmFsIHZhbHVlLgogKi8KCnZhciBsaXRlcmFsVmFsdWVSRSA9IC9eXHM/KD86dHJ1ZXxmYWxzZXwtP1tcZC5dK3wnW14nXSonfCJbXiJdKiIpXHM/JC87CgpmdW5jdGlvbiBpc0xpdGVyYWwoZXhwKSB7CiAgcmV0dXJuIGxpdGVyYWxWYWx1ZVJFLnRlc3QoZXhwKTsKfQovKioKICogU3RyaXAgcXVvdGVzIGZyb20gYSBzdHJpbmcKICovCgoKZnVuY3Rpb24gc3RyaXBRdW90ZXMoc3RyKSB7CiAgdmFyIGEgPSBzdHIuY2hhckNvZGVBdCgwKTsKICB2YXIgYiA9IHN0ci5jaGFyQ29kZUF0KHN0ci5sZW5ndGggLSAxKTsKICByZXR1cm4gYSA9PT0gYiAmJiAoYSA9PT0gMHgyMiB8fCBhID09PSAweDI3KSA/IHN0ci5zbGljZSgxLCAtMSkgOiBzdHI7Cn0KLyoqCiAqIERldGVybWluZSB0aGUgdHlwZSBvZiBhIGNoYXJhY3RlciBpbiBhIGtleXBhdGguCiAqLwoKCmZ1bmN0aW9uIGdldFBhdGhDaGFyVHlwZShjaCkgewogIGlmIChjaCA9PT0gdW5kZWZpbmVkIHx8IGNoID09PSBudWxsKSB7CiAgICByZXR1cm4gJ2VvZic7CiAgfQoKICB2YXIgY29kZSA9IGNoLmNoYXJDb2RlQXQoMCk7CgogIHN3aXRjaCAoY29kZSkgewogICAgY2FzZSAweDVCOiAvLyBbCgogICAgY2FzZSAweDVEOiAvLyBdCgogICAgY2FzZSAweDJFOiAvLyAuCgogICAgY2FzZSAweDIyOiAvLyAiCgogICAgY2FzZSAweDI3OgogICAgICAvLyAnCiAgICAgIHJldHVybiBjaDsKCiAgICBjYXNlIDB4NUY6IC8vIF8KCiAgICBjYXNlIDB4MjQ6IC8vICQKCiAgICBjYXNlIDB4MkQ6CiAgICAgIC8vIC0KICAgICAgcmV0dXJuICdpZGVudCc7CgogICAgY2FzZSAweDA5OiAvLyBUYWIKCiAgICBjYXNlIDB4MEE6IC8vIE5ld2xpbmUKCiAgICBjYXNlIDB4MEQ6IC8vIFJldHVybgoKICAgIGNhc2UgMHhBMDogLy8gTm8tYnJlYWsgc3BhY2UKCiAgICBjYXNlIDB4RkVGRjogLy8gQnl0ZSBPcmRlciBNYXJrCgogICAgY2FzZSAweDIwMjg6IC8vIExpbmUgU2VwYXJhdG9yCgogICAgY2FzZSAweDIwMjk6CiAgICAgIC8vIFBhcmFncmFwaCBTZXBhcmF0b3IKICAgICAgcmV0dXJuICd3cyc7CiAgfQoKICByZXR1cm4gJ2lkZW50JzsKfQovKioKICogRm9ybWF0IGEgc3ViUGF0aCwgcmV0dXJuIGl0cyBwbGFpbiBmb3JtIGlmIGl0IGlzCiAqIGEgbGl0ZXJhbCBzdHJpbmcgb3IgbnVtYmVyLiBPdGhlcndpc2UgcHJlcGVuZCB0aGUKICogZHluYW1pYyBpbmRpY2F0b3IgKCopLgogKi8KCgpmdW5jdGlvbiBmb3JtYXRTdWJQYXRoKHBhdGgpIHsKICB2YXIgdHJpbW1lZCA9IHBhdGgudHJpbSgpOyAvLyBpbnZhbGlkIGxlYWRpbmcgMAoKICBpZiAocGF0aC5jaGFyQXQoMCkgPT09ICcwJyAmJiBpc05hTihwYXRoKSkgewogICAgcmV0dXJuIGZhbHNlOwogIH0KCiAgcmV0dXJuIGlzTGl0ZXJhbCh0cmltbWVkKSA/IHN0cmlwUXVvdGVzKHRyaW1tZWQpIDogJyonICsgdHJpbW1lZDsKfQovKioKICogUGFyc2UgYSBzdHJpbmcgcGF0aCBpbnRvIGFuIGFycmF5IG9mIHNlZ21lbnRzCiAqLwoKCmZ1bmN0aW9uIHBhcnNlJDEocGF0aCkgewogIHZhciBrZXlzID0gW107CiAgdmFyIGluZGV4ID0gLTE7CiAgdmFyIG1vZGUgPSBCRUZPUkVfUEFUSDsKICB2YXIgc3ViUGF0aERlcHRoID0gMDsKICB2YXIgYzsKICB2YXIga2V5OwogIHZhciBuZXdDaGFyOwogIHZhciB0eXBlOwogIHZhciB0cmFuc2l0aW9uOwogIHZhciBhY3Rpb247CiAgdmFyIHR5cGVNYXA7CiAgdmFyIGFjdGlvbnMgPSBbXTsKCiAgYWN0aW9uc1tQVVNIXSA9IGZ1bmN0aW9uICgpIHsKICAgIGlmIChrZXkgIT09IHVuZGVmaW5lZCkgewogICAgICBrZXlzLnB1c2goa2V5KTsKICAgICAga2V5ID0gdW5kZWZpbmVkOwogICAgfQogIH07CgogIGFjdGlvbnNbQVBQRU5EXSA9IGZ1bmN0aW9uICgpIHsKICAgIGlmIChrZXkgPT09IHVuZGVmaW5lZCkgewogICAgICBrZXkgPSBuZXdDaGFyOwogICAgfSBlbHNlIHsKICAgICAga2V5ICs9IG5ld0NoYXI7CiAgICB9CiAgfTsKCiAgYWN0aW9uc1tJTkNfU1VCX1BBVEhfREVQVEhdID0gZnVuY3Rpb24gKCkgewogICAgYWN0aW9uc1tBUFBFTkRdKCk7CiAgICBzdWJQYXRoRGVwdGgrKzsKICB9OwoKICBhY3Rpb25zW1BVU0hfU1VCX1BBVEhdID0gZnVuY3Rpb24gKCkgewogICAgaWYgKHN1YlBhdGhEZXB0aCA+IDApIHsKICAgICAgc3ViUGF0aERlcHRoLS07CiAgICAgIG1vZGUgPSBJTl9TVUJfUEFUSDsKICAgICAgYWN0aW9uc1tBUFBFTkRdKCk7CiAgICB9IGVsc2UgewogICAgICBzdWJQYXRoRGVwdGggPSAwOwoKICAgICAgaWYgKGtleSA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CgogICAgICBrZXkgPSBmb3JtYXRTdWJQYXRoKGtleSk7CgogICAgICBpZiAoa2V5ID09PSBmYWxzZSkgewogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfSBlbHNlIHsKICAgICAgICBhY3Rpb25zW1BVU0hdKCk7CiAgICAgIH0KICAgIH0KICB9OwoKICBmdW5jdGlvbiBtYXliZVVuZXNjYXBlUXVvdGUoKSB7CiAgICB2YXIgbmV4dENoYXIgPSBwYXRoW2luZGV4ICsgMV07CgogICAgaWYgKG1vZGUgPT09IElOX1NJTkdMRV9RVU9URSAmJiBuZXh0Q2hhciA9PT0gIiciIHx8IG1vZGUgPT09IElOX0RPVUJMRV9RVU9URSAmJiBuZXh0Q2hhciA9PT0gJyInKSB7CiAgICAgIGluZGV4Kys7CiAgICAgIG5ld0NoYXIgPSAnXFwnICsgbmV4dENoYXI7CiAgICAgIGFjdGlvbnNbQVBQRU5EXSgpOwogICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KICB9CgogIHdoaWxlIChtb2RlICE9PSBudWxsKSB7CiAgICBpbmRleCsrOwogICAgYyA9IHBhdGhbaW5kZXhdOwoKICAgIGlmIChjID09PSAnXFwnICYmIG1heWJlVW5lc2NhcGVRdW90ZSgpKSB7CiAgICAgIGNvbnRpbnVlOwogICAgfQoKICAgIHR5cGUgPSBnZXRQYXRoQ2hhclR5cGUoYyk7CiAgICB0eXBlTWFwID0gcGF0aFN0YXRlTWFjaGluZVttb2RlXTsKICAgIHRyYW5zaXRpb24gPSB0eXBlTWFwW3R5cGVdIHx8IHR5cGVNYXBbJ2Vsc2UnXSB8fCBFUlJPUjsKCiAgICBpZiAodHJhbnNpdGlvbiA9PT0gRVJST1IpIHsKICAgICAgcmV0dXJuOyAvLyBwYXJzZSBlcnJvcgogICAgfQoKICAgIG1vZGUgPSB0cmFuc2l0aW9uWzBdOwogICAgYWN0aW9uID0gYWN0aW9uc1t0cmFuc2l0aW9uWzFdXTsKCiAgICBpZiAoYWN0aW9uKSB7CiAgICAgIG5ld0NoYXIgPSB0cmFuc2l0aW9uWzJdOwogICAgICBuZXdDaGFyID0gbmV3Q2hhciA9PT0gdW5kZWZpbmVkID8gYyA6IG5ld0NoYXI7CgogICAgICBpZiAoYWN0aW9uKCkgPT09IGZhbHNlKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICB9CgogICAgaWYgKG1vZGUgPT09IEFGVEVSX1BBVEgpIHsKICAgICAgcmV0dXJuIGtleXM7CiAgICB9CiAgfQp9Cgp2YXIgSTE4blBhdGggPSBmdW5jdGlvbiBJMThuUGF0aCgpIHsKICB0aGlzLl9jYWNoZSA9IE9iamVjdC5jcmVhdGUobnVsbCk7Cn07Ci8qKgogKiBFeHRlcm5hbCBwYXJzZSB0aGF0IGNoZWNrIGZvciBhIGNhY2hlIGhpdCBmaXJzdAogKi8KCgpJMThuUGF0aC5wcm90b3R5cGUucGFyc2VQYXRoID0gZnVuY3Rpb24gcGFyc2VQYXRoKHBhdGgpIHsKICB2YXIgaGl0ID0gdGhpcy5fY2FjaGVbcGF0aF07CgogIGlmICghaGl0KSB7CiAgICBoaXQgPSBwYXJzZSQxKHBhdGgpOwoKICAgIGlmIChoaXQpIHsKICAgICAgdGhpcy5fY2FjaGVbcGF0aF0gPSBoaXQ7CiAgICB9CiAgfQoKICByZXR1cm4gaGl0IHx8IFtdOwp9OwovKioKICogR2V0IHBhdGggdmFsdWUgZnJvbSBwYXRoIHN0cmluZwogKi8KCgpJMThuUGF0aC5wcm90b3R5cGUuZ2V0UGF0aFZhbHVlID0gZnVuY3Rpb24gZ2V0UGF0aFZhbHVlKG9iaiwgcGF0aCkgewogIGlmICghaXNPYmplY3Qob2JqKSkgewogICAgcmV0dXJuIG51bGw7CiAgfQoKICB2YXIgcGF0aHMgPSB0aGlzLnBhcnNlUGF0aChwYXRoKTsKCiAgaWYgKHBhdGhzLmxlbmd0aCA9PT0gMCkgewogICAgcmV0dXJuIG51bGw7CiAgfSBlbHNlIHsKICAgIHZhciBsZW5ndGggPSBwYXRocy5sZW5ndGg7CiAgICB2YXIgbGFzdCA9IG9iajsKICAgIHZhciBpID0gMDsKCiAgICB3aGlsZSAoaSA8IGxlbmd0aCkgewogICAgICB2YXIgdmFsdWUgPSBsYXN0W3BhdGhzW2ldXTsKCiAgICAgIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkIHx8IHZhbHVlID09PSBudWxsKSB7CiAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgIH0KCiAgICAgIGxhc3QgPSB2YWx1ZTsKICAgICAgaSsrOwogICAgfQoKICAgIHJldHVybiBsYXN0OwogIH0KfTsKLyogICovCgoKdmFyIGh0bWxUYWdNYXRjaGVyID0gLzxcLz9bXHdccz0iLy4nOjsjLVwvXSs+LzsKdmFyIGxpbmtLZXlNYXRjaGVyID0gLyg/OkAoPzpcLlthLXpdKyk/Oig/Oltcd1wtX3wuXSt8XChbXHdcLV98Ll0rXCkpKS9nOwp2YXIgbGlua0tleVByZWZpeE1hdGNoZXIgPSAvXkAoPzpcLihbYS16XSspKT86LzsKdmFyIGJyYWNrZXRzTWF0Y2hlciA9IC9bKCldL2c7CnZhciBkZWZhdWx0TW9kaWZpZXJzID0gewogICd1cHBlcic6IGZ1bmN0aW9uIHVwcGVyKHN0cikgewogICAgcmV0dXJuIHN0ci50b0xvY2FsZVVwcGVyQ2FzZSgpOwogIH0sCiAgJ2xvd2VyJzogZnVuY3Rpb24gbG93ZXIoc3RyKSB7CiAgICByZXR1cm4gc3RyLnRvTG9jYWxlTG93ZXJDYXNlKCk7CiAgfSwKICAnY2FwaXRhbGl6ZSc6IGZ1bmN0aW9uIGNhcGl0YWxpemUoc3RyKSB7CiAgICByZXR1cm4gIiIgKyBzdHIuY2hhckF0KDApLnRvTG9jYWxlVXBwZXJDYXNlKCkgKyBzdHIuc3Vic3RyKDEpOwogIH0KfTsKdmFyIGRlZmF1bHRGb3JtYXR0ZXIgPSBuZXcgQmFzZUZvcm1hdHRlcigpOwoKdmFyIFZ1ZUkxOG4gPSBmdW5jdGlvbiBWdWVJMThuKG9wdGlvbnMpIHsKICB2YXIgdGhpcyQxID0gdGhpczsKICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSBvcHRpb25zID0ge307IC8vIEF1dG8gaW5zdGFsbCBpZiBpdCBpcyBub3QgZG9uZSB5ZXQgYW5kIGB3aW5kb3dgIGhhcyBgVnVlYC4KICAvLyBUbyBhbGxvdyB1c2VycyB0byBhdm9pZCBhdXRvLWluc3RhbGxhdGlvbiBpbiBzb21lIGNhc2VzLAogIC8vIHRoaXMgY29kZSBzaG91bGQgYmUgcGxhY2VkIGhlcmUuIFNlZSAjMjkwCgogIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqLwoKICBpZiAoIVZ1ZSAmJiB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB3aW5kb3cuVnVlKSB7CiAgICBpbnN0YWxsKHdpbmRvdy5WdWUpOwogIH0KCiAgdmFyIGxvY2FsZSA9IG9wdGlvbnMubG9jYWxlIHx8ICdlbi1VUyc7CiAgdmFyIGZhbGxiYWNrTG9jYWxlID0gb3B0aW9ucy5mYWxsYmFja0xvY2FsZSA9PT0gZmFsc2UgPyBmYWxzZSA6IG9wdGlvbnMuZmFsbGJhY2tMb2NhbGUgfHwgJ2VuLVVTJzsKICB2YXIgbWVzc2FnZXMgPSBvcHRpb25zLm1lc3NhZ2VzIHx8IHt9OwogIHZhciBkYXRlVGltZUZvcm1hdHMgPSBvcHRpb25zLmRhdGVUaW1lRm9ybWF0cyB8fCB7fTsKICB2YXIgbnVtYmVyRm9ybWF0cyA9IG9wdGlvbnMubnVtYmVyRm9ybWF0cyB8fCB7fTsKICB0aGlzLl92bSA9IG51bGw7CiAgdGhpcy5fZm9ybWF0dGVyID0gb3B0aW9ucy5mb3JtYXR0ZXIgfHwgZGVmYXVsdEZvcm1hdHRlcjsKICB0aGlzLl9tb2RpZmllcnMgPSBvcHRpb25zLm1vZGlmaWVycyB8fCB7fTsKICB0aGlzLl9taXNzaW5nID0gb3B0aW9ucy5taXNzaW5nIHx8IG51bGw7CiAgdGhpcy5fcm9vdCA9IG9wdGlvbnMucm9vdCB8fCBudWxsOwogIHRoaXMuX3N5bmMgPSBvcHRpb25zLnN5bmMgPT09IHVuZGVmaW5lZCA/IHRydWUgOiAhIW9wdGlvbnMuc3luYzsKICB0aGlzLl9mYWxsYmFja1Jvb3QgPSBvcHRpb25zLmZhbGxiYWNrUm9vdCA9PT0gdW5kZWZpbmVkID8gdHJ1ZSA6ICEhb3B0aW9ucy5mYWxsYmFja1Jvb3Q7CiAgdGhpcy5fZm9ybWF0RmFsbGJhY2tNZXNzYWdlcyA9IG9wdGlvbnMuZm9ybWF0RmFsbGJhY2tNZXNzYWdlcyA9PT0gdW5kZWZpbmVkID8gZmFsc2UgOiAhIW9wdGlvbnMuZm9ybWF0RmFsbGJhY2tNZXNzYWdlczsKICB0aGlzLl9zaWxlbnRUcmFuc2xhdGlvbldhcm4gPSBvcHRpb25zLnNpbGVudFRyYW5zbGF0aW9uV2FybiA9PT0gdW5kZWZpbmVkID8gZmFsc2UgOiBvcHRpb25zLnNpbGVudFRyYW5zbGF0aW9uV2FybjsKICB0aGlzLl9zaWxlbnRGYWxsYmFja1dhcm4gPSBvcHRpb25zLnNpbGVudEZhbGxiYWNrV2FybiA9PT0gdW5kZWZpbmVkID8gZmFsc2UgOiAhIW9wdGlvbnMuc2lsZW50RmFsbGJhY2tXYXJuOwogIHRoaXMuX2RhdGVUaW1lRm9ybWF0dGVycyA9IHt9OwogIHRoaXMuX251bWJlckZvcm1hdHRlcnMgPSB7fTsKICB0aGlzLl9wYXRoID0gbmV3IEkxOG5QYXRoKCk7CiAgdGhpcy5fZGF0YUxpc3RlbmVycyA9IG5ldyBTZXQoKTsKICB0aGlzLl9jb21wb25lbnRJbnN0YW5jZUNyZWF0ZWRMaXN0ZW5lciA9IG9wdGlvbnMuY29tcG9uZW50SW5zdGFuY2VDcmVhdGVkTGlzdGVuZXIgfHwgbnVsbDsKICB0aGlzLl9wcmVzZXJ2ZURpcmVjdGl2ZUNvbnRlbnQgPSBvcHRpb25zLnByZXNlcnZlRGlyZWN0aXZlQ29udGVudCA9PT0gdW5kZWZpbmVkID8gZmFsc2UgOiAhIW9wdGlvbnMucHJlc2VydmVEaXJlY3RpdmVDb250ZW50OwogIHRoaXMucGx1cmFsaXphdGlvblJ1bGVzID0gb3B0aW9ucy5wbHVyYWxpemF0aW9uUnVsZXMgfHwge307CiAgdGhpcy5fd2Fybkh0bWxJbk1lc3NhZ2UgPSBvcHRpb25zLndhcm5IdG1sSW5NZXNzYWdlIHx8ICdvZmYnOwogIHRoaXMuX3Bvc3RUcmFuc2xhdGlvbiA9IG9wdGlvbnMucG9zdFRyYW5zbGF0aW9uIHx8IG51bGw7CiAgdGhpcy5fZXNjYXBlUGFyYW1ldGVySHRtbCA9IG9wdGlvbnMuZXNjYXBlUGFyYW1ldGVySHRtbCB8fCBmYWxzZTsKICAvKioKICAgKiBAcGFyYW0gY2hvaWNlIHtudW1iZXJ9IGEgY2hvaWNlIGluZGV4IGdpdmVuIGJ5IHRoZSBpbnB1dCB0byAkdGM6IGAkdGMoJ3BhdGgudG8ucnVsZScsIGNob2ljZUluZGV4KWAKICAgKiBAcGFyYW0gY2hvaWNlc0xlbmd0aCB7bnVtYmVyfSBhbiBvdmVyYWxsIGFtb3VudCBvZiBhdmFpbGFibGUgY2hvaWNlcwogICAqIEByZXR1cm5zIGEgZmluYWwgY2hvaWNlIGluZGV4CiAgKi8KCiAgdGhpcy5nZXRDaG9pY2VJbmRleCA9IGZ1bmN0aW9uIChjaG9pY2UsIGNob2ljZXNMZW5ndGgpIHsKICAgIHZhciB0aGlzUHJvdG90eXBlID0gT2JqZWN0LmdldFByb3RvdHlwZU9mKHRoaXMkMSk7CgogICAgaWYgKHRoaXNQcm90b3R5cGUgJiYgdGhpc1Byb3RvdHlwZS5nZXRDaG9pY2VJbmRleCkgewogICAgICB2YXIgcHJvdG90eXBlR2V0Q2hvaWNlSW5kZXggPSB0aGlzUHJvdG90eXBlLmdldENob2ljZUluZGV4OwogICAgICByZXR1cm4gcHJvdG90eXBlR2V0Q2hvaWNlSW5kZXguY2FsbCh0aGlzJDEsIGNob2ljZSwgY2hvaWNlc0xlbmd0aCk7CiAgICB9IC8vIERlZmF1bHQgKG9sZCkgZ2V0Q2hvaWNlSW5kZXggaW1wbGVtZW50YXRpb24gLSBlbmdsaXNoLWNvbXBhdGlibGUKCgogICAgdmFyIGRlZmF1bHRJbXBsID0gZnVuY3Rpb24gZGVmYXVsdEltcGwoX2Nob2ljZSwgX2Nob2ljZXNMZW5ndGgpIHsKICAgICAgX2Nob2ljZSA9IE1hdGguYWJzKF9jaG9pY2UpOwoKICAgICAgaWYgKF9jaG9pY2VzTGVuZ3RoID09PSAyKSB7CiAgICAgICAgcmV0dXJuIF9jaG9pY2UgPyBfY2hvaWNlID4gMSA/IDEgOiAwIDogMTsKICAgICAgfQoKICAgICAgcmV0dXJuIF9jaG9pY2UgPyBNYXRoLm1pbihfY2hvaWNlLCAyKSA6IDA7CiAgICB9OwoKICAgIGlmICh0aGlzJDEubG9jYWxlIGluIHRoaXMkMS5wbHVyYWxpemF0aW9uUnVsZXMpIHsKICAgICAgcmV0dXJuIHRoaXMkMS5wbHVyYWxpemF0aW9uUnVsZXNbdGhpcyQxLmxvY2FsZV0uYXBwbHkodGhpcyQxLCBbY2hvaWNlLCBjaG9pY2VzTGVuZ3RoXSk7CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gZGVmYXVsdEltcGwoY2hvaWNlLCBjaG9pY2VzTGVuZ3RoKTsKICAgIH0KICB9OwoKICB0aGlzLl9leGlzdCA9IGZ1bmN0aW9uIChtZXNzYWdlLCBrZXkpIHsKICAgIGlmICghbWVzc2FnZSB8fCAha2V5KSB7CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KCiAgICBpZiAoIWlzTnVsbCh0aGlzJDEuX3BhdGguZ2V0UGF0aFZhbHVlKG1lc3NhZ2UsIGtleSkpKSB7CiAgICAgIHJldHVybiB0cnVlOwogICAgfSAvLyBmYWxsYmFjayBmb3IgZmxhdCBrZXkKCgogICAgaWYgKG1lc3NhZ2Vba2V5XSkgewogICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICByZXR1cm4gZmFsc2U7CiAgfTsKCiAgaWYgKHRoaXMuX3dhcm5IdG1sSW5NZXNzYWdlID09PSAnd2FybicgfHwgdGhpcy5fd2Fybkh0bWxJbk1lc3NhZ2UgPT09ICdlcnJvcicpIHsKICAgIE9iamVjdC5rZXlzKG1lc3NhZ2VzKS5mb3JFYWNoKGZ1bmN0aW9uIChsb2NhbGUpIHsKICAgICAgdGhpcyQxLl9jaGVja0xvY2FsZU1lc3NhZ2UobG9jYWxlLCB0aGlzJDEuX3dhcm5IdG1sSW5NZXNzYWdlLCBtZXNzYWdlc1tsb2NhbGVdKTsKICAgIH0pOwogIH0KCiAgdGhpcy5faW5pdFZNKHsKICAgIGxvY2FsZTogbG9jYWxlLAogICAgZmFsbGJhY2tMb2NhbGU6IGZhbGxiYWNrTG9jYWxlLAogICAgbWVzc2FnZXM6IG1lc3NhZ2VzLAogICAgZGF0ZVRpbWVGb3JtYXRzOiBkYXRlVGltZUZvcm1hdHMsCiAgICBudW1iZXJGb3JtYXRzOiBudW1iZXJGb3JtYXRzCiAgfSk7Cn07Cgp2YXIgcHJvdG90eXBlQWNjZXNzb3JzID0gewogIHZtOiB7CiAgICBjb25maWd1cmFibGU6IHRydWUKICB9LAogIG1lc3NhZ2VzOiB7CiAgICBjb25maWd1cmFibGU6IHRydWUKICB9LAogIGRhdGVUaW1lRm9ybWF0czogewogICAgY29uZmlndXJhYmxlOiB0cnVlCiAgfSwKICBudW1iZXJGb3JtYXRzOiB7CiAgICBjb25maWd1cmFibGU6IHRydWUKICB9LAogIGF2YWlsYWJsZUxvY2FsZXM6IHsKICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZQogIH0sCiAgbG9jYWxlOiB7CiAgICBjb25maWd1cmFibGU6IHRydWUKICB9LAogIGZhbGxiYWNrTG9jYWxlOiB7CiAgICBjb25maWd1cmFibGU6IHRydWUKICB9LAogIGZvcm1hdEZhbGxiYWNrTWVzc2FnZXM6IHsKICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZQogIH0sCiAgbWlzc2luZzogewogICAgY29uZmlndXJhYmxlOiB0cnVlCiAgfSwKICBmb3JtYXR0ZXI6IHsKICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZQogIH0sCiAgc2lsZW50VHJhbnNsYXRpb25XYXJuOiB7CiAgICBjb25maWd1cmFibGU6IHRydWUKICB9LAogIHNpbGVudEZhbGxiYWNrV2FybjogewogICAgY29uZmlndXJhYmxlOiB0cnVlCiAgfSwKICBwcmVzZXJ2ZURpcmVjdGl2ZUNvbnRlbnQ6IHsKICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZQogIH0sCiAgd2Fybkh0bWxJbk1lc3NhZ2U6IHsKICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZQogIH0sCiAgcG9zdFRyYW5zbGF0aW9uOiB7CiAgICBjb25maWd1cmFibGU6IHRydWUKICB9Cn07CgpWdWVJMThuLnByb3RvdHlwZS5fY2hlY2tMb2NhbGVNZXNzYWdlID0gZnVuY3Rpb24gX2NoZWNrTG9jYWxlTWVzc2FnZShsb2NhbGUsIGxldmVsLCBtZXNzYWdlKSB7CiAgdmFyIHBhdGhzID0gW107CgogIHZhciBmbiA9IGZ1bmN0aW9uIGZuKGxldmVsLCBsb2NhbGUsIG1lc3NhZ2UsIHBhdGhzKSB7CiAgICBpZiAoaXNQbGFpbk9iamVjdChtZXNzYWdlKSkgewogICAgICBPYmplY3Qua2V5cyhtZXNzYWdlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsKICAgICAgICB2YXIgdmFsID0gbWVzc2FnZVtrZXldOwoKICAgICAgICBpZiAoaXNQbGFpbk9iamVjdCh2YWwpKSB7CiAgICAgICAgICBwYXRocy5wdXNoKGtleSk7CiAgICAgICAgICBwYXRocy5wdXNoKCcuJyk7CiAgICAgICAgICBmbihsZXZlbCwgbG9jYWxlLCB2YWwsIHBhdGhzKTsKICAgICAgICAgIHBhdGhzLnBvcCgpOwogICAgICAgICAgcGF0aHMucG9wKCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHBhdGhzLnB1c2goa2V5KTsKICAgICAgICAgIGZuKGxldmVsLCBsb2NhbGUsIHZhbCwgcGF0aHMpOwogICAgICAgICAgcGF0aHMucG9wKCk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0gZWxzZSBpZiAoaXNBcnJheShtZXNzYWdlKSkgewogICAgICBtZXNzYWdlLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0sIGluZGV4KSB7CiAgICAgICAgaWYgKGlzUGxhaW5PYmplY3QoaXRlbSkpIHsKICAgICAgICAgIHBhdGhzLnB1c2goIlsiICsgaW5kZXggKyAiXSIpOwogICAgICAgICAgcGF0aHMucHVzaCgnLicpOwogICAgICAgICAgZm4obGV2ZWwsIGxvY2FsZSwgaXRlbSwgcGF0aHMpOwogICAgICAgICAgcGF0aHMucG9wKCk7CiAgICAgICAgICBwYXRocy5wb3AoKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgcGF0aHMucHVzaCgiWyIgKyBpbmRleCArICJdIik7CiAgICAgICAgICBmbihsZXZlbCwgbG9jYWxlLCBpdGVtLCBwYXRocyk7CiAgICAgICAgICBwYXRocy5wb3AoKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSBlbHNlIGlmIChpc1N0cmluZyhtZXNzYWdlKSkgewogICAgICB2YXIgcmV0ID0gaHRtbFRhZ01hdGNoZXIudGVzdChtZXNzYWdlKTsKCiAgICAgIGlmIChyZXQpIHsKICAgICAgICB2YXIgbXNnID0gIkRldGVjdGVkIEhUTUwgaW4gbWVzc2FnZSAnIiArIG1lc3NhZ2UgKyAiJyBvZiBrZXlwYXRoICciICsgcGF0aHMuam9pbignJykgKyAiJyBhdCAnIiArIGxvY2FsZSArICInLiBDb25zaWRlciBjb21wb25lbnQgaW50ZXJwb2xhdGlvbiB3aXRoICc8aTE4bj4nIHRvIGF2b2lkIFhTUy4gU2VlIGh0dHBzOi8vYml0Lmx5LzJacUp6a3AiOwoKICAgICAgICBpZiAobGV2ZWwgPT09ICd3YXJuJykgewogICAgICAgICAgd2Fybihtc2cpOwogICAgICAgIH0gZWxzZSBpZiAobGV2ZWwgPT09ICdlcnJvcicpIHsKICAgICAgICAgIGVycm9yKG1zZyk7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfTsKCiAgZm4obGV2ZWwsIGxvY2FsZSwgbWVzc2FnZSwgcGF0aHMpOwp9OwoKVnVlSTE4bi5wcm90b3R5cGUuX2luaXRWTSA9IGZ1bmN0aW9uIF9pbml0Vk0oZGF0YSkgewogIHZhciBzaWxlbnQgPSBWdWUuY29uZmlnLnNpbGVudDsKICBWdWUuY29uZmlnLnNpbGVudCA9IHRydWU7CiAgdGhpcy5fdm0gPSBuZXcgVnVlKHsKICAgIGRhdGE6IGRhdGEKICB9KTsKICBWdWUuY29uZmlnLnNpbGVudCA9IHNpbGVudDsKfTsKClZ1ZUkxOG4ucHJvdG90eXBlLmRlc3Ryb3lWTSA9IGZ1bmN0aW9uIGRlc3Ryb3lWTSgpIHsKICB0aGlzLl92bS4kZGVzdHJveSgpOwp9OwoKVnVlSTE4bi5wcm90b3R5cGUuc3Vic2NyaWJlRGF0YUNoYW5naW5nID0gZnVuY3Rpb24gc3Vic2NyaWJlRGF0YUNoYW5naW5nKHZtKSB7CiAgdGhpcy5fZGF0YUxpc3RlbmVycy5hZGQodm0pOwp9OwoKVnVlSTE4bi5wcm90b3R5cGUudW5zdWJzY3JpYmVEYXRhQ2hhbmdpbmcgPSBmdW5jdGlvbiB1bnN1YnNjcmliZURhdGFDaGFuZ2luZyh2bSkgewogIHJlbW92ZSh0aGlzLl9kYXRhTGlzdGVuZXJzLCB2bSk7Cn07CgpWdWVJMThuLnByb3RvdHlwZS53YXRjaEkxOG5EYXRhID0gZnVuY3Rpb24gd2F0Y2hJMThuRGF0YSgpIHsKICB2YXIgc2VsZiA9IHRoaXM7CiAgcmV0dXJuIHRoaXMuX3ZtLiR3YXRjaCgnJGRhdGEnLCBmdW5jdGlvbiAoKSB7CiAgICBzZWxmLl9kYXRhTGlzdGVuZXJzLmZvckVhY2goZnVuY3Rpb24gKGUpIHsKICAgICAgVnVlLm5leHRUaWNrKGZ1bmN0aW9uICgpIHsKICAgICAgICBlICYmIGUuJGZvcmNlVXBkYXRlKCk7CiAgICAgIH0pOwogICAgfSk7CiAgfSwgewogICAgZGVlcDogdHJ1ZQogIH0pOwp9OwoKVnVlSTE4bi5wcm90b3R5cGUud2F0Y2hMb2NhbGUgPSBmdW5jdGlvbiB3YXRjaExvY2FsZSgpIHsKICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi8KICBpZiAoIXRoaXMuX3N5bmMgfHwgIXRoaXMuX3Jvb3QpIHsKICAgIHJldHVybiBudWxsOwogIH0KCiAgdmFyIHRhcmdldCA9IHRoaXMuX3ZtOwogIHJldHVybiB0aGlzLl9yb290LiRpMThuLnZtLiR3YXRjaCgnbG9jYWxlJywgZnVuY3Rpb24gKHZhbCkgewogICAgdGFyZ2V0LiRzZXQodGFyZ2V0LCAnbG9jYWxlJywgdmFsKTsKICAgIHRhcmdldC4kZm9yY2VVcGRhdGUoKTsKICB9LCB7CiAgICBpbW1lZGlhdGU6IHRydWUKICB9KTsKfTsKClZ1ZUkxOG4ucHJvdG90eXBlLm9uQ29tcG9uZW50SW5zdGFuY2VDcmVhdGVkID0gZnVuY3Rpb24gb25Db21wb25lbnRJbnN0YW5jZUNyZWF0ZWQobmV3STE4bikgewogIGlmICh0aGlzLl9jb21wb25lbnRJbnN0YW5jZUNyZWF0ZWRMaXN0ZW5lcikgewogICAgdGhpcy5fY29tcG9uZW50SW5zdGFuY2VDcmVhdGVkTGlzdGVuZXIobmV3STE4biwgdGhpcyk7CiAgfQp9OwoKcHJvdG90eXBlQWNjZXNzb3JzLnZtLmdldCA9IGZ1bmN0aW9uICgpIHsKICByZXR1cm4gdGhpcy5fdm07Cn07Cgpwcm90b3R5cGVBY2Nlc3NvcnMubWVzc2FnZXMuZ2V0ID0gZnVuY3Rpb24gKCkgewogIHJldHVybiBsb29zZUNsb25lKHRoaXMuX2dldE1lc3NhZ2VzKCkpOwp9OwoKcHJvdG90eXBlQWNjZXNzb3JzLmRhdGVUaW1lRm9ybWF0cy5nZXQgPSBmdW5jdGlvbiAoKSB7CiAgcmV0dXJuIGxvb3NlQ2xvbmUodGhpcy5fZ2V0RGF0ZVRpbWVGb3JtYXRzKCkpOwp9OwoKcHJvdG90eXBlQWNjZXNzb3JzLm51bWJlckZvcm1hdHMuZ2V0ID0gZnVuY3Rpb24gKCkgewogIHJldHVybiBsb29zZUNsb25lKHRoaXMuX2dldE51bWJlckZvcm1hdHMoKSk7Cn07Cgpwcm90b3R5cGVBY2Nlc3NvcnMuYXZhaWxhYmxlTG9jYWxlcy5nZXQgPSBmdW5jdGlvbiAoKSB7CiAgcmV0dXJuIE9iamVjdC5rZXlzKHRoaXMubWVzc2FnZXMpLnNvcnQoKTsKfTsKCnByb3RvdHlwZUFjY2Vzc29ycy5sb2NhbGUuZ2V0ID0gZnVuY3Rpb24gKCkgewogIHJldHVybiB0aGlzLl92bS5sb2NhbGU7Cn07Cgpwcm90b3R5cGVBY2Nlc3NvcnMubG9jYWxlLnNldCA9IGZ1bmN0aW9uIChsb2NhbGUpIHsKICB0aGlzLl92bS4kc2V0KHRoaXMuX3ZtLCAnbG9jYWxlJywgbG9jYWxlKTsKfTsKCnByb3RvdHlwZUFjY2Vzc29ycy5mYWxsYmFja0xvY2FsZS5nZXQgPSBmdW5jdGlvbiAoKSB7CiAgcmV0dXJuIHRoaXMuX3ZtLmZhbGxiYWNrTG9jYWxlOwp9OwoKcHJvdG90eXBlQWNjZXNzb3JzLmZhbGxiYWNrTG9jYWxlLnNldCA9IGZ1bmN0aW9uIChsb2NhbGUpIHsKICB0aGlzLl9sb2NhbGVDaGFpbkNhY2hlID0ge307CgogIHRoaXMuX3ZtLiRzZXQodGhpcy5fdm0sICdmYWxsYmFja0xvY2FsZScsIGxvY2FsZSk7Cn07Cgpwcm90b3R5cGVBY2Nlc3NvcnMuZm9ybWF0RmFsbGJhY2tNZXNzYWdlcy5nZXQgPSBmdW5jdGlvbiAoKSB7CiAgcmV0dXJuIHRoaXMuX2Zvcm1hdEZhbGxiYWNrTWVzc2FnZXM7Cn07Cgpwcm90b3R5cGVBY2Nlc3NvcnMuZm9ybWF0RmFsbGJhY2tNZXNzYWdlcy5zZXQgPSBmdW5jdGlvbiAoZmFsbGJhY2spIHsKICB0aGlzLl9mb3JtYXRGYWxsYmFja01lc3NhZ2VzID0gZmFsbGJhY2s7Cn07Cgpwcm90b3R5cGVBY2Nlc3NvcnMubWlzc2luZy5nZXQgPSBmdW5jdGlvbiAoKSB7CiAgcmV0dXJuIHRoaXMuX21pc3Npbmc7Cn07Cgpwcm90b3R5cGVBY2Nlc3NvcnMubWlzc2luZy5zZXQgPSBmdW5jdGlvbiAoaGFuZGxlcikgewogIHRoaXMuX21pc3NpbmcgPSBoYW5kbGVyOwp9OwoKcHJvdG90eXBlQWNjZXNzb3JzLmZvcm1hdHRlci5nZXQgPSBmdW5jdGlvbiAoKSB7CiAgcmV0dXJuIHRoaXMuX2Zvcm1hdHRlcjsKfTsKCnByb3RvdHlwZUFjY2Vzc29ycy5mb3JtYXR0ZXIuc2V0ID0gZnVuY3Rpb24gKGZvcm1hdHRlcikgewogIHRoaXMuX2Zvcm1hdHRlciA9IGZvcm1hdHRlcjsKfTsKCnByb3RvdHlwZUFjY2Vzc29ycy5zaWxlbnRUcmFuc2xhdGlvbldhcm4uZ2V0ID0gZnVuY3Rpb24gKCkgewogIHJldHVybiB0aGlzLl9zaWxlbnRUcmFuc2xhdGlvbldhcm47Cn07Cgpwcm90b3R5cGVBY2Nlc3NvcnMuc2lsZW50VHJhbnNsYXRpb25XYXJuLnNldCA9IGZ1bmN0aW9uIChzaWxlbnQpIHsKICB0aGlzLl9zaWxlbnRUcmFuc2xhdGlvbldhcm4gPSBzaWxlbnQ7Cn07Cgpwcm90b3R5cGVBY2Nlc3NvcnMuc2lsZW50RmFsbGJhY2tXYXJuLmdldCA9IGZ1bmN0aW9uICgpIHsKICByZXR1cm4gdGhpcy5fc2lsZW50RmFsbGJhY2tXYXJuOwp9OwoKcHJvdG90eXBlQWNjZXNzb3JzLnNpbGVudEZhbGxiYWNrV2Fybi5zZXQgPSBmdW5jdGlvbiAoc2lsZW50KSB7CiAgdGhpcy5fc2lsZW50RmFsbGJhY2tXYXJuID0gc2lsZW50Owp9OwoKcHJvdG90eXBlQWNjZXNzb3JzLnByZXNlcnZlRGlyZWN0aXZlQ29udGVudC5nZXQgPSBmdW5jdGlvbiAoKSB7CiAgcmV0dXJuIHRoaXMuX3ByZXNlcnZlRGlyZWN0aXZlQ29udGVudDsKfTsKCnByb3RvdHlwZUFjY2Vzc29ycy5wcmVzZXJ2ZURpcmVjdGl2ZUNvbnRlbnQuc2V0ID0gZnVuY3Rpb24gKHByZXNlcnZlKSB7CiAgdGhpcy5fcHJlc2VydmVEaXJlY3RpdmVDb250ZW50ID0gcHJlc2VydmU7Cn07Cgpwcm90b3R5cGVBY2Nlc3NvcnMud2Fybkh0bWxJbk1lc3NhZ2UuZ2V0ID0gZnVuY3Rpb24gKCkgewogIHJldHVybiB0aGlzLl93YXJuSHRtbEluTWVzc2FnZTsKfTsKCnByb3RvdHlwZUFjY2Vzc29ycy53YXJuSHRtbEluTWVzc2FnZS5zZXQgPSBmdW5jdGlvbiAobGV2ZWwpIHsKICB2YXIgdGhpcyQxID0gdGhpczsKICB2YXIgb3JnTGV2ZWwgPSB0aGlzLl93YXJuSHRtbEluTWVzc2FnZTsKICB0aGlzLl93YXJuSHRtbEluTWVzc2FnZSA9IGxldmVsOwoKICBpZiAob3JnTGV2ZWwgIT09IGxldmVsICYmIChsZXZlbCA9PT0gJ3dhcm4nIHx8IGxldmVsID09PSAnZXJyb3InKSkgewogICAgdmFyIG1lc3NhZ2VzID0gdGhpcy5fZ2V0TWVzc2FnZXMoKTsKCiAgICBPYmplY3Qua2V5cyhtZXNzYWdlcykuZm9yRWFjaChmdW5jdGlvbiAobG9jYWxlKSB7CiAgICAgIHRoaXMkMS5fY2hlY2tMb2NhbGVNZXNzYWdlKGxvY2FsZSwgdGhpcyQxLl93YXJuSHRtbEluTWVzc2FnZSwgbWVzc2FnZXNbbG9jYWxlXSk7CiAgICB9KTsKICB9Cn07Cgpwcm90b3R5cGVBY2Nlc3NvcnMucG9zdFRyYW5zbGF0aW9uLmdldCA9IGZ1bmN0aW9uICgpIHsKICByZXR1cm4gdGhpcy5fcG9zdFRyYW5zbGF0aW9uOwp9OwoKcHJvdG90eXBlQWNjZXNzb3JzLnBvc3RUcmFuc2xhdGlvbi5zZXQgPSBmdW5jdGlvbiAoaGFuZGxlcikgewogIHRoaXMuX3Bvc3RUcmFuc2xhdGlvbiA9IGhhbmRsZXI7Cn07CgpWdWVJMThuLnByb3RvdHlwZS5fZ2V0TWVzc2FnZXMgPSBmdW5jdGlvbiBfZ2V0TWVzc2FnZXMoKSB7CiAgcmV0dXJuIHRoaXMuX3ZtLm1lc3NhZ2VzOwp9OwoKVnVlSTE4bi5wcm90b3R5cGUuX2dldERhdGVUaW1lRm9ybWF0cyA9IGZ1bmN0aW9uIF9nZXREYXRlVGltZUZvcm1hdHMoKSB7CiAgcmV0dXJuIHRoaXMuX3ZtLmRhdGVUaW1lRm9ybWF0czsKfTsKClZ1ZUkxOG4ucHJvdG90eXBlLl9nZXROdW1iZXJGb3JtYXRzID0gZnVuY3Rpb24gX2dldE51bWJlckZvcm1hdHMoKSB7CiAgcmV0dXJuIHRoaXMuX3ZtLm51bWJlckZvcm1hdHM7Cn07CgpWdWVJMThuLnByb3RvdHlwZS5fd2FybkRlZmF1bHQgPSBmdW5jdGlvbiBfd2FybkRlZmF1bHQobG9jYWxlLCBrZXksIHJlc3VsdCwgdm0sIHZhbHVlcywgaW50ZXJwb2xhdGVNb2RlKSB7CiAgaWYgKCFpc051bGwocmVzdWx0KSkgewogICAgcmV0dXJuIHJlc3VsdDsKICB9CgogIGlmICh0aGlzLl9taXNzaW5nKSB7CiAgICB2YXIgbWlzc2luZ1JldCA9IHRoaXMuX21pc3NpbmcuYXBwbHkobnVsbCwgW2xvY2FsZSwga2V5LCB2bSwgdmFsdWVzXSk7CgogICAgaWYgKGlzU3RyaW5nKG1pc3NpbmdSZXQpKSB7CiAgICAgIHJldHVybiBtaXNzaW5nUmV0OwogICAgfQogIH0gZWxzZSB7CiAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiAhdGhpcy5faXNTaWxlbnRUcmFuc2xhdGlvbldhcm4oa2V5KSkgewogICAgICB3YXJuKCJDYW5ub3QgdHJhbnNsYXRlIHRoZSB2YWx1ZSBvZiBrZXlwYXRoICciICsga2V5ICsgIicuICIgKyAnVXNlIHRoZSB2YWx1ZSBvZiBrZXlwYXRoIGFzIGRlZmF1bHQuJyk7CiAgICB9CiAgfQoKICBpZiAodGhpcy5fZm9ybWF0RmFsbGJhY2tNZXNzYWdlcykgewogICAgdmFyIHBhcnNlZEFyZ3MgPSBwYXJzZUFyZ3MuYXBwbHkodm9pZCAwLCB2YWx1ZXMpOwogICAgcmV0dXJuIHRoaXMuX3JlbmRlcihrZXksIGludGVycG9sYXRlTW9kZSwgcGFyc2VkQXJncy5wYXJhbXMsIGtleSk7CiAgfSBlbHNlIHsKICAgIHJldHVybiBrZXk7CiAgfQp9OwoKVnVlSTE4bi5wcm90b3R5cGUuX2lzRmFsbGJhY2tSb290ID0gZnVuY3Rpb24gX2lzRmFsbGJhY2tSb290KHZhbCkgewogIHJldHVybiAhdmFsICYmICFpc051bGwodGhpcy5fcm9vdCkgJiYgdGhpcy5fZmFsbGJhY2tSb290Owp9OwoKVnVlSTE4bi5wcm90b3R5cGUuX2lzU2lsZW50RmFsbGJhY2tXYXJuID0gZnVuY3Rpb24gX2lzU2lsZW50RmFsbGJhY2tXYXJuKGtleSkgewogIHJldHVybiB0aGlzLl9zaWxlbnRGYWxsYmFja1dhcm4gaW5zdGFuY2VvZiBSZWdFeHAgPyB0aGlzLl9zaWxlbnRGYWxsYmFja1dhcm4udGVzdChrZXkpIDogdGhpcy5fc2lsZW50RmFsbGJhY2tXYXJuOwp9OwoKVnVlSTE4bi5wcm90b3R5cGUuX2lzU2lsZW50RmFsbGJhY2sgPSBmdW5jdGlvbiBfaXNTaWxlbnRGYWxsYmFjayhsb2NhbGUsIGtleSkgewogIHJldHVybiB0aGlzLl9pc1NpbGVudEZhbGxiYWNrV2FybihrZXkpICYmICh0aGlzLl9pc0ZhbGxiYWNrUm9vdCgpIHx8IGxvY2FsZSAhPT0gdGhpcy5mYWxsYmFja0xvY2FsZSk7Cn07CgpWdWVJMThuLnByb3RvdHlwZS5faXNTaWxlbnRUcmFuc2xhdGlvbldhcm4gPSBmdW5jdGlvbiBfaXNTaWxlbnRUcmFuc2xhdGlvbldhcm4oa2V5KSB7CiAgcmV0dXJuIHRoaXMuX3NpbGVudFRyYW5zbGF0aW9uV2FybiBpbnN0YW5jZW9mIFJlZ0V4cCA/IHRoaXMuX3NpbGVudFRyYW5zbGF0aW9uV2Fybi50ZXN0KGtleSkgOiB0aGlzLl9zaWxlbnRUcmFuc2xhdGlvbldhcm47Cn07CgpWdWVJMThuLnByb3RvdHlwZS5faW50ZXJwb2xhdGUgPSBmdW5jdGlvbiBfaW50ZXJwb2xhdGUobG9jYWxlLCBtZXNzYWdlLCBrZXksIGhvc3QsIGludGVycG9sYXRlTW9kZSwgdmFsdWVzLCB2aXNpdGVkTGlua1N0YWNrKSB7CiAgaWYgKCFtZXNzYWdlKSB7CiAgICByZXR1cm4gbnVsbDsKICB9CgogIHZhciBwYXRoUmV0ID0gdGhpcy5fcGF0aC5nZXRQYXRoVmFsdWUobWVzc2FnZSwga2V5KTsKCiAgaWYgKGlzQXJyYXkocGF0aFJldCkgfHwgaXNQbGFpbk9iamVjdChwYXRoUmV0KSkgewogICAgcmV0dXJuIHBhdGhSZXQ7CiAgfQoKICB2YXIgcmV0OwoKICBpZiAoaXNOdWxsKHBhdGhSZXQpKSB7CiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgZWxzZSAqLwogICAgaWYgKGlzUGxhaW5PYmplY3QobWVzc2FnZSkpIHsKICAgICAgcmV0ID0gbWVzc2FnZVtrZXldOwoKICAgICAgaWYgKCEoaXNTdHJpbmcocmV0KSB8fCBpc0Z1bmN0aW9uKHJldCkpKSB7CiAgICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgIXRoaXMuX2lzU2lsZW50VHJhbnNsYXRpb25XYXJuKGtleSkgJiYgIXRoaXMuX2lzU2lsZW50RmFsbGJhY2sobG9jYWxlLCBrZXkpKSB7CiAgICAgICAgICB3YXJuKCJWYWx1ZSBvZiBrZXkgJyIgKyBrZXkgKyAiJyBpcyBub3QgYSBzdHJpbmcgb3IgZnVuY3Rpb24gISIpOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgIH0KICAgIH0gZWxzZSB7CiAgICAgIHJldHVybiBudWxsOwogICAgfQogIH0gZWxzZSB7CiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgZWxzZSAqLwogICAgaWYgKGlzU3RyaW5nKHBhdGhSZXQpIHx8IGlzRnVuY3Rpb24ocGF0aFJldCkpIHsKICAgICAgcmV0ID0gcGF0aFJldDsKICAgIH0gZWxzZSB7CiAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmICF0aGlzLl9pc1NpbGVudFRyYW5zbGF0aW9uV2FybihrZXkpICYmICF0aGlzLl9pc1NpbGVudEZhbGxiYWNrKGxvY2FsZSwga2V5KSkgewogICAgICAgIHdhcm4oIlZhbHVlIG9mIGtleSAnIiArIGtleSArICInIGlzIG5vdCBhIHN0cmluZyBvciBmdW5jdGlvbiEiKTsKICAgICAgfQoKICAgICAgcmV0dXJuIG51bGw7CiAgICB9CiAgfSAvLyBDaGVjayBmb3IgdGhlIGV4aXN0ZW5jZSBvZiBsaW5rcyB3aXRoaW4gdGhlIHRyYW5zbGF0ZWQgc3RyaW5nCgoKICBpZiAoaXNTdHJpbmcocmV0KSAmJiAocmV0LmluZGV4T2YoJ0A6JykgPj0gMCB8fCByZXQuaW5kZXhPZignQC4nKSA+PSAwKSkgewogICAgcmV0ID0gdGhpcy5fbGluayhsb2NhbGUsIG1lc3NhZ2UsIHJldCwgaG9zdCwgJ3JhdycsIHZhbHVlcywgdmlzaXRlZExpbmtTdGFjayk7CiAgfQoKICByZXR1cm4gdGhpcy5fcmVuZGVyKHJldCwgaW50ZXJwb2xhdGVNb2RlLCB2YWx1ZXMsIGtleSk7Cn07CgpWdWVJMThuLnByb3RvdHlwZS5fbGluayA9IGZ1bmN0aW9uIF9saW5rKGxvY2FsZSwgbWVzc2FnZSwgc3RyLCBob3N0LCBpbnRlcnBvbGF0ZU1vZGUsIHZhbHVlcywgdmlzaXRlZExpbmtTdGFjaykgewogIHZhciByZXQgPSBzdHI7IC8vIE1hdGNoIGFsbCB0aGUgbGlua3Mgd2l0aGluIHRoZSBsb2NhbAogIC8vIFdlIGFyZSBnb2luZyB0byByZXBsYWNlIGVhY2ggb2YKICAvLyB0aGVtIHdpdGggaXRzIHRyYW5zbGF0aW9uCgogIHZhciBtYXRjaGVzID0gcmV0Lm1hdGNoKGxpbmtLZXlNYXRjaGVyKTsKCiAgZm9yICh2YXIgaWR4IGluIG1hdGNoZXMpIHsKICAgIC8vIGllIGNvbXBhdGlibGU6IGZpbHRlciBjdXN0b20gYXJyYXkKICAgIC8vIHByb3RvdHlwZSBtZXRob2QKICAgIGlmICghbWF0Y2hlcy5oYXNPd25Qcm9wZXJ0eShpZHgpKSB7CiAgICAgIGNvbnRpbnVlOwogICAgfQoKICAgIHZhciBsaW5rID0gbWF0Y2hlc1tpZHhdOwogICAgdmFyIGxpbmtLZXlQcmVmaXhNYXRjaGVzID0gbGluay5tYXRjaChsaW5rS2V5UHJlZml4TWF0Y2hlcik7CiAgICB2YXIgbGlua1ByZWZpeCA9IGxpbmtLZXlQcmVmaXhNYXRjaGVzWzBdOwogICAgdmFyIGZvcm1hdHRlck5hbWUgPSBsaW5rS2V5UHJlZml4TWF0Y2hlc1sxXTsgLy8gUmVtb3ZlIHRoZSBsZWFkaW5nIEA6LCBALmNhc2U6IGFuZCB0aGUgYnJhY2tldHMKCiAgICB2YXIgbGlua1BsYWNlaG9sZGVyID0gbGluay5yZXBsYWNlKGxpbmtQcmVmaXgsICcnKS5yZXBsYWNlKGJyYWNrZXRzTWF0Y2hlciwgJycpOwoKICAgIGlmIChpbmNsdWRlcyh2aXNpdGVkTGlua1N0YWNrLCBsaW5rUGxhY2Vob2xkZXIpKSB7CiAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7CiAgICAgICAgd2FybigiQ2lyY3VsYXIgcmVmZXJlbmNlIGZvdW5kLiBcIiIgKyBsaW5rICsgIlwiIGlzIGFscmVhZHkgdmlzaXRlZCBpbiB0aGUgY2hhaW4gb2YgIiArIHZpc2l0ZWRMaW5rU3RhY2sucmV2ZXJzZSgpLmpvaW4oJyA8LSAnKSk7CiAgICAgIH0KCiAgICAgIHJldHVybiByZXQ7CiAgICB9CgogICAgdmlzaXRlZExpbmtTdGFjay5wdXNoKGxpbmtQbGFjZWhvbGRlcik7IC8vIFRyYW5zbGF0ZSB0aGUgbGluawoKICAgIHZhciB0cmFuc2xhdGVkID0gdGhpcy5faW50ZXJwb2xhdGUobG9jYWxlLCBtZXNzYWdlLCBsaW5rUGxhY2Vob2xkZXIsIGhvc3QsIGludGVycG9sYXRlTW9kZSA9PT0gJ3JhdycgPyAnc3RyaW5nJyA6IGludGVycG9sYXRlTW9kZSwgaW50ZXJwb2xhdGVNb2RlID09PSAncmF3JyA/IHVuZGVmaW5lZCA6IHZhbHVlcywgdmlzaXRlZExpbmtTdGFjayk7CgogICAgaWYgKHRoaXMuX2lzRmFsbGJhY2tSb290KHRyYW5zbGF0ZWQpKSB7CiAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmICF0aGlzLl9pc1NpbGVudFRyYW5zbGF0aW9uV2FybihsaW5rUGxhY2Vob2xkZXIpKSB7CiAgICAgICAgd2FybigiRmFsbCBiYWNrIHRvIHRyYW5zbGF0ZSB0aGUgbGluayBwbGFjZWhvbGRlciAnIiArIGxpbmtQbGFjZWhvbGRlciArICInIHdpdGggcm9vdCBsb2NhbGUuIik7CiAgICAgIH0KICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovCgoKICAgICAgaWYgKCF0aGlzLl9yb290KSB7CiAgICAgICAgdGhyb3cgRXJyb3IoJ3VuZXhwZWN0ZWQgZXJyb3InKTsKICAgICAgfQoKICAgICAgdmFyIHJvb3QgPSB0aGlzLl9yb290LiRpMThuOwogICAgICB0cmFuc2xhdGVkID0gcm9vdC5fdHJhbnNsYXRlKHJvb3QuX2dldE1lc3NhZ2VzKCksIHJvb3QubG9jYWxlLCByb290LmZhbGxiYWNrTG9jYWxlLCBsaW5rUGxhY2Vob2xkZXIsIGhvc3QsIGludGVycG9sYXRlTW9kZSwgdmFsdWVzKTsKICAgIH0KCiAgICB0cmFuc2xhdGVkID0gdGhpcy5fd2FybkRlZmF1bHQobG9jYWxlLCBsaW5rUGxhY2Vob2xkZXIsIHRyYW5zbGF0ZWQsIGhvc3QsIGlzQXJyYXkodmFsdWVzKSA/IHZhbHVlcyA6IFt2YWx1ZXNdLCBpbnRlcnBvbGF0ZU1vZGUpOwoKICAgIGlmICh0aGlzLl9tb2RpZmllcnMuaGFzT3duUHJvcGVydHkoZm9ybWF0dGVyTmFtZSkpIHsKICAgICAgdHJhbnNsYXRlZCA9IHRoaXMuX21vZGlmaWVyc1tmb3JtYXR0ZXJOYW1lXSh0cmFuc2xhdGVkKTsKICAgIH0gZWxzZSBpZiAoZGVmYXVsdE1vZGlmaWVycy5oYXNPd25Qcm9wZXJ0eShmb3JtYXR0ZXJOYW1lKSkgewogICAgICB0cmFuc2xhdGVkID0gZGVmYXVsdE1vZGlmaWVyc1tmb3JtYXR0ZXJOYW1lXSh0cmFuc2xhdGVkKTsKICAgIH0KCiAgICB2aXNpdGVkTGlua1N0YWNrLnBvcCgpOyAvLyBSZXBsYWNlIHRoZSBsaW5rIHdpdGggdGhlIHRyYW5zbGF0ZWQKCiAgICByZXQgPSAhdHJhbnNsYXRlZCA/IHJldCA6IHJldC5yZXBsYWNlKGxpbmssIHRyYW5zbGF0ZWQpOwogIH0KCiAgcmV0dXJuIHJldDsKfTsKClZ1ZUkxOG4ucHJvdG90eXBlLl9jcmVhdGVNZXNzYWdlQ29udGV4dCA9IGZ1bmN0aW9uIF9jcmVhdGVNZXNzYWdlQ29udGV4dCh2YWx1ZXMpIHsKICB2YXIgX2xpc3QgPSBpc0FycmF5KHZhbHVlcykgPyB2YWx1ZXMgOiBbXTsKCiAgdmFyIF9uYW1lZCA9IGlzT2JqZWN0KHZhbHVlcykgPyB2YWx1ZXMgOiB7fTsKCiAgdmFyIGxpc3QgPSBmdW5jdGlvbiBsaXN0KGluZGV4KSB7CiAgICByZXR1cm4gX2xpc3RbaW5kZXhdOwogIH07CgogIHZhciBuYW1lZCA9IGZ1bmN0aW9uIG5hbWVkKGtleSkgewogICAgcmV0dXJuIF9uYW1lZFtrZXldOwogIH07CgogIHJldHVybiB7CiAgICBsaXN0OiBsaXN0LAogICAgbmFtZWQ6IG5hbWVkCiAgfTsKfTsKClZ1ZUkxOG4ucHJvdG90eXBlLl9yZW5kZXIgPSBmdW5jdGlvbiBfcmVuZGVyKG1lc3NhZ2UsIGludGVycG9sYXRlTW9kZSwgdmFsdWVzLCBwYXRoKSB7CiAgaWYgKGlzRnVuY3Rpb24obWVzc2FnZSkpIHsKICAgIHJldHVybiBtZXNzYWdlKHRoaXMuX2NyZWF0ZU1lc3NhZ2VDb250ZXh0KHZhbHVlcykpOwogIH0KCiAgdmFyIHJldCA9IHRoaXMuX2Zvcm1hdHRlci5pbnRlcnBvbGF0ZShtZXNzYWdlLCB2YWx1ZXMsIHBhdGgpOyAvLyBJZiB0aGUgY3VzdG9tIGZvcm1hdHRlciByZWZ1c2VzIHRvIHdvcmsgLSBhcHBseSB0aGUgZGVmYXVsdCBvbmUKCgogIGlmICghcmV0KSB7CiAgICByZXQgPSBkZWZhdWx0Rm9ybWF0dGVyLmludGVycG9sYXRlKG1lc3NhZ2UsIHZhbHVlcywgcGF0aCk7CiAgfSAvLyBpZiBpbnRlcnBvbGF0ZU1vZGUgaXMgKipub3QqKiAnc3RyaW5nJyAoJ3JvdycpLAogIC8vIHJldHVybiB0aGUgY29tcGlsZWQgZGF0YSAoZS5nLiBbJ2ZvbycsIFZOb2RlLCAnYmFyJ10pIHdpdGggZm9ybWF0dGVyCgoKICByZXR1cm4gaW50ZXJwb2xhdGVNb2RlID09PSAnc3RyaW5nJyAmJiAhaXNTdHJpbmcocmV0KSA/IHJldC5qb2luKCcnKSA6IHJldDsKfTsKClZ1ZUkxOG4ucHJvdG90eXBlLl9hcHBlbmRJdGVtVG9DaGFpbiA9IGZ1bmN0aW9uIF9hcHBlbmRJdGVtVG9DaGFpbihjaGFpbiwgaXRlbSwgYmxvY2tzKSB7CiAgdmFyIGZvbGxvdyA9IGZhbHNlOwoKICBpZiAoIWluY2x1ZGVzKGNoYWluLCBpdGVtKSkgewogICAgZm9sbG93ID0gdHJ1ZTsKCiAgICBpZiAoaXRlbSkgewogICAgICBmb2xsb3cgPSBpdGVtW2l0ZW0ubGVuZ3RoIC0gMV0gIT09ICchJzsKICAgICAgaXRlbSA9IGl0ZW0ucmVwbGFjZSgvIS9nLCAnJyk7CiAgICAgIGNoYWluLnB1c2goaXRlbSk7CgogICAgICBpZiAoYmxvY2tzICYmIGJsb2Nrc1tpdGVtXSkgewogICAgICAgIGZvbGxvdyA9IGJsb2Nrc1tpdGVtXTsKICAgICAgfQogICAgfQogIH0KCiAgcmV0dXJuIGZvbGxvdzsKfTsKClZ1ZUkxOG4ucHJvdG90eXBlLl9hcHBlbmRMb2NhbGVUb0NoYWluID0gZnVuY3Rpb24gX2FwcGVuZExvY2FsZVRvQ2hhaW4oY2hhaW4sIGxvY2FsZSwgYmxvY2tzKSB7CiAgdmFyIGZvbGxvdzsKICB2YXIgdG9rZW5zID0gbG9jYWxlLnNwbGl0KCctJyk7CgogIGRvIHsKICAgIHZhciBpdGVtID0gdG9rZW5zLmpvaW4oJy0nKTsKICAgIGZvbGxvdyA9IHRoaXMuX2FwcGVuZEl0ZW1Ub0NoYWluKGNoYWluLCBpdGVtLCBibG9ja3MpOwogICAgdG9rZW5zLnNwbGljZSgtMSwgMSk7CiAgfSB3aGlsZSAodG9rZW5zLmxlbmd0aCAmJiBmb2xsb3cgPT09IHRydWUpOwoKICByZXR1cm4gZm9sbG93Owp9OwoKVnVlSTE4bi5wcm90b3R5cGUuX2FwcGVuZEJsb2NrVG9DaGFpbiA9IGZ1bmN0aW9uIF9hcHBlbmRCbG9ja1RvQ2hhaW4oY2hhaW4sIGJsb2NrLCBibG9ja3MpIHsKICB2YXIgZm9sbG93ID0gdHJ1ZTsKCiAgZm9yICh2YXIgaSA9IDA7IGkgPCBibG9jay5sZW5ndGggJiYgaXNCb29sZWFuKGZvbGxvdyk7IGkrKykgewogICAgdmFyIGxvY2FsZSA9IGJsb2NrW2ldOwoKICAgIGlmIChpc1N0cmluZyhsb2NhbGUpKSB7CiAgICAgIGZvbGxvdyA9IHRoaXMuX2FwcGVuZExvY2FsZVRvQ2hhaW4oY2hhaW4sIGxvY2FsZSwgYmxvY2tzKTsKICAgIH0KICB9CgogIHJldHVybiBmb2xsb3c7Cn07CgpWdWVJMThuLnByb3RvdHlwZS5fZ2V0TG9jYWxlQ2hhaW4gPSBmdW5jdGlvbiBfZ2V0TG9jYWxlQ2hhaW4oc3RhcnQsIGZhbGxiYWNrTG9jYWxlKSB7CiAgaWYgKHN0YXJ0ID09PSAnJykgewogICAgcmV0dXJuIFtdOwogIH0KCiAgaWYgKCF0aGlzLl9sb2NhbGVDaGFpbkNhY2hlKSB7CiAgICB0aGlzLl9sb2NhbGVDaGFpbkNhY2hlID0ge307CiAgfQoKICB2YXIgY2hhaW4gPSB0aGlzLl9sb2NhbGVDaGFpbkNhY2hlW3N0YXJ0XTsKCiAgaWYgKCFjaGFpbikgewogICAgaWYgKCFmYWxsYmFja0xvY2FsZSkgewogICAgICBmYWxsYmFja0xvY2FsZSA9IHRoaXMuZmFsbGJhY2tMb2NhbGU7CiAgICB9CgogICAgY2hhaW4gPSBbXTsgLy8gZmlyc3QgYmxvY2sgZGVmaW5lZCBieSBzdGFydAoKICAgIHZhciBibG9jayA9IFtzdGFydF07IC8vIHdoaWxlIGFueSBpbnRlcnZlbmluZyBibG9jayBmb3VuZAoKICAgIHdoaWxlIChpc0FycmF5KGJsb2NrKSkgewogICAgICBibG9jayA9IHRoaXMuX2FwcGVuZEJsb2NrVG9DaGFpbihjaGFpbiwgYmxvY2ssIGZhbGxiYWNrTG9jYWxlKTsKICAgIH0gLy8gbGFzdCBibG9jayBkZWZpbmVkIGJ5IGRlZmF1bHQKCgogICAgdmFyIGRlZmF1bHRzOwoKICAgIGlmIChpc0FycmF5KGZhbGxiYWNrTG9jYWxlKSkgewogICAgICBkZWZhdWx0cyA9IGZhbGxiYWNrTG9jYWxlOwogICAgfSBlbHNlIGlmIChpc09iamVjdChmYWxsYmFja0xvY2FsZSkpIHsKICAgICAgLyogJEZsb3dGaXhNZSAqLwogICAgICBpZiAoZmFsbGJhY2tMb2NhbGVbJ2RlZmF1bHQnXSkgewogICAgICAgIGRlZmF1bHRzID0gZmFsbGJhY2tMb2NhbGVbJ2RlZmF1bHQnXTsKICAgICAgfSBlbHNlIHsKICAgICAgICBkZWZhdWx0cyA9IG51bGw7CiAgICAgIH0KICAgIH0gZWxzZSB7CiAgICAgIGRlZmF1bHRzID0gZmFsbGJhY2tMb2NhbGU7CiAgICB9IC8vIGNvbnZlcnQgZGVmYXVsdHMgdG8gYXJyYXkKCgogICAgaWYgKGlzU3RyaW5nKGRlZmF1bHRzKSkgewogICAgICBibG9jayA9IFtkZWZhdWx0c107CiAgICB9IGVsc2UgewogICAgICBibG9jayA9IGRlZmF1bHRzOwogICAgfQoKICAgIGlmIChibG9jaykgewogICAgICB0aGlzLl9hcHBlbmRCbG9ja1RvQ2hhaW4oY2hhaW4sIGJsb2NrLCBudWxsKTsKICAgIH0KCiAgICB0aGlzLl9sb2NhbGVDaGFpbkNhY2hlW3N0YXJ0XSA9IGNoYWluOwogIH0KCiAgcmV0dXJuIGNoYWluOwp9OwoKVnVlSTE4bi5wcm90b3R5cGUuX3RyYW5zbGF0ZSA9IGZ1bmN0aW9uIF90cmFuc2xhdGUobWVzc2FnZXMsIGxvY2FsZSwgZmFsbGJhY2ssIGtleSwgaG9zdCwgaW50ZXJwb2xhdGVNb2RlLCBhcmdzKSB7CiAgdmFyIGNoYWluID0gdGhpcy5fZ2V0TG9jYWxlQ2hhaW4obG9jYWxlLCBmYWxsYmFjayk7CgogIHZhciByZXM7CgogIGZvciAodmFyIGkgPSAwOyBpIDwgY2hhaW4ubGVuZ3RoOyBpKyspIHsKICAgIHZhciBzdGVwID0gY2hhaW5baV07CiAgICByZXMgPSB0aGlzLl9pbnRlcnBvbGF0ZShzdGVwLCBtZXNzYWdlc1tzdGVwXSwga2V5LCBob3N0LCBpbnRlcnBvbGF0ZU1vZGUsIGFyZ3MsIFtrZXldKTsKCiAgICBpZiAoIWlzTnVsbChyZXMpKSB7CiAgICAgIGlmIChzdGVwICE9PSBsb2NhbGUgJiYgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiAhdGhpcy5faXNTaWxlbnRUcmFuc2xhdGlvbldhcm4oa2V5KSAmJiAhdGhpcy5faXNTaWxlbnRGYWxsYmFja1dhcm4oa2V5KSkgewogICAgICAgIHdhcm4oIkZhbGwgYmFjayB0byB0cmFuc2xhdGUgdGhlIGtleXBhdGggJyIgKyBrZXkgKyAiJyB3aXRoICciICsgc3RlcCArICInIGxvY2FsZS4iKTsKICAgICAgfQoKICAgICAgcmV0dXJuIHJlczsKICAgIH0KICB9CgogIHJldHVybiBudWxsOwp9OwoKVnVlSTE4bi5wcm90b3R5cGUuX3QgPSBmdW5jdGlvbiBfdChrZXksIF9sb2NhbGUsIG1lc3NhZ2VzLCBob3N0KSB7CiAgdmFyIHJlZjsKICB2YXIgdmFsdWVzID0gW10sCiAgICAgIGxlbiA9IGFyZ3VtZW50cy5sZW5ndGggLSA0OwoKICB3aGlsZSAobGVuLS0gPiAwKSB7CiAgICB2YWx1ZXNbbGVuXSA9IGFyZ3VtZW50c1tsZW4gKyA0XTsKICB9CgogIGlmICgha2V5KSB7CiAgICByZXR1cm4gJyc7CiAgfQoKICB2YXIgcGFyc2VkQXJncyA9IHBhcnNlQXJncy5hcHBseSh2b2lkIDAsIHZhbHVlcyk7CgogIGlmICh0aGlzLl9lc2NhcGVQYXJhbWV0ZXJIdG1sKSB7CiAgICBwYXJzZWRBcmdzLnBhcmFtcyA9IGVzY2FwZVBhcmFtcyhwYXJzZWRBcmdzLnBhcmFtcyk7CiAgfQoKICB2YXIgbG9jYWxlID0gcGFyc2VkQXJncy5sb2NhbGUgfHwgX2xvY2FsZTsKCiAgdmFyIHJldCA9IHRoaXMuX3RyYW5zbGF0ZShtZXNzYWdlcywgbG9jYWxlLCB0aGlzLmZhbGxiYWNrTG9jYWxlLCBrZXksIGhvc3QsICdzdHJpbmcnLCBwYXJzZWRBcmdzLnBhcmFtcyk7CgogIGlmICh0aGlzLl9pc0ZhbGxiYWNrUm9vdChyZXQpKSB7CiAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiAhdGhpcy5faXNTaWxlbnRUcmFuc2xhdGlvbldhcm4oa2V5KSAmJiAhdGhpcy5faXNTaWxlbnRGYWxsYmFja1dhcm4oa2V5KSkgewogICAgICB3YXJuKCJGYWxsIGJhY2sgdG8gdHJhbnNsYXRlIHRoZSBrZXlwYXRoICciICsga2V5ICsgIicgd2l0aCByb290IGxvY2FsZS4iKTsKICAgIH0KICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqLwoKCiAgICBpZiAoIXRoaXMuX3Jvb3QpIHsKICAgICAgdGhyb3cgRXJyb3IoJ3VuZXhwZWN0ZWQgZXJyb3InKTsKICAgIH0KCiAgICByZXR1cm4gKHJlZiA9IHRoaXMuX3Jvb3QpLiR0LmFwcGx5KHJlZiwgW2tleV0uY29uY2F0KHZhbHVlcykpOwogIH0gZWxzZSB7CiAgICByZXQgPSB0aGlzLl93YXJuRGVmYXVsdChsb2NhbGUsIGtleSwgcmV0LCBob3N0LCB2YWx1ZXMsICdzdHJpbmcnKTsKCiAgICBpZiAodGhpcy5fcG9zdFRyYW5zbGF0aW9uICYmIHJldCAhPT0gbnVsbCAmJiByZXQgIT09IHVuZGVmaW5lZCkgewogICAgICByZXQgPSB0aGlzLl9wb3N0VHJhbnNsYXRpb24ocmV0LCBrZXkpOwogICAgfQoKICAgIHJldHVybiByZXQ7CiAgfQp9OwoKVnVlSTE4bi5wcm90b3R5cGUudCA9IGZ1bmN0aW9uIHQoa2V5KSB7CiAgdmFyIHJlZjsKICB2YXIgdmFsdWVzID0gW10sCiAgICAgIGxlbiA9IGFyZ3VtZW50cy5sZW5ndGggLSAxOwoKICB3aGlsZSAobGVuLS0gPiAwKSB7CiAgICB2YWx1ZXNbbGVuXSA9IGFyZ3VtZW50c1tsZW4gKyAxXTsKICB9CgogIHJldHVybiAocmVmID0gdGhpcykuX3QuYXBwbHkocmVmLCBba2V5LCB0aGlzLmxvY2FsZSwgdGhpcy5fZ2V0TWVzc2FnZXMoKSwgbnVsbF0uY29uY2F0KHZhbHVlcykpOwp9OwoKVnVlSTE4bi5wcm90b3R5cGUuX2kgPSBmdW5jdGlvbiBfaShrZXksIGxvY2FsZSwgbWVzc2FnZXMsIGhvc3QsIHZhbHVlcykgewogIHZhciByZXQgPSB0aGlzLl90cmFuc2xhdGUobWVzc2FnZXMsIGxvY2FsZSwgdGhpcy5mYWxsYmFja0xvY2FsZSwga2V5LCBob3N0LCAncmF3JywgdmFsdWVzKTsKCiAgaWYgKHRoaXMuX2lzRmFsbGJhY2tSb290KHJldCkpIHsKICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmICF0aGlzLl9pc1NpbGVudFRyYW5zbGF0aW9uV2FybihrZXkpKSB7CiAgICAgIHdhcm4oIkZhbGwgYmFjayB0byBpbnRlcnBvbGF0ZSB0aGUga2V5cGF0aCAnIiArIGtleSArICInIHdpdGggcm9vdCBsb2NhbGUuIik7CiAgICB9CgogICAgaWYgKCF0aGlzLl9yb290KSB7CiAgICAgIHRocm93IEVycm9yKCd1bmV4cGVjdGVkIGVycm9yJyk7CiAgICB9CgogICAgcmV0dXJuIHRoaXMuX3Jvb3QuJGkxOG4uaShrZXksIGxvY2FsZSwgdmFsdWVzKTsKICB9IGVsc2UgewogICAgcmV0dXJuIHRoaXMuX3dhcm5EZWZhdWx0KGxvY2FsZSwga2V5LCByZXQsIGhvc3QsIFt2YWx1ZXNdLCAncmF3Jyk7CiAgfQp9OwoKVnVlSTE4bi5wcm90b3R5cGUuaSA9IGZ1bmN0aW9uIGkoa2V5LCBsb2NhbGUsIHZhbHVlcykgewogIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqLwogIGlmICgha2V5KSB7CiAgICByZXR1cm4gJyc7CiAgfQoKICBpZiAoIWlzU3RyaW5nKGxvY2FsZSkpIHsKICAgIGxvY2FsZSA9IHRoaXMubG9jYWxlOwogIH0KCiAgcmV0dXJuIHRoaXMuX2koa2V5LCBsb2NhbGUsIHRoaXMuX2dldE1lc3NhZ2VzKCksIG51bGwsIHZhbHVlcyk7Cn07CgpWdWVJMThuLnByb3RvdHlwZS5fdGMgPSBmdW5jdGlvbiBfdGMoa2V5LCBfbG9jYWxlLCBtZXNzYWdlcywgaG9zdCwgY2hvaWNlKSB7CiAgdmFyIHJlZjsKICB2YXIgdmFsdWVzID0gW10sCiAgICAgIGxlbiA9IGFyZ3VtZW50cy5sZW5ndGggLSA1OwoKICB3aGlsZSAobGVuLS0gPiAwKSB7CiAgICB2YWx1ZXNbbGVuXSA9IGFyZ3VtZW50c1tsZW4gKyA1XTsKICB9CgogIGlmICgha2V5KSB7CiAgICByZXR1cm4gJyc7CiAgfQoKICBpZiAoY2hvaWNlID09PSB1bmRlZmluZWQpIHsKICAgIGNob2ljZSA9IDE7CiAgfQoKICB2YXIgcHJlZGVmaW5lZCA9IHsKICAgICdjb3VudCc6IGNob2ljZSwKICAgICduJzogY2hvaWNlCiAgfTsKICB2YXIgcGFyc2VkQXJncyA9IHBhcnNlQXJncy5hcHBseSh2b2lkIDAsIHZhbHVlcyk7CiAgcGFyc2VkQXJncy5wYXJhbXMgPSBPYmplY3QuYXNzaWduKHByZWRlZmluZWQsIHBhcnNlZEFyZ3MucGFyYW1zKTsKICB2YWx1ZXMgPSBwYXJzZWRBcmdzLmxvY2FsZSA9PT0gbnVsbCA/IFtwYXJzZWRBcmdzLnBhcmFtc10gOiBbcGFyc2VkQXJncy5sb2NhbGUsIHBhcnNlZEFyZ3MucGFyYW1zXTsKICByZXR1cm4gdGhpcy5mZXRjaENob2ljZSgocmVmID0gdGhpcykuX3QuYXBwbHkocmVmLCBba2V5LCBfbG9jYWxlLCBtZXNzYWdlcywgaG9zdF0uY29uY2F0KHZhbHVlcykpLCBjaG9pY2UpOwp9OwoKVnVlSTE4bi5wcm90b3R5cGUuZmV0Y2hDaG9pY2UgPSBmdW5jdGlvbiBmZXRjaENob2ljZShtZXNzYWdlLCBjaG9pY2UpIHsKICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi8KICBpZiAoIW1lc3NhZ2UgfHwgIWlzU3RyaW5nKG1lc3NhZ2UpKSB7CiAgICByZXR1cm4gbnVsbDsKICB9CgogIHZhciBjaG9pY2VzID0gbWVzc2FnZS5zcGxpdCgnfCcpOwogIGNob2ljZSA9IHRoaXMuZ2V0Q2hvaWNlSW5kZXgoY2hvaWNlLCBjaG9pY2VzLmxlbmd0aCk7CgogIGlmICghY2hvaWNlc1tjaG9pY2VdKSB7CiAgICByZXR1cm4gbWVzc2FnZTsKICB9CgogIHJldHVybiBjaG9pY2VzW2Nob2ljZV0udHJpbSgpOwp9OwoKVnVlSTE4bi5wcm90b3R5cGUudGMgPSBmdW5jdGlvbiB0YyhrZXksIGNob2ljZSkgewogIHZhciByZWY7CiAgdmFyIHZhbHVlcyA9IFtdLAogICAgICBsZW4gPSBhcmd1bWVudHMubGVuZ3RoIC0gMjsKCiAgd2hpbGUgKGxlbi0tID4gMCkgewogICAgdmFsdWVzW2xlbl0gPSBhcmd1bWVudHNbbGVuICsgMl07CiAgfQoKICByZXR1cm4gKHJlZiA9IHRoaXMpLl90Yy5hcHBseShyZWYsIFtrZXksIHRoaXMubG9jYWxlLCB0aGlzLl9nZXRNZXNzYWdlcygpLCBudWxsLCBjaG9pY2VdLmNvbmNhdCh2YWx1ZXMpKTsKfTsKClZ1ZUkxOG4ucHJvdG90eXBlLl90ZSA9IGZ1bmN0aW9uIF90ZShrZXksIGxvY2FsZSwgbWVzc2FnZXMpIHsKICB2YXIgYXJncyA9IFtdLAogICAgICBsZW4gPSBhcmd1bWVudHMubGVuZ3RoIC0gMzsKCiAgd2hpbGUgKGxlbi0tID4gMCkgewogICAgYXJnc1tsZW5dID0gYXJndW1lbnRzW2xlbiArIDNdOwogIH0KCiAgdmFyIF9sb2NhbGUgPSBwYXJzZUFyZ3MuYXBwbHkodm9pZCAwLCBhcmdzKS5sb2NhbGUgfHwgbG9jYWxlOwoKICByZXR1cm4gdGhpcy5fZXhpc3QobWVzc2FnZXNbX2xvY2FsZV0sIGtleSk7Cn07CgpWdWVJMThuLnByb3RvdHlwZS50ZSA9IGZ1bmN0aW9uIHRlKGtleSwgbG9jYWxlKSB7CiAgcmV0dXJuIHRoaXMuX3RlKGtleSwgdGhpcy5sb2NhbGUsIHRoaXMuX2dldE1lc3NhZ2VzKCksIGxvY2FsZSk7Cn07CgpWdWVJMThuLnByb3RvdHlwZS5nZXRMb2NhbGVNZXNzYWdlID0gZnVuY3Rpb24gZ2V0TG9jYWxlTWVzc2FnZShsb2NhbGUpIHsKICByZXR1cm4gbG9vc2VDbG9uZSh0aGlzLl92bS5tZXNzYWdlc1tsb2NhbGVdIHx8IHt9KTsKfTsKClZ1ZUkxOG4ucHJvdG90eXBlLnNldExvY2FsZU1lc3NhZ2UgPSBmdW5jdGlvbiBzZXRMb2NhbGVNZXNzYWdlKGxvY2FsZSwgbWVzc2FnZSkgewogIGlmICh0aGlzLl93YXJuSHRtbEluTWVzc2FnZSA9PT0gJ3dhcm4nIHx8IHRoaXMuX3dhcm5IdG1sSW5NZXNzYWdlID09PSAnZXJyb3InKSB7CiAgICB0aGlzLl9jaGVja0xvY2FsZU1lc3NhZ2UobG9jYWxlLCB0aGlzLl93YXJuSHRtbEluTWVzc2FnZSwgbWVzc2FnZSk7CiAgfQoKICB0aGlzLl92bS4kc2V0KHRoaXMuX3ZtLm1lc3NhZ2VzLCBsb2NhbGUsIG1lc3NhZ2UpOwp9OwoKVnVlSTE4bi5wcm90b3R5cGUubWVyZ2VMb2NhbGVNZXNzYWdlID0gZnVuY3Rpb24gbWVyZ2VMb2NhbGVNZXNzYWdlKGxvY2FsZSwgbWVzc2FnZSkgewogIGlmICh0aGlzLl93YXJuSHRtbEluTWVzc2FnZSA9PT0gJ3dhcm4nIHx8IHRoaXMuX3dhcm5IdG1sSW5NZXNzYWdlID09PSAnZXJyb3InKSB7CiAgICB0aGlzLl9jaGVja0xvY2FsZU1lc3NhZ2UobG9jYWxlLCB0aGlzLl93YXJuSHRtbEluTWVzc2FnZSwgbWVzc2FnZSk7CiAgfQoKICB0aGlzLl92bS4kc2V0KHRoaXMuX3ZtLm1lc3NhZ2VzLCBsb2NhbGUsIG1lcmdlKHR5cGVvZiB0aGlzLl92bS5tZXNzYWdlc1tsb2NhbGVdICE9PSAndW5kZWZpbmVkJyAmJiBPYmplY3Qua2V5cyh0aGlzLl92bS5tZXNzYWdlc1tsb2NhbGVdKS5sZW5ndGggPyB0aGlzLl92bS5tZXNzYWdlc1tsb2NhbGVdIDoge30sIG1lc3NhZ2UpKTsKfTsKClZ1ZUkxOG4ucHJvdG90eXBlLmdldERhdGVUaW1lRm9ybWF0ID0gZnVuY3Rpb24gZ2V0RGF0ZVRpbWVGb3JtYXQobG9jYWxlKSB7CiAgcmV0dXJuIGxvb3NlQ2xvbmUodGhpcy5fdm0uZGF0ZVRpbWVGb3JtYXRzW2xvY2FsZV0gfHwge30pOwp9OwoKVnVlSTE4bi5wcm90b3R5cGUuc2V0RGF0ZVRpbWVGb3JtYXQgPSBmdW5jdGlvbiBzZXREYXRlVGltZUZvcm1hdChsb2NhbGUsIGZvcm1hdCkgewogIHRoaXMuX3ZtLiRzZXQodGhpcy5fdm0uZGF0ZVRpbWVGb3JtYXRzLCBsb2NhbGUsIGZvcm1hdCk7CgogIHRoaXMuX2NsZWFyRGF0ZVRpbWVGb3JtYXQobG9jYWxlLCBmb3JtYXQpOwp9OwoKVnVlSTE4bi5wcm90b3R5cGUubWVyZ2VEYXRlVGltZUZvcm1hdCA9IGZ1bmN0aW9uIG1lcmdlRGF0ZVRpbWVGb3JtYXQobG9jYWxlLCBmb3JtYXQpIHsKICB0aGlzLl92bS4kc2V0KHRoaXMuX3ZtLmRhdGVUaW1lRm9ybWF0cywgbG9jYWxlLCBtZXJnZSh0aGlzLl92bS5kYXRlVGltZUZvcm1hdHNbbG9jYWxlXSB8fCB7fSwgZm9ybWF0KSk7CgogIHRoaXMuX2NsZWFyRGF0ZVRpbWVGb3JtYXQobG9jYWxlLCBmb3JtYXQpOwp9OwoKVnVlSTE4bi5wcm90b3R5cGUuX2NsZWFyRGF0ZVRpbWVGb3JtYXQgPSBmdW5jdGlvbiBfY2xlYXJEYXRlVGltZUZvcm1hdChsb2NhbGUsIGZvcm1hdCkgewogIGZvciAodmFyIGtleSBpbiBmb3JtYXQpIHsKICAgIHZhciBpZCA9IGxvY2FsZSArICJfXyIgKyBrZXk7CgogICAgaWYgKCF0aGlzLl9kYXRlVGltZUZvcm1hdHRlcnMuaGFzT3duUHJvcGVydHkoaWQpKSB7CiAgICAgIGNvbnRpbnVlOwogICAgfQoKICAgIGRlbGV0ZSB0aGlzLl9kYXRlVGltZUZvcm1hdHRlcnNbaWRdOwogIH0KfTsKClZ1ZUkxOG4ucHJvdG90eXBlLl9sb2NhbGl6ZURhdGVUaW1lID0gZnVuY3Rpb24gX2xvY2FsaXplRGF0ZVRpbWUodmFsdWUsIGxvY2FsZSwgZmFsbGJhY2ssIGRhdGVUaW1lRm9ybWF0cywga2V5KSB7CiAgdmFyIF9sb2NhbGUgPSBsb2NhbGU7CiAgdmFyIGZvcm1hdHMgPSBkYXRlVGltZUZvcm1hdHNbX2xvY2FsZV07CgogIHZhciBjaGFpbiA9IHRoaXMuX2dldExvY2FsZUNoYWluKGxvY2FsZSwgZmFsbGJhY2spOwoKICBmb3IgKHZhciBpID0gMDsgaSA8IGNoYWluLmxlbmd0aDsgaSsrKSB7CiAgICB2YXIgY3VycmVudCA9IF9sb2NhbGU7CiAgICB2YXIgc3RlcCA9IGNoYWluW2ldOwogICAgZm9ybWF0cyA9IGRhdGVUaW1lRm9ybWF0c1tzdGVwXTsKICAgIF9sb2NhbGUgPSBzdGVwOyAvLyBmYWxsYmFjayBsb2NhbGUKCiAgICBpZiAoaXNOdWxsKGZvcm1hdHMpIHx8IGlzTnVsbChmb3JtYXRzW2tleV0pKSB7CiAgICAgIGlmIChzdGVwICE9PSBsb2NhbGUgJiYgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiAhdGhpcy5faXNTaWxlbnRUcmFuc2xhdGlvbldhcm4oa2V5KSAmJiAhdGhpcy5faXNTaWxlbnRGYWxsYmFja1dhcm4oa2V5KSkgewogICAgICAgIHdhcm4oIkZhbGwgYmFjayB0byAnIiArIHN0ZXAgKyAiJyBkYXRldGltZSBmb3JtYXRzIGZyb20gJyIgKyBjdXJyZW50ICsgIicgZGF0ZXRpbWUgZm9ybWF0cy4iKTsKICAgICAgfQogICAgfSBlbHNlIHsKICAgICAgYnJlYWs7CiAgICB9CiAgfQoKICBpZiAoaXNOdWxsKGZvcm1hdHMpIHx8IGlzTnVsbChmb3JtYXRzW2tleV0pKSB7CiAgICByZXR1cm4gbnVsbDsKICB9IGVsc2UgewogICAgdmFyIGZvcm1hdCA9IGZvcm1hdHNba2V5XTsKICAgIHZhciBpZCA9IF9sb2NhbGUgKyAiX18iICsga2V5OwogICAgdmFyIGZvcm1hdHRlciA9IHRoaXMuX2RhdGVUaW1lRm9ybWF0dGVyc1tpZF07CgogICAgaWYgKCFmb3JtYXR0ZXIpIHsKICAgICAgZm9ybWF0dGVyID0gdGhpcy5fZGF0ZVRpbWVGb3JtYXR0ZXJzW2lkXSA9IG5ldyBJbnRsLkRhdGVUaW1lRm9ybWF0KF9sb2NhbGUsIGZvcm1hdCk7CiAgICB9CgogICAgcmV0dXJuIGZvcm1hdHRlci5mb3JtYXQodmFsdWUpOwogIH0KfTsKClZ1ZUkxOG4ucHJvdG90eXBlLl9kID0gZnVuY3Rpb24gX2QodmFsdWUsIGxvY2FsZSwga2V5KSB7CiAgLyogaXN0YW5idWwgaWdub3JlIGlmICovCiAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgIVZ1ZUkxOG4uYXZhaWxhYmlsaXRpZXMuZGF0ZVRpbWVGb3JtYXQpIHsKICAgIHdhcm4oJ0Nhbm5vdCBmb3JtYXQgYSBEYXRlIHZhbHVlIGR1ZSB0byBub3Qgc3VwcG9ydGVkIEludGwuRGF0ZVRpbWVGb3JtYXQuJyk7CiAgICByZXR1cm4gJyc7CiAgfQoKICBpZiAoIWtleSkgewogICAgcmV0dXJuIG5ldyBJbnRsLkRhdGVUaW1lRm9ybWF0KGxvY2FsZSkuZm9ybWF0KHZhbHVlKTsKICB9CgogIHZhciByZXQgPSB0aGlzLl9sb2NhbGl6ZURhdGVUaW1lKHZhbHVlLCBsb2NhbGUsIHRoaXMuZmFsbGJhY2tMb2NhbGUsIHRoaXMuX2dldERhdGVUaW1lRm9ybWF0cygpLCBrZXkpOwoKICBpZiAodGhpcy5faXNGYWxsYmFja1Jvb3QocmV0KSkgewogICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgIXRoaXMuX2lzU2lsZW50VHJhbnNsYXRpb25XYXJuKGtleSkgJiYgIXRoaXMuX2lzU2lsZW50RmFsbGJhY2tXYXJuKGtleSkpIHsKICAgICAgd2FybigiRmFsbCBiYWNrIHRvIGRhdGV0aW1lIGxvY2FsaXphdGlvbiBvZiByb290OiBrZXkgJyIgKyBrZXkgKyAiJy4iKTsKICAgIH0KICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqLwoKCiAgICBpZiAoIXRoaXMuX3Jvb3QpIHsKICAgICAgdGhyb3cgRXJyb3IoJ3VuZXhwZWN0ZWQgZXJyb3InKTsKICAgIH0KCiAgICByZXR1cm4gdGhpcy5fcm9vdC4kaTE4bi5kKHZhbHVlLCBrZXksIGxvY2FsZSk7CiAgfSBlbHNlIHsKICAgIHJldHVybiByZXQgfHwgJyc7CiAgfQp9OwoKVnVlSTE4bi5wcm90b3R5cGUuZCA9IGZ1bmN0aW9uIGQodmFsdWUpIHsKICB2YXIgYXJncyA9IFtdLAogICAgICBsZW4gPSBhcmd1bWVudHMubGVuZ3RoIC0gMTsKCiAgd2hpbGUgKGxlbi0tID4gMCkgewogICAgYXJnc1tsZW5dID0gYXJndW1lbnRzW2xlbiArIDFdOwogIH0KCiAgdmFyIGxvY2FsZSA9IHRoaXMubG9jYWxlOwogIHZhciBrZXkgPSBudWxsOwoKICBpZiAoYXJncy5sZW5ndGggPT09IDEpIHsKICAgIGlmIChpc1N0cmluZyhhcmdzWzBdKSkgewogICAgICBrZXkgPSBhcmdzWzBdOwogICAgfSBlbHNlIGlmIChpc09iamVjdChhcmdzWzBdKSkgewogICAgICBpZiAoYXJnc1swXS5sb2NhbGUpIHsKICAgICAgICBsb2NhbGUgPSBhcmdzWzBdLmxvY2FsZTsKICAgICAgfQoKICAgICAgaWYgKGFyZ3NbMF0ua2V5KSB7CiAgICAgICAga2V5ID0gYXJnc1swXS5rZXk7CiAgICAgIH0KICAgIH0KICB9IGVsc2UgaWYgKGFyZ3MubGVuZ3RoID09PSAyKSB7CiAgICBpZiAoaXNTdHJpbmcoYXJnc1swXSkpIHsKICAgICAga2V5ID0gYXJnc1swXTsKICAgIH0KCiAgICBpZiAoaXNTdHJpbmcoYXJnc1sxXSkpIHsKICAgICAgbG9jYWxlID0gYXJnc1sxXTsKICAgIH0KICB9CgogIHJldHVybiB0aGlzLl9kKHZhbHVlLCBsb2NhbGUsIGtleSk7Cn07CgpWdWVJMThuLnByb3RvdHlwZS5nZXROdW1iZXJGb3JtYXQgPSBmdW5jdGlvbiBnZXROdW1iZXJGb3JtYXQobG9jYWxlKSB7CiAgcmV0dXJuIGxvb3NlQ2xvbmUodGhpcy5fdm0ubnVtYmVyRm9ybWF0c1tsb2NhbGVdIHx8IHt9KTsKfTsKClZ1ZUkxOG4ucHJvdG90eXBlLnNldE51bWJlckZvcm1hdCA9IGZ1bmN0aW9uIHNldE51bWJlckZvcm1hdChsb2NhbGUsIGZvcm1hdCkgewogIHRoaXMuX3ZtLiRzZXQodGhpcy5fdm0ubnVtYmVyRm9ybWF0cywgbG9jYWxlLCBmb3JtYXQpOwoKICB0aGlzLl9jbGVhck51bWJlckZvcm1hdChsb2NhbGUsIGZvcm1hdCk7Cn07CgpWdWVJMThuLnByb3RvdHlwZS5tZXJnZU51bWJlckZvcm1hdCA9IGZ1bmN0aW9uIG1lcmdlTnVtYmVyRm9ybWF0KGxvY2FsZSwgZm9ybWF0KSB7CiAgdGhpcy5fdm0uJHNldCh0aGlzLl92bS5udW1iZXJGb3JtYXRzLCBsb2NhbGUsIG1lcmdlKHRoaXMuX3ZtLm51bWJlckZvcm1hdHNbbG9jYWxlXSB8fCB7fSwgZm9ybWF0KSk7CgogIHRoaXMuX2NsZWFyTnVtYmVyRm9ybWF0KGxvY2FsZSwgZm9ybWF0KTsKfTsKClZ1ZUkxOG4ucHJvdG90eXBlLl9jbGVhck51bWJlckZvcm1hdCA9IGZ1bmN0aW9uIF9jbGVhck51bWJlckZvcm1hdChsb2NhbGUsIGZvcm1hdCkgewogIGZvciAodmFyIGtleSBpbiBmb3JtYXQpIHsKICAgIHZhciBpZCA9IGxvY2FsZSArICJfXyIgKyBrZXk7CgogICAgaWYgKCF0aGlzLl9udW1iZXJGb3JtYXR0ZXJzLmhhc093blByb3BlcnR5KGlkKSkgewogICAgICBjb250aW51ZTsKICAgIH0KCiAgICBkZWxldGUgdGhpcy5fbnVtYmVyRm9ybWF0dGVyc1tpZF07CiAgfQp9OwoKVnVlSTE4bi5wcm90b3R5cGUuX2dldE51bWJlckZvcm1hdHRlciA9IGZ1bmN0aW9uIF9nZXROdW1iZXJGb3JtYXR0ZXIodmFsdWUsIGxvY2FsZSwgZmFsbGJhY2ssIG51bWJlckZvcm1hdHMsIGtleSwgb3B0aW9ucykgewogIHZhciBfbG9jYWxlID0gbG9jYWxlOwogIHZhciBmb3JtYXRzID0gbnVtYmVyRm9ybWF0c1tfbG9jYWxlXTsKCiAgdmFyIGNoYWluID0gdGhpcy5fZ2V0TG9jYWxlQ2hhaW4obG9jYWxlLCBmYWxsYmFjayk7CgogIGZvciAodmFyIGkgPSAwOyBpIDwgY2hhaW4ubGVuZ3RoOyBpKyspIHsKICAgIHZhciBjdXJyZW50ID0gX2xvY2FsZTsKICAgIHZhciBzdGVwID0gY2hhaW5baV07CiAgICBmb3JtYXRzID0gbnVtYmVyRm9ybWF0c1tzdGVwXTsKICAgIF9sb2NhbGUgPSBzdGVwOyAvLyBmYWxsYmFjayBsb2NhbGUKCiAgICBpZiAoaXNOdWxsKGZvcm1hdHMpIHx8IGlzTnVsbChmb3JtYXRzW2tleV0pKSB7CiAgICAgIGlmIChzdGVwICE9PSBsb2NhbGUgJiYgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiAhdGhpcy5faXNTaWxlbnRUcmFuc2xhdGlvbldhcm4oa2V5KSAmJiAhdGhpcy5faXNTaWxlbnRGYWxsYmFja1dhcm4oa2V5KSkgewogICAgICAgIHdhcm4oIkZhbGwgYmFjayB0byAnIiArIHN0ZXAgKyAiJyBudW1iZXIgZm9ybWF0cyBmcm9tICciICsgY3VycmVudCArICInIG51bWJlciBmb3JtYXRzLiIpOwogICAgICB9CiAgICB9IGVsc2UgewogICAgICBicmVhazsKICAgIH0KICB9CgogIGlmIChpc051bGwoZm9ybWF0cykgfHwgaXNOdWxsKGZvcm1hdHNba2V5XSkpIHsKICAgIHJldHVybiBudWxsOwogIH0gZWxzZSB7CiAgICB2YXIgZm9ybWF0ID0gZm9ybWF0c1trZXldOwogICAgdmFyIGZvcm1hdHRlcjsKCiAgICBpZiAob3B0aW9ucykgewogICAgICAvLyBJZiBvcHRpb25zIHNwZWNpZmllZCAtIGNyZWF0ZSBvbmUgdGltZSBudW1iZXIgZm9ybWF0dGVyCiAgICAgIGZvcm1hdHRlciA9IG5ldyBJbnRsLk51bWJlckZvcm1hdChfbG9jYWxlLCBPYmplY3QuYXNzaWduKHt9LCBmb3JtYXQsIG9wdGlvbnMpKTsKICAgIH0gZWxzZSB7CiAgICAgIHZhciBpZCA9IF9sb2NhbGUgKyAiX18iICsga2V5OwogICAgICBmb3JtYXR0ZXIgPSB0aGlzLl9udW1iZXJGb3JtYXR0ZXJzW2lkXTsKCiAgICAgIGlmICghZm9ybWF0dGVyKSB7CiAgICAgICAgZm9ybWF0dGVyID0gdGhpcy5fbnVtYmVyRm9ybWF0dGVyc1tpZF0gPSBuZXcgSW50bC5OdW1iZXJGb3JtYXQoX2xvY2FsZSwgZm9ybWF0KTsKICAgICAgfQogICAgfQoKICAgIHJldHVybiBmb3JtYXR0ZXI7CiAgfQp9OwoKVnVlSTE4bi5wcm90b3R5cGUuX24gPSBmdW5jdGlvbiBfbih2YWx1ZSwgbG9jYWxlLCBrZXksIG9wdGlvbnMpIHsKICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi8KICBpZiAoIVZ1ZUkxOG4uYXZhaWxhYmlsaXRpZXMubnVtYmVyRm9ybWF0KSB7CiAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgewogICAgICB3YXJuKCdDYW5ub3QgZm9ybWF0IGEgTnVtYmVyIHZhbHVlIGR1ZSB0byBub3Qgc3VwcG9ydGVkIEludGwuTnVtYmVyRm9ybWF0LicpOwogICAgfQoKICAgIHJldHVybiAnJzsKICB9CgogIGlmICgha2V5KSB7CiAgICB2YXIgbmYgPSAhb3B0aW9ucyA/IG5ldyBJbnRsLk51bWJlckZvcm1hdChsb2NhbGUpIDogbmV3IEludGwuTnVtYmVyRm9ybWF0KGxvY2FsZSwgb3B0aW9ucyk7CiAgICByZXR1cm4gbmYuZm9ybWF0KHZhbHVlKTsKICB9CgogIHZhciBmb3JtYXR0ZXIgPSB0aGlzLl9nZXROdW1iZXJGb3JtYXR0ZXIodmFsdWUsIGxvY2FsZSwgdGhpcy5mYWxsYmFja0xvY2FsZSwgdGhpcy5fZ2V0TnVtYmVyRm9ybWF0cygpLCBrZXksIG9wdGlvbnMpOwoKICB2YXIgcmV0ID0gZm9ybWF0dGVyICYmIGZvcm1hdHRlci5mb3JtYXQodmFsdWUpOwoKICBpZiAodGhpcy5faXNGYWxsYmFja1Jvb3QocmV0KSkgewogICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgIXRoaXMuX2lzU2lsZW50VHJhbnNsYXRpb25XYXJuKGtleSkgJiYgIXRoaXMuX2lzU2lsZW50RmFsbGJhY2tXYXJuKGtleSkpIHsKICAgICAgd2FybigiRmFsbCBiYWNrIHRvIG51bWJlciBsb2NhbGl6YXRpb24gb2Ygcm9vdDoga2V5ICciICsga2V5ICsgIicuIik7CiAgICB9CiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi8KCgogICAgaWYgKCF0aGlzLl9yb290KSB7CiAgICAgIHRocm93IEVycm9yKCd1bmV4cGVjdGVkIGVycm9yJyk7CiAgICB9CgogICAgcmV0dXJuIHRoaXMuX3Jvb3QuJGkxOG4ubih2YWx1ZSwgT2JqZWN0LmFzc2lnbih7fSwgewogICAgICBrZXk6IGtleSwKICAgICAgbG9jYWxlOiBsb2NhbGUKICAgIH0sIG9wdGlvbnMpKTsKICB9IGVsc2UgewogICAgcmV0dXJuIHJldCB8fCAnJzsKICB9Cn07CgpWdWVJMThuLnByb3RvdHlwZS5uID0gZnVuY3Rpb24gbih2YWx1ZSkgewogIHZhciBhcmdzID0gW10sCiAgICAgIGxlbiA9IGFyZ3VtZW50cy5sZW5ndGggLSAxOwoKICB3aGlsZSAobGVuLS0gPiAwKSB7CiAgICBhcmdzW2xlbl0gPSBhcmd1bWVudHNbbGVuICsgMV07CiAgfQoKICB2YXIgbG9jYWxlID0gdGhpcy5sb2NhbGU7CiAgdmFyIGtleSA9IG51bGw7CiAgdmFyIG9wdGlvbnMgPSBudWxsOwoKICBpZiAoYXJncy5sZW5ndGggPT09IDEpIHsKICAgIGlmIChpc1N0cmluZyhhcmdzWzBdKSkgewogICAgICBrZXkgPSBhcmdzWzBdOwogICAgfSBlbHNlIGlmIChpc09iamVjdChhcmdzWzBdKSkgewogICAgICBpZiAoYXJnc1swXS5sb2NhbGUpIHsKICAgICAgICBsb2NhbGUgPSBhcmdzWzBdLmxvY2FsZTsKICAgICAgfQoKICAgICAgaWYgKGFyZ3NbMF0ua2V5KSB7CiAgICAgICAga2V5ID0gYXJnc1swXS5rZXk7CiAgICAgIH0gLy8gRmlsdGVyIG91dCBudW1iZXIgZm9ybWF0IG9wdGlvbnMgb25seQoKCiAgICAgIG9wdGlvbnMgPSBPYmplY3Qua2V5cyhhcmdzWzBdKS5yZWR1Y2UoZnVuY3Rpb24gKGFjYywga2V5KSB7CiAgICAgICAgdmFyIG9iajsKCiAgICAgICAgaWYgKGluY2x1ZGVzKG51bWJlckZvcm1hdEtleXMsIGtleSkpIHsKICAgICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKHt9LCBhY2MsIChvYmogPSB7fSwgb2JqW2tleV0gPSBhcmdzWzBdW2tleV0sIG9iaikpOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIGFjYzsKICAgICAgfSwgbnVsbCk7CiAgICB9CiAgfSBlbHNlIGlmIChhcmdzLmxlbmd0aCA9PT0gMikgewogICAgaWYgKGlzU3RyaW5nKGFyZ3NbMF0pKSB7CiAgICAgIGtleSA9IGFyZ3NbMF07CiAgICB9CgogICAgaWYgKGlzU3RyaW5nKGFyZ3NbMV0pKSB7CiAgICAgIGxvY2FsZSA9IGFyZ3NbMV07CiAgICB9CiAgfQoKICByZXR1cm4gdGhpcy5fbih2YWx1ZSwgbG9jYWxlLCBrZXksIG9wdGlvbnMpOwp9OwoKVnVlSTE4bi5wcm90b3R5cGUuX250cCA9IGZ1bmN0aW9uIF9udHAodmFsdWUsIGxvY2FsZSwga2V5LCBvcHRpb25zKSB7CiAgLyogaXN0YW5idWwgaWdub3JlIGlmICovCiAgaWYgKCFWdWVJMThuLmF2YWlsYWJpbGl0aWVzLm51bWJlckZvcm1hdCkgewogICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHsKICAgICAgd2FybignQ2Fubm90IGZvcm1hdCB0byBwYXJ0cyBhIE51bWJlciB2YWx1ZSBkdWUgdG8gbm90IHN1cHBvcnRlZCBJbnRsLk51bWJlckZvcm1hdC4nKTsKICAgIH0KCiAgICByZXR1cm4gW107CiAgfQoKICBpZiAoIWtleSkgewogICAgdmFyIG5mID0gIW9wdGlvbnMgPyBuZXcgSW50bC5OdW1iZXJGb3JtYXQobG9jYWxlKSA6IG5ldyBJbnRsLk51bWJlckZvcm1hdChsb2NhbGUsIG9wdGlvbnMpOwogICAgcmV0dXJuIG5mLmZvcm1hdFRvUGFydHModmFsdWUpOwogIH0KCiAgdmFyIGZvcm1hdHRlciA9IHRoaXMuX2dldE51bWJlckZvcm1hdHRlcih2YWx1ZSwgbG9jYWxlLCB0aGlzLmZhbGxiYWNrTG9jYWxlLCB0aGlzLl9nZXROdW1iZXJGb3JtYXRzKCksIGtleSwgb3B0aW9ucyk7CgogIHZhciByZXQgPSBmb3JtYXR0ZXIgJiYgZm9ybWF0dGVyLmZvcm1hdFRvUGFydHModmFsdWUpOwoKICBpZiAodGhpcy5faXNGYWxsYmFja1Jvb3QocmV0KSkgewogICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgIXRoaXMuX2lzU2lsZW50VHJhbnNsYXRpb25XYXJuKGtleSkpIHsKICAgICAgd2FybigiRmFsbCBiYWNrIHRvIGZvcm1hdCBudW1iZXIgdG8gcGFydHMgb2Ygcm9vdDoga2V5ICciICsga2V5ICsgIicgLiIpOwogICAgfQogICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovCgoKICAgIGlmICghdGhpcy5fcm9vdCkgewogICAgICB0aHJvdyBFcnJvcigndW5leHBlY3RlZCBlcnJvcicpOwogICAgfQoKICAgIHJldHVybiB0aGlzLl9yb290LiRpMThuLl9udHAodmFsdWUsIGxvY2FsZSwga2V5LCBvcHRpb25zKTsKICB9IGVsc2UgewogICAgcmV0dXJuIHJldCB8fCBbXTsKICB9Cn07CgpPYmplY3QuZGVmaW5lUHJvcGVydGllcyhWdWVJMThuLnByb3RvdHlwZSwgcHJvdG90eXBlQWNjZXNzb3JzKTsKdmFyIGF2YWlsYWJpbGl0aWVzOyAvLyAkRmxvd0ZpeE1lCgpPYmplY3QuZGVmaW5lUHJvcGVydHkoVnVlSTE4biwgJ2F2YWlsYWJpbGl0aWVzJywgewogIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgaWYgKCFhdmFpbGFiaWxpdGllcykgewogICAgICB2YXIgaW50bERlZmluZWQgPSB0eXBlb2YgSW50bCAhPT0gJ3VuZGVmaW5lZCc7CiAgICAgIGF2YWlsYWJpbGl0aWVzID0gewogICAgICAgIGRhdGVUaW1lRm9ybWF0OiBpbnRsRGVmaW5lZCAmJiB0eXBlb2YgSW50bC5EYXRlVGltZUZvcm1hdCAhPT0gJ3VuZGVmaW5lZCcsCiAgICAgICAgbnVtYmVyRm9ybWF0OiBpbnRsRGVmaW5lZCAmJiB0eXBlb2YgSW50bC5OdW1iZXJGb3JtYXQgIT09ICd1bmRlZmluZWQnCiAgICAgIH07CiAgICB9CgogICAgcmV0dXJuIGF2YWlsYWJpbGl0aWVzOwogIH0KfSk7ClZ1ZUkxOG4uaW5zdGFsbCA9IGluc3RhbGw7ClZ1ZUkxOG4udmVyc2lvbiA9ICc4LjI0LjQnOwpleHBvcnQgZGVmYXVsdCBWdWVJMThuOw=="},{"version":3,"sources":["D:/vscodeprojects/vuepress-theme-reco/myblogs/node_modules/vue-i18n/dist/vue-i18n.esm.js"],"names":["numberFormatKeys","warn","msg","err","console","stack","error","isArray","Array","isObject","obj","isBoolean","val","isString","toString","Object","prototype","OBJECT_STRING","isPlainObject","call","isNull","undefined","isFunction","parseArgs","args","len","arguments","length","locale","params","looseClone","JSON","parse","stringify","remove","arr","item","includes","indexOf","hasOwnProperty","hasOwn","key","merge","target","arguments$1","output","i","source","looseEqual","a","b","isObjectA","isObjectB","isArrayA","isArrayB","every","e","keysA","keys","keysB","String","escapeHtml","rawText","replace","escapeParams","forEach","extend","Vue","defineProperty","get","_i18n","$t","values","i18n","$i18n","_t","apply","_getMessages","concat","$tc","choice","_tc","$te","_te","$d","value","ref","d","$n","n","mixin","beforeCreate","options","$options","__i18n","VueI18n","localeMessages","messages","resource","mergeLocaleMessage","process","env","NODE_ENV","_i18nWatcher","watchI18nData","rootI18n","$root","root","formatter","fallbackLocale","formatFallbackMessages","silentTranslationWarn","silentFallbackWarn","pluralizationRules","preserveDirectiveContent","localeMessages$1","sharedMessages","sync","_localeWatcher","watchLocale","onComponentInstanceCreated","parent","beforeMount","subscribeDataChanging","_subscribing","mounted","__INTLIFY_META__","$el","setAttribute","beforeDestroy","self","$nextTick","unsubscribeDataChanging","destroyVM","interpolationComponent","name","functional","props","tag","type","Boolean","path","required","places","render","h","data","slots","children","onlyHasDefaultPlace","useLegacyPlaces","prop","createParamsFromPlaces","filter","child","text","trim","everyPlace","vnodeHasPlaceAttribute","reduce","assignChildPlace","assignChildIndex","assign","attrs","place","index","vnode","numberComponent","Number","format","acc","parts","_ntp","map","part","slot","scopedSlots","staticClass","bind","el","binding","assert","t","update","oldVNode","context","localeEqual","oldValue","_localeMessage","getLocaleMessage","unbind","vm","modifiers","preserve","textContent","_vt","_locale","ref$1","ref$2","parseValue","tc","makeParams","push","install","_Vue","installed","version","split","directive","component","strats","config","optionMergeStrategies","parentVal","childVal","BaseFormatter","_caches","create","interpolate","message","tokens","compile","RE_TOKEN_LIST_VALUE","RE_TOKEN_NAMED_VALUE","position","char","sub","isClosed","test","compiled","mode","token","parseInt","APPEND","PUSH","INC_SUB_PATH_DEPTH","PUSH_SUB_PATH","BEFORE_PATH","IN_PATH","BEFORE_IDENT","IN_IDENT","IN_SUB_PATH","IN_SINGLE_QUOTE","IN_DOUBLE_QUOTE","AFTER_PATH","ERROR","pathStateMachine","literalValueRE","isLiteral","exp","stripQuotes","str","charCodeAt","slice","getPathCharType","ch","code","formatSubPath","trimmed","charAt","isNaN","parse$1","subPathDepth","c","newChar","transition","action","typeMap","actions","maybeUnescapeQuote","nextChar","I18nPath","_cache","parsePath","hit","getPathValue","paths","last","htmlTagMatcher","linkKeyMatcher","linkKeyPrefixMatcher","bracketsMatcher","defaultModifiers","toLocaleUpperCase","toLocaleLowerCase","substr","defaultFormatter","this$1","window","dateTimeFormats","numberFormats","_vm","_formatter","_modifiers","_missing","missing","_root","_sync","_fallbackRoot","fallbackRoot","_formatFallbackMessages","_silentTranslationWarn","_silentFallbackWarn","_dateTimeFormatters","_numberFormatters","_path","_dataListeners","Set","_componentInstanceCreatedListener","componentInstanceCreatedListener","_preserveDirectiveContent","_warnHtmlInMessage","warnHtmlInMessage","_postTranslation","postTranslation","_escapeParameterHtml","escapeParameterHtml","getChoiceIndex","choicesLength","thisPrototype","getPrototypeOf","prototypeGetChoiceIndex","defaultImpl","_choice","_choicesLength","Math","abs","min","_exist","_checkLocaleMessage","_initVM","prototypeAccessors","configurable","availableLocales","level","fn","pop","ret","join","silent","$destroy","add","$watch","nextTick","$forceUpdate","deep","$set","immediate","newI18n","_getDateTimeFormats","_getNumberFormats","sort","set","_localeChainCache","fallback","handler","orgLevel","_warnDefault","result","interpolateMode","missingRet","_isSilentTranslationWarn","parsedArgs","_render","_isFallbackRoot","_isSilentFallbackWarn","RegExp","_isSilentFallback","_interpolate","host","visitedLinkStack","pathRet","_link","matches","match","idx","link","linkKeyPrefixMatches","linkPrefix","formatterName","linkPlaceholder","reverse","translated","Error","_translate","_createMessageContext","_list","_named","list","named","_appendItemToChain","chain","blocks","follow","_appendLocaleToChain","splice","_appendBlockToChain","block","_getLocaleChain","start","defaults","res","step","_i","predefined","fetchChoice","choices","te","setLocaleMessage","getDateTimeFormat","setDateTimeFormat","_clearDateTimeFormat","mergeDateTimeFormat","id","_localizeDateTime","formats","current","Intl","DateTimeFormat","_d","availabilities","dateTimeFormat","getNumberFormat","setNumberFormat","_clearNumberFormat","mergeNumberFormat","_getNumberFormatter","NumberFormat","_n","numberFormat","nf","formatToParts","defineProperties","intlDefined"],"mappings":"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","sourcesContent":["/*!\n * vue-i18n v8.24.4 \n * (c) 2021 kazuya kawaguchi\n * Released under the MIT License.\n */\n/*  */\n\n/**\n * constants\n */\n\nvar numberFormatKeys = [\n  'compactDisplay',\n  'currency',\n  'currencyDisplay',\n  'currencySign',\n  'localeMatcher',\n  'notation',\n  'numberingSystem',\n  'signDisplay',\n  'style',\n  'unit',\n  'unitDisplay',\n  'useGrouping',\n  'minimumIntegerDigits',\n  'minimumFractionDigits',\n  'maximumFractionDigits',\n  'minimumSignificantDigits',\n  'maximumSignificantDigits'\n];\n\n/**\n * utilities\n */\n\nfunction warn (msg, err) {\n  if (typeof console !== 'undefined') {\n    console.warn('[vue-i18n] ' + msg);\n    /* istanbul ignore if */\n    if (err) {\n      console.warn(err.stack);\n    }\n  }\n}\n\nfunction error (msg, err) {\n  if (typeof console !== 'undefined') {\n    console.error('[vue-i18n] ' + msg);\n    /* istanbul ignore if */\n    if (err) {\n      console.error(err.stack);\n    }\n  }\n}\n\nvar isArray = Array.isArray;\n\nfunction isObject (obj) {\n  return obj !== null && typeof obj === 'object'\n}\n\nfunction isBoolean (val) {\n  return typeof val === 'boolean'\n}\n\nfunction isString (val) {\n  return typeof val === 'string'\n}\n\nvar toString = Object.prototype.toString;\nvar OBJECT_STRING = '[object Object]';\nfunction isPlainObject (obj) {\n  return toString.call(obj) === OBJECT_STRING\n}\n\nfunction isNull (val) {\n  return val === null || val === undefined\n}\n\nfunction isFunction (val) {\n  return typeof val === 'function'\n}\n\nfunction parseArgs () {\n  var args = [], len = arguments.length;\n  while ( len-- ) args[ len ] = arguments[ len ];\n\n  var locale = null;\n  var params = null;\n  if (args.length === 1) {\n    if (isObject(args[0]) || isArray(args[0])) {\n      params = args[0];\n    } else if (typeof args[0] === 'string') {\n      locale = args[0];\n    }\n  } else if (args.length === 2) {\n    if (typeof args[0] === 'string') {\n      locale = args[0];\n    }\n    /* istanbul ignore if */\n    if (isObject(args[1]) || isArray(args[1])) {\n      params = args[1];\n    }\n  }\n\n  return { locale: locale, params: params }\n}\n\nfunction looseClone (obj) {\n  return JSON.parse(JSON.stringify(obj))\n}\n\nfunction remove (arr, item) {\n  if (arr.delete(item)) {\n    return arr\n  }\n}\n\nfunction includes (arr, item) {\n  return !!~arr.indexOf(item)\n}\n\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\nfunction hasOwn (obj, key) {\n  return hasOwnProperty.call(obj, key)\n}\n\nfunction merge (target) {\n  var arguments$1 = arguments;\n\n  var output = Object(target);\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments$1[i];\n    if (source !== undefined && source !== null) {\n      var key = (void 0);\n      for (key in source) {\n        if (hasOwn(source, key)) {\n          if (isObject(source[key])) {\n            output[key] = merge(output[key], source[key]);\n          } else {\n            output[key] = source[key];\n          }\n        }\n      }\n    }\n  }\n  return output\n}\n\nfunction looseEqual (a, b) {\n  if (a === b) { return true }\n  var isObjectA = isObject(a);\n  var isObjectB = isObject(b);\n  if (isObjectA && isObjectB) {\n    try {\n      var isArrayA = isArray(a);\n      var isArrayB = isArray(b);\n      if (isArrayA && isArrayB) {\n        return a.length === b.length && a.every(function (e, i) {\n          return looseEqual(e, b[i])\n        })\n      } else if (!isArrayA && !isArrayB) {\n        var keysA = Object.keys(a);\n        var keysB = Object.keys(b);\n        return keysA.length === keysB.length && keysA.every(function (key) {\n          return looseEqual(a[key], b[key])\n        })\n      } else {\n        /* istanbul ignore next */\n        return false\n      }\n    } catch (e) {\n      /* istanbul ignore next */\n      return false\n    }\n  } else if (!isObjectA && !isObjectB) {\n    return String(a) === String(b)\n  } else {\n    return false\n  }\n}\n\n/**\n * Sanitizes html special characters from input strings. For mitigating risk of XSS attacks.\n * @param rawText The raw input from the user that should be escaped.\n */\nfunction escapeHtml(rawText) {\n  return rawText\n    .replace(/</g, '&lt;')\n    .replace(/>/g, '&gt;')\n    .replace(/\"/g, '&quot;')\n    .replace(/'/g, '&apos;')\n}\n\n/**\n * Escapes html tags and special symbols from all provided params which were returned from parseArgs().params.\n * This method performs an in-place operation on the params object.\n *\n * @param {any} params Parameters as provided from `parseArgs().params`.\n *                     May be either an array of strings or a string->any map.\n *\n * @returns The manipulated `params` object.\n */\nfunction escapeParams(params) {\n  if(params != null) {\n    Object.keys(params).forEach(function (key) {\n      if(typeof(params[key]) == 'string') {\n        params[key] = escapeHtml(params[key]);\n      }\n    });\n  }\n  return params\n}\n\n/*  */\n\nfunction extend (Vue) {\n  if (!Vue.prototype.hasOwnProperty('$i18n')) {\n    // $FlowFixMe\n    Object.defineProperty(Vue.prototype, '$i18n', {\n      get: function get () { return this._i18n }\n    });\n  }\n\n  Vue.prototype.$t = function (key) {\n    var values = [], len = arguments.length - 1;\n    while ( len-- > 0 ) values[ len ] = arguments[ len + 1 ];\n\n    var i18n = this.$i18n;\n    return i18n._t.apply(i18n, [ key, i18n.locale, i18n._getMessages(), this ].concat( values ))\n  };\n\n  Vue.prototype.$tc = function (key, choice) {\n    var values = [], len = arguments.length - 2;\n    while ( len-- > 0 ) values[ len ] = arguments[ len + 2 ];\n\n    var i18n = this.$i18n;\n    return i18n._tc.apply(i18n, [ key, i18n.locale, i18n._getMessages(), this, choice ].concat( values ))\n  };\n\n  Vue.prototype.$te = function (key, locale) {\n    var i18n = this.$i18n;\n    return i18n._te(key, i18n.locale, i18n._getMessages(), locale)\n  };\n\n  Vue.prototype.$d = function (value) {\n    var ref;\n\n    var args = [], len = arguments.length - 1;\n    while ( len-- > 0 ) args[ len ] = arguments[ len + 1 ];\n    return (ref = this.$i18n).d.apply(ref, [ value ].concat( args ))\n  };\n\n  Vue.prototype.$n = function (value) {\n    var ref;\n\n    var args = [], len = arguments.length - 1;\n    while ( len-- > 0 ) args[ len ] = arguments[ len + 1 ];\n    return (ref = this.$i18n).n.apply(ref, [ value ].concat( args ))\n  };\n}\n\n/*  */\n\nvar mixin = {\n  beforeCreate: function beforeCreate () {\n    var options = this.$options;\n    options.i18n = options.i18n || (options.__i18n ? {} : null);\n\n    if (options.i18n) {\n      if (options.i18n instanceof VueI18n) {\n        // init locale messages via custom blocks\n        if (options.__i18n) {\n          try {\n            var localeMessages = options.i18n && options.i18n.messages ? options.i18n.messages : {};\n            options.__i18n.forEach(function (resource) {\n              localeMessages = merge(localeMessages, JSON.parse(resource));\n            });\n            Object.keys(localeMessages).forEach(function (locale) {\n              options.i18n.mergeLocaleMessage(locale, localeMessages[locale]);\n            });\n          } catch (e) {\n            if (process.env.NODE_ENV !== 'production') {\n              error(\"Cannot parse locale messages via custom blocks.\", e);\n            }\n          }\n        }\n        this._i18n = options.i18n;\n        this._i18nWatcher = this._i18n.watchI18nData();\n      } else if (isPlainObject(options.i18n)) {\n        var rootI18n = this.$root && this.$root.$i18n && this.$root.$i18n instanceof VueI18n\n          ? this.$root.$i18n\n          : null;\n        // component local i18n\n        if (rootI18n) {\n          options.i18n.root = this.$root;\n          options.i18n.formatter = rootI18n.formatter;\n          options.i18n.fallbackLocale = rootI18n.fallbackLocale;\n          options.i18n.formatFallbackMessages = rootI18n.formatFallbackMessages;\n          options.i18n.silentTranslationWarn = rootI18n.silentTranslationWarn;\n          options.i18n.silentFallbackWarn = rootI18n.silentFallbackWarn;\n          options.i18n.pluralizationRules = rootI18n.pluralizationRules;\n          options.i18n.preserveDirectiveContent = rootI18n.preserveDirectiveContent;\n        }\n\n        // init locale messages via custom blocks\n        if (options.__i18n) {\n          try {\n            var localeMessages$1 = options.i18n && options.i18n.messages ? options.i18n.messages : {};\n            options.__i18n.forEach(function (resource) {\n              localeMessages$1 = merge(localeMessages$1, JSON.parse(resource));\n            });\n            options.i18n.messages = localeMessages$1;\n          } catch (e) {\n            if (process.env.NODE_ENV !== 'production') {\n              warn(\"Cannot parse locale messages via custom blocks.\", e);\n            }\n          }\n        }\n\n        var ref = options.i18n;\n        var sharedMessages = ref.sharedMessages;\n        if (sharedMessages && isPlainObject(sharedMessages)) {\n          options.i18n.messages = merge(options.i18n.messages, sharedMessages);\n        }\n\n        this._i18n = new VueI18n(options.i18n);\n        this._i18nWatcher = this._i18n.watchI18nData();\n\n        if (options.i18n.sync === undefined || !!options.i18n.sync) {\n          this._localeWatcher = this.$i18n.watchLocale();\n        }\n\n        if (rootI18n) {\n          rootI18n.onComponentInstanceCreated(this._i18n);\n        }\n      } else {\n        if (process.env.NODE_ENV !== 'production') {\n          warn(\"Cannot be interpreted 'i18n' option.\");\n        }\n      }\n    } else if (this.$root && this.$root.$i18n && this.$root.$i18n instanceof VueI18n) {\n      // root i18n\n      this._i18n = this.$root.$i18n;\n    } else if (options.parent && options.parent.$i18n && options.parent.$i18n instanceof VueI18n) {\n      // parent i18n\n      this._i18n = options.parent.$i18n;\n    }\n  },\n\n  beforeMount: function beforeMount () {\n    var options = this.$options;\n    options.i18n = options.i18n || (options.__i18n ? {} : null);\n\n    if (options.i18n) {\n      if (options.i18n instanceof VueI18n) {\n        // init locale messages via custom blocks\n        this._i18n.subscribeDataChanging(this);\n        this._subscribing = true;\n      } else if (isPlainObject(options.i18n)) {\n        this._i18n.subscribeDataChanging(this);\n        this._subscribing = true;\n      } else {\n        if (process.env.NODE_ENV !== 'production') {\n          warn(\"Cannot be interpreted 'i18n' option.\");\n        }\n      }\n    } else if (this.$root && this.$root.$i18n && this.$root.$i18n instanceof VueI18n) {\n      this._i18n.subscribeDataChanging(this);\n      this._subscribing = true;\n    } else if (options.parent && options.parent.$i18n && options.parent.$i18n instanceof VueI18n) {\n      this._i18n.subscribeDataChanging(this);\n      this._subscribing = true;\n    }\n  },\n\n  mounted: function mounted () {\n    if (this !== this.$root && this.$options.__INTLIFY_META__ && this.$el) {\n      this.$el.setAttribute('data-intlify', this.$options.__INTLIFY_META__);\n    }\n  },\n\n  beforeDestroy: function beforeDestroy () {\n    if (!this._i18n) { return }\n\n    var self = this;\n    this.$nextTick(function () {\n      if (self._subscribing) {\n        self._i18n.unsubscribeDataChanging(self);\n        delete self._subscribing;\n      }\n\n      if (self._i18nWatcher) {\n        self._i18nWatcher();\n        self._i18n.destroyVM();\n        delete self._i18nWatcher;\n      }\n\n      if (self._localeWatcher) {\n        self._localeWatcher();\n        delete self._localeWatcher;\n      }\n    });\n  }\n};\n\n/*  */\n\nvar interpolationComponent = {\n  name: 'i18n',\n  functional: true,\n  props: {\n    tag: {\n      type: [String, Boolean, Object],\n      default: 'span'\n    },\n    path: {\n      type: String,\n      required: true\n    },\n    locale: {\n      type: String\n    },\n    places: {\n      type: [Array, Object]\n    }\n  },\n  render: function render (h, ref) {\n    var data = ref.data;\n    var parent = ref.parent;\n    var props = ref.props;\n    var slots = ref.slots;\n\n    var $i18n = parent.$i18n;\n    if (!$i18n) {\n      if (process.env.NODE_ENV !== 'production') {\n        warn('Cannot find VueI18n instance!');\n      }\n      return\n    }\n\n    var path = props.path;\n    var locale = props.locale;\n    var places = props.places;\n    var params = slots();\n    var children = $i18n.i(\n      path,\n      locale,\n      onlyHasDefaultPlace(params) || places\n        ? useLegacyPlaces(params.default, places)\n        : params\n    );\n\n    var tag = (!!props.tag && props.tag !== true) || props.tag === false ? props.tag : 'span';\n    return tag ? h(tag, data, children) : children\n  }\n};\n\nfunction onlyHasDefaultPlace (params) {\n  var prop;\n  for (prop in params) {\n    if (prop !== 'default') { return false }\n  }\n  return Boolean(prop)\n}\n\nfunction useLegacyPlaces (children, places) {\n  var params = places ? createParamsFromPlaces(places) : {};\n\n  if (!children) { return params }\n\n  // Filter empty text nodes\n  children = children.filter(function (child) {\n    return child.tag || child.text.trim() !== ''\n  });\n\n  var everyPlace = children.every(vnodeHasPlaceAttribute);\n  if (process.env.NODE_ENV !== 'production' && everyPlace) {\n    warn('`place` attribute is deprecated in next major version. Please switch to Vue slots.');\n  }\n\n  return children.reduce(\n    everyPlace ? assignChildPlace : assignChildIndex,\n    params\n  )\n}\n\nfunction createParamsFromPlaces (places) {\n  if (process.env.NODE_ENV !== 'production') {\n    warn('`places` prop is deprecated in next major version. Please switch to Vue slots.');\n  }\n\n  return Array.isArray(places)\n    ? places.reduce(assignChildIndex, {})\n    : Object.assign({}, places)\n}\n\nfunction assignChildPlace (params, child) {\n  if (child.data && child.data.attrs && child.data.attrs.place) {\n    params[child.data.attrs.place] = child;\n  }\n  return params\n}\n\nfunction assignChildIndex (params, child, index) {\n  params[index] = child;\n  return params\n}\n\nfunction vnodeHasPlaceAttribute (vnode) {\n  return Boolean(vnode.data && vnode.data.attrs && vnode.data.attrs.place)\n}\n\n/*  */\n\nvar numberComponent = {\n  name: 'i18n-n',\n  functional: true,\n  props: {\n    tag: {\n      type: [String, Boolean, Object],\n      default: 'span'\n    },\n    value: {\n      type: Number,\n      required: true\n    },\n    format: {\n      type: [String, Object]\n    },\n    locale: {\n      type: String\n    }\n  },\n  render: function render (h, ref) {\n    var props = ref.props;\n    var parent = ref.parent;\n    var data = ref.data;\n\n    var i18n = parent.$i18n;\n\n    if (!i18n) {\n      if (process.env.NODE_ENV !== 'production') {\n        warn('Cannot find VueI18n instance!');\n      }\n      return null\n    }\n\n    var key = null;\n    var options = null;\n\n    if (isString(props.format)) {\n      key = props.format;\n    } else if (isObject(props.format)) {\n      if (props.format.key) {\n        key = props.format.key;\n      }\n\n      // Filter out number format options only\n      options = Object.keys(props.format).reduce(function (acc, prop) {\n        var obj;\n\n        if (includes(numberFormatKeys, prop)) {\n          return Object.assign({}, acc, ( obj = {}, obj[prop] = props.format[prop], obj ))\n        }\n        return acc\n      }, null);\n    }\n\n    var locale = props.locale || i18n.locale;\n    var parts = i18n._ntp(props.value, locale, key, options);\n\n    var values = parts.map(function (part, index) {\n      var obj;\n\n      var slot = data.scopedSlots && data.scopedSlots[part.type];\n      return slot ? slot(( obj = {}, obj[part.type] = part.value, obj.index = index, obj.parts = parts, obj )) : part.value\n    });\n\n    var tag = (!!props.tag && props.tag !== true) || props.tag === false ? props.tag : 'span';\n    return tag\n      ? h(tag, {\n        attrs: data.attrs,\n        'class': data['class'],\n        staticClass: data.staticClass\n      }, values)\n      : values\n  }\n};\n\n/*  */\n\nfunction bind (el, binding, vnode) {\n  if (!assert(el, vnode)) { return }\n\n  t(el, binding, vnode);\n}\n\nfunction update (el, binding, vnode, oldVNode) {\n  if (!assert(el, vnode)) { return }\n\n  var i18n = vnode.context.$i18n;\n  if (localeEqual(el, vnode) &&\n    (looseEqual(binding.value, binding.oldValue) &&\n     looseEqual(el._localeMessage, i18n.getLocaleMessage(i18n.locale)))) { return }\n\n  t(el, binding, vnode);\n}\n\nfunction unbind (el, binding, vnode, oldVNode) {\n  var vm = vnode.context;\n  if (!vm) {\n    warn('Vue instance does not exists in VNode context');\n    return\n  }\n\n  var i18n = vnode.context.$i18n || {};\n  if (!binding.modifiers.preserve && !i18n.preserveDirectiveContent) {\n    el.textContent = '';\n  }\n  el._vt = undefined;\n  delete el['_vt'];\n  el._locale = undefined;\n  delete el['_locale'];\n  el._localeMessage = undefined;\n  delete el['_localeMessage'];\n}\n\nfunction assert (el, vnode) {\n  var vm = vnode.context;\n  if (!vm) {\n    warn('Vue instance does not exists in VNode context');\n    return false\n  }\n\n  if (!vm.$i18n) {\n    warn('VueI18n instance does not exists in Vue instance');\n    return false\n  }\n\n  return true\n}\n\nfunction localeEqual (el, vnode) {\n  var vm = vnode.context;\n  return el._locale === vm.$i18n.locale\n}\n\nfunction t (el, binding, vnode) {\n  var ref$1, ref$2;\n\n  var value = binding.value;\n\n  var ref = parseValue(value);\n  var path = ref.path;\n  var locale = ref.locale;\n  var args = ref.args;\n  var choice = ref.choice;\n  if (!path && !locale && !args) {\n    warn('value type not supported');\n    return\n  }\n\n  if (!path) {\n    warn('`path` is required in v-t directive');\n    return\n  }\n\n  var vm = vnode.context;\n  if (choice != null) {\n    el._vt = el.textContent = (ref$1 = vm.$i18n).tc.apply(ref$1, [ path, choice ].concat( makeParams(locale, args) ));\n  } else {\n    el._vt = el.textContent = (ref$2 = vm.$i18n).t.apply(ref$2, [ path ].concat( makeParams(locale, args) ));\n  }\n  el._locale = vm.$i18n.locale;\n  el._localeMessage = vm.$i18n.getLocaleMessage(vm.$i18n.locale);\n}\n\nfunction parseValue (value) {\n  var path;\n  var locale;\n  var args;\n  var choice;\n\n  if (isString(value)) {\n    path = value;\n  } else if (isPlainObject(value)) {\n    path = value.path;\n    locale = value.locale;\n    args = value.args;\n    choice = value.choice;\n  }\n\n  return { path: path, locale: locale, args: args, choice: choice }\n}\n\nfunction makeParams (locale, args) {\n  var params = [];\n\n  locale && params.push(locale);\n  if (args && (Array.isArray(args) || isPlainObject(args))) {\n    params.push(args);\n  }\n\n  return params\n}\n\nvar Vue;\n\nfunction install (_Vue) {\n  /* istanbul ignore if */\n  if (process.env.NODE_ENV !== 'production' && install.installed && _Vue === Vue) {\n    warn('already installed.');\n    return\n  }\n  install.installed = true;\n\n  Vue = _Vue;\n\n  var version = (Vue.version && Number(Vue.version.split('.')[0])) || -1;\n  /* istanbul ignore if */\n  if (process.env.NODE_ENV !== 'production' && version < 2) {\n    warn((\"vue-i18n (\" + (install.version) + \") need to use Vue 2.0 or later (Vue: \" + (Vue.version) + \").\"));\n    return\n  }\n\n  extend(Vue);\n  Vue.mixin(mixin);\n  Vue.directive('t', { bind: bind, update: update, unbind: unbind });\n  Vue.component(interpolationComponent.name, interpolationComponent);\n  Vue.component(numberComponent.name, numberComponent);\n\n  // use simple mergeStrategies to prevent i18n instance lose '__proto__'\n  var strats = Vue.config.optionMergeStrategies;\n  strats.i18n = function (parentVal, childVal) {\n    return childVal === undefined\n      ? parentVal\n      : childVal\n  };\n}\n\n/*  */\n\nvar BaseFormatter = function BaseFormatter () {\n  this._caches = Object.create(null);\n};\n\nBaseFormatter.prototype.interpolate = function interpolate (message, values) {\n  if (!values) {\n    return [message]\n  }\n  var tokens = this._caches[message];\n  if (!tokens) {\n    tokens = parse(message);\n    this._caches[message] = tokens;\n  }\n  return compile(tokens, values)\n};\n\n\n\nvar RE_TOKEN_LIST_VALUE = /^(?:\\d)+/;\nvar RE_TOKEN_NAMED_VALUE = /^(?:\\w)+/;\n\nfunction parse (format) {\n  var tokens = [];\n  var position = 0;\n\n  var text = '';\n  while (position < format.length) {\n    var char = format[position++];\n    if (char === '{') {\n      if (text) {\n        tokens.push({ type: 'text', value: text });\n      }\n\n      text = '';\n      var sub = '';\n      char = format[position++];\n      while (char !== undefined && char !== '}') {\n        sub += char;\n        char = format[position++];\n      }\n      var isClosed = char === '}';\n\n      var type = RE_TOKEN_LIST_VALUE.test(sub)\n        ? 'list'\n        : isClosed && RE_TOKEN_NAMED_VALUE.test(sub)\n          ? 'named'\n          : 'unknown';\n      tokens.push({ value: sub, type: type });\n    } else if (char === '%') {\n      // when found rails i18n syntax, skip text capture\n      if (format[(position)] !== '{') {\n        text += char;\n      }\n    } else {\n      text += char;\n    }\n  }\n\n  text && tokens.push({ type: 'text', value: text });\n\n  return tokens\n}\n\nfunction compile (tokens, values) {\n  var compiled = [];\n  var index = 0;\n\n  var mode = Array.isArray(values)\n    ? 'list'\n    : isObject(values)\n      ? 'named'\n      : 'unknown';\n  if (mode === 'unknown') { return compiled }\n\n  while (index < tokens.length) {\n    var token = tokens[index];\n    switch (token.type) {\n      case 'text':\n        compiled.push(token.value);\n        break\n      case 'list':\n        compiled.push(values[parseInt(token.value, 10)]);\n        break\n      case 'named':\n        if (mode === 'named') {\n          compiled.push((values)[token.value]);\n        } else {\n          if (process.env.NODE_ENV !== 'production') {\n            warn((\"Type of token '\" + (token.type) + \"' and format of value '\" + mode + \"' don't match!\"));\n          }\n        }\n        break\n      case 'unknown':\n        if (process.env.NODE_ENV !== 'production') {\n          warn(\"Detect 'unknown' type of token!\");\n        }\n        break\n    }\n    index++;\n  }\n\n  return compiled\n}\n\n/*  */\n\n/**\n *  Path parser\n *  - Inspired:\n *    Vue.js Path parser\n */\n\n// actions\nvar APPEND = 0;\nvar PUSH = 1;\nvar INC_SUB_PATH_DEPTH = 2;\nvar PUSH_SUB_PATH = 3;\n\n// states\nvar BEFORE_PATH = 0;\nvar IN_PATH = 1;\nvar BEFORE_IDENT = 2;\nvar IN_IDENT = 3;\nvar IN_SUB_PATH = 4;\nvar IN_SINGLE_QUOTE = 5;\nvar IN_DOUBLE_QUOTE = 6;\nvar AFTER_PATH = 7;\nvar ERROR = 8;\n\nvar pathStateMachine = [];\n\npathStateMachine[BEFORE_PATH] = {\n  'ws': [BEFORE_PATH],\n  'ident': [IN_IDENT, APPEND],\n  '[': [IN_SUB_PATH],\n  'eof': [AFTER_PATH]\n};\n\npathStateMachine[IN_PATH] = {\n  'ws': [IN_PATH],\n  '.': [BEFORE_IDENT],\n  '[': [IN_SUB_PATH],\n  'eof': [AFTER_PATH]\n};\n\npathStateMachine[BEFORE_IDENT] = {\n  'ws': [BEFORE_IDENT],\n  'ident': [IN_IDENT, APPEND],\n  '0': [IN_IDENT, APPEND],\n  'number': [IN_IDENT, APPEND]\n};\n\npathStateMachine[IN_IDENT] = {\n  'ident': [IN_IDENT, APPEND],\n  '0': [IN_IDENT, APPEND],\n  'number': [IN_IDENT, APPEND],\n  'ws': [IN_PATH, PUSH],\n  '.': [BEFORE_IDENT, PUSH],\n  '[': [IN_SUB_PATH, PUSH],\n  'eof': [AFTER_PATH, PUSH]\n};\n\npathStateMachine[IN_SUB_PATH] = {\n  \"'\": [IN_SINGLE_QUOTE, APPEND],\n  '\"': [IN_DOUBLE_QUOTE, APPEND],\n  '[': [IN_SUB_PATH, INC_SUB_PATH_DEPTH],\n  ']': [IN_PATH, PUSH_SUB_PATH],\n  'eof': ERROR,\n  'else': [IN_SUB_PATH, APPEND]\n};\n\npathStateMachine[IN_SINGLE_QUOTE] = {\n  \"'\": [IN_SUB_PATH, APPEND],\n  'eof': ERROR,\n  'else': [IN_SINGLE_QUOTE, APPEND]\n};\n\npathStateMachine[IN_DOUBLE_QUOTE] = {\n  '\"': [IN_SUB_PATH, APPEND],\n  'eof': ERROR,\n  'else': [IN_DOUBLE_QUOTE, APPEND]\n};\n\n/**\n * Check if an expression is a literal value.\n */\n\nvar literalValueRE = /^\\s?(?:true|false|-?[\\d.]+|'[^']*'|\"[^\"]*\")\\s?$/;\nfunction isLiteral (exp) {\n  return literalValueRE.test(exp)\n}\n\n/**\n * Strip quotes from a string\n */\n\nfunction stripQuotes (str) {\n  var a = str.charCodeAt(0);\n  var b = str.charCodeAt(str.length - 1);\n  return a === b && (a === 0x22 || a === 0x27)\n    ? str.slice(1, -1)\n    : str\n}\n\n/**\n * Determine the type of a character in a keypath.\n */\n\nfunction getPathCharType (ch) {\n  if (ch === undefined || ch === null) { return 'eof' }\n\n  var code = ch.charCodeAt(0);\n\n  switch (code) {\n    case 0x5B: // [\n    case 0x5D: // ]\n    case 0x2E: // .\n    case 0x22: // \"\n    case 0x27: // '\n      return ch\n\n    case 0x5F: // _\n    case 0x24: // $\n    case 0x2D: // -\n      return 'ident'\n\n    case 0x09: // Tab\n    case 0x0A: // Newline\n    case 0x0D: // Return\n    case 0xA0:  // No-break space\n    case 0xFEFF:  // Byte Order Mark\n    case 0x2028:  // Line Separator\n    case 0x2029:  // Paragraph Separator\n      return 'ws'\n  }\n\n  return 'ident'\n}\n\n/**\n * Format a subPath, return its plain form if it is\n * a literal string or number. Otherwise prepend the\n * dynamic indicator (*).\n */\n\nfunction formatSubPath (path) {\n  var trimmed = path.trim();\n  // invalid leading 0\n  if (path.charAt(0) === '0' && isNaN(path)) { return false }\n\n  return isLiteral(trimmed) ? stripQuotes(trimmed) : '*' + trimmed\n}\n\n/**\n * Parse a string path into an array of segments\n */\n\nfunction parse$1 (path) {\n  var keys = [];\n  var index = -1;\n  var mode = BEFORE_PATH;\n  var subPathDepth = 0;\n  var c;\n  var key;\n  var newChar;\n  var type;\n  var transition;\n  var action;\n  var typeMap;\n  var actions = [];\n\n  actions[PUSH] = function () {\n    if (key !== undefined) {\n      keys.push(key);\n      key = undefined;\n    }\n  };\n\n  actions[APPEND] = function () {\n    if (key === undefined) {\n      key = newChar;\n    } else {\n      key += newChar;\n    }\n  };\n\n  actions[INC_SUB_PATH_DEPTH] = function () {\n    actions[APPEND]();\n    subPathDepth++;\n  };\n\n  actions[PUSH_SUB_PATH] = function () {\n    if (subPathDepth > 0) {\n      subPathDepth--;\n      mode = IN_SUB_PATH;\n      actions[APPEND]();\n    } else {\n      subPathDepth = 0;\n      if (key === undefined) { return false }\n      key = formatSubPath(key);\n      if (key === false) {\n        return false\n      } else {\n        actions[PUSH]();\n      }\n    }\n  };\n\n  function maybeUnescapeQuote () {\n    var nextChar = path[index + 1];\n    if ((mode === IN_SINGLE_QUOTE && nextChar === \"'\") ||\n      (mode === IN_DOUBLE_QUOTE && nextChar === '\"')) {\n      index++;\n      newChar = '\\\\' + nextChar;\n      actions[APPEND]();\n      return true\n    }\n  }\n\n  while (mode !== null) {\n    index++;\n    c = path[index];\n\n    if (c === '\\\\' && maybeUnescapeQuote()) {\n      continue\n    }\n\n    type = getPathCharType(c);\n    typeMap = pathStateMachine[mode];\n    transition = typeMap[type] || typeMap['else'] || ERROR;\n\n    if (transition === ERROR) {\n      return // parse error\n    }\n\n    mode = transition[0];\n    action = actions[transition[1]];\n    if (action) {\n      newChar = transition[2];\n      newChar = newChar === undefined\n        ? c\n        : newChar;\n      if (action() === false) {\n        return\n      }\n    }\n\n    if (mode === AFTER_PATH) {\n      return keys\n    }\n  }\n}\n\n\n\n\n\nvar I18nPath = function I18nPath () {\n  this._cache = Object.create(null);\n};\n\n/**\n * External parse that check for a cache hit first\n */\nI18nPath.prototype.parsePath = function parsePath (path) {\n  var hit = this._cache[path];\n  if (!hit) {\n    hit = parse$1(path);\n    if (hit) {\n      this._cache[path] = hit;\n    }\n  }\n  return hit || []\n};\n\n/**\n * Get path value from path string\n */\nI18nPath.prototype.getPathValue = function getPathValue (obj, path) {\n  if (!isObject(obj)) { return null }\n\n  var paths = this.parsePath(path);\n  if (paths.length === 0) {\n    return null\n  } else {\n    var length = paths.length;\n    var last = obj;\n    var i = 0;\n    while (i < length) {\n      var value = last[paths[i]];\n      if (value === undefined || value === null) {\n        return null\n      }\n      last = value;\n      i++;\n    }\n\n    return last\n  }\n};\n\n/*  */\n\n\n\nvar htmlTagMatcher = /<\\/?[\\w\\s=\"/.':;#-\\/]+>/;\nvar linkKeyMatcher = /(?:@(?:\\.[a-z]+)?:(?:[\\w\\-_|.]+|\\([\\w\\-_|.]+\\)))/g;\nvar linkKeyPrefixMatcher = /^@(?:\\.([a-z]+))?:/;\nvar bracketsMatcher = /[()]/g;\nvar defaultModifiers = {\n  'upper': function (str) { return str.toLocaleUpperCase(); },\n  'lower': function (str) { return str.toLocaleLowerCase(); },\n  'capitalize': function (str) { return (\"\" + (str.charAt(0).toLocaleUpperCase()) + (str.substr(1))); }\n};\n\nvar defaultFormatter = new BaseFormatter();\n\nvar VueI18n = function VueI18n (options) {\n  var this$1 = this;\n  if ( options === void 0 ) options = {};\n\n  // Auto install if it is not done yet and `window` has `Vue`.\n  // To allow users to avoid auto-installation in some cases,\n  // this code should be placed here. See #290\n  /* istanbul ignore if */\n  if (!Vue && typeof window !== 'undefined' && window.Vue) {\n    install(window.Vue);\n  }\n\n  var locale = options.locale || 'en-US';\n  var fallbackLocale = options.fallbackLocale === false\n    ? false\n    : options.fallbackLocale || 'en-US';\n  var messages = options.messages || {};\n  var dateTimeFormats = options.dateTimeFormats || {};\n  var numberFormats = options.numberFormats || {};\n\n  this._vm = null;\n  this._formatter = options.formatter || defaultFormatter;\n  this._modifiers = options.modifiers || {};\n  this._missing = options.missing || null;\n  this._root = options.root || null;\n  this._sync = options.sync === undefined ? true : !!options.sync;\n  this._fallbackRoot = options.fallbackRoot === undefined\n    ? true\n    : !!options.fallbackRoot;\n  this._formatFallbackMessages = options.formatFallbackMessages === undefined\n    ? false\n    : !!options.formatFallbackMessages;\n  this._silentTranslationWarn = options.silentTranslationWarn === undefined\n    ? false\n    : options.silentTranslationWarn;\n  this._silentFallbackWarn = options.silentFallbackWarn === undefined\n    ? false\n    : !!options.silentFallbackWarn;\n  this._dateTimeFormatters = {};\n  this._numberFormatters = {};\n  this._path = new I18nPath();\n  this._dataListeners = new Set();\n  this._componentInstanceCreatedListener = options.componentInstanceCreatedListener || null;\n  this._preserveDirectiveContent = options.preserveDirectiveContent === undefined\n    ? false\n    : !!options.preserveDirectiveContent;\n  this.pluralizationRules = options.pluralizationRules || {};\n  this._warnHtmlInMessage = options.warnHtmlInMessage || 'off';\n  this._postTranslation = options.postTranslation || null;\n  this._escapeParameterHtml = options.escapeParameterHtml || false;\n\n  /**\n   * @param choice {number} a choice index given by the input to $tc: `$tc('path.to.rule', choiceIndex)`\n   * @param choicesLength {number} an overall amount of available choices\n   * @returns a final choice index\n  */\n  this.getChoiceIndex = function (choice, choicesLength) {\n    var thisPrototype = Object.getPrototypeOf(this$1);\n    if (thisPrototype && thisPrototype.getChoiceIndex) {\n      var prototypeGetChoiceIndex = (thisPrototype.getChoiceIndex);\n      return (prototypeGetChoiceIndex).call(this$1, choice, choicesLength)\n    }\n\n    // Default (old) getChoiceIndex implementation - english-compatible\n    var defaultImpl = function (_choice, _choicesLength) {\n      _choice = Math.abs(_choice);\n\n      if (_choicesLength === 2) {\n        return _choice\n          ? _choice > 1\n            ? 1\n            : 0\n          : 1\n      }\n\n      return _choice ? Math.min(_choice, 2) : 0\n    };\n\n    if (this$1.locale in this$1.pluralizationRules) {\n      return this$1.pluralizationRules[this$1.locale].apply(this$1, [choice, choicesLength])\n    } else {\n      return defaultImpl(choice, choicesLength)\n    }\n  };\n\n\n  this._exist = function (message, key) {\n    if (!message || !key) { return false }\n    if (!isNull(this$1._path.getPathValue(message, key))) { return true }\n    // fallback for flat key\n    if (message[key]) { return true }\n    return false\n  };\n\n  if (this._warnHtmlInMessage === 'warn' || this._warnHtmlInMessage === 'error') {\n    Object.keys(messages).forEach(function (locale) {\n      this$1._checkLocaleMessage(locale, this$1._warnHtmlInMessage, messages[locale]);\n    });\n  }\n\n  this._initVM({\n    locale: locale,\n    fallbackLocale: fallbackLocale,\n    messages: messages,\n    dateTimeFormats: dateTimeFormats,\n    numberFormats: numberFormats\n  });\n};\n\nvar prototypeAccessors = { vm: { configurable: true },messages: { configurable: true },dateTimeFormats: { configurable: true },numberFormats: { configurable: true },availableLocales: { configurable: true },locale: { configurable: true },fallbackLocale: { configurable: true },formatFallbackMessages: { configurable: true },missing: { configurable: true },formatter: { configurable: true },silentTranslationWarn: { configurable: true },silentFallbackWarn: { configurable: true },preserveDirectiveContent: { configurable: true },warnHtmlInMessage: { configurable: true },postTranslation: { configurable: true } };\n\nVueI18n.prototype._checkLocaleMessage = function _checkLocaleMessage (locale, level, message) {\n  var paths = [];\n\n  var fn = function (level, locale, message, paths) {\n    if (isPlainObject(message)) {\n      Object.keys(message).forEach(function (key) {\n        var val = message[key];\n        if (isPlainObject(val)) {\n          paths.push(key);\n          paths.push('.');\n          fn(level, locale, val, paths);\n          paths.pop();\n          paths.pop();\n        } else {\n          paths.push(key);\n          fn(level, locale, val, paths);\n          paths.pop();\n        }\n      });\n    } else if (isArray(message)) {\n      message.forEach(function (item, index) {\n        if (isPlainObject(item)) {\n          paths.push((\"[\" + index + \"]\"));\n          paths.push('.');\n          fn(level, locale, item, paths);\n          paths.pop();\n          paths.pop();\n        } else {\n          paths.push((\"[\" + index + \"]\"));\n          fn(level, locale, item, paths);\n          paths.pop();\n        }\n      });\n    } else if (isString(message)) {\n      var ret = htmlTagMatcher.test(message);\n      if (ret) {\n        var msg = \"Detected HTML in message '\" + message + \"' of keypath '\" + (paths.join('')) + \"' at '\" + locale + \"'. Consider component interpolation with '<i18n>' to avoid XSS. See https://bit.ly/2ZqJzkp\";\n        if (level === 'warn') {\n          warn(msg);\n        } else if (level === 'error') {\n          error(msg);\n        }\n      }\n    }\n  };\n\n  fn(level, locale, message, paths);\n};\n\nVueI18n.prototype._initVM = function _initVM (data) {\n  var silent = Vue.config.silent;\n  Vue.config.silent = true;\n  this._vm = new Vue({ data: data });\n  Vue.config.silent = silent;\n};\n\nVueI18n.prototype.destroyVM = function destroyVM () {\n  this._vm.$destroy();\n};\n\nVueI18n.prototype.subscribeDataChanging = function subscribeDataChanging (vm) {\n  this._dataListeners.add(vm);\n};\n\nVueI18n.prototype.unsubscribeDataChanging = function unsubscribeDataChanging (vm) {\n  remove(this._dataListeners, vm);\n};\n\nVueI18n.prototype.watchI18nData = function watchI18nData () {\n  var self = this;\n  return this._vm.$watch('$data', function () {\n    self._dataListeners.forEach(function (e) {\n      Vue.nextTick(function () {\n        e && e.$forceUpdate();\n      });\n    });\n  }, { deep: true })\n};\n\nVueI18n.prototype.watchLocale = function watchLocale () {\n  /* istanbul ignore if */\n  if (!this._sync || !this._root) { return null }\n  var target = this._vm;\n  return this._root.$i18n.vm.$watch('locale', function (val) {\n    target.$set(target, 'locale', val);\n    target.$forceUpdate();\n  }, { immediate: true })\n};\n\nVueI18n.prototype.onComponentInstanceCreated = function onComponentInstanceCreated (newI18n) {\n  if (this._componentInstanceCreatedListener) {\n    this._componentInstanceCreatedListener(newI18n, this);\n  }\n};\n\nprototypeAccessors.vm.get = function () { return this._vm };\n\nprototypeAccessors.messages.get = function () { return looseClone(this._getMessages()) };\nprototypeAccessors.dateTimeFormats.get = function () { return looseClone(this._getDateTimeFormats()) };\nprototypeAccessors.numberFormats.get = function () { return looseClone(this._getNumberFormats()) };\nprototypeAccessors.availableLocales.get = function () { return Object.keys(this.messages).sort() };\n\nprototypeAccessors.locale.get = function () { return this._vm.locale };\nprototypeAccessors.locale.set = function (locale) {\n  this._vm.$set(this._vm, 'locale', locale);\n};\n\nprototypeAccessors.fallbackLocale.get = function () { return this._vm.fallbackLocale };\nprototypeAccessors.fallbackLocale.set = function (locale) {\n  this._localeChainCache = {};\n  this._vm.$set(this._vm, 'fallbackLocale', locale);\n};\n\nprototypeAccessors.formatFallbackMessages.get = function () { return this._formatFallbackMessages };\nprototypeAccessors.formatFallbackMessages.set = function (fallback) { this._formatFallbackMessages = fallback; };\n\nprototypeAccessors.missing.get = function () { return this._missing };\nprototypeAccessors.missing.set = function (handler) { this._missing = handler; };\n\nprototypeAccessors.formatter.get = function () { return this._formatter };\nprototypeAccessors.formatter.set = function (formatter) { this._formatter = formatter; };\n\nprototypeAccessors.silentTranslationWarn.get = function () { return this._silentTranslationWarn };\nprototypeAccessors.silentTranslationWarn.set = function (silent) { this._silentTranslationWarn = silent; };\n\nprototypeAccessors.silentFallbackWarn.get = function () { return this._silentFallbackWarn };\nprototypeAccessors.silentFallbackWarn.set = function (silent) { this._silentFallbackWarn = silent; };\n\nprototypeAccessors.preserveDirectiveContent.get = function () { return this._preserveDirectiveContent };\nprototypeAccessors.preserveDirectiveContent.set = function (preserve) { this._preserveDirectiveContent = preserve; };\n\nprototypeAccessors.warnHtmlInMessage.get = function () { return this._warnHtmlInMessage };\nprototypeAccessors.warnHtmlInMessage.set = function (level) {\n    var this$1 = this;\n\n  var orgLevel = this._warnHtmlInMessage;\n  this._warnHtmlInMessage = level;\n  if (orgLevel !== level && (level === 'warn' || level === 'error')) {\n    var messages = this._getMessages();\n    Object.keys(messages).forEach(function (locale) {\n      this$1._checkLocaleMessage(locale, this$1._warnHtmlInMessage, messages[locale]);\n    });\n  }\n};\n\nprototypeAccessors.postTranslation.get = function () { return this._postTranslation };\nprototypeAccessors.postTranslation.set = function (handler) { this._postTranslation = handler; };\n\nVueI18n.prototype._getMessages = function _getMessages () { return this._vm.messages };\nVueI18n.prototype._getDateTimeFormats = function _getDateTimeFormats () { return this._vm.dateTimeFormats };\nVueI18n.prototype._getNumberFormats = function _getNumberFormats () { return this._vm.numberFormats };\n\nVueI18n.prototype._warnDefault = function _warnDefault (locale, key, result, vm, values, interpolateMode) {\n  if (!isNull(result)) { return result }\n  if (this._missing) {\n    var missingRet = this._missing.apply(null, [locale, key, vm, values]);\n    if (isString(missingRet)) {\n      return missingRet\n    }\n  } else {\n    if (process.env.NODE_ENV !== 'production' && !this._isSilentTranslationWarn(key)) {\n      warn(\n        \"Cannot translate the value of keypath '\" + key + \"'. \" +\n        'Use the value of keypath as default.'\n      );\n    }\n  }\n\n  if (this._formatFallbackMessages) {\n    var parsedArgs = parseArgs.apply(void 0, values);\n    return this._render(key, interpolateMode, parsedArgs.params, key)\n  } else {\n    return key\n  }\n};\n\nVueI18n.prototype._isFallbackRoot = function _isFallbackRoot (val) {\n  return !val && !isNull(this._root) && this._fallbackRoot\n};\n\nVueI18n.prototype._isSilentFallbackWarn = function _isSilentFallbackWarn (key) {\n  return this._silentFallbackWarn instanceof RegExp\n    ? this._silentFallbackWarn.test(key)\n    : this._silentFallbackWarn\n};\n\nVueI18n.prototype._isSilentFallback = function _isSilentFallback (locale, key) {\n  return this._isSilentFallbackWarn(key) && (this._isFallbackRoot() || locale !== this.fallbackLocale)\n};\n\nVueI18n.prototype._isSilentTranslationWarn = function _isSilentTranslationWarn (key) {\n  return this._silentTranslationWarn instanceof RegExp\n    ? this._silentTranslationWarn.test(key)\n    : this._silentTranslationWarn\n};\n\nVueI18n.prototype._interpolate = function _interpolate (\n  locale,\n  message,\n  key,\n  host,\n  interpolateMode,\n  values,\n  visitedLinkStack\n) {\n  if (!message) { return null }\n\n  var pathRet = this._path.getPathValue(message, key);\n  if (isArray(pathRet) || isPlainObject(pathRet)) { return pathRet }\n\n  var ret;\n  if (isNull(pathRet)) {\n    /* istanbul ignore else */\n    if (isPlainObject(message)) {\n      ret = message[key];\n      if (!(isString(ret) || isFunction(ret))) {\n        if (process.env.NODE_ENV !== 'production' && !this._isSilentTranslationWarn(key) && !this._isSilentFallback(locale, key)) {\n          warn((\"Value of key '\" + key + \"' is not a string or function !\"));\n        }\n        return null\n      }\n    } else {\n      return null\n    }\n  } else {\n    /* istanbul ignore else */\n    if (isString(pathRet) || isFunction(pathRet)) {\n      ret = pathRet;\n    } else {\n      if (process.env.NODE_ENV !== 'production' && !this._isSilentTranslationWarn(key) && !this._isSilentFallback(locale, key)) {\n        warn((\"Value of key '\" + key + \"' is not a string or function!\"));\n      }\n      return null\n    }\n  }\n\n  // Check for the existence of links within the translated string\n  if (isString(ret) && (ret.indexOf('@:') >= 0 || ret.indexOf('@.') >= 0)) {\n    ret = this._link(locale, message, ret, host, 'raw', values, visitedLinkStack);\n  }\n\n  return this._render(ret, interpolateMode, values, key)\n};\n\nVueI18n.prototype._link = function _link (\n  locale,\n  message,\n  str,\n  host,\n  interpolateMode,\n  values,\n  visitedLinkStack\n) {\n  var ret = str;\n\n  // Match all the links within the local\n  // We are going to replace each of\n  // them with its translation\n  var matches = ret.match(linkKeyMatcher);\n  for (var idx in matches) {\n    // ie compatible: filter custom array\n    // prototype method\n    if (!matches.hasOwnProperty(idx)) {\n      continue\n    }\n    var link = matches[idx];\n    var linkKeyPrefixMatches = link.match(linkKeyPrefixMatcher);\n    var linkPrefix = linkKeyPrefixMatches[0];\n      var formatterName = linkKeyPrefixMatches[1];\n\n    // Remove the leading @:, @.case: and the brackets\n    var linkPlaceholder = link.replace(linkPrefix, '').replace(bracketsMatcher, '');\n\n    if (includes(visitedLinkStack, linkPlaceholder)) {\n      if (process.env.NODE_ENV !== 'production') {\n        warn((\"Circular reference found. \\\"\" + link + \"\\\" is already visited in the chain of \" + (visitedLinkStack.reverse().join(' <- '))));\n      }\n      return ret\n    }\n    visitedLinkStack.push(linkPlaceholder);\n\n    // Translate the link\n    var translated = this._interpolate(\n      locale, message, linkPlaceholder, host,\n      interpolateMode === 'raw' ? 'string' : interpolateMode,\n      interpolateMode === 'raw' ? undefined : values,\n      visitedLinkStack\n    );\n\n    if (this._isFallbackRoot(translated)) {\n      if (process.env.NODE_ENV !== 'production' && !this._isSilentTranslationWarn(linkPlaceholder)) {\n        warn((\"Fall back to translate the link placeholder '\" + linkPlaceholder + \"' with root locale.\"));\n      }\n      /* istanbul ignore if */\n      if (!this._root) { throw Error('unexpected error') }\n      var root = this._root.$i18n;\n      translated = root._translate(\n        root._getMessages(), root.locale, root.fallbackLocale,\n        linkPlaceholder, host, interpolateMode, values\n      );\n    }\n    translated = this._warnDefault(\n      locale, linkPlaceholder, translated, host,\n      isArray(values) ? values : [values],\n      interpolateMode\n    );\n\n    if (this._modifiers.hasOwnProperty(formatterName)) {\n      translated = this._modifiers[formatterName](translated);\n    } else if (defaultModifiers.hasOwnProperty(formatterName)) {\n      translated = defaultModifiers[formatterName](translated);\n    }\n\n    visitedLinkStack.pop();\n\n    // Replace the link with the translated\n    ret = !translated ? ret : ret.replace(link, translated);\n  }\n\n  return ret\n};\n\nVueI18n.prototype._createMessageContext = function _createMessageContext (values) {\n  var _list = isArray(values) ? values : [];\n  var _named = isObject(values) ? values : {};\n  var list = function (index) { return _list[index]; };\n  var named = function (key) { return _named[key]; };\n  return {\n    list: list,\n    named: named\n  }\n};\n\nVueI18n.prototype._render = function _render (message, interpolateMode, values, path) {\n  if (isFunction(message)) {\n    return message(this._createMessageContext(values))\n  }\n\n  var ret = this._formatter.interpolate(message, values, path);\n\n  // If the custom formatter refuses to work - apply the default one\n  if (!ret) {\n    ret = defaultFormatter.interpolate(message, values, path);\n  }\n\n  // if interpolateMode is **not** 'string' ('row'),\n  // return the compiled data (e.g. ['foo', VNode, 'bar']) with formatter\n  return interpolateMode === 'string' && !isString(ret) ? ret.join('') : ret\n};\n\nVueI18n.prototype._appendItemToChain = function _appendItemToChain (chain, item, blocks) {\n  var follow = false;\n  if (!includes(chain, item)) {\n    follow = true;\n    if (item) {\n      follow = item[item.length - 1] !== '!';\n      item = item.replace(/!/g, '');\n      chain.push(item);\n      if (blocks && blocks[item]) {\n        follow = blocks[item];\n      }\n    }\n  }\n  return follow\n};\n\nVueI18n.prototype._appendLocaleToChain = function _appendLocaleToChain (chain, locale, blocks) {\n  var follow;\n  var tokens = locale.split('-');\n  do {\n    var item = tokens.join('-');\n    follow = this._appendItemToChain(chain, item, blocks);\n    tokens.splice(-1, 1);\n  } while (tokens.length && (follow === true))\n  return follow\n};\n\nVueI18n.prototype._appendBlockToChain = function _appendBlockToChain (chain, block, blocks) {\n  var follow = true;\n  for (var i = 0; (i < block.length) && (isBoolean(follow)); i++) {\n    var locale = block[i];\n    if (isString(locale)) {\n      follow = this._appendLocaleToChain(chain, locale, blocks);\n    }\n  }\n  return follow\n};\n\nVueI18n.prototype._getLocaleChain = function _getLocaleChain (start, fallbackLocale) {\n  if (start === '') { return [] }\n\n  if (!this._localeChainCache) {\n    this._localeChainCache = {};\n  }\n\n  var chain = this._localeChainCache[start];\n  if (!chain) {\n    if (!fallbackLocale) {\n      fallbackLocale = this.fallbackLocale;\n    }\n    chain = [];\n\n    // first block defined by start\n    var block = [start];\n\n    // while any intervening block found\n    while (isArray(block)) {\n      block = this._appendBlockToChain(\n        chain,\n        block,\n        fallbackLocale\n      );\n    }\n\n    // last block defined by default\n    var defaults;\n    if (isArray(fallbackLocale)) {\n      defaults = fallbackLocale;\n    } else if (isObject(fallbackLocale)) {\n      /* $FlowFixMe */\n      if (fallbackLocale['default']) {\n        defaults = fallbackLocale['default'];\n      } else {\n        defaults = null;\n      }\n    } else {\n      defaults = fallbackLocale;\n    }\n\n    // convert defaults to array\n    if (isString(defaults)) {\n      block = [defaults];\n    } else {\n      block = defaults;\n    }\n    if (block) {\n      this._appendBlockToChain(\n        chain,\n        block,\n        null\n      );\n    }\n    this._localeChainCache[start] = chain;\n  }\n  return chain\n};\n\nVueI18n.prototype._translate = function _translate (\n  messages,\n  locale,\n  fallback,\n  key,\n  host,\n  interpolateMode,\n  args\n) {\n  var chain = this._getLocaleChain(locale, fallback);\n  var res;\n  for (var i = 0; i < chain.length; i++) {\n    var step = chain[i];\n    res =\n      this._interpolate(step, messages[step], key, host, interpolateMode, args, [key]);\n    if (!isNull(res)) {\n      if (step !== locale && process.env.NODE_ENV !== 'production' && !this._isSilentTranslationWarn(key) && !this._isSilentFallbackWarn(key)) {\n        warn((\"Fall back to translate the keypath '\" + key + \"' with '\" + step + \"' locale.\"));\n      }\n      return res\n    }\n  }\n  return null\n};\n\nVueI18n.prototype._t = function _t (key, _locale, messages, host) {\n    var ref;\n\n    var values = [], len = arguments.length - 4;\n    while ( len-- > 0 ) values[ len ] = arguments[ len + 4 ];\n  if (!key) { return '' }\n\n  var parsedArgs = parseArgs.apply(void 0, values);\n  if(this._escapeParameterHtml) {\n    parsedArgs.params = escapeParams(parsedArgs.params);\n  }\n\n  var locale = parsedArgs.locale || _locale;\n\n  var ret = this._translate(\n    messages, locale, this.fallbackLocale, key,\n    host, 'string', parsedArgs.params\n  );\n  if (this._isFallbackRoot(ret)) {\n    if (process.env.NODE_ENV !== 'production' && !this._isSilentTranslationWarn(key) && !this._isSilentFallbackWarn(key)) {\n      warn((\"Fall back to translate the keypath '\" + key + \"' with root locale.\"));\n    }\n    /* istanbul ignore if */\n    if (!this._root) { throw Error('unexpected error') }\n    return (ref = this._root).$t.apply(ref, [ key ].concat( values ))\n  } else {\n    ret = this._warnDefault(locale, key, ret, host, values, 'string');\n    if (this._postTranslation && ret !== null && ret !== undefined) {\n      ret = this._postTranslation(ret, key);\n    }\n    return ret\n  }\n};\n\nVueI18n.prototype.t = function t (key) {\n    var ref;\n\n    var values = [], len = arguments.length - 1;\n    while ( len-- > 0 ) values[ len ] = arguments[ len + 1 ];\n  return (ref = this)._t.apply(ref, [ key, this.locale, this._getMessages(), null ].concat( values ))\n};\n\nVueI18n.prototype._i = function _i (key, locale, messages, host, values) {\n  var ret =\n    this._translate(messages, locale, this.fallbackLocale, key, host, 'raw', values);\n  if (this._isFallbackRoot(ret)) {\n    if (process.env.NODE_ENV !== 'production' && !this._isSilentTranslationWarn(key)) {\n      warn((\"Fall back to interpolate the keypath '\" + key + \"' with root locale.\"));\n    }\n    if (!this._root) { throw Error('unexpected error') }\n    return this._root.$i18n.i(key, locale, values)\n  } else {\n    return this._warnDefault(locale, key, ret, host, [values], 'raw')\n  }\n};\n\nVueI18n.prototype.i = function i (key, locale, values) {\n  /* istanbul ignore if */\n  if (!key) { return '' }\n\n  if (!isString(locale)) {\n    locale = this.locale;\n  }\n\n  return this._i(key, locale, this._getMessages(), null, values)\n};\n\nVueI18n.prototype._tc = function _tc (\n  key,\n  _locale,\n  messages,\n  host,\n  choice\n) {\n    var ref;\n\n    var values = [], len = arguments.length - 5;\n    while ( len-- > 0 ) values[ len ] = arguments[ len + 5 ];\n  if (!key) { return '' }\n  if (choice === undefined) {\n    choice = 1;\n  }\n\n  var predefined = { 'count': choice, 'n': choice };\n  var parsedArgs = parseArgs.apply(void 0, values);\n  parsedArgs.params = Object.assign(predefined, parsedArgs.params);\n  values = parsedArgs.locale === null ? [parsedArgs.params] : [parsedArgs.locale, parsedArgs.params];\n  return this.fetchChoice((ref = this)._t.apply(ref, [ key, _locale, messages, host ].concat( values )), choice)\n};\n\nVueI18n.prototype.fetchChoice = function fetchChoice (message, choice) {\n  /* istanbul ignore if */\n  if (!message || !isString(message)) { return null }\n  var choices = message.split('|');\n\n  choice = this.getChoiceIndex(choice, choices.length);\n  if (!choices[choice]) { return message }\n  return choices[choice].trim()\n};\n\nVueI18n.prototype.tc = function tc (key, choice) {\n    var ref;\n\n    var values = [], len = arguments.length - 2;\n    while ( len-- > 0 ) values[ len ] = arguments[ len + 2 ];\n  return (ref = this)._tc.apply(ref, [ key, this.locale, this._getMessages(), null, choice ].concat( values ))\n};\n\nVueI18n.prototype._te = function _te (key, locale, messages) {\n    var args = [], len = arguments.length - 3;\n    while ( len-- > 0 ) args[ len ] = arguments[ len + 3 ];\n\n  var _locale = parseArgs.apply(void 0, args).locale || locale;\n  return this._exist(messages[_locale], key)\n};\n\nVueI18n.prototype.te = function te (key, locale) {\n  return this._te(key, this.locale, this._getMessages(), locale)\n};\n\nVueI18n.prototype.getLocaleMessage = function getLocaleMessage (locale) {\n  return looseClone(this._vm.messages[locale] || {})\n};\n\nVueI18n.prototype.setLocaleMessage = function setLocaleMessage (locale, message) {\n  if (this._warnHtmlInMessage === 'warn' || this._warnHtmlInMessage === 'error') {\n    this._checkLocaleMessage(locale, this._warnHtmlInMessage, message);\n  }\n  this._vm.$set(this._vm.messages, locale, message);\n};\n\nVueI18n.prototype.mergeLocaleMessage = function mergeLocaleMessage (locale, message) {\n  if (this._warnHtmlInMessage === 'warn' || this._warnHtmlInMessage === 'error') {\n    this._checkLocaleMessage(locale, this._warnHtmlInMessage, message);\n  }\n  this._vm.$set(this._vm.messages, locale, merge(\n    typeof this._vm.messages[locale] !== 'undefined' && Object.keys(this._vm.messages[locale]).length\n      ? this._vm.messages[locale]\n      : {},\n    message\n  ));\n};\n\nVueI18n.prototype.getDateTimeFormat = function getDateTimeFormat (locale) {\n  return looseClone(this._vm.dateTimeFormats[locale] || {})\n};\n\nVueI18n.prototype.setDateTimeFormat = function setDateTimeFormat (locale, format) {\n  this._vm.$set(this._vm.dateTimeFormats, locale, format);\n  this._clearDateTimeFormat(locale, format);\n};\n\nVueI18n.prototype.mergeDateTimeFormat = function mergeDateTimeFormat (locale, format) {\n  this._vm.$set(this._vm.dateTimeFormats, locale, merge(this._vm.dateTimeFormats[locale] || {}, format));\n  this._clearDateTimeFormat(locale, format);\n};\n\nVueI18n.prototype._clearDateTimeFormat = function _clearDateTimeFormat (locale, format) {\n  for (var key in format) {\n    var id = locale + \"__\" + key;\n\n    if (!this._dateTimeFormatters.hasOwnProperty(id)) {\n      continue\n    }\n\n    delete this._dateTimeFormatters[id];\n  }\n};\n\nVueI18n.prototype._localizeDateTime = function _localizeDateTime (\n  value,\n  locale,\n  fallback,\n  dateTimeFormats,\n  key\n) {\n  var _locale = locale;\n  var formats = dateTimeFormats[_locale];\n\n  var chain = this._getLocaleChain(locale, fallback);\n  for (var i = 0; i < chain.length; i++) {\n    var current = _locale;\n    var step = chain[i];\n    formats = dateTimeFormats[step];\n    _locale = step;\n    // fallback locale\n    if (isNull(formats) || isNull(formats[key])) {\n      if (step !== locale && process.env.NODE_ENV !== 'production' && !this._isSilentTranslationWarn(key) && !this._isSilentFallbackWarn(key)) {\n        warn((\"Fall back to '\" + step + \"' datetime formats from '\" + current + \"' datetime formats.\"));\n      }\n    } else {\n      break\n    }\n  }\n\n  if (isNull(formats) || isNull(formats[key])) {\n    return null\n  } else {\n    var format = formats[key];\n    var id = _locale + \"__\" + key;\n    var formatter = this._dateTimeFormatters[id];\n    if (!formatter) {\n      formatter = this._dateTimeFormatters[id] = new Intl.DateTimeFormat(_locale, format);\n    }\n    return formatter.format(value)\n  }\n};\n\nVueI18n.prototype._d = function _d (value, locale, key) {\n  /* istanbul ignore if */\n  if (process.env.NODE_ENV !== 'production' && !VueI18n.availabilities.dateTimeFormat) {\n    warn('Cannot format a Date value due to not supported Intl.DateTimeFormat.');\n    return ''\n  }\n\n  if (!key) {\n    return new Intl.DateTimeFormat(locale).format(value)\n  }\n\n  var ret =\n    this._localizeDateTime(value, locale, this.fallbackLocale, this._getDateTimeFormats(), key);\n  if (this._isFallbackRoot(ret)) {\n    if (process.env.NODE_ENV !== 'production' && !this._isSilentTranslationWarn(key) && !this._isSilentFallbackWarn(key)) {\n      warn((\"Fall back to datetime localization of root: key '\" + key + \"'.\"));\n    }\n    /* istanbul ignore if */\n    if (!this._root) { throw Error('unexpected error') }\n    return this._root.$i18n.d(value, key, locale)\n  } else {\n    return ret || ''\n  }\n};\n\nVueI18n.prototype.d = function d (value) {\n    var args = [], len = arguments.length - 1;\n    while ( len-- > 0 ) args[ len ] = arguments[ len + 1 ];\n\n  var locale = this.locale;\n  var key = null;\n\n  if (args.length === 1) {\n    if (isString(args[0])) {\n      key = args[0];\n    } else if (isObject(args[0])) {\n      if (args[0].locale) {\n        locale = args[0].locale;\n      }\n      if (args[0].key) {\n        key = args[0].key;\n      }\n    }\n  } else if (args.length === 2) {\n    if (isString(args[0])) {\n      key = args[0];\n    }\n    if (isString(args[1])) {\n      locale = args[1];\n    }\n  }\n\n  return this._d(value, locale, key)\n};\n\nVueI18n.prototype.getNumberFormat = function getNumberFormat (locale) {\n  return looseClone(this._vm.numberFormats[locale] || {})\n};\n\nVueI18n.prototype.setNumberFormat = function setNumberFormat (locale, format) {\n  this._vm.$set(this._vm.numberFormats, locale, format);\n  this._clearNumberFormat(locale, format);\n};\n\nVueI18n.prototype.mergeNumberFormat = function mergeNumberFormat (locale, format) {\n  this._vm.$set(this._vm.numberFormats, locale, merge(this._vm.numberFormats[locale] || {}, format));\n  this._clearNumberFormat(locale, format);\n};\n\nVueI18n.prototype._clearNumberFormat = function _clearNumberFormat (locale, format) {\n  for (var key in format) {\n    var id = locale + \"__\" + key;\n\n    if (!this._numberFormatters.hasOwnProperty(id)) {\n      continue\n    }\n\n    delete this._numberFormatters[id];\n  }\n};\n\nVueI18n.prototype._getNumberFormatter = function _getNumberFormatter (\n  value,\n  locale,\n  fallback,\n  numberFormats,\n  key,\n  options\n) {\n  var _locale = locale;\n  var formats = numberFormats[_locale];\n\n  var chain = this._getLocaleChain(locale, fallback);\n  for (var i = 0; i < chain.length; i++) {\n    var current = _locale;\n    var step = chain[i];\n    formats = numberFormats[step];\n    _locale = step;\n    // fallback locale\n    if (isNull(formats) || isNull(formats[key])) {\n      if (step !== locale && process.env.NODE_ENV !== 'production' && !this._isSilentTranslationWarn(key) && !this._isSilentFallbackWarn(key)) {\n        warn((\"Fall back to '\" + step + \"' number formats from '\" + current + \"' number formats.\"));\n      }\n    } else {\n      break\n    }\n  }\n\n  if (isNull(formats) || isNull(formats[key])) {\n    return null\n  } else {\n    var format = formats[key];\n\n    var formatter;\n    if (options) {\n      // If options specified - create one time number formatter\n      formatter = new Intl.NumberFormat(_locale, Object.assign({}, format, options));\n    } else {\n      var id = _locale + \"__\" + key;\n      formatter = this._numberFormatters[id];\n      if (!formatter) {\n        formatter = this._numberFormatters[id] = new Intl.NumberFormat(_locale, format);\n      }\n    }\n    return formatter\n  }\n};\n\nVueI18n.prototype._n = function _n (value, locale, key, options) {\n  /* istanbul ignore if */\n  if (!VueI18n.availabilities.numberFormat) {\n    if (process.env.NODE_ENV !== 'production') {\n      warn('Cannot format a Number value due to not supported Intl.NumberFormat.');\n    }\n    return ''\n  }\n\n  if (!key) {\n    var nf = !options ? new Intl.NumberFormat(locale) : new Intl.NumberFormat(locale, options);\n    return nf.format(value)\n  }\n\n  var formatter = this._getNumberFormatter(value, locale, this.fallbackLocale, this._getNumberFormats(), key, options);\n  var ret = formatter && formatter.format(value);\n  if (this._isFallbackRoot(ret)) {\n    if (process.env.NODE_ENV !== 'production' && !this._isSilentTranslationWarn(key) && !this._isSilentFallbackWarn(key)) {\n      warn((\"Fall back to number localization of root: key '\" + key + \"'.\"));\n    }\n    /* istanbul ignore if */\n    if (!this._root) { throw Error('unexpected error') }\n    return this._root.$i18n.n(value, Object.assign({}, { key: key, locale: locale }, options))\n  } else {\n    return ret || ''\n  }\n};\n\nVueI18n.prototype.n = function n (value) {\n    var args = [], len = arguments.length - 1;\n    while ( len-- > 0 ) args[ len ] = arguments[ len + 1 ];\n\n  var locale = this.locale;\n  var key = null;\n  var options = null;\n\n  if (args.length === 1) {\n    if (isString(args[0])) {\n      key = args[0];\n    } else if (isObject(args[0])) {\n      if (args[0].locale) {\n        locale = args[0].locale;\n      }\n      if (args[0].key) {\n        key = args[0].key;\n      }\n\n      // Filter out number format options only\n      options = Object.keys(args[0]).reduce(function (acc, key) {\n          var obj;\n\n        if (includes(numberFormatKeys, key)) {\n          return Object.assign({}, acc, ( obj = {}, obj[key] = args[0][key], obj ))\n        }\n        return acc\n      }, null);\n    }\n  } else if (args.length === 2) {\n    if (isString(args[0])) {\n      key = args[0];\n    }\n    if (isString(args[1])) {\n      locale = args[1];\n    }\n  }\n\n  return this._n(value, locale, key, options)\n};\n\nVueI18n.prototype._ntp = function _ntp (value, locale, key, options) {\n  /* istanbul ignore if */\n  if (!VueI18n.availabilities.numberFormat) {\n    if (process.env.NODE_ENV !== 'production') {\n      warn('Cannot format to parts a Number value due to not supported Intl.NumberFormat.');\n    }\n    return []\n  }\n\n  if (!key) {\n    var nf = !options ? new Intl.NumberFormat(locale) : new Intl.NumberFormat(locale, options);\n    return nf.formatToParts(value)\n  }\n\n  var formatter = this._getNumberFormatter(value, locale, this.fallbackLocale, this._getNumberFormats(), key, options);\n  var ret = formatter && formatter.formatToParts(value);\n  if (this._isFallbackRoot(ret)) {\n    if (process.env.NODE_ENV !== 'production' && !this._isSilentTranslationWarn(key)) {\n      warn((\"Fall back to format number to parts of root: key '\" + key + \"' .\"));\n    }\n    /* istanbul ignore if */\n    if (!this._root) { throw Error('unexpected error') }\n    return this._root.$i18n._ntp(value, locale, key, options)\n  } else {\n    return ret || []\n  }\n};\n\nObject.defineProperties( VueI18n.prototype, prototypeAccessors );\n\nvar availabilities;\n// $FlowFixMe\nObject.defineProperty(VueI18n, 'availabilities', {\n  get: function get () {\n    if (!availabilities) {\n      var intlDefined = typeof Intl !== 'undefined';\n      availabilities = {\n        dateTimeFormat: intlDefined && typeof Intl.DateTimeFormat !== 'undefined',\n        numberFormat: intlDefined && typeof Intl.NumberFormat !== 'undefined'\n      };\n    }\n\n    return availabilities\n  }\n});\n\nVueI18n.install = install;\nVueI18n.version = '8.24.4';\n\nexport default VueI18n;\n"]}]}